var $R = [
	"Method %s in class %s threw exception [%s]",
	"Procedure %s threw exception [%s]",
	"Host classtype was rejected as unsuitable",
	"Invalid handle for operation, reference was null error",
	"Invalid stream style for operation, expected memorystream",
	"Method not implemented",
	"stream operation failed, system threw exception: %s",
	"write failed, system threw exception: %s",
	"read failed, system threw exception: %s",
	"operation failed, invalid handle error",
	"Invalid length, %s bytes exceeds storage medium error",
	"Read failed, invalid signature error [%s]",
	"Invalid length, %s bytes exceeds storage boundaries error",
	"Write failed, invalid signature error [%s]",
	"Write failed, invalid datasize [%d] error",
	"File operation [%s] failed, system threw exception: %s",
	"Failed to send data, socket not connected error",
	"Failed to send data, system threw exception %s with message: %s",
	"Handle reference is null error",
	"Failed to create html element",
	"Invalid html element handle error",
	"Invalid html element attributename error",
	"Invalid html element propertyname error",
	"Invalid html element stylename error",
	"Failed to attach html element to owner",
	"Owner element handle is null error",
	"class [%s] does not allow augmentation error",
	"invalid owner handle error",
	"Storage object already active error",
	"Storage object not active error",
	"Browser does not support storage error",
	"Storage object was NIL error",
	"Failed to load script-file <%s> error",
	"Failed to load image.file <%s> error",
	"Failed to load CSS file <%s> error",
	"Failed to load binary file <%s> error",
	"Failed to load XML <%s> error",
	"Read failed, invalid offset [%d], expected %d..%d",
	"Write operation failed, target stream is nil error",
	"Read operation failed, source stream is nil error",
	"Invalid component registration",
	"Failed to create attribute storage object, invalid handle error",
	"Failed to read element attribute, system threw exception: %s",
	"Failed to write element attribute, system threw exception: %s",
	"Failed to examine element attribute, system threw exception: %s",
	"Failed to delete element-attribute [%s], system threw exception: %s",
	"data-",
	"invalid owner handle error",
	"%s failed to initialize from graphics-context: %s ",
	"Invalid dictionary key",
	"Invalid array of dictionary keys",
	"'Invalid handle for object (%s), reference rejected error",
	"0123456789",
	"0123456789ABCDEF"];
function Trunc(v) { return (v>=0)?Math.floor(v):Math.ceil(v) }
function Trim$_String_Integer_Integer_(s,a,b) { if (a<0) a=0; if (b<0) b=0; return s.substr(a,s.length-a-b) }
function Trim$_String_(s) { return s.replace(/^\s\s*/, "").replace(/\s\s*$/, "") }
var TObject={
	$ClassName: "TObject",
	$Parent: null,
	ClassName: function (s) { return s.$ClassName },
	ClassType: function (s) { return s },
	ClassParent: function (s) { return s.$Parent },
	$Init: function (s) {},
	Create: function (s) { return s },
	Destroy: function (s) { for (var prop in s) if (s.hasOwnProperty(prop)) delete s[prop] },
	Destroy$: function(s) { return s.ClassType.Destroy(s) },
	Free: function (s) { if (s!==null) s.ClassType.Destroy(s) }
}
function StrRegExp(s) { return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") }
function StrEndsWith(s,e) { return s.substr(s.length-e.length)==e }
function StrBeginsWith(s,b) { return (b.length > 0) ? s.substr(0, b.length)==b : false }
function SameText(a,b) { return a.toUpperCase()==b.toUpperCase() }
function RightStr(s,n) { return s.substr(s.length-n) }
function RandomInt(i) { return Math.floor(Random()*i) }
/*

Copyright (C) 2010 by Johannes Baag�e <baagoe@baagoe.org>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

From http://baagoe.com/en/RandomMusings/javascript/
*/
function $alea() {
  return (function(args) {
    // Johannes Baagøe <baagoe@baagoe.com>, 2010
    var s0 = 0;
    var s1 = 0;
    var s2 = 0;
    var c = 1;

    if (args.length == 0) {
      args = [+new Date];
    }
    var mash = function() {
       var n = 0xefc8249d;
    
       var mash = function(data) {
         data = data.toString();
         for (var i = 0; i < data.length; i++) {
           n += data.charCodeAt(i);
           var h = 0.02519603282416938 * n;
           n = h >>> 0;
           h -= n;
           h *= n;
           n = h >>> 0;
           h -= n;
           n += h * 0x100000000; // 2^32
         }
         return (n >>> 0) * 2.3283064365386963e-10; // 2^-32
       };
    
       //mash.version = 'Mash 0.9';
       return mash;
    }();
    s0 = mash(' ');
    s1 = mash(' ');
    s2 = mash(' ');

    for (var i = 0; i < args.length; i++) {
      s0 -= mash(args[i]);
      if (s0 < 0) {
        s0 += 1;
      }
      s1 -= mash(args[i]);
      if (s1 < 0) {
        s1 += 1;
      }
      s2 -= mash(args[i]);
      if (s2 < 0) {
        s2 += 1;
      }
    }
    mash = null;

    var random = function() {
      var t = 2091639 * s0 + c * 2.3283064365386963e-10; // 2^-32
      s0 = s1;
      s1 = s2;
      return s2 = t - (c = t | 0);
    };
    /*random.uint32 = function() {
      return random() * 0x100000000; // 2^32
    };
    random.fract53 = function() {
      return random() +
        (random() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53
    };*/
    //random.version = 'Alea 0.9';
    random.args = args;
    return random;

  } (Array.prototype.slice.call(arguments)));
};var Random = $alea();
function Odd$_Integer_(v) { return (v&1)==1 }
function Now() { var d=new Date(); var utcnow=d.getTime()/864e5+25569; var dt = new Date(); var n = dt.getTimezoneOffset(); return utcnow-n/1440 }
function Log2(x) { return Math.log(x)/Math.LN2 }
function IntToHex2(v) { var r=v.toString(16); return (r.length==1)?"0"+r:r }
function IntToHex(v,d) { var r=v.toString(16); return "00000000".substr(0, d-r.length)+r }
/**
sprintf() for JavaScript 0.7-beta1
http://www.diveintojavascript.com/projects/javascript-sprintf

Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of sprintf() for JavaScript nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
**/

var sprintf = (function() {
	function get_type(variable) {
		return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
	}
	function str_repeat(input, multiplier) {
		for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}
		return output.join('');
	}

	var str_format = function() {
		if (!str_format.cache.hasOwnProperty(arguments[0])) {
			str_format.cache[arguments[0]] = str_format.parse(arguments[0]);
		}
		return str_format.format.call(null, str_format.cache[arguments[0]], arguments);
	};

	str_format.format = function(parse_tree, argv) {
		var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;
		for (i = 0; i < tree_length; i++) {
			node_type = get_type(parse_tree[i]);
			if (node_type === 'string') {
				output.push(parse_tree[i]);
			}
			else if (node_type === 'array') {
				match = parse_tree[i]; // convenience purposes only
				if (match[2]) { // keyword argument
					arg = argv[cursor];
					for (k = 0; k < match[2].length; k++) {
						if (!arg.hasOwnProperty(match[2][k])) {
							throw(sprintf('[sprintf] property "%s" does not exist', match[2][k]));
						}
						arg = arg[match[2][k]];
					}
				}
				else if (match[1]) { // positional argument (explicit)
					arg = argv[match[1]];
				}
				else { // positional argument (implicit)
					arg = argv[cursor++];
				}

				if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {
					throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));
				}
				switch (match[8]) {
					case 'b': arg = arg.toString(2); break;
					case 'c': arg = String.fromCharCode(arg); break;
					case 'd': arg = String(parseInt(arg, 10)); if (match[7]) { arg = str_repeat('0', match[7]-arg.length)+arg } break;
					case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;
					case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;
                    case 'g': arg = parseFloat(arg); break;
					case 'o': arg = arg.toString(8); break;
					case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;
					case 'u': arg = Math.abs(arg); break;
					case 'x': arg = arg.toString(16); break;
					case 'X': arg = arg.toString(16).toUpperCase(); break;
				}
				arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);
				pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';
				pad_length = match[6] - String(arg).length;
				pad = match[6] ? str_repeat(pad_character, pad_length) : '';
				output.push(match[5] ? arg + pad : pad + arg);
			}
		}
		return output.join('');
	};

	str_format.cache = {};

	str_format.parse = function(fmt) {
		var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;
		while (_fmt) {
			if ((match = /^[^\x25]+/.exec(_fmt)) !== null) {
				parse_tree.push(match[0]);
			}
			else if ((match = /^\x25{2}/.exec(_fmt)) !== null) {
				parse_tree.push('%');
			}
			else if ((match = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gosuxX])/.exec(_fmt)) !== null) {
				if (match[2]) {
					arg_names |= 1;
					var field_list = [], replacement_field = match[2], field_match = [];
					if ((field_match = /^([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
						field_list.push(field_match[1]);
						while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {
							if ((field_match = /^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
								field_list.push(field_match[1]);
							}
							else if ((field_match = /^\[(\d+)\]/.exec(replacement_field)) !== null) {
								field_list.push(field_match[1]);
							}
							else {
								throw('[sprintf] huh?');
							}
						}
					}
					else {
						throw('[sprintf] huh?');
					}
					match[2] = field_list;
				}
				else {
					arg_names |= 2;
				}
				if (arg_names === 3) {
					throw('[sprintf] mixing positional and named placeholders is not (yet) supported');
				}
				parse_tree.push(match);
			}
			else {
				throw('[sprintf] huh?');
			}
			_fmt = _fmt.substring(match[0].length);
		}
		return parse_tree;
	};

	return str_format;
})();
function Format(f,a) { a.unshift(f); return sprintf.apply(null,a) }
var Exception={
	$ClassName: "Exception",
	$Parent: TObject,
	$Init: function (s) { s.FMessage="" },
	Create: function (s,Msg) { s.FMessage=Msg; return s }
}
var EAssertionFailed={
	$ClassName: "EAssertionFailed",
	$Parent: Exception,
	$Init: Exception.$Init
}
function Delete(s,i,n) { var v=s.v; if ((i<=0)||(i>v.length)||(n<=0)) return; s.v=v.substr(0,i-1)+v.substr(i+n-1); }
function CompareStr(a,b) { if (a<b) return -1; else return (a==b)?0:1 }
function ClampInt(v,mi,ma) { return v<mi ? mi : v>ma ? ma : v }
function BoolToStr(b) { return b?"True":"False" }
function $W(e) { return e.ClassType?e:Exception.Create($New(Exception),(typeof e == "string") ? e : e.constructor.name+", "+e.message) }
function $VarToInt(v,z) {
	var r = parseInt(v || 0, 10);
	if (isNaN(r)) {return 0} else {return r}
}
function $VarToBool(v) { return !!(typeof v == "string" ? {"1":1,"t":1,"y":1,"true":1}[v.toLowerCase()] : v) }
// inspired from 
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charCodeAt
function $uniCharAt(str, idx) {
    var c = str.charCodeAt(idx);
    if (0xD800 <= c && c <= 0xDBFF) { // High surrogate
        return str.substr(idx, 2);
    }
    if (0xDC00 <= c && c <= 0xDFFF) { // Low surrogate
        return null;
    }
    return str.charAt(idx);
}function $Sign(v) { return v>0?1:v<0?-1:v===v?0:NaN }
function $SetInc(s,v,m,n) { v-=m; if (v>=0 && v<n) s[v>>5]|=1<<(v&31) }
function $SetIn(s,v,m,n) { v-=m; return (v<0 && v>=n)?false:(s[v>>5]&(1<<(v&31)))!=0 }
function $SetExc(s,v,m,n) { v-=m; if (v>=0 && v<n) s[v>>5]&=~(1<<(v&31)) }
function $Remove(a,i,f) {
	var j = a.indexOf(i,f);
	if (j>=0) a.splice(j,1);
}
Array.prototype.pusha = function (e) { this.push.apply(this, e); return this }
function $Peek(a,z) {
	var n=a.length;
	if (n>0) return a[n-1];
	throw Exception.Create($New(Exception),"Upper bound exceeded! Index 0"+z);
}
function $NewDyn(c,z) {
	if (c==null) throw Exception.Create($New(Exception),"ClassType is nil"+z);
	var i={ClassType:c};
	c.$Init(i);
	return i
}
function $New(c) { var i={ClassType:c}; c.$Init(i); return i }
function $Is(o,c) {
	if (o===null) return false;
	return $Inh(o.ClassType,c);
}
;
function $Inh(s,c) {
	if (s===null) return false;
	while ((s)&&(s!==c)) s=s.$Parent;
	return (s)?true:false;
}
;
function $Extend(base, sub, props) {
	function F() {};
	F.prototype = base.prototype;
	sub.prototype = new F();
	sub.prototype.constructor = sub;
	for (var n in props) {
		if (props.hasOwnProperty(n)) {
			sub.prototype[n]=props[n];
		}
	}
}
function $Event3(i,f) {
	var li=i,lf=f;
	return function(a,b,c) {
		return lf.call(li,li,a,b,c)
	}
}
function $Event2(i,f) {
	var li=i,lf=f;
	return function(a,b) {
		return lf.call(li,li,a,b)
	}
}
function $Event1(i,f) {
	var li=i,lf=f;
	return function(a) {
		return lf.call(li,li,a)
	}
}
function $Event0(i,f) {
	var li=i,lf=f;
	return function() {
		return lf.call(li,li)
	}
}
function $Event(i,f) {
	var li=i,lf=f;
	return function(){
		var arg=Array.prototype.slice.call(arguments);
		arg.unshift(li);
		return lf.apply(li,arg)
	}
}
function $Div(a,b) { var r=a/b; return (r>=0)?Math.floor(r):Math.ceil(r) }
function $Assert(b,m,z) { if (!b) throw Exception.Create($New(EAssertionFailed),"Assertion failed"+z+((m=="")?"":" : ")+m); }
function $AsIntf(o,i) {
	if (o===null) return null;
	var r = o.ClassType.$Intf[i].map(function (e) {
		return function () {
			var arg=Array.prototype.slice.call(arguments);
			arg.splice(0,0,o);
			return e.apply(o, arg);
		}
	});
	r.O = o;
	return r;
}
;
function $AsClass(s,c) {
	if ((s===null)||$Inh(s,c)) return s;
	throw Exception.Create($New(Exception),"Cannot cast class \""+s.$ClassName+"\" to class \""+c.$ClassName+"\"");
}
function $As(o,c) {
	if ((o===null)||$Is(o,c)) return o;
	throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"");
}
function $ArraySwap(a,i1,i2) { var t=a[i1]; a[i1]=a[i2]; a[i2]=t; return a }
function $ArraySetLenC(a,n,d) {
	var o=a.length;
	if (o==n) return;
	if (o>n) a.length=n; else for (;o<n;o++) a.push(d());
}
function WriteLnF(Text$10, Values$11) {
   var FormText = "";
   try {
      FormText = Format(Text$10,Values$11.slice(0));
      console.log(FormText);
   } catch ($e) {
      var e$1 = $W($e);
      /* null */
   }
};
function WriteLn(value$16) {
   var items$2 = [],
      a$392 = 0,
      litem = "";
   if (TW3VariantHelper$Isstring(value$16)) {
      if (((String(value$16)).indexOf("\r")+1) > 0) {
         items$2 = TString.Explode(TString,String(value$16),"\r");
         var $temp1;
         for(a$392=0,$temp1=items$2.length;a$392<$temp1;a$392++) {
            litem = items$2[a$392];
            console.log(litem);
         }
         return;
      }
   }
   console.log(value$16);
};
function w3_SetStyle(tagRef, StyleName, StyleValue) {
   tagRef.style[StyleName] = StyleValue;
};
function w3_setProperty(tagRef, PropName, Value$5) {
   tagRef[PropName] = Value$5;
};
function w3_SetElementParentByRef(Element$2, Parent$4) {
   Parent$4.appendChild(Element$2);
};
function w3_setAttrib(tagRef, AttribName, Value$5) {
   if (tagRef) {
      tagRef.setAttribute(AttribName,Value$5);
   }
};
function w3_RemoveEvent(a_tagRef, a_eventName, a_callback, a_useCapture) {
   if (a_eventName == "mousewheel") {
      a_eventName = "DOMMouseScroll";
   }
   a_tagRef.removeEventListener(a_eventName,a_callback,a_useCapture);
};
function w3_RemoveElementByRef(Element$2, Parent$4) {
   Parent$4.removeChild(Element$2);
};
function w3_RemoveAttrib(tagRef, AttribName) {
   if (tagRef) {
      tagRef.removeAttribute(AttribName);
   }
};
function w3_RegisterBrowserAPI(BrowserAPIDriver) {
   vDriver = BrowserAPIDriver;
};
function w3_NameToUrlStr(aUrl) {
   return "url(" + aUrl + ")";
};
function w3_HasAttrib(tagRef, AttribName) {
   var Result = false;
   if (tagRef) {
      Result = $VarToBool(tagRef.hasAttribute(AttribName));
   }
   return Result
};
function w3_GetStyleAsStr(tagRef, StyleName) {
   var Result = "";
   var data = null;
    var temp = document.defaultView.getComputedStyle(tagRef, null);

    if (temp) {
      data = (temp).getPropertyValue(StyleName);
    } else {
      data = (tagRef).style[StyleName];
    }

    if (data) {
      if (typeof(data) === "number") {
        Result = String(data);
      } else {
        if (typeof(data) === "string")
          Result = data;
      }
    }
   return Result
};
function w3_GetStyleAsInt(tagRef, StyleName) {
   var Result = 0;
   var data = null;
    var temp = document.defaultView.getComputedStyle(tagRef, null);

    if (temp) {
      data = (temp).getPropertyValue(StyleName);
    } else {
      data = (tagRef).style[StyleName];
    }

    if (data) {
      if (typeof(data) === "number") {
        Result = data;
      } else {
        if (typeof(data) === "string") {
          data = parseInt(data);
          if (typeof(data) === "number")
            Result = data;
        }
      }
    }
   return Result
};
function w3_GetStyleAsFloat(tagRef, StyleName) {
   var Result = 0;
   var data = null;
    var temp = document.defaultView.getComputedStyle(tagRef, null);

    if (temp) {
      data = (temp).getPropertyValue(StyleName);
    } else {
      data = (tagRef).style[StyleName];
    }

    if (data) {
      if (typeof(data) === "number") {
        Result = data;
      } else {
        if (typeof(data) === "string") {
          data = parseFloat(data);
          if (!isNaN(data))
            Result = data;
        }
      }
    }
   return Result
};
function w3_GetStyle(tagRef, StyleName) {
   var Result = undefined;
   var temp   = document.defaultView.getComputedStyle(tagRef, null);
    if (temp) {
      Result = (temp).getPropertyValue(StyleName);
    } else {
      Result = (tagRef).style[StyleName];
    }
   return Result
};
function w3_getPropertyAsStr(tagRef, PropName) {
   return String(tagRef[PropName]);
};
function w3_getPropertyAsInt(tagRef, PropName) {
   var Result = 0;
   Result = $VarToInt(tagRef[PropName],"");
   if (isNaN(Result)) {
      Result = 0;
   }
   return Result
};
function w3_getIsSafari() {
   var Result = false;
   var LUserAgent = "";
   LUserAgent = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   Result = ((LUserAgent).indexOf("safari")>=0) && (!(((LUserAgent).indexOf("chrome")>=0)));
   return Result
};
function w3_getIsOpera() {
   return (window.opera)?true:false;
};
function w3_getIsIPod() {
   var Result = false;
   var LUserAgent$2 = "";
   LUserAgent$2 = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   Result = ((LUserAgent$2).indexOf("ipod")>=0) && ((LUserAgent$2).indexOf("apple")>=0);
   return Result
};
function w3_getIsIPhone() {
   var Result = false;
   var LUserAgent$3 = "";
   LUserAgent$3 = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   Result = ((LUserAgent$3).indexOf("iphone")>=0) && ((LUserAgent$3).indexOf("apple")>=0);
   return Result
};
function w3_getIsIPad() {
   var Result = false;
   var LUserAgent$4 = "";
   LUserAgent$4 = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   Result = ((LUserAgent$4).indexOf("ipad")>=0) && ((LUserAgent$4).indexOf("apple")>=0);
   return Result
};
function w3_getIsInternetExplorer() {
   var Result = false;
   var ua = undefined;
   function IE_Edge() {
      var Result = false;
      var edge = undefined;
      edge = (ua).indexOf('Edge/');
      Result = (edge > 0);
      return Result
   };
   function IE_11() {
      var Result = false;
      var trident = undefined;
      trident = (ua).indexOf('Trident/');
      Result = (trident > 0);
      return Result
   };
   function IE_10_Or_Older() {
      var Result = false;
      var msie = undefined;
      msie = (ua).indexOf('MSIE ');
      Result = (msie > 0);
      return Result
   };
   ua = window.navigator.userAgent;
   Result = IE_Edge() || IE_11() || IE_10_Or_Older();
   return Result
};
function w3_getIsFirefox() {
   var Result = false;
   var LUserAgent$5 = "";
   LUserAgent$5 = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   Result = ((LUserAgent$5).indexOf("firefox")>=0);
   return Result
};
function w3_getIsChrome() {
   var Result = false;
   var LUserAgent$6 = "";
   LUserAgent$6 = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   if (((LUserAgent$6).indexOf("chrome")>=0)) {
      Result = (window.chrome)?true:false;
   }
   return Result
};
function w3_getIsAndroid() {
   var Result = false;
   var LUserAgent$7 = "";
   LUserAgent$7 = (TVariant.AsString(navigator.userAgent)).toLocaleLowerCase();
   Result = ((LUserAgent$7).indexOf("android")>=0);
   return Result
};
function w3_getAttribAsStr(tagRef, AttribName) {
   var Result = "";
   var Temp$1;
   if (tagRef) {
      if (tagRef.hasAttribute(AttribName)) {
         Temp$1 = tagRef.getAttribute(AttribName);
         if (Temp$1) {
            if (TVariant.IsString(Temp$1)) {
               Result = String(Temp$1);
            } else {
               Result = TVariant.AsString(Temp$1);
            }
         }
      }
   }
   return Result
};
function w3_getAttribAsInt(tagRef, AttribName) {
   var Result = 0;
   var Temp$1,
      Text$10 = "";
   if (tagRef) {
      if (tagRef.hasAttribute(AttribName)) {
         Temp$1 = tagRef.getAttribute(AttribName);
         if (Temp$1) {
            if (TVariant.IsInteger(Temp$1)) {
               Result = TVariant.AsInteger(Temp$1);
            } else if (TVariant.IsNumber(Temp$1)) {
               Result = Math.round(TVariant.AsFloat(Temp$1));
            } else {
               if (TVariant.IsString(Temp$1)) {
                  Text$10 = TVariant.AsString(Temp$1);
                  if (TStringHelper$ContainsOrdinal(Text$10)) {
                     Result = parseInt(Text$10,10);
                  }
               }
            }
         }
      }
   }
   return Result
};
function w3_CreateHtmlElement(TypeName) {
   return document.createElement(TypeName);
};
function w3_BrowserVendor() {
   var Result = 0;
   if (vDriver === null) {
      BrowserAPI();
   }
   Result = vVendor;
   return Result
};
function w3_AddEvent(a_tagRef, a_eventName, a_callback, a_useCapture) {
   if (a_eventName == "mousewheel") {
      a_eventName = "DOMMouseScroll";
   }
   a_tagRef.addEventListener(a_eventName,a_callback,a_useCapture);
};
function w3_AddAttrib(tagRef, AttribName) {
   var LRef = undefined;
   AttribName = Trim$_String_(AttribName);
   if (AttribName.length > 0) {
      LRef = document.createAttribute(AttribName);
      tagRef.setAttributeNode(LRef);
   }
};
/// TW3CustomBrowserAPI = class (TObject)
///  [line: 223, column: 3, file: SmartCL.System]
var TW3CustomBrowserAPI = {
   $ClassName:"TW3CustomBrowserAPI",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FCSSAnimation = $.FCSSBackgroundColor = $.FCSSBackgroundImage = $.FCSSBackgroundPos = $.FCSSBackgroundSize = $.FCSSToken = $.FCSSTransform = $.FDefCSSToken = "";
   }
   /// function TW3CustomBrowserAPI.DevicePixelRatio() : Float
   ///  [line: 1130, column: 36, file: SmartCL.System]
   ,DevicePixelRatio:function() {
      var Result = 0;
      Result = window.devicePixelRatio || 1;
      return Result
   }
   /// function TW3CustomBrowserAPI.GetComputedStylesFor(const Handle: TControlHandle) : THandle
   ///  [line: 1122, column: 36, file: SmartCL.System]
   ,GetComputedStylesFor:function(Self, Handle$17) {
      var Result = undefined;
      Result = window.getComputedStyle(Handle$17);
      return Result
   }
   /// function TW3CustomBrowserAPI.Prefix(const aCSS: String) : String
   ///  [line: 1137, column: 30, file: SmartCL.System]
   ,Prefix:function(Self, aCSS) {
      return Self.FCSSToken + aCSS;
   }
   /// function TW3CustomBrowserAPI.PrefixDef(const aCss: String) : String
   ///  [line: 1142, column: 30, file: SmartCL.System]
   ,PrefixDef:function(Self, aCss) {
      return Self.FDefCSSToken + aCss;
   }
   ,Destroy:TObject.Destroy
};
/// TW3WebkitBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 281, column: 3, file: SmartCL.System]
var TW3WebkitBrowserAPI = {
   $ClassName:"TW3WebkitBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3WebkitBrowserAPI.Create()
   ///  [line: 1183, column: 33, file: SmartCL.System]
   ,Create$61:function(Self) {
      Self.FCSSToken = "webkit";
      Self.FDefCSSToken = "-webkit-";
      Self.FCSSBackgroundImage = "background-image";
      Self.FCSSBackgroundSize = "webkitbackgroundSize";
      Self.FCSSBackgroundPos = "webkitbackgroundPosition";
      Self.FCSSBackgroundColor = "webkitbackgroundColor";
      Self.FCSSTransform = "webkitTransform";
      Self.FCSSAnimation = "webkitAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3URLObject = class (TObject)
///  [line: 126, column: 3, file: SmartCL.System]
var TW3URLObject = {
   $ClassName:"TW3URLObject",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TW3URLObject.RevokeObjectURL(const ObjectUrl: String)
   ///  [line: 808, column: 30, file: SmartCL.System]
   ,RevokeObjectURL:function(Self, ObjectUrl) {
      if (ObjectUrl.length > 0) {
         var encdec = window.URL || window.webkitURL || window.mozURL || window.msURL;
      if (encdec) {
        encdec.revokeObjectURL(ObjectUrl);
      } else
        throw "window URL-object could not be obtained error";
      } else {
         throw Exception.Create($New(EAllocation),"Failed to revoke object URL, reference string was empty error");
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3OperaBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 292, column: 3, file: SmartCL.System]
var TW3OperaBrowserAPI = {
   $ClassName:"TW3OperaBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3OperaBrowserAPI.Create()
   ///  [line: 1167, column: 32, file: SmartCL.System]
   ,Create$62:function(Self) {
      Self.FCSSToken = "O";
      Self.FDefCSSToken = "-o-";
      Self.FCSSBackgroundImage = "OBackgroundImage";
      Self.FCSSBackgroundSize = "OBackgroundSize";
      Self.FCSSBackgroundPos = "OBackgroundPosition";
      Self.FCSSBackgroundColor = "backgroundColor";
      Self.FCSSTransform = "OTransform";
      Self.FCSSAnimation = "OAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3MouseCursor = class (TObject)
///  [line: 179, column: 3, file: SmartCL.System]
var TW3MouseCursor = {
   $ClassName:"TW3MouseCursor",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TW3MouseCursor.CursorByName(const CursorName: String) : TCursor
   ///  [line: 1004, column: 31, file: SmartCL.System]
   ,CursorByName:function(Self, CursorName) {
      return TVariant.AsInteger(__CURSOR_NAME_LUT[(Trim$_String_(CursorName)).toLocaleLowerCase()]);
   }
   /// function TW3MouseCursor.NameByCursor(const Cursor: TCursor) : String
   ///  [line: 1014, column: 31, file: SmartCL.System]
   ,NameByCursor:function(Self, Cursor$1) {
      return TVariant.AsString(__CURSOR_DATA_LUT[Cursor$1]);
   }
   /// function TW3MouseCursor.GetCursorFromElement(const Handle: TControlHandle) : TCursor
   ///  [line: 1019, column: 31, file: SmartCL.System]
   ,GetCursorFromElement:function(Self, Handle$17) {
      var Result = 0;
      if (TControlHandleHelper$Valid$3(Handle$17)) {
         if (Handle$17.style["cursor"]) {
            Result = TW3MouseCursor.CursorByName(Self,String(Handle$17.style["cursor"]));
         } else {
            Result = 1;
         }
      }
      return Result
   }
   /// procedure TW3MouseCursor.SetCursorForElement(const Handle: TControlHandle; const Cursor: TCursor)
   ///  [line: 1030, column: 32, file: SmartCL.System]
   ,SetCursorForElement:function(Self, Handle$17, Cursor$1) {
      if (TControlHandleHelper$Valid$3(Handle$17)) {
         Handle$17.style["cursor"] = TW3MouseCursor.NameByCursor(Self,Cursor$1);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3IEBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 297, column: 3, file: SmartCL.System]
var TW3IEBrowserAPI = {
   $ClassName:"TW3IEBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3IEBrowserAPI.Create()
   ///  [line: 1151, column: 29, file: SmartCL.System]
   ,Create$63:function(Self) {
      Self.FCSSToken = "ms";
      Self.FDefCSSToken = "-ms-";
      Self.FCSSBackgroundImage = "msBackgroundImage";
      Self.FCSSBackgroundSize = "msBackgroundSize";
      Self.FCSSBackgroundPos = "msBackgroundPosition";
      Self.FCSSBackgroundColor = "backgroundColor";
      Self.FCSSTransform = "msTransform";
      Self.FCSSAnimation = "msAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3GlyphLayout enumeration
///  [line: 43, column: 3, file: SmartCL.System]
var TW3GlyphLayout = [ "glGlyphTop", "glGlyphLeft", "glGlyphRight", "glGlyphBottom" ];
/// TW3FirefoxBrowserAPI = class (TW3CustomBrowserAPI)
///  [line: 287, column: 3, file: SmartCL.System]
var TW3FirefoxBrowserAPI = {
   $ClassName:"TW3FirefoxBrowserAPI",$Parent:TW3CustomBrowserAPI
   ,$Init:function ($) {
      TW3CustomBrowserAPI.$Init($);
   }
   /// constructor TW3FirefoxBrowserAPI.Create()
   ///  [line: 1199, column: 34, file: SmartCL.System]
   ,Create$64:function(Self) {
      Self.FCSSToken = "Moz";
      Self.FDefCSSToken = "-moz-";
      Self.FCSSBackgroundImage = "backgroundImage";
      Self.FCSSBackgroundSize = "backgroundSize";
      Self.FCSSBackgroundPos = "backgroundPosition";
      Self.FCSSBackgroundColor = "backgroundColor";
      Self.FCSSTransform = "MozTransform";
      Self.FCSSAnimation = "MozAnimation";
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3EventManagerTypes enumeration
///  [line: 190, column: 3, file: SmartCL.System]
var TW3EventManagerTypes = { 1:"ekMouseDown", 2:"ekMouseMove", 3:"ekMouseUp", 4:"ekTouchBegin", 5:"ekTouchMove", 6:"ekTouchEnd", 7:"ekClick", 8:"ekMouseEnter", 9:"ekMouseExit", 10:"ekMouseWheel", 11:"ekDoubleClick" };
/// TW3DOMEventMode enumeration
///  [line: 140, column: 3, file: SmartCL.System]
var TW3DOMEventMode = [ "dmCapture", "dmBubble" ];
/// TW3DOMEventAPI = class (TObject)
///  [line: 144, column: 3, file: SmartCL.System]
var TW3DOMEventAPI = {
   $ClassName:"TW3DOMEventAPI",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TW3DOMEventAPI.EventObject(const e: Variant) : JEvent
   ///  [line: 477, column: 31, file: SmartCL.System]
   ,EventObject$1:function(e$1) {
      var Result = null;
      Result = e$1 || window.event;
      return Result
   }
   /// procedure TW3DOMEventAPI.RegisterEvent(Handle: TControlHandle; EventName: String; EventHandler: TW3JSEventHandler; Mode: TW3DOMEventMode)
   ///  [line: 484, column: 32, file: SmartCL.System]
   ,RegisterEvent:function(Handle$17, EventName$1, EventHandler, Mode$1) {
      if (Handle$17) {
         if (Handle$17.addEventListener) {
            Handle$17.addEventListener(EventName$1,EventHandler,(Mode$1==0));
         } else {
            Handle$17.attachEvent("on" + EventName$1,EventHandler,(Mode$1==0));
         }
      } else {
         throw Exception.Create($New(Exception),"Register event failed, invalid handle error");
      }
   }
   /// procedure TW3DOMEventAPI.UnRegisterEvent(Handle: TControlHandle; EventName: String; EventHandler: TW3JSEventHandler; Mode: TW3DOMEventMode)
   ///  [line: 511, column: 32, file: SmartCL.System]
   ,UnRegisterEvent:function(Handle$17, EventName$1, EventHandler, Mode$1) {
      if (Handle$17) {
         if (Handle$17.removeEventListener) {
            Handle$17.removeEventListener(EventName$1,EventHandler,(Mode$1==0));
         } else {
            Handle$17.detachEvent("on" + EventName$1,EventHandler,(Mode$1==0));
         }
      } else {
         throw Exception.Create($New(Exception),"Unregister event failed, invalid handle error");
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3CustomDeviceCapabilities = class (TObject)
///  [line: 408, column: 3, file: System.Types]
var TW3CustomDeviceCapabilities = {
   $ClassName:"TW3CustomDeviceCapabilities",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
   ,GetGamePadSupport$:function($){return $.ClassType.GetGamePadSupport($)}
   ,GetKeyboardSupported$:function($){return $.ClassType.GetKeyboardSupported($)}
   ,GetMouseSupport$:function($){return $.ClassType.GetMouseSupport($)}
   ,GetTouchSupport$:function($){return $.ClassType.GetTouchSupport($)}
};
/// TW3DOMDeviceCapabilities = class (TW3CustomDeviceCapabilities)
///  [line: 209, column: 3, file: SmartCL.System]
var TW3DOMDeviceCapabilities = {
   $ClassName:"TW3DOMDeviceCapabilities",$Parent:TW3CustomDeviceCapabilities
   ,$Init:function ($) {
      TW3CustomDeviceCapabilities.$Init($);
   }
   /// function TW3DOMDeviceCapabilities.GetGamePadSupport() : Boolean
   ///  [line: 976, column: 35, file: SmartCL.System]
   ,GetGamePadSupport:function(Self) {
      var Result = false;
      var LNavigator;
      LNavigator = navigator;
      Result = $VarToBool(LNavigator.getGamepads || LNavigator.webkitGetGamepads || LNavigator.mozGetGamepads || LNavigator.msGetGamepads);
      return Result
   }
   /// function TW3DOMDeviceCapabilities.GetKeyboardSupported() : Boolean
   ///  [line: 985, column: 35, file: SmartCL.System]
   ,GetKeyboardSupported:function(Self) {
      return true;
   }
   /// function TW3DOMDeviceCapabilities.GetMouseSupport() : Boolean
   ///  [line: 926, column: 35, file: SmartCL.System]
   ,GetMouseSupport:function(Self) {
      var Result = false;
      Result = (
      ('onmousedown' in window) &&
      ('onmouseup' in window) &&
      ('onmousemove' in window) &&
      ('onclick' in window) &&
      ('ondblclick' in window) &&
      ('onmousemove' in window) &&
      ('onmouseover' in window) &&
      ('onmouseout' in window) &&
      ('oncontextmenu' in window)
    );
      return Result
   }
   /// function TW3DOMDeviceCapabilities.GetTouchSupport() : Boolean
   ///  [line: 943, column: 35, file: SmartCL.System]
   ,GetTouchSupport:function(Self) {
      var Result = false;
      try {
         document.createEvent("TouchEvent");
         Result = true;
      } catch ($e) {
         var e$1 = $W($e);
         /* null */
      }
      Result = (
      ("ontouchstart" in window) ||
      (navigator.maxTouchPoints) ||
      (navigator.maxTouchPoints > 0)
      );
      if (!(Result)) {
         Result = ("onmsgesturechange" in window);
      }
      return Result
   }
   ,Destroy:TObject.Destroy
   ,GetGamePadSupport$:function($){return $.ClassType.GetGamePadSupport($)}
   ,GetKeyboardSupported$:function($){return $.ClassType.GetKeyboardSupported($)}
   ,GetMouseSupport$:function($){return $.ClassType.GetMouseSupport($)}
   ,GetTouchSupport$:function($){return $.ClassType.GetTouchSupport($)}
};
/// TW3BrowserVendor enumeration
///  [line: 50, column: 3, file: SmartCL.System]
var TW3BrowserVendor = [ "bvUnknown", "bviOS", "bvAndroid", "bvChrome", "bvSafari", "bvFirefox", "bvOpera", "bvIE" ];
/// TTextVAlign enumeration
///  [line: 37, column: 3, file: SmartCL.System]
var TTextVAlign = [ "tvTop", "tvCenter", "tvBottom" ];
/// TTextAlign enumeration
///  [line: 32, column: 3, file: SmartCL.System]
var TTextAlign = [ "taLeft", "taCenter", "taRight" ];
/// TPixelsPerInch = record
///  [line: 204, column: 3, file: SmartCL.System]
function Copy$TPixelsPerInch(s,d) {
   return d;
}
function Clone$TPixelsPerInch($) {
   return {

   }
}
/// TModalResult enumeration
///  [line: 68, column: 3, file: SmartCL.System]
var TModalResult = [ "mrCancel", "mrOK" ];
/// TCursor enumeration
///  [line: 156, column: 3, file: SmartCL.System]
var TCursor = [ "crAuto", "crDefault", "crInherited", "crURL", "crCrossHair", "crHelp", "crMove", "crPointer", "crProgress", "crText", "crWait", "crNResize", "crSResize", "crEResize", "crWResize", "crNEResize", "crNWResize", "crNSResize", "crSEResize", "crSWResize", "crEWResize" ];
/// function TControlHandleHelper.Contains(const Child: TControlHandle) : Boolean
///  [line: 1676, column: 31, file: SmartCL.System]
function TControlHandleHelper$Contains$5(Self$2, Child) {
   return TControlHandleHelper$Contains$5(Self$2,Child);
}
/// function TControlHandleHelper.GetChildById(TagId: String) : TControlHandle
///  [line: 1681, column: 31, file: SmartCL.System]
function TControlHandleHelper$GetChildById(Self$3, TagId$1) {
   return document.getElementById(TagId$1);
}
/// function TControlHandleHelper.GetChildByIndex(const Index: Integer) : TControlHandle
///  [line: 1762, column: 31, file: SmartCL.System]
function TControlHandleHelper$GetChildByIndex(Self$4, Index$5) {
   return Self$4.children[Index$5];
}
/// function TControlHandleHelper.GetChildCount() : Integer
///  [line: 1686, column: 31, file: SmartCL.System]
function TControlHandleHelper$GetChildCount$1(Self$5) {
   var Result = 0;
   if (Self$5.children) {
      Result = $VarToInt(Self$5.children.length,"");
   }
   return Result
}
/// function TControlHandleHelper.GetChildren() : TControlHandleArray
///  [line: 1692, column: 31, file: SmartCL.System]
function TControlHandleHelper$GetChildren$1(Self$6) {
   var Result = [];
   var x$34 = 0,
      LCount = 0,
      LLongs = 0,
      LSingles = 0;
   x$34 = 0;
   LCount = TControlHandleHelper$GetChildCount$1(Self$6);
   if (LCount < 1) {
      return Result;
   }
   LLongs = LCount>>>3;
   LSingles = LCount % 8;
   while (LLongs > 0) {
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      Result.push(Self$6.children[x$34]);
      ++x$34;
      --LLongs;
   }
   switch (LSingles) {
      case 1 :
         Result.push(Self$6.children[x$34]);
         break;
      case 2 :
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         break;
      case 3 :
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         break;
      case 4 :
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         break;
      case 5 :
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         break;
      case 6 :
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         break;
      case 7 :
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         ++x$34;
         Result.push(Self$6.children[x$34]);
         break;
   }
   return Result
}
/// function TControlHandleHelper.Ready() : Boolean
///  [line: 1776, column: 31, file: SmartCL.System]
function TControlHandleHelper$Ready$4(Self$7) {
   return $VarToBool(document.body.contains(Self$7));
}
/// procedure TControlHandleHelper.ReadyExecute(const OnReady: TProcedureRef)
///  [line: 1823, column: 32, file: SmartCL.System]
function TControlHandleHelper$ReadyExecute$1(Self$8, OnReady) {
   var LExists;
   LExists = document.body.contains(Self$8);
   if (LExists) {
      OnReady();
   } else {
      TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
         TControlHandleHelper$ReadyExecute$1(Self$8,OnReady);
      },100);
   }
}
/// procedure TControlHandleHelper.ReadyExecuteAnimFrame(const OnReady: TProcedureRef)
///  [line: 1796, column: 32, file: SmartCL.System]
function TControlHandleHelper$ReadyExecuteAnimFrame(Self$9, OnReady$1) {
   var LExists$1;
   LExists$1 = document.body.contains(Self$9);
   if (LExists$1) {
      TW3Dispatch.RequestAnimationFrame(TW3Dispatch,OnReady$1);
   } else {
      TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
         TControlHandleHelper$ReadyExecuteAnimFrame(Self$9,OnReady$1);
      },100);
   }
}
/// procedure TControlHandleHelper.ReadyExecuteEx(const Tag: TObject; const OnReady: TProcedureRefO)
///  [line: 1811, column: 32, file: SmartCL.System]
function TControlHandleHelper$ReadyExecuteEx(Self$10, Tag, OnReady$2) {
   var LExists$2;
   LExists$2 = document.body.contains(Self$10);
   if (LExists$2) {
      OnReady$2(Tag);
   } else {
      TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
         TControlHandleHelper$ReadyExecuteEx(Self$10,Tag,OnReady$2);
      },100);
   }
}
/// function TControlHandleHelper.Valid() : Boolean
///  [line: 1671, column: 32, file: SmartCL.System]
function TControlHandleHelper$Valid$3(Self$11) {
   return $VarToBool(Self$11);
}
function BrowserAPI() {
   var Result = null;
   if (vDriver === null) {
      InternalInitVendorInfo();
   }
   Result = vDriver;
   return Result
};
function SetupMouseCursorTable() {
   __CURSOR_NAME_LUT = TVariant.CreateObject();
   __CURSOR_NAME_LUT["default"] = 1;
   __CURSOR_NAME_LUT["auto"] = 0;
   __CURSOR_NAME_LUT["inherited"] = 2;
   __CURSOR_NAME_LUT["url"] = 3;
   __CURSOR_NAME_LUT["crosshair"] = 4;
   __CURSOR_NAME_LUT["help"] = 5;
   __CURSOR_NAME_LUT["move"] = 6;
   __CURSOR_NAME_LUT["pointer"] = 7;
   __CURSOR_NAME_LUT["progress"] = 8;
   __CURSOR_NAME_LUT["text"] = 9;
   __CURSOR_NAME_LUT["wait"] = 10;
   __CURSOR_NAME_LUT["n-resize"] = 11;
   __CURSOR_NAME_LUT["s-resize"] = 12;
   __CURSOR_NAME_LUT["e-resize"] = 13;
   __CURSOR_NAME_LUT["w-resize"] = 14;
   __CURSOR_NAME_LUT["ne-resize"] = 15;
   __CURSOR_NAME_LUT["nw-resize"] = 16;
   __CURSOR_NAME_LUT["se-resize"] = 18;
   __CURSOR_NAME_LUT["sw-resize"] = 19;
   __CURSOR_NAME_LUT["ew-resize"] = 20;
   __CURSOR_NAME_LUT["ns-resize"] = 17;
   __CURSOR_DATA_LUT = TVariant.CreateObject();
   __CURSOR_DATA_LUT[1] = "default";
   __CURSOR_DATA_LUT[0] = "auto";
   __CURSOR_DATA_LUT[2] = "inherited";
   __CURSOR_DATA_LUT[3] = "url";
   __CURSOR_DATA_LUT[4] = "crosshair";
   __CURSOR_DATA_LUT[5] = "help";
   __CURSOR_DATA_LUT[6] = "move";
   __CURSOR_DATA_LUT[7] = "pointer";
   __CURSOR_DATA_LUT[8] = "progress";
   __CURSOR_DATA_LUT[9] = "text";
   __CURSOR_DATA_LUT[10] = "wait";
   __CURSOR_DATA_LUT[11] = "n-resize";
   __CURSOR_DATA_LUT[12] = "s-resize";
   __CURSOR_DATA_LUT[13] = "e-resize";
   __CURSOR_DATA_LUT[14] = "w-resize";
   __CURSOR_DATA_LUT[15] = "ne-resize";
   __CURSOR_DATA_LUT[16] = "nw-resize";
   __CURSOR_DATA_LUT[18] = "se-resize";
   __CURSOR_DATA_LUT[19] = "sw-resize";
   __CURSOR_DATA_LUT[20] = "ew-resize";
   __CURSOR_DATA_LUT[17] = "ns-resize";
};
function InternalInitVendorInfo() {
   if (w3_getIsAndroid()) {
      vVendor = 2;
   } else if (w3_getIsSafari()) {
      vVendor = 4;
   } else if (w3_getIsFirefox()) {
      vVendor = 5;
   } else if (w3_getIsChrome()) {
      vVendor = 3;
   } else if (w3_getIsInternetExplorer()) {
      vVendor = 7;
   } else if (w3_getIsOpera()) {
      vVendor = 6;
   }
   if (!vVendor) {
      if (w3_getIsIPhone() || w3_getIsIPad() || w3_getIsIPod()) {
         vVendor = 1;
      }
   }
   switch (vVendor) {
      case 1 :
      case 4 :
      case 3 :
      case 2 :
         w3_RegisterBrowserAPI(TW3WebkitBrowserAPI.Create$61($New(TW3WebkitBrowserAPI)));
         break;
      case 5 :
         w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$64($New(TW3FirefoxBrowserAPI)));
         break;
      case 7 :
         w3_RegisterBrowserAPI(TW3IEBrowserAPI.Create$63($New(TW3IEBrowserAPI)));
         break;
      case 6 :
         w3_RegisterBrowserAPI(TW3OperaBrowserAPI.Create$62($New(TW3OperaBrowserAPI)));
         break;
      default :
         w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$64($New(TW3FirefoxBrowserAPI)))   }
};
/// JMouseWheelDeltaMode enumeration
///  [line: 211, column: 3, file: W3C.DOM]
var JMouseWheelDeltaMode = [ "Pixel", "Line", "Page" ];
/// JMouseButton enumeration
///  [line: 155, column: 3, file: W3C.DOM]
var JMouseButton = [ "Left", "Middle", "Right" ];
/// function TW3VariantHelper.DataType() : TW3VariantDataType
///  [line: 1838, column: 27, file: System.Types]
function TW3VariantHelper$DataType(Self$12) {
   var Result = 1;
   var LType = "";
   if (TW3VariantHelper$Valid$4(Self$12)) {
      LType = typeof(Self$12);
      {var $temp2 = (LType).toLocaleLowerCase();
         if ($temp2=="object") {
            if ((!Self$12.length)) {
               Result = 8;
            } else {
               Result = 9;
            }
         }
          else if ($temp2=="function") {
            Result = 7;
         }
          else if ($temp2=="symbol") {
            Result = 6;
         }
          else if ($temp2=="boolean") {
            Result = 2;
         }
          else if ($temp2=="string") {
            Result = 5;
         }
          else if ($temp2=="number") {
            if (Math.round(Number(Self$12)) != Self$12) {
               Result = 4;
            } else {
               Result = 3;
            }
         }
          else if ($temp2=="array") {
            Result = 9;
         }
          else {
            Result = 1;
         }
      }
   } else if (Self$12 == null) {
      Result = 10;
   } else {
      Result = 1;
   }
   return Result
}
/// function TW3VariantHelper.IsObject() : Boolean
///  [line: 1885, column: 27, file: System.Types]
function TW3VariantHelper$IsObject(Self$13) {
   var Result = false;
   Result = ((Self$13) !== undefined)
      && (Self$13 !== null)
      && (typeof Self$13  === "object")
      && ((Self$13).length === undefined);
   return Result
}
/// function TW3VariantHelper.Isstring() : Boolean
///  [line: 1922, column: 27, file: System.Types]
function TW3VariantHelper$Isstring(Self$14) {
   var Result = false;
   Result = (Self$14 !== undefined)
      && (Self$14 !== null)
      && (typeof Self$14  === "string");
   return Result
}
/// function TW3VariantHelper.Valid() : Boolean
///  [line: 1796, column: 27, file: System.Types]
function TW3VariantHelper$Valid$4(Self$15) {
   var Result = false;
   Result = !( (Self$15 == undefined) || (Self$15 == null) );
   return Result
}
/// TW3VariantDataType enumeration
///  [line: 561, column: 3, file: System.Types]
var TW3VariantDataType = { 1:"vdUnknown", 2:"vdBoolean", 3:"vdinteger", 4:"vdfloat", 5:"vdstring", 6:"vdSymbol", 7:"vdFunction", 8:"vdObject", 9:"vdArray", 10:"vdVariant" };
/// TW3OwnedObject = class (TObject)
///  [line: 356, column: 3, file: System.Types]
var TW3OwnedObject = {
   $ClassName:"TW3OwnedObject",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FOwner = null;
   }
   /// function TW3OwnedObject.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 1184, column: 25, file: System.Types]
   ,AcceptOwner:function(Self, CandidateObject) {
      return true;
   }
   /// constructor TW3OwnedObject.Create(const AOwner: TObject)
   ///  [line: 1173, column: 28, file: System.Types]
   ,Create$11:function(Self, AOwner) {
      TObject.Create(Self);
      TW3OwnedObject.SetOwner(Self,AOwner);
      return Self
   }
   /// function TW3OwnedObject.GetOwner() : TObject
   ///  [line: 1179, column: 26, file: System.Types]
   ,GetOwner:function(Self) {
      return Self.FOwner;
   }
   /// procedure TW3OwnedObject.InitAsync(const OnReady: TProcedureRef)
   ///  [line: 1194, column: 26, file: System.Types]
   ,InitAsync:function(Self, OnReady$3) {
      OnReady$3();
   }
   /// function TW3OwnedObject.IsObjectReady() : Boolean
   ///  [line: 1189, column: 25, file: System.Types]
   ,IsObjectReady:function(Self) {
      return true;
   }
   /// procedure TW3OwnedObject.SetOwner(const NewOwner: TObject)
   ///  [line: 1199, column: 26, file: System.Types]
   ,SetOwner:function(Self, NewOwner) {
      if (NewOwner !== Self.FOwner) {
         if (TW3OwnedObject.AcceptOwner$(Self,NewOwner)) {
            Self.FOwner = NewOwner;
         } else {
            throw EW3Exception.CreateFmt($New(EW3OwnedObject),$R[0],["TW3OwnedObject.SetOwner", TObject.ClassName(Self.ClassType), $R[2]]);
         }
      }
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync$:function($){return $.ClassType.InitAsync.apply($.ClassType, arguments)}
   ,IsObjectReady$:function($){return $.ClassType.IsObjectReady($)}
};
TW3OwnedObject.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Identifiers = class (TObject)
///  [line: 277, column: 3, file: System.Types]
var TW3Identifiers = {
   $ClassName:"TW3Identifiers",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TW3Identifiers.GenerateUniqueComponentName() : String
   ///  [line: 1730, column: 31, file: System.Types]
   ,GenerateUniqueComponentName$1:function(Self) {
      var Result = "";
      ++__UNIQUE;
      Result = "Component" + __UNIQUE.toString();
      return Result
   }
   /// function TW3Identifiers.GenerateUniqueAnimationName() : String
   ///  [line: 1718, column: 31, file: System.Types]
   ,GenerateUniqueAnimationName:function(Self) {
      var Result = "";
      ++__UNIQUE;
      Result = "SmartAnim" + __UNIQUE.toString();
      return Result
   }
   /// function TW3Identifiers.GenerateUniqueObjectId() : String
   ///  [line: 1724, column: 31, file: System.Types]
   ,GenerateUniqueObjectId:function(Self) {
      var Result = "";
      ++__UNIQUE;
      Result = "OBJ" + __UNIQUE.toString();
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TW3FilePermissionMask enumeration
///  [line: 78, column: 3, file: System.Types]
var TW3FilePermissionMask = { 0:"fpNone", 111:"fpExecute", 222:"fpWrite", 333:"fpWriteExecute", 444:"fpRead", 555:"fpReadExecute", 666:"fpDefault", 777:"fpReadWriteExecute", 740:"fpRWEGroupReadOnly" };
/// TVariant = class (TObject)
///  [line: 511, column: 3, file: System.Types]
var TVariant = {
   $ClassName:"TVariant",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TVariant.AsBool(const aValue: Variant) : Boolean
   ///  [line: 2244, column: 25, file: System.Types]
   ,AsBool:function(aValue) {
      var Result = false;
      if (aValue != undefined && aValue != null) {
         Result = $VarToBool(aValue);
      }
      return Result
   }
   /// function TVariant.AsFloat(const aValue: Variant) : Float
   ///  [line: 2227, column: 25, file: System.Types]
   ,AsFloat:function(aValue) {
      var Result = 0;
      if (aValue != undefined && aValue != null) {
         Result = Number(aValue);
      }
      return Result
   }
   /// function TVariant.AsInteger(const aValue: Variant) : Integer
   ///  [line: 2213, column: 25, file: System.Types]
   ,AsInteger:function(aValue) {
      var Result = 0;
      if (aValue != undefined && aValue != null) {
         Result = $VarToInt(aValue,"");
      }
      return Result
   }
   /// function TVariant.AsObject(const aValue: Variant) : TObject
   ///  [line: 2234, column: 25, file: System.Types]
   ,AsObject:function(aValue) {
      var Result = null;
      if (aValue != undefined && aValue != null) {
         Result = aValue;
      }
      return Result
   }
   /// function TVariant.AsString(const aValue: Variant) : String
   ///  [line: 2220, column: 25, file: System.Types]
   ,AsString:function(aValue) {
      var Result = "";
      if (aValue != undefined && aValue != null) {
         Result = String(aValue);
      }
      return Result
   }
   /// function TVariant.CreateObject() : Variant
   ///  [line: 2251, column: 25, file: System.Types]
   ,CreateObject:function() {
      var Result = undefined;
      Result = new Object();
      return Result
   }
   /// procedure TVariant.ForEachProperty(const Data: Variant; const CallBack: TW3ObjectKeyCallback)
   ///  [line: 2334, column: 26, file: System.Types]
   ,ForEachProperty:function(Data$8, CallBack) {
      var Keys$2 = [],
         a$393 = 0,
         LName = "",
         LObj;
      if (CallBack) {
         Keys$2 = TVariant.Properties(Data$8);
         var $temp3;
         for(a$393=0,$temp3=Keys$2.length;a$393<$temp3;a$393++) {
            LName = Keys$2[a$393];
            LObj = Data$8[LName];
            if ((~CallBack(LName,LObj)) == 1) {
               break;
            }
         }
      }
   }
   /// function TVariant.GetKeys(const aValue: Variant) : TStrArray
   ///  [line: 2304, column: 25, file: System.Types]
   ,GetKeys:function(aValue) {
      var Result = [];
      if (Object.keys) {
      Result = Object.keys(aValue);
    } else {
      Result = [];
    }
      return Result
   }
   /// function TVariant.IsInteger(const aValue: Variant) : Boolean
   ///  [line: 2285, column: 25, file: System.Types]
   ,IsInteger:function(aValue) {
      var Result = false;
      if (aValue == null) return false;
    if (aValue == undefined) return false;
    if (typeof(aValue) === "number") if (parseInt(aValue) === aValue) return true;
      return Result
   }
   /// function TVariant.IsNumber(const aValue: Variant) : Boolean
   ///  [line: 2280, column: 25, file: System.Types]
   ,IsNumber:function(aValue) {
      return typeof(aValue) == __TYPE_MAP.Number$1;
   }
   /// function TVariant.IsString(const aValue: Variant) : Boolean
   ///  [line: 2275, column: 25, file: System.Types]
   ,IsString:function(aValue) {
      return typeof(aValue) == __TYPE_MAP.String$1;
   }
   /// function TVariant.Properties(const Data: Variant) : TStrArray
   ///  [line: 2349, column: 25, file: System.Types]
   ,Properties:function(Data$8) {
      var Result = [];
      if (Data$8) {
         if (!(Object.keys === undefined)) {
        Result = Object.keys(Data$8);
        return Result;
      }
         if (!(Object.getOwnPropertyNames === undefined)) {
          Result = Object.getOwnPropertyNames(Data$8);
          return Result;
      }
         for (var qtxenum in Data$8) {
        if ( (Data$8).hasOwnProperty(qtxenum) == true )
          (Result).push(qtxenum);
      }
      return Result;
      }
      return Result
   }
   /// function TVariant.PropertyDelete(const Data: Variant; const Id: String) : Variant
   ///  [line: 2406, column: 25, file: System.Types]
   ,PropertyDelete:function(Data$8, Id$2) {
      var Result = undefined;
      if (Data$8) {
         if (Data$8[Id$2]) {
            delete Data$8[Id$2];
         }
      }
      Result = Data$8;
      return Result
   }
   /// function TVariant.ValidRef(const aValue: Variant) : Boolean
   ///  [line: 2208, column: 25, file: System.Types]
   ,ValidRef:function(aValue) {
      return aValue != undefined && aValue != null;
   }
   ,Destroy:TObject.Destroy
};
/// TTextFormation enumeration
///  [line: 199, column: 3, file: System.Types]
var TTextFormation = { 256:"tfHex", 257:"tfOrdinal", 258:"tfFloat", 259:"tfQuote" };
/// function TStringHelper.ContainsHex() : Boolean
///  [line: 1663, column: 24, file: System.Types]
function TStringHelper$ContainsHex(Self$16) {
   var Result = false;
   var x$35 = 0,
      LStart = 0,
      LItem = "",
      LLen = 0;
   Result = false;
   LLen = Self$16.length;
   if (LLen >= 1) {
      LStart = 1;
      if (Self$16.charAt(0) == "$") {
         ++LStart;
         --LLen;
      } else {
         LItem = (Self$16.substr(0,1)).toLocaleUpperCase();
         Result = ($R[53].indexOf(LItem)+1) > 0;
         if (!(Result)) {
            return Result;
         }
      }
      if (LLen >= 1) {
         var $temp4;
         for(x$35=LStart,$temp4=Self$16.length;x$35<=$temp4;x$35++) {
            LItem = (Self$16.charAt(x$35-1)).toLocaleUpperCase();
            Result = ($R[53].indexOf(LItem)+1) > 0;
            if (!(Result)) {
               break;
            }
         }
      }
   }
   return Result
}
/// function TStringHelper.ContainsOrdinal() : Boolean
///  [line: 1647, column: 24, file: System.Types]
function TStringHelper$ContainsOrdinal(Self$17) {
   var Result = false;
   var LLen$1 = 0,
      x$36 = 0,
      LItem$1 = "";
   Result = false;
   LLen$1 = Self$17.length;
   if (LLen$1 >= 1) {
      var $temp5;
      for(x$36=1,$temp5=LLen$1;x$36<=$temp5;x$36++) {
         LItem$1 = Self$17.charAt(x$36-1);
         Result = ($R[52].indexOf(LItem$1)+1) > 0;
         if (!(Result)) {
            break;
         }
      }
   }
   return Result
}
/// function TStringHelper.ContainsFloat() : Boolean
///  [line: 1592, column: 24, file: System.Types]
function TStringHelper$ContainsFloat(Self$18) {
   var Result = false;
   var x$37 = 0,
      LItem$2 = "",
      LLen$2 = 0,
      LLine = false;
   Result = false;
   LLen$2 = Self$18.length;
   if (LLen$2 >= 1) {
      LLine = false;
      var $temp6;
      for(x$37=1,$temp6=LLen$2;x$37<=$temp6;x$37++) {
         LItem$2 = Self$18.charAt(x$37-1);
         if (LItem$2 == ".") {
            if (x$37 == 1 && LLen$2 == 1) {
               break;
            }
            if (x$37 == 1 && LLen$2 > 1) {
               LLine = true;
               continue;
            }
            if (x$37 > 1 && x$37 < LLen$2) {
               if (LLine) {
                  break;
               } else {
                  LLine = true;
                  continue;
               }
            } else {
               break;
            }
         }
         Result = ("0123456789".indexOf(LItem$2)+1) > 0;
         if (!(Result)) {
            break;
         }
      }
   }
   return Result
}
/// function TStringHelper.ContainsQuote() : Boolean
///  [line: 1511, column: 24, file: System.Types]
function TStringHelper$ContainsQuote(Self$19) {
   var Result = false;
   var LLen$3 = 0,
      LStart$1 = 0,
      LFound = false,
      LQuote = ["",""];
   Result = false;
   LLen$3 = Self$19.length;
   if (LLen$3 >= 2) {
      LStart$1 = 1;
      while (LStart$1 <= LLen$3) {
         if (Self$19.charAt(LStart$1-1) == " ") {
            ++LStart$1;
            continue;
         } else {
            break;
         }
      }
      LQuote[false?1:0] = "'";
      LQuote[true?1:0] = "\"";
      if (Self$19.charAt(LStart$1-1) != LQuote[true?1:0] || Self$19.charAt(LStart$1-1) != LQuote[false?1:0]) {
         return Result;
      }
      if (LStart$1 >= LLen$3) {
         return Result;
      }
      ++LStart$1;
      LFound = false;
      while (LStart$1 <= LLen$3) {
         if (Self$19.charAt(LStart$1-1) != LQuote[true?1:0] || Self$19.charAt(LStart$1-1) != LQuote[false?1:0]) {
            LFound = true;
         }
         ++LStart$1;
      }
      if (!(LFound)) {
         return Result;
      }
      if (LStart$1 == LLen$3) {
         Result = true;
         return Result;
      }
      while (LStart$1 <= LLen$3) {
         if (Self$19.charAt(LStart$1-1) != " ") {
            LFound = false;
            break;
         } else {
            ++LStart$1;
         }
      }
      Result = LFound;
   }
   return Result
}
/// procedure TStringArrayHelper.Pack()
///  [line: 1480, column: 30, file: System.Types]
function TStringArrayHelper$Pack$1(Self$20) {
   var x$38 = 0,
      temp = "";
   x$38 = 0;
   while (x$38 < Self$20.length) {
      temp = Self$20[x$38];
      temp = Trim$_String_(temp);
      if (temp.length < 1) {
         Self$20.splice(x$38,1)
         ;
         if (x$38 < (Self$20.length-1)) {
            continue;
         }
      }
      ++x$38;
   }
}
/// TString = class (TObject)
///  [line: 607, column: 3, file: System.Types]
var TString = {
   $ClassName:"TString",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TString.BuildCRCTable()
   ///  [line: 1547, column: 25, file: System.Types.Convert]
   ,BuildCRCTable:function(Self) {
      var x$39 = 0,
         y$32 = 0,
         r$3 = 0;
      for(x$39=0;x$39<=255;x$39++) {
         r$3 = x$39<<1;
         for(y$32=8;y$32>=0;y$32--) {
            if (r$3&1) {
               r$3 = (r$3>>>1)^3988292384;
            } else {
               r$3 = r$3>>>1;
            }
            CRC_Table[x$39] = r$3;
         }
      }
   }
   /// function TString.CalcCRC(Text: String) : Integer
   ///  [line: 1513, column: 24, file: System.Types.Convert]
   ,CalcCRC:function(Self, Text$10) {
      var Result = 0;
      var x$39 = 0,
         LResult = 0,
         LCharCode = 0,
         LLen$4 = 0,
         LBytes = [];
      LLen$4 = Text$10.length;
      if (LLen$4 > 0) {
         if (!(CRC_Table_Ready)) {
            TString.BuildCRCTable(Self);
            CRC_Table_Ready = true;
         }
         LBytes = TString.EncodeUTF8(Self,Text$10);
         LResult = 4294967295;
         var $temp7;
         for(x$39=0,$temp7=LBytes.length;x$39<$temp7;x$39++) {
            LCharCode = LBytes[x$39];
            LResult = (LResult>>>8)^CRC_Table[LCharCode^(LResult&255)];
         }
         Result = ( (LResult ^ -1) >>> 0);
      }
      return Result
   }
   /// function TString.CharCodeFor(const Character: Char) : Integer
   ///  [line: 1232, column: 24, file: System.Types]
   ,CharCodeFor:function(Self, Character) {
      var Result = 0;
      Result = (Character).charCodeAt(0);
      return Result
   }
   /// function TString.DecodeBase64(TextToDecode: String) : String
   ///  [line: 1508, column: 24, file: System.Types.Convert]
   ,DecodeBase64:function(Self, TextToDecode) {
      return TBase64EncDec.Base64ToString(TBase64EncDec,TextToDecode);
   }
   /// function TString.DecodeURI(const Text: String) : String
   ///  [line: 1415, column: 24, file: System.Types]
   ,DecodeURI:function(Self, Text$10) {
      var Result = "";
      Result = (Text$10).replace(new RegExp('\\+','g'),' ');
    Result = unescape(Result);
      return Result
   }
   /// function TString.DecodeUTF8(const BytesToDecode: TByteArray) : String
   ///  [line: 1307, column: 24, file: System.Types]
   ,DecodeUTF8:function(Self, BytesToDecode) {
      var Result = "";
      var i$5 = 0,
         c$1 = 0,
         c2 = 0,
         c2$1 = 0,
         c3 = 0;
      i$5 = 0;
      while (i$5 < BytesToDecode.length) {
         c$1 = BytesToDecode[i$5];
         if (c$1 < 128) {
            Result += TString.FromCharCode(TString,c$1);
            ++i$5;
         } else if (c$1 > 191 && c$1 < 224) {
            c2 = BytesToDecode[i$5+1];
            Result += TString.FromCharCode(TString,((c$1&31)<<6)|(c2&63));
            (i$5+= 2);
         } else {
            c2$1 = BytesToDecode[i$5+1];
            c3 = BytesToDecode[i$5+2];
            Result += TString.FromCharCode(TString,((c$1&15)<<12)|(((c2$1&63)<<6)|(c3&63)));
            (i$5+= 3);
         }
      }
      return Result
   }
   /// function TString.EncodeBase64(TextToEncode: String) : String
   ///  [line: 1503, column: 24, file: System.Types.Convert]
   ,EncodeBase64:function(Self, TextToEncode) {
      return TBase64EncDec.StringToBase64(TBase64EncDec,TextToEncode);
   }
   /// function TString.EncodeTags(const Text: String) : String
   ///  [line: 1333, column: 24, file: System.Types]
   ,EncodeTags:function(Self, Text$10) {
      var Result = "";
      var LastAdded = 0,
         Part = "",
         i$5 = 0,
         j$2 = 0;
      function CheckAllowed(Value$5) {
         var Result = false;
         var lc = "",
            ii = 0;
         lc = (Value$5).toLowerCase();
         for(ii=0;ii<=5;ii++) {
            if (Allowed[ii] == lc) {
               Result = true;
               return Result;
            }
         }
         return Result
      };
      function AddUntil(EndPos) {
         var ii = 0,
            ch$4 = "";
         var $temp8;
         for(ii=LastAdded+1,$temp8=EndPos;ii<=$temp8;ii++) {
            ch$4 = Text$10.charAt(ii-1);
            {var $temp9 = ch$4;
               if ($temp9=="\"") {
                  Result += "&quot;";
               }
                else if ($temp9=="'") {
                  Result += "&#39;";
               }
                else if ($temp9=="<") {
                  Result += "&lt;";
               }
                else if ($temp9==">") {
                  Result += "&gt;";
               }
                else if ($temp9=="\/") {
                  Result += "&#47;";
               }
                else {
                  Result += ch$4;
               }
            }
         }
         LastAdded = EndPos;
      };
      var Allowed = ["&amp;","&lt;","&gt;","&quot;","&#39;","&#47;"];
      i$5 = (Text$10.indexOf("&")+1);
      while (i$5 > 0) {
         AddUntil(i$5-1);
         Part = Text$10.substr(i$5-1,6);
         j$2 = (Part.indexOf(";")+1);
         if (j$2 > 0) {
            if (j$2 < 6) {
               Part = Part.substr(0,j$2);
            }
            if (CheckAllowed(Part)) {
               Result += Part;
               (LastAdded+= Part.length);
               (i$5+= (Part.length-1));
            } else {
               Result += "&amp;";
               ++LastAdded;
            }
         } else {
            Result += "&amp;";
            ++LastAdded;
         }
         i$5 = (Text$10.indexOf("&",(i$5+1)-1)+1);
      }
      AddUntil(Text$10.length);
      return Result
   }
   /// function TString.EncodeUTF8(TextToEncode: String) : TByteArray
   ///  [line: 1281, column: 24, file: System.Types]
   ,EncodeUTF8:function(Self, TextToEncode) {
      var Result = [];
      var n = 0,
         c$1 = 0;
      TextToEncode = TextToEncode.replace(new RegExp(StrRegExp("\r\n"), "g"),"\r");
      if (TextToEncode.length > 0) {
         var $temp10;
         for(n=1,$temp10=TextToEncode.length;n<=$temp10;n++) {
            c$1 = TString.CharCodeFor(TString,TextToEncode.charAt(n-1));
            if (c$1 < 128) {
               Result.push(c$1);
            } else if (c$1 > 127 && c$1 < 2048) {
               Result.push(((c$1>>>6)|192));
               Result.push(((c$1&63)|128));
            } else {
               Result.push(((c$1>>>12)|224));
               Result.push((((c$1>>>6)&63)|128));
               Result.push(((c$1&63)|128));
            }
         }
      }
      return Result
   }
   /// function TString.Explode(const Value: String; const Delimiter: String) : TStrArray
   ///  [line: 1216, column: 24, file: System.Types]
   ,Explode:function(Self, Value$5, Delimiter) {
      var Result = [];
      Result = (Value$5).split(Delimiter);
      return Result
   }
   /// function TString.FromCharCode(const CharCode: Byte) : Char
   ///  [line: 1255, column: 24, file: System.Types]
   ,FromCharCode:function(Self, CharCode$1) {
      var Result = "";
      Result = String.fromCharCode(CharCode$1);
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TInteger = class (TObject)
///  [line: 460, column: 3, file: System.Types]
var TInteger = {
   $ClassName:"TInteger",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TInteger.Diff(const Primary: Integer; const Secondary: Integer) : Integer
   ///  [line: 2097, column: 25, file: System.Types]
   ,Diff:function(Primary, Secondary) {
      var Result = 0;
      if (Primary != Secondary) {
         if (Primary > Secondary) {
            Result = Primary-Secondary;
         } else {
            Result = Secondary-Primary;
         }
         if (Result < 0) {
            Result = (Result-1)^(-1);
         }
      } else {
         Result = 0;
      }
      return Result
   }
   /// function TInteger.EnsureRange(const aValue: Integer; const aMin: Integer; const aMax: Integer) : Integer
   ///  [line: 2051, column: 25, file: System.Types]
   ,EnsureRange:function(aValue, aMin, aMax) {
      return ClampInt(aValue,aMin,aMax);
   }
   /// function TInteger.FromPxStr(const aValue: String) : Integer
   ///  [line: 1986, column: 25, file: System.Types]
   ,FromPxStr:function(aValue) {
      var Result = 0;
      var LText = "";
      if ((aValue).toLocaleLowerCase().substr(-2,2)=="px") {
         LText = aValue.substr(0,(aValue.length-2));
         if (TVariant.IsNumber(LText)) {
            Result = parseInt(LText,10);
         }
      }
      return Result
   }
   /// function TInteger.PercentOfValue(const Value: Integer; const Total: Integer) : Integer
   ///  [line: 2122, column: 25, file: System.Types]
   ,PercentOfValue:function(Value$5, Total$2) {
      var Result = 0;
      if (Value$5 <= Total$2) {
         Result = Trunc(Value$5 / Total$2 * 100);
      } else {
         Result = 0;
      }
      return Result
   }
   /// procedure TInteger.SetBit(index: Integer; aValue: Boolean; var buffer: Integer)
   ///  [line: 1966, column: 26, file: System.Types]
   ,SetBit:function(index$1, aValue, buffer$1) {
      if (index$1 >= 0 && index$1 <= 31) {
         if (aValue) {
            buffer$1.v = buffer$1.v|(1<<index$1);
         } else {
            buffer$1.v = buffer$1.v&(~(1<<index$1));
         }
      } else {
         throw Exception.Create($New(Exception),"Invalid bit index, expected 0..31");
      }
   }
   /// function TInteger.SubtractSmallest(const First: Integer; const Second: Integer) : Integer
   ///  [line: 2023, column: 25, file: System.Types]
   ,SubtractSmallest:function(First, Second) {
      var Result = 0;
      if (First < Second) {
         Result = Second-First;
      } else {
         Result = First-Second;
      }
      return Result
   }
   /// function TInteger.ToNearest(const Value: Integer; const Factor: Integer) : Integer
   ///  [line: 2082, column: 25, file: System.Types]
   ,ToNearest:function(Value$5, Factor) {
      var Result = 0;
      var FTemp = 0;
      Result = Value$5;
      FTemp = Value$5 % Factor;
      if (FTemp > 0) {
         (Result+= (Factor-FTemp));
      }
      return Result
   }
   /// function TInteger.ToPsStr(const Percent: Integer) : String
   ///  [line: 1996, column: 25, file: System.Types]
   ,ToPsStr:function(Percent) {
      return Percent.toString() + "%";
   }
   /// function TInteger.ToPxStr(const aValue: Integer) : String
   ///  [line: 2001, column: 25, file: System.Types]
   ,ToPxStr:function(aValue) {
      return aValue.toString() + "px";
   }
   /// function TInteger.WrapRange(const aValue: Integer; const aLowRange: Integer; const aHighRange: Integer) : Integer
   ///  [line: 2065, column: 25, file: System.Types]
   ,WrapRange:function(aValue, aLowRange, aHighRange) {
      var Result = 0;
      if (aValue > aHighRange) {
         Result = aLowRange+TInteger.Diff(aHighRange,aValue-1);
         if (Result > aHighRange) {
            Result = TInteger.WrapRange(Result,aLowRange,aHighRange);
         }
      } else if (aValue < aLowRange) {
         Result = aHighRange-TInteger.Diff(aLowRange,aValue+1);
         if (Result < aLowRange) {
            Result = TInteger.WrapRange(Result,aLowRange,aHighRange);
         }
      } else {
         Result = aValue;
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// function THandleHelper.Valid() : Boolean
///  [line: 1746, column: 24, file: System.Types]
function THandleHelper$Valid$5(Self$21) {
   var Result = false;
   Result = !( (Self$21 == undefined) || (Self$21 == null) );
   return Result
}
/// TFileAccessMode enumeration
///  [line: 133, column: 3, file: System.Types]
var TFileAccessMode = [ "fmOpenRead", "fmOpenWrite", "fmOpenReadWrite" ];
/// TEnumState enumeration
///  [line: 127, column: 3, file: System.Types]
var TEnumState = { 1:"esContinue", 0:"esAbort" };
/// TEnumResult enumeration
///  [line: 108, column: 3, file: System.Types]
var TEnumResult = { 160:"erContinue", 16:"erBreak" };
/// TDataTypeMap = record
///  [line: 501, column: 3, file: System.Types]
function Copy$TDataTypeMap(s,d) {
   d.Boolean=s.Boolean;
   d.Number$1=s.Number$1;
   d.String$1=s.String$1;
   d.Object$2=s.Object$2;
   d.Undefined=s.Undefined;
   d.Function$1=s.Function$1;
   return d;
}
function Clone$TDataTypeMap($) {
   return {
      Boolean:$.Boolean,
      Number$1:$.Number$1,
      String$1:$.String$1,
      Object$2:$.Object$2,
      Undefined:$.Undefined,
      Function$1:$.Function$1
   }
}
/// TBoolean = class (TObject)
///  [line: 449, column: 3, file: System.Types]
var TBoolean = {
   $ClassName:"TBoolean",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TBoolean.TrueFalse(const Value: Boolean) : String
   ///  [line: 846, column: 25, file: System.Types]
   ,TrueFalse:function(Value$5) {
      return (BoolToStr(Value$5)).toLocaleLowerCase();
   }
   /// function TBoolean.OnOff(const Value: Boolean) : String
   ///  [line: 861, column: 25, file: System.Types]
   ,OnOff:function(Value$5) {
      return pre_OnOff[Value$5?1:0];
   }
   /// function TBoolean.Binary(const Value: Boolean) : Integer
   ///  [line: 851, column: 25, file: System.Types]
   ,Binary:function(Value$5) {
      return pre_binary[Value$5?1:0];
   }
   ,Destroy:TObject.Destroy
};
function StringReplace(SourceString, OldPattern, NewPattern, Flags$2) {
   var Result = "";
   var temp$1 = "",
      xpos$1 = 0,
      ASeg = "",
      BSeg = "",
      Parts = [];
   if ($SetIn(Flags$2,0,0,2)) {
      if ($SetIn(Flags$2,1,0,2)) {
         Result = SourceString.replace(new RegExp(StrRegExp(OldPattern), "g"),NewPattern);
      } else {
         Parts = SourceString.split(OldPattern);
         Result = Parts.join(NewPattern);
      }
   } else {
      temp$1 = SourceString;
      if ($SetIn(Flags$2,1,0,2)) {
         OldPattern = (temp$1).toLocaleLowerCase();
         temp$1 = (temp$1).toLocaleLowerCase();
      }
      xpos$1 = (temp$1.indexOf(OldPattern)+1);
      if (xpos$1 > 0) {
         ASeg = temp$1.substr(0,xpos$1-1);
         (xpos$1+= OldPattern.length);
         BSeg = temp$1.substr(xpos$1-1);
         Result = ASeg + NewPattern + BSeg;
      }
   }
   return Result
};
function GetIsRunningInBrowser() {
   var Result = false;
   Result = (!(typeof window === 'undefined'));
   return Result
};
/// EW3Exception = class (Exception)
///  [line: 228, column: 3, file: System.Types]
var EW3Exception = {
   $ClassName:"EW3Exception",$Parent:Exception
   ,$Init:function ($) {
      Exception.$Init($);
   }
   /// constructor EW3Exception.CreateFmt(aText: String; const aValues: array of const)
   ///  [line: 1778, column: 26, file: System.Types]
   ,CreateFmt:function(Self, aText, aValues) {
      Exception.Create(Self,Format(aText,aValues.slice(0)));
      return Self
   }
   /// constructor EW3Exception.Create(const MethodName: String; const Instance: TObject; const ErrorText: String)
   ///  [line: 1783, column: 26, file: System.Types]
   ,Create$18:function(Self, MethodName, Instance$3, ErrorText) {
      var LCallerName = "";
      LCallerName = (Instance$3)?TObject.ClassName(Instance$3.ClassType):"Anonymous";
      EW3Exception.CreateFmt(Self,$R[0],[MethodName, LCallerName, ErrorText]);
      return Self
   }
   ,Destroy:Exception.Destroy
};
/// EW3OwnedObject = class (EW3Exception)
///  [line: 347, column: 3, file: System.Types]
var EW3OwnedObject = {
   $ClassName:"EW3OwnedObject",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
function SetupTypeLUT() {
   __TYPE_MAP.Boolean = typeof(true);
   __TYPE_MAP.Number$1 = typeof(0);
   __TYPE_MAP.String$1 = typeof("");
   __TYPE_MAP.Object$2 = typeof(TVariant.CreateObject());
   __TYPE_MAP.Undefined = typeof(undefined);
   __TYPE_MAP.Function$1 = typeof(function () {
      /* null */
   });
};
/// TW3OwnedErrorObject = class (TW3OwnedObject)
///  [line: 78, column: 3, file: System.Objects]
var TW3OwnedErrorObject = {
   $ClassName:"TW3OwnedErrorObject",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FLastError = "";
      $.FOptions = null;
   }
   /// procedure TW3OwnedErrorObject.ClearLastError()
   ///  [line: 279, column: 31, file: System.Objects]
   ,ClearLastError:function(Self) {
      Self.FLastError = "";
   }
   /// constructor TW3OwnedErrorObject.Create(const AOwner: TObject)
   ///  [line: 227, column: 33, file: System.Objects]
   ,Create$11:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FOptions = TW3ErrorObjectOptions.Create$70($New(TW3ErrorObjectOptions));
      return Self
   }
   /// destructor TW3OwnedErrorObject.Destroy()
   ///  [line: 233, column: 32, file: System.Objects]
   ,Destroy:function(Self) {
      TObject.Free(Self.FOptions);
      TObject.Destroy(Self);
   }
   /// function TW3OwnedErrorObject.GetFailed() : Boolean
   ///  [line: 244, column: 30, file: System.Objects]
   ,GetFailed:function(Self) {
      return Self.FLastError.length > 0;
   }
   /// procedure TW3OwnedErrorObject.SetLastError(const ErrorText: String)
   ///  [line: 249, column: 31, file: System.Objects]
   ,SetLastError:function(Self, ErrorText) {
      Self.FLastError = Trim$_String_(ErrorText);
      if (Self.FLastError.length > 0) {
         if (Self.FOptions.AutoWriteToConsole) {
            if (console) {
          console.log( (Self.FLastError) );
        }
         }
         if (Self.FOptions.ThrowExceptions) {
            throw Exception.Create($New(EW3ErrorObject),Self.FLastError);
         }
      }
   }
   /// procedure TW3OwnedErrorObject.SetLastErrorF(const ErrorText: String; const Values: array of const)
   ///  [line: 273, column: 31, file: System.Objects]
   ,SetLastErrorF:function(Self, ErrorText, Values$11) {
      Self.FLastError = Format(ErrorText,Values$11.slice(0));
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3OwnedErrorObject.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3OwnedLockedErrorObject = class (TW3OwnedErrorObject)
///  [line: 96, column: 3, file: System.Objects]
var TW3OwnedLockedErrorObject = {
   $ClassName:"TW3OwnedLockedErrorObject",$Parent:TW3OwnedErrorObject
   ,$Init:function ($) {
      TW3OwnedErrorObject.$Init($);
      $.OnObjectUnLocked = null;
      $.OnObjectLocked = null;
      $.FLocked$2 = 0;
   }
   /// procedure TW3OwnedLockedErrorObject.DisableAlteration()
   ///  [line: 189, column: 37, file: System.Objects]
   ,DisableAlteration$2:function(Self) {
      ++Self.FLocked$2;
      if (Self.FLocked$2 == 1) {
         TW3OwnedLockedErrorObject.ObjectLocked$2(Self);
      }
   }
   /// procedure TW3OwnedLockedErrorObject.EnableAlteration()
   ///  [line: 196, column: 37, file: System.Objects]
   ,EnableAlteration$2:function(Self) {
      if (Self.FLocked$2 > 0) {
         --Self.FLocked$2;
         if (!Self.FLocked$2) {
            TW3OwnedLockedErrorObject.ObjectUnLocked$2(Self);
         }
      }
   }
   /// function TW3OwnedLockedErrorObject.GetLockState() : Boolean
   ///  [line: 206, column: 36, file: System.Objects]
   ,GetLockState$2:function(Self) {
      return Self.FLocked$2 > 0;
   }
   /// procedure TW3OwnedLockedErrorObject.ObjectLocked()
   ///  [line: 211, column: 37, file: System.Objects]
   ,ObjectLocked$2:function(Self) {
      if (Self.OnObjectLocked) {
         Self.OnObjectLocked(Self);
      }
   }
   /// procedure TW3OwnedLockedErrorObject.ObjectUnLocked()
   ///  [line: 217, column: 37, file: System.Objects]
   ,ObjectUnLocked$2:function(Self) {
      if (Self.OnObjectUnLocked) {
         Self.OnObjectUnLocked(Self);
      }
   }
   ,Destroy:TW3OwnedErrorObject.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedErrorObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3OwnedLockedErrorObject.$Intf={
   IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3CustomComponent = class (TW3OwnedLockedErrorObject)
///  [line: 19, column: 3, file: System.Widget]
var TW3CustomComponent = {
   $ClassName:"TW3CustomComponent",$Parent:TW3OwnedLockedErrorObject
   ,$Init:function ($) {
      TW3OwnedLockedErrorObject.$Init($);
      $.TagValue = 0;
      $.Name = "";
      $.FInitialized = false;
   }
   /// constructor TW3CustomComponent.Create(const AOwner: TObject)
   ///  [line: 73, column: 32, file: System.Widget]
   ,Create$11:function(Self, AOwner) {
      TW3OwnedErrorObject.Create$11(Self,AOwner);
      Self.FInitialized = true;
      TW3CustomComponent.InitializeObject$(Self);
      return Self
   }
   /// constructor TW3CustomComponent.CreateEx(const AOwner: TObject)
   ///  [line: 88, column: 32, file: System.Widget]
   ,CreateEx:function(Self, AOwner) {
      TW3OwnedErrorObject.Create$11(Self,AOwner);
      Self.FInitialized = false;
      return Self
   }
   /// destructor TW3CustomComponent.Destroy()
   ///  [line: 99, column: 31, file: System.Widget]
   ,Destroy:function(Self) {
      if (Self.FInitialized) {
         TW3CustomComponent.FinalizeObject$(Self);
      }
      TW3OwnedErrorObject.Destroy(Self);
   }
   /// procedure TW3CustomComponent.FinalizeObject()
   ///  [line: 116, column: 30, file: System.Widget]
   ,FinalizeObject:function(Self) {
      /* null */
   }
   /// procedure TW3CustomComponent.InitializeObject()
   ///  [line: 106, column: 30, file: System.Widget]
   ,InitializeObject:function(Self) {
      /* null */
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
};
TW3CustomComponent.$Intf={
   IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Component = class (TW3CustomComponent)
///  [line: 57, column: 3, file: System.Widget]
var TW3Component = {
   $ClassName:"TW3Component",$Parent:TW3CustomComponent
   ,$Init:function ($) {
      TW3CustomComponent.$Init($);
   }
   ,Destroy:TW3CustomComponent.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3CustomComponent.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject:TW3CustomComponent.FinalizeObject
   ,InitializeObject:TW3CustomComponent.InitializeObject
};
TW3Component.$Intf={
   IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Timer = class (TW3Component)
///  [line: 109, column: 3, file: System.Time]
var TW3Timer = {
   $ClassName:"TW3Timer",$Parent:TW3Component
   ,$Init:function ($) {
      TW3Component.$Init($);
      $.OnTime = null;
      $.FDelay = 0;
      $.FRepeater = null;
   }
   /// constructor TW3Timer.Create(const AOwner: TObject)
   ///  [line: 303, column: 22, file: System.Time]
   ,Create$11:function(Self, AOwner) {
      TW3CustomComponent.Create$11(Self,AOwner);
      Self.FDelay = 1000;
      Self.FRepeater = TW3EventRepeater.Create$69($New(TW3EventRepeater));
      Self.FRepeater.OnRepeat = $Event1(Self,TW3Timer.HandleEventCallback);
      return Self
   }
   /// destructor TW3Timer.Destroy()
   ///  [line: 311, column: 21, file: System.Time]
   ,Destroy:function(Self) {
      TObject.Free(Self.FRepeater);
      TW3CustomComponent.Destroy(Self);
   }
   /// function TW3Timer.GetEnabled() : Boolean
   ///  [line: 326, column: 19, file: System.Time]
   ,GetEnabled:function(Self) {
      return Self.FRepeater.FActive;
   }
   /// function TW3Timer.HandleEventCallback(Sender: TW3CustomRepeater) : TW3RepeatResult
   ///  [line: 338, column: 19, file: System.Time]
   ,HandleEventCallback:function(Self, Sender) {
      var Result = 241;
      Result = 241;
      if (Self.OnTime) {
         Self.OnTime(Self);
      }
      return Result
   }
   /// procedure TW3Timer.SetDelay(const NewDelay: Integer)
   ///  [line: 331, column: 20, file: System.Time]
   ,SetDelay:function(Self, NewDelay) {
      Self.FDelay = Math.max(NewDelay,1);
      if (Self.FDelay != Self.FRepeater.FDelay$1) {
         TW3CustomRepeater.SetDelay$1(Self.FRepeater,Self.FDelay);
      }
   }
   /// procedure TW3Timer.SetEnabled(const NewState: Boolean)
   ///  [line: 317, column: 20, file: System.Time]
   ,SetEnabled:function(Self, NewState) {
      if (NewState != TW3Timer.GetEnabled(Self)) {
         TW3CustomRepeater.SetDelay$1(Self.FRepeater,Self.FDelay);
         TW3CustomRepeater.SetActive(Self.FRepeater,!(TW3Timer.GetEnabled(Self)));
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject:TW3CustomComponent.FinalizeObject
   ,InitializeObject:TW3CustomComponent.InitializeObject
};
TW3Timer.$Intf={
   IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3RepeatResult enumeration
///  [line: 55, column: 3, file: System.Time]
var TW3RepeatResult = { 241:"rrContinue", 242:"rrStop", 243:"rrDispose" };
/// TW3CustomRepeater = class (TObject)
///  [line: 71, column: 3, file: System.Time]
var TW3CustomRepeater = {
   $ClassName:"TW3CustomRepeater",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnRepeat = null;
      $.FActive = false;
      $.FDelay$1 = 0;
      $.FHandle = undefined;
   }
   /// procedure TW3CustomRepeater.AllocTimer()
   ///  [line: 446, column: 29, file: System.Time]
   ,AllocTimer:function(Self) {
      if (Self.FHandle) {
         TW3CustomRepeater.FreeTimer(Self);
      }
      Self.FHandle = TW3Dispatch.SetInterval(TW3Dispatch,$Event0(Self,TW3CustomRepeater.CBExecute$),Self.FDelay$1);
   }
   /// destructor TW3CustomRepeater.Destroy()
   ///  [line: 400, column: 30, file: System.Time]
   ,Destroy:function(Self) {
      if (Self.FActive) {
         TW3CustomRepeater.SetActive(Self,false);
      }
      TObject.Destroy(Self);
   }
   /// procedure TW3CustomRepeater.FreeTimer()
   ///  [line: 455, column: 29, file: System.Time]
   ,FreeTimer:function(Self) {
      if (Self.FHandle) {
         TW3Dispatch.ClearInterval(TW3Dispatch,Self.FHandle);
         Self.FHandle = undefined;
      }
   }
   /// procedure TW3CustomRepeater.SetActive(const NewActive: Boolean)
   ///  [line: 414, column: 29, file: System.Time]
   ,SetActive:function(Self, NewActive) {
      if (NewActive != Self.FActive) {
         try {
            if (Self.FActive) {
               TW3CustomRepeater.FreeTimer(Self);
            } else {
               TW3CustomRepeater.AllocTimer(Self);
            }
         } finally {
            Self.FActive = NewActive;
         }
      }
   }
   /// procedure TW3CustomRepeater.SetDelay(const NewDelay: Integer)
   ///  [line: 429, column: 29, file: System.Time]
   ,SetDelay$1:function(Self, NewDelay) {
      var LState = false;
      LState = Self.FActive;
      if (LState) {
         TW3CustomRepeater.SetActive(Self,false);
      }
      Self.FDelay$1 = Math.max(NewDelay,1);
      if (LState) {
         TW3CustomRepeater.SetActive(Self,true);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,CBExecute$:function($){return $.ClassType.CBExecute($)}
};
/// TW3EventRepeater = class (TW3CustomRepeater)
///  [line: 95, column: 3, file: System.Time]
var TW3EventRepeater = {
   $ClassName:"TW3EventRepeater",$Parent:TW3CustomRepeater
   ,$Init:function ($) {
      TW3CustomRepeater.$Init($);
   }
   /// procedure TW3EventRepeater.CBExecute()
   ///  [line: 369, column: 28, file: System.Time]
   ,CBExecute:function(Self) {
      if (Self.OnRepeat) {
         switch (Self.OnRepeat(Self)) {
            case 242 :
               TW3CustomRepeater.SetActive(Self,false);
               break;
            case 243 :
               TW3CustomRepeater.SetActive(Self,false);
               TObject.Free(Self);
               break;
         }
      }
   }
   /// constructor TW3EventRepeater.Create()
   ///  [line: 350, column: 30, file: System.Time]
   ,Create$69:function(Self) {
      TObject.Create(Self);
      return Self
   }
   /// constructor TW3EventRepeater.Create(const EventHandler: TW3RepeaterEvent; const WaitForInMs: Integer)
   ///  [line: 355, column: 30, file: System.Time]
   ,Create$68:function(Self, EventHandler, WaitForInMs) {
      TObject.Create(Self);
      Self.OnRepeat = EventHandler;
      TW3CustomRepeater.SetDelay$1(Self,WaitForInMs);
      if ((Self.OnRepeat!==null) && WaitForInMs > 0) {
         TW3CustomRepeater.SetActive(Self,true);
      }
      return Self
   }
   ,Destroy:TW3CustomRepeater.Destroy
   ,CBExecute$:function($){return $.ClassType.CBExecute($)}
};
/// TW3Dispatch = class (TObject)
///  [line: 135, column: 3, file: System.Time]
var TW3Dispatch = {
   $ClassName:"TW3Dispatch",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TW3Dispatch.ClearInterval(const Handle: TW3DispatchHandle)
   ///  [line: 234, column: 29, file: System.Time]
   ,ClearInterval:function(Self, Handle$17) {
      clearInterval(Handle$17);
   }
   /// function TW3Dispatch.Execute(const EntryPoint: TProcedureRef; const WaitForInMs: Integer) : TW3DispatchHandle
   ///  [line: 264, column: 28, file: System.Time]
   ,Execute:function(Self, EntryPoint, WaitForInMs) {
      var Result = undefined;
      Result = setTimeout(EntryPoint,WaitForInMs);
      return Result
   }
   /// procedure TW3Dispatch.ExecuteDocumentReady(const OnReady: TProcedureRef)
   ///  [line: 109, column: 29, file: SmartCL.Time]
   ,ExecuteDocumentReady:function(Self, OnReady$3) {
      if (TW3Dispatch.Ready(TW3Dispatch)) {
         OnReady$3();
      } else {
         TW3Dispatch.Execute(TW3Dispatch,function () {
            if (TW3Dispatch.Ready(TW3Dispatch)) {
               OnReady$3();
            } else {
               TW3Dispatch.ExecuteDocumentReady(Self,OnReady$3);
            }
         },10);
      }
   }
   /// function TW3Dispatch.Ready() : Boolean
   ///  [line: 128, column: 28, file: SmartCL.Time]
   ,Ready:function(Self) {
      var Result = false;
      Result = (document.readyState == "complete");
      return Result
   }
   /// procedure TW3Dispatch.RepeatExecute(const Entrypoint: TProcedureRef; const RepeatCount: Integer; const IntervalInMs: Integer)
   ///  [line: 272, column: 29, file: System.Time]
   ,RepeatExecute:function(Self, Entrypoint$1, RepeatCount, IntervalInMs) {
      if (Entrypoint$1) {
         if (RepeatCount > 0) {
            Entrypoint$1();
            if (RepeatCount > 1) {
               TW3Dispatch.Execute(Self,function () {
                  TW3Dispatch.RepeatExecute(Self,Entrypoint$1,RepeatCount-1,IntervalInMs);
               },IntervalInMs);
            }
         } else {
            Entrypoint$1();
            TW3Dispatch.Execute(Self,function () {
               TW3Dispatch.RepeatExecute(Self,Entrypoint$1,-1,IntervalInMs);
            },IntervalInMs);
         }
      }
   }
   /// function TW3Dispatch.RequestAnimationFrame(const Entrypoint: TProcedureRef) : TW3DispatchHandle
   ///  [line: 92, column: 28, file: SmartCL.Time]
   ,RequestAnimationFrame:function(Self, Entrypoint$1) {
      var Result = undefined;
      if (!vRequestAnimFrame) {
         InitAnimationFrameShim();
      }
      Result = vRequestAnimFrame(Entrypoint$1);
      return Result
   }
   /// function TW3Dispatch.SetInterval(const Entrypoint: TProcedureRef; const IntervalDelayInMS: Integer) : TW3DispatchHandle
   ///  [line: 226, column: 28, file: System.Time]
   ,SetInterval:function(Self, Entrypoint$1, IntervalDelayInMS) {
      var Result = undefined;
      Result = setInterval(Entrypoint$1,IntervalDelayInMS);
      return Result
   }
   /// function TW3Dispatch.SetTimeOut(const Entrypoint: TProcedureRef; const WaitForInMs: Integer) : TW3DispatchHandle
   ///  [line: 211, column: 28, file: System.Time]
   ,SetTimeOut:function(Self, Entrypoint$1, WaitForInMs) {
      var Result = undefined;
      Result = setTimeout(Entrypoint$1,WaitForInMs);
      return Result
   }
   /// procedure TW3Dispatch.WaitFor(const Controls: array of TW3MovableControl; const DelayMs: Integer; const CB: TStdCallback)
   ///  [line: 1576, column: 29, file: SmartCL.Components]
   ,WaitFor$1:function(Self, Controls, DelayMs, CB) {
      var LReady = 0,
         a$394 = 0,
         LChild = null,
         LElement,
         style$8,
         xdisp = "",
         xvisible = "";
      if (Controls.length > 0) {
         var $temp11;
         for(a$394=0,$temp11=Controls.length;a$394<$temp11;a$394++) {
            LChild = Controls[a$394];
            if (LChild === null) {
               ++LReady;
               continue;
            }
            if ($SetIn(LChild.FComponentState,10,0,11)) {
               if (CB) {
                  CB(false);
               }
               return;
            }
            LElement = LChild.FHandle$4;
            if ((!LElement)) {
               break;
            }
            if (LElement) {
               style$8 = TW3CustomBrowserAPI.GetComputedStylesFor(BrowserAPI().ClassType,LElement);
               if (style$8) {
                  xdisp = w3_GetStyleAsStr(LElement,"display");
                  xvisible = w3_GetStyleAsStr(LElement,"visibility");
                  if (xdisp != "") {
                     if (xvisible == "visible") {
                        if (TW3TagObj.Showing$(LChild)) {
                           ++LReady;
                        } else {
                           break;
                        }
                     } else {
                        break;
                     }
                  } else {
                     break;
                  }
               } else {
                  break;
               }
            } else {
               break;
            }
         }
         if (LReady == Controls.length) {
            if (CB) {
               TW3Dispatch.Execute(TW3Dispatch,function () {
                  CB(true);
               },(DelayMs < 2)?2:DelayMs);
            }
         } else {
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TW3Dispatch.WaitFor$1(TW3Dispatch,Controls,DelayMs,CB);
            },(DelayMs < 2)?2:DelayMs);
         }
      } else {
         TW3Dispatch.Execute(TW3Dispatch,function () {
            CB(false);
         },(DelayMs < 2)?2:DelayMs);
      }
   }
   /// procedure TW3Dispatch.WaitFor(const Controls: array of TW3MovableControl; const CB: TProcedureRef)
   ///  [line: 1514, column: 29, file: SmartCL.Components]
   ,WaitFor:function(Self, Controls, CB) {
      var LReady = 0,
         a$395 = 0,
         LChild = null,
         LElement,
         Style$5,
         xdisp = "",
         xvisible = "";
      if (Controls.length > 0) {
         LReady = 0;
         var $temp12;
         for(a$395=0,$temp12=Controls.length;a$395<$temp12;a$395++) {
            LChild = Controls[a$395];
            if (LChild === null) {
               ++LReady;
               continue;
            }
            LElement = LChild.FHandle$4;
            if (LElement) {
               Style$5 = TW3CustomBrowserAPI.GetComputedStylesFor(BrowserAPI().ClassType,LElement);
               if (Style$5) {
                  xdisp = w3_GetStyleAsStr(LElement,"display");
                  xvisible = w3_GetStyleAsStr(LElement,"visibility");
                  if (xdisp != "none" && xdisp != "") {
                     if (xvisible != "") {
                        if ($SetIn(LChild.FComponentState,4,0,11)) {
                           ++LReady;
                        } else {
                           break;
                        }
                     } else {
                        break;
                     }
                  } else {
                     break;
                  }
               } else {
                  break;
               }
            } else {
               break;
            }
         }
         if (LReady == Controls.length) {
            if (CB) {
               TW3Dispatch.Execute(TW3Dispatch,CB,WaitForDelay);
            }
         } else {
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TW3Dispatch.WaitFor(TW3Dispatch,Controls,CB);
            },WaitForDelay);
         }
      } else {
         TW3Dispatch.Execute(TW3Dispatch,CB,WaitForDelay);
      }
   }
   ,Destroy:TObject.Destroy
};
function GetMilliseconds() {
   var Result = 0;
   Result = Date.now();
   return Result
};
/// TW3ErrorObjectOptions = class (TObject)
///  [line: 27, column: 3, file: System.Objects]
var TW3ErrorObjectOptions = {
   $ClassName:"TW3ErrorObjectOptions",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.AutoWriteToConsole = $.ThrowExceptions = $.AutoResetError = false;
   }
   /// constructor TW3ErrorObjectOptions.Create()
   ///  [line: 139, column: 35, file: System.Objects]
   ,Create$70:function(Self) {
      Self.AutoResetError = true;
      Self.AutoWriteToConsole = false;
      Self.ThrowExceptions = false;
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3ErrorObject = class (TObject)
///  [line: 56, column: 3, file: System.Objects]
var TW3ErrorObject = {
   $ClassName:"TW3ErrorObject",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FLastError$1 = "";
      $.FOptions$1 = null;
   }
   /// procedure TW3ErrorObject.ClearLastError()
   ///  [line: 351, column: 26, file: System.Objects]
   ,ClearLastError$1:function(Self) {
      Self.FLastError$1 = "";
   }
   /// constructor TW3ErrorObject.Create()
   ///  [line: 288, column: 28, file: System.Objects]
   ,Create$71:function(Self) {
      TObject.Create(Self);
      Self.FOptions$1 = TW3ErrorObjectOptions.Create$70($New(TW3ErrorObjectOptions));
      return Self
   }
   /// destructor TW3ErrorObject.Destroy()
   ///  [line: 294, column: 27, file: System.Objects]
   ,Destroy:function(Self) {
      TObject.Free(Self.FOptions$1);
      TObject.Destroy(Self);
   }
   /// function TW3ErrorObject.GetExceptionClass() : TW3ExceptionClass
   ///  [line: 356, column: 25, file: System.Objects]
   ,GetExceptionClass:function(Self) {
      return EW3ErrorObject;
   }
   /// function TW3ErrorObject.GetFailed() : Boolean
   ///  [line: 305, column: 25, file: System.Objects]
   ,GetFailed$1:function(Self) {
      return Self.FLastError$1.length > 0;
   }
   /// function TW3ErrorObject.GetLastError() : String
   ///  [line: 300, column: 25, file: System.Objects]
   ,GetLastError$1:function(Self) {
      return Self.FLastError$1;
   }
   /// procedure TW3ErrorObject.SetLastError(const ErrorText: String)
   ///  [line: 310, column: 26, file: System.Objects]
   ,SetLastError$1:function(Self, ErrorText) {
      var ErrClass = null;
      Self.FLastError$1 = Trim$_String_(ErrorText);
      if (Self.FLastError$1.length > 0) {
         if (Self.FOptions$1.AutoWriteToConsole) {
            if (console) {
          console.log( (Self.FLastError$1) );
       }
         }
         if (Self.FOptions$1.ThrowExceptions) {
            ErrClass = TW3ErrorObject.GetExceptionClass(Self);
            if (!ErrClass) {
               ErrClass = EW3ErrorObject;
            }
            throw Exception.Create($NewDyn(ErrClass,""),Self.FLastError$1);
         }
      }
   }
   /// procedure TW3ErrorObject.SetLastErrorF(const ErrorText: String; const Values: array of const)
   ///  [line: 345, column: 26, file: System.Objects]
   ,SetLastErrorF$1:function(Self, ErrorText, Values$11) {
      TW3ErrorObject.SetLastError$1(Self,Format(ErrorText,Values$11.slice(0)));
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$71$:function($){return $.ClassType.Create$71($)}
};
TW3ErrorObject.$Intf={
   IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// EW3ErrorObject = class (EW3Exception)
///  [line: 21, column: 3, file: System.Objects]
var EW3ErrorObject = {
   $ClassName:"EW3ErrorObject",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
function DateTimeToJDate(Present) {
   var Result = null;
   Result = new Date();
   Result.setTime(Math.round((Present-25569) * 86400000));
   return Result
};
var CNT_DaysInMonthData = [[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];
/// TStream = class (TObject)
///  [line: 80, column: 3, file: System.Streams]
var TStream = {
   $ClassName:"TStream",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 109, column: 33, file: System.Streams]
   ,a$41:function(Self) {
      var Result = false;
      Result = TStream.GetPosition$(Self) == TStream.GetSize$(Self);
      return Result
   }
   // IGNORED: TStream.CopyFrom
   /// function TStream.DataGetSize() : Integer
   ///  [line: 435, column: 18, file: System.Streams]
   ,DataGetSize:function(Self) {
      return TStream.GetSize$(Self);
   }
   /// function TStream.DataOffset() : Integer
   ///  [line: 429, column: 18, file: System.Streams]
   ,DataOffset:function(Self) {
      return TStream.GetPosition$(Self);
   }
   /// function TStream.DataRead(const Offset: Integer; const ByteCount: Integer) : TByteArray
   ///  [line: 441, column: 19, file: System.Streams]
   ,DataRead:function(Self, Offset$5, ByteCount) {
      return TStream.ReadBuffer$(Self,Offset$5,ByteCount);
   }
   /// procedure TStream.DataWrite(const Offset: Integer; const Bytes: TByteArray)
   ///  [line: 447, column: 19, file: System.Streams]
   ,DataWrite:function(Self, Offset$5, Bytes$3) {
      TStream.WriteBuffer$(Self,Bytes$3,Offset$5);
   }
   /// function TStream.GetPosition() : Integer
   ///  [line: 475, column: 18, file: System.Streams]
   ,GetPosition:function(Self) {
      var Result = 0;
      Result = 0;
      throw Exception.Create($New(EStreamNotImplemented),$R[5]);
      return Result
   }
   /// function TStream.GetSize() : Integer
   ///  [line: 497, column: 18, file: System.Streams]
   ,GetSize:function(Self) {
      var Result = 0;
      Result = 0;
      throw Exception.Create($New(EStreamNotImplemented),$R[5]);
      return Result
   }
   /// function TStream.Read(const Count: Integer) : TByteArray
   ///  [line: 452, column: 18, file: System.Streams]
   ,Read:function(Self, Count$25) {
      return TStream.ReadBuffer$(Self,TStream.GetPosition$(Self),Count$25);
   }
   /// function TStream.ReadBuffer(Offset: Integer; Count: Integer) : TByteArray
   ///  [line: 509, column: 18, file: System.Streams]
   ,ReadBuffer:function(Self, Offset$5, Count$25) {
      var Result = [];
      Result.length=0;
      throw Exception.Create($New(EStreamNotImplemented),$R[5]);
      return Result
   }
   // IGNORED: TStream.Seek
   /// procedure TStream.SetPosition(NewPosition: Integer)
   ///  [line: 481, column: 19, file: System.Streams]
   ,SetPosition:function(Self, NewPosition) {
      throw Exception.Create($New(EStreamNotImplemented),$R[5]);
   }
   /// procedure TStream.SetSize(NewSize: Integer)
   ///  [line: 486, column: 19, file: System.Streams]
   ,SetSize:function(Self, NewSize) {
      throw Exception.Create($New(EStreamNotImplemented),$R[5]);
   }
   // IGNORED: TStream.Skip
   /// function TStream.Write(const Buffer: TByteArray) : Integer
   ///  [line: 457, column: 18, file: System.Streams]
   ,Write:function(Self, Buffer$3) {
      var Result = 0;
      TStream.WriteBuffer$(Self,Buffer$3,TStream.GetPosition$(Self));
      Result = Buffer$3.length;
      return Result
   }
   /// procedure TStream.WriteBuffer(const Buffer: TByteArray; Offset: Integer)
   ///  [line: 515, column: 19, file: System.Streams]
   ,WriteBuffer:function(Self, Buffer$3, Offset$5) {
      throw Exception.Create($New(EStreamNotImplemented),$R[5]);
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TStream.CopyFrom
   ,GetPosition$:function($){return $.ClassType.GetPosition($)}
   ,GetSize$:function($){return $.ClassType.GetSize($)}
   ,ReadBuffer$:function($){return $.ClassType.ReadBuffer.apply($.ClassType, arguments)}
   // IGNORED: TStream.Seek
   ,SetPosition$:function($){return $.ClassType.SetPosition.apply($.ClassType, arguments)}
   ,SetSize$:function($){return $.ClassType.SetSize.apply($.ClassType, arguments)}
   // IGNORED: TStream.Skip
   ,WriteBuffer$:function($){return $.ClassType.WriteBuffer.apply($.ClassType, arguments)}
};
TStream.$Intf={
   IBinaryTransport:[TStream.DataOffset,TStream.DataGetSize,TStream.DataRead,TStream.DataWrite]
}
/// TMemoryStream = class (TStream)
///  [line: 117, column: 3, file: System.Streams]
var TMemoryStream = {
   $ClassName:"TMemoryStream",$Parent:TStream
   ,$Init:function ($) {
      TStream.$Init($);
      $.FBuffer = null;
      $.FPos = 0;
   }
   // IGNORED: TMemoryStream.CopyFrom
   /// constructor TMemoryStream.Create()
   ///  [line: 246, column: 27, file: System.Streams]
   ,Create$72:function(Self) {
      TObject.Create(Self);
      Self.FBuffer = TAllocation.Create$78($New(TAllocation));
      return Self
   }
   /// destructor TMemoryStream.Destroy()
   ///  [line: 252, column: 26, file: System.Streams]
   ,Destroy:function(Self) {
      TObject.Free(Self.FBuffer);
      TObject.Destroy(Self);
   }
   /// function TMemoryStream.GetPosition() : Integer
   ///  [line: 265, column: 24, file: System.Streams]
   ,GetPosition:function(Self) {
      return Self.FPos;
   }
   /// function TMemoryStream.GetSize() : Integer
   ///  [line: 340, column: 24, file: System.Streams]
   ,GetSize:function(Self) {
      return TAllocation.GetSize$3(Self.FBuffer);
   }
   /// function TMemoryStream.ReadBuffer(Offset: Integer; Count: Integer) : TByteArray
   ///  [line: 361, column: 24, file: System.Streams]
   ,ReadBuffer:function(Self, Offset$5, Count$25) {
      var Result = [];
      var mTemp$1 = undefined,
         mLen = 0,
         LBytesToMove = 0;
      if (TStream.GetPosition$(Self) < TStream.GetSize$(Self)) {
         mLen = TStream.GetSize$(Self)-TStream.GetPosition$(Self);
      } else {
         mLen = 0;
      }
      if (mLen > 0) {
         try {
            LBytesToMove = Count$25;
            if (LBytesToMove > mLen) {
               LBytesToMove = mLen;
            }
            mTemp$1 = new Uint8Array(LBytesToMove);
            TMarshal.Move$1(TMarshal,TAllocation.GetHandle(Self.FBuffer),Offset$5,mTemp$1,0,LBytesToMove);
            Result = TDatatype.TypedArrayToBytes(TDatatype,mTemp$1);
            TStream.SetPosition$(Self,Offset$5+Result.length);
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.CreateFmt($New(EStreamReadError),$R[8],[e$1.FMessage]);
         }
      }
      return Result
   }
   // IGNORED: TMemoryStream.Seek
   /// procedure TMemoryStream.SetPosition(NewPosition: Integer)
   ///  [line: 270, column: 25, file: System.Streams]
   ,SetPosition:function(Self, NewPosition) {
      var LSize = 0;
      LSize = TStream.GetSize$(Self);
      if (LSize > 0) {
         Self.FPos = TInteger.EnsureRange(NewPosition,0,LSize);
      }
   }
   /// procedure TMemoryStream.SetSize(NewSize: Integer)
   ///  [line: 277, column: 25, file: System.Streams]
   ,SetSize:function(Self, NewSize) {
      var mSize = 0,
         mDiff = 0;
      mSize = TStream.GetSize$(Self);
      if (NewSize > 0) {
         if (NewSize > mSize) {
            mDiff = NewSize-mSize;
            if (TAllocation.GetSize$3(Self.FBuffer)+mDiff > 0) {
               TAllocation.Grow(Self.FBuffer,mDiff);
            } else {
               TAllocation.Release$2(Self.FBuffer);
            }
         } else {
            mDiff = mSize-NewSize;
            if (TAllocation.GetSize$3(Self.FBuffer)-mDiff > 0) {
               TAllocation.Shrink(Self.FBuffer,mDiff);
            } else {
               TAllocation.Release$2(Self.FBuffer);
            }
         }
      } else {
         TAllocation.Release$2(Self.FBuffer);
      }
      Self.FPos = TInteger.EnsureRange(Self.FPos,0,TStream.GetSize$(Self));
   }
   // IGNORED: TMemoryStream.Skip
   /// procedure TMemoryStream.WriteBuffer(const Buffer: TByteArray; Offset: Integer)
   ///  [line: 393, column: 25, file: System.Streams]
   ,WriteBuffer:function(Self, Buffer$3, Offset$5) {
      var mData = undefined;
      try {
         if (TAllocation.a$45(Self.FBuffer) && Offset$5 < 1) {
            TAllocation.Allocate$1(Self.FBuffer,Buffer$3.length);
            mData = TDatatype.BytesToTypedArray(TDatatype,Buffer$3);
            TMarshal.Move$1(TMarshal,mData,0,TAllocation.GetHandle(Self.FBuffer),0,Buffer$3.length);
         } else {
            if (TStream.GetPosition$(Self) == TStream.GetSize$(Self)) {
               TAllocation.Grow(Self.FBuffer,Buffer$3.length);
               mData = TDatatype.BytesToTypedArray(TDatatype,Buffer$3);
               TMarshal.Move$1(TMarshal,mData,0,TAllocation.GetHandle(Self.FBuffer),Offset$5,Buffer$3.length);
            } else {
               TMarshal.Move$1(TMarshal,TDatatype.BytesToTypedArray(TDatatype,Buffer$3),0,TAllocation.GetHandle(Self.FBuffer),Offset$5,Buffer$3.length);
            }
         }
         TStream.SetPosition$(Self,Offset$5+Buffer$3.length);
      } catch ($e) {
         var e$1 = $W($e);
         throw EW3Exception.CreateFmt($New(EStreamWriteError),$R[7],[e$1.FMessage]);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   // IGNORED: TMemoryStream.CopyFrom
   ,GetPosition$:function($){return $.ClassType.GetPosition($)}
   ,GetSize$:function($){return $.ClassType.GetSize($)}
   ,ReadBuffer$:function($){return $.ClassType.ReadBuffer.apply($.ClassType, arguments)}
   // IGNORED: TMemoryStream.Seek
   ,SetPosition$:function($){return $.ClassType.SetPosition.apply($.ClassType, arguments)}
   ,SetSize$:function($){return $.ClassType.SetSize.apply($.ClassType, arguments)}
   // IGNORED: TMemoryStream.Skip
   ,WriteBuffer$:function($){return $.ClassType.WriteBuffer.apply($.ClassType, arguments)}
};
TMemoryStream.$Intf={
   IBinaryTransport:[TStream.DataOffset,TStream.DataGetSize,TStream.DataRead,TStream.DataWrite]
}
/// TStreamSeekOrigin enumeration
///  [line: 48, column: 3, file: System.Streams]
var TStreamSeekOrigin = [ "soFromBeginning", "soFromCurrent", "soFromEnd" ];
/// TAddress = class (TObject)
///  [line: 95, column: 3, file: System.Memory]
var TAddress = {
   $ClassName:"TAddress",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FBuffer$1 = undefined;
      $.FOffset = 0;
   }
   /// constructor TAddress.Create(const Memory: TBinaryData)
   ///  [line: 220, column: 22, file: System.Memory.Buffer]
   ,Create$76:function(Self, Memory$1) {
      if (Memory$1 !== null && TAllocation.GetSize$3(Memory$1) > 0) {
         TAddress.Create$74(Self,TAllocation.GetHandle(Memory$1),0);
      } else {
         throw Exception.Create($New(Exception),"Invalid memory object error");
      }
      return Self
   }
   /// constructor TAddress.Create(const Stream: TStream)
   ///  [line: 224, column: 22, file: System.Streams]
   ,Create$75:function(Self, Stream$1) {
      var mRef = undefined;
      if ($Is(Stream$1,TMemoryStream)) {
         mRef = TAllocation.GetHandle($As(Stream$1,TMemoryStream).FBuffer);
         if (mRef) {
            TAddress.Create$74(Self,mRef,0);
         } else {
            throw Exception.Create($New(EAddress),$R[3]);
         }
      } else {
         throw Exception.Create($New(EAddress),$R[4]);
      }
      return Self
   }
   /// constructor TAddress.Create(const Segment: TBufferHandle; const Offset: Integer)
   ///  [line: 651, column: 22, file: System.Memory]
   ,Create$74:function(Self, Segment$1, Offset$5) {
      TObject.Create(Self);
      if (Segment$1 && TBufferHandleHelper$Valid$6(Segment$1)) {
         Self.FBuffer$1 = Segment$1;
      } else {
         throw Exception.Create($New(EAddress),"Failed to derive address, invalid segment error");
      }
      if (Offset$5 >= 0) {
         Self.FOffset = Offset$5;
      } else {
         throw Exception.Create($New(EAddress),"Failed to derive address, invalid offset error");
      }
      return Self
   }
   /// destructor TAddress.Destroy()
   ///  [line: 665, column: 21, file: System.Memory]
   ,Destroy:function(Self) {
      Self.FBuffer$1 = null;
      Self.FOffset = 0;
      TObject.Destroy(Self);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// EStream = class (EW3Exception)
///  [line: 56, column: 3, file: System.Streams]
var EStream = {
   $ClassName:"EStream",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EStreamWriteError = class (EStream)
///  [line: 58, column: 3, file: System.Streams]
var EStreamWriteError = {
   $ClassName:"EStreamWriteError",$Parent:EStream
   ,$Init:function ($) {
      EStream.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EStreamReadError = class (EStream)
///  [line: 57, column: 3, file: System.Streams]
var EStreamReadError = {
   $ClassName:"EStreamReadError",$Parent:EStream
   ,$Init:function ($) {
      EStream.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EStreamNotImplemented = class (EStream)
///  [line: 59, column: 3, file: System.Streams]
var EStreamNotImplemented = {
   $ClassName:"EStreamNotImplemented",$Parent:EStream
   ,$Init:function ($) {
      EStream.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TValuePrefixType enumeration
///  [line: 52, column: 3, file: System.Types.Convert]
var TValuePrefixType = [ "vpNone", "vpHexPascal", "vpHexC", "vpBinPascal", "vpBinC", "vpString" ];
function TryStrToBool(Data$8, Value$5) {
   return TDatatype.ExamineBoolean(Data$8,Value$5);
};
/// TRTLDatatype enumeration
///  [line: 37, column: 3, file: System.Types.Convert]
var TRTLDatatype = [ "itUnknown", "itBoolean", "itByte", "itChar", "itWord", "itLong", "itInt16", "itInt32", "itFloat32", "itFloat64", "itString" ];
/// TDatatype = class (TObject)
///  [line: 66, column: 3, file: System.Types.Convert]
var TDatatype = {
   $ClassName:"TDatatype",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TDatatype.Base64ToBytes(const Base64: String) : TByteArray
   ///  [line: 803, column: 26, file: System.Types.Convert]
   ,Base64ToBytes:function(Self, Base64) {
      return TBase64EncDec.Base64ToBytes$1(TBase64EncDec,Base64);
   }
   /// function TDatatype.BinaryStrToInt(BinStr: String) : Integer
   ///  [line: 1112, column: 26, file: System.Types.Convert]
   ,BinaryStrToInt:function(BinStr) {
      var Result = {v:0};
      try {
         if (!(TDatatype.ExamineBinary(BinStr,Result))) {
            throw EW3Exception.CreateFmt($New(EConvertBinaryStringInvalid),"Failed to convert binary string (%s)",[BinStr]);
         }
      } finally {return Result.v}
   }
   /// function TDatatype.BooleanToBytes(const Value: Boolean) : TByteArray
   ///  [line: 850, column: 26, file: System.Types.Convert]
   ,BooleanToBytes:function(Self, Value$5) {
      var Result = [];
      if (Value$5) {
         Result.push(1);
      } else {
         Result.push(0);
      }
      return Result
   }
   /// function TDatatype.BytesToBase64(const Bytes: TByteArray) : String
   ///  [line: 798, column: 26, file: System.Types.Convert]
   ,BytesToBase64:function(Self, Bytes$3) {
      return TBase64EncDec.BytesToBase64$1(TBase64EncDec,Bytes$3);
   }
   /// function TDatatype.BytesToBoolean(const Data: TByteArray) : Boolean
   ///  [line: 1063, column: 26, file: System.Types.Convert]
   ,BytesToBoolean:function(Self, Data$8) {
      var Result = false;
      if (Data$8.length >= 1) {
         Result = Data$8[0] > 0;
      } else {
         throw Exception.Create($New(EDatatype),"Byte conversion [Bool] failed, insufficient source");
      }
      return Result
   }
   /// function TDatatype.BytesToFloat32(const Data: TByteArray) : Float
   ///  [line: 1031, column: 26, file: System.Types.Convert]
   ,BytesToFloat32:function(Self, Data$8) {
      var Result = 0;
      if (Data$8.length >= 4) {
         __CONV_VIEW.setUint8(0,Data$8[0]);
         __CONV_VIEW.setUint8(1,Data$8[1]);
         __CONV_VIEW.setUint8(2,Data$8[2]);
         __CONV_VIEW.setUint8(3,Data$8[3]);
         Result = __CONV_VIEW.getFloat32(0,a$42);
      } else {
         throw Exception.Create($New(EDatatype),"Byte conversion [float32] failed, insufficient source");
      }
      return Result
   }
   /// function TDatatype.BytesToFloat64(const Data: TByteArray) : Float
   ///  [line: 1045, column: 26, file: System.Types.Convert]
   ,BytesToFloat64:function(Self, Data$8) {
      var Result = 0;
      if (Data$8.length >= 8) {
         __CONV_VIEW.setUint8(0,Data$8[0]);
         __CONV_VIEW.setUint8(1,Data$8[1]);
         __CONV_VIEW.setUint8(2,Data$8[2]);
         __CONV_VIEW.setUint8(3,Data$8[3]);
         __CONV_VIEW.setUint8(4,Data$8[4]);
         __CONV_VIEW.setUint8(5,Data$8[5]);
         __CONV_VIEW.setUint8(6,Data$8[6]);
         __CONV_VIEW.setUint8(7,Data$8[7]);
         Result = __CONV_VIEW.getFloat64(0,a$42);
      } else {
         throw Exception.Create($New(EDatatype),"Byte conversion [float32] failed, insufficient source");
      }
      return Result
   }
   /// function TDatatype.BytesToInt16(const Data: TByteArray) : Integer
   ///  [line: 1019, column: 26, file: System.Types.Convert]
   ,BytesToInt16:function(Self, Data$8) {
      var Result = 0;
      if (Data$8.length >= 2) {
         __CONV_VIEW.setUint8(0,Data$8[0]);
         __CONV_VIEW.setUint8(1,Data$8[1]);
         Result = __CONV_VIEW.getInt16(0,a$42);
      } else {
         throw Exception.Create($New(EDatatype),"Byte conversion [int16] failed, insufficient source");
      }
      return Result
   }
   /// function TDatatype.BytesToInt32(const Data: TByteArray) : Integer
   ///  [line: 1005, column: 26, file: System.Types.Convert]
   ,BytesToInt32:function(Self, Data$8) {
      var Result = 0;
      if (Data$8.length >= 4) {
         __CONV_VIEW.setUint8(0,Data$8[0]);
         __CONV_VIEW.setUint8(1,Data$8[1]);
         __CONV_VIEW.setUint8(2,Data$8[2]);
         __CONV_VIEW.setUint8(3,Data$8[3]);
         Result = __CONV_VIEW.getUint32(0,a$42);
      } else {
         throw Exception.Create($New(EDatatype),"Byte conversion [int32] failed, insufficient source");
      }
      return Result
   }
   /// function TDatatype.BytesToString(const Data: TByteArray) : String
   ///  [line: 838, column: 26, file: System.Types.Convert]
   ,BytesToString:function(Self, Data$8) {
      var Result = "";
      var x$39 = 0,
         LChar = "";
      if (Data$8.length > 0) {
         var $temp13;
         for(x$39=0,$temp13=Data$8.length;x$39<$temp13;x$39++) {
            LChar = TString.FromCharCode(TString,Data$8[x$39]);
            Result += LChar;
         }
      }
      return Result
   }
   /// function TDatatype.BytesToTypedArray(const Values: TByteArray) : TMemoryHandle
   ///  [line: 808, column: 26, file: System.Types.Convert]
   ,BytesToTypedArray:function(Self, Values$11) {
      var Result = undefined;
      var LLen$4 = 0;
      LLen$4 = Values$11.length;
      if (LLen$4 > 0) {
         Result = new Uint8Array(LLen$4);
         (Result).set(Values$11,0);
      } else {
         Result = null;
      }
      return Result
   }
   /// function TDatatype.BytesToVariant(Data: TByteArray) : Variant
   ///  [line: 887, column: 26, file: System.Types.Convert]
   ,BytesToVariant:function(Self, Data$8) {
      var Result = undefined;
      switch (TDatatype.BytesToInt32(Self,Data$8)) {
         case 4027514882 :
            Data$8.splice(0,4)
            ;
            Result = TDatatype.BytesToBoolean(Self,Data$8);
            break;
         case 4027514883 :
            Data$8.splice(0,4)
            ;
            Result = Data$8[0];
            break;
         case 4027514884 :
            Data$8.splice(0,4)
            ;
            Result = TDatatype.BytesToInt16(Self,Data$8);
            break;
         case 4027514885 :
            Data$8.splice(0,4)
            ;
            Result = TDatatype.BytesToInt32(Self,Data$8);
            break;
         case 4027514886 :
            Data$8.splice(0,4)
            ;
            Result = TDatatype.BytesToFloat32(Self,Data$8);
            break;
         case 4027514887 :
            Data$8.splice(0,4)
            ;
            Result = TDatatype.BytesToFloat64(Self,Data$8);
            break;
         case 4027514888 :
            Data$8.splice(0,4)
            ;
            try {
               Result = TString.DecodeUTF8(TString,Data$8);
            } catch ($e) {
               var e$1 = $W($e);
               throw Exception.Create($New(EW3Exception),e$1.FMessage);
            }
            break;
         default :
            throw Exception.Create($New(EDatatype),"Failed to convert bytes[] to intrinsic type, unknown identifier error");
      }
      return Result
   }
   /// function TDatatype.ByteToChar(const Value: Byte) : Char
   ///  [line: 768, column: 26, file: System.Types.Convert]
   ,ByteToChar:function(Self, Value$5) {
      var Result = "";
      Result = String.fromCharCode(Value$5);
      return Result
   }
   /// function TDatatype.CharToByte(const Value: Char) : Word
   ///  [line: 775, column: 26, file: System.Types.Convert]
   ,CharToByte:function(Self, Value$5) {
      var Result = 0;
      Result = (Value$5).charCodeAt(0);
      return Result
   }
   /// function TDatatype.CreateGUID() : String
   ///  [line: 572, column: 26, file: System.Types.Convert]
   ,CreateGUID:function(Self) {
      var Result = "";
      var s = [];
    var hexDigits = "0123456789abcdef";
    for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
    }
    s[14] = "4";
    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = "-";

    Result = s.join("");
      Result = (Result).toUpperCase();
      return Result
   }
   /// function TDatatype.ExamineBinary(Text: String; var value: Longword) : Boolean
   ///  [line: 1268, column: 26, file: System.Types.Convert]
   ,ExamineBinary:function(Text$10, value$16) {
      var Result = false;
      var BitIndex = 0,
         x$39 = 0;
      value$16.v = TDatatype.InitUint32();
      if ((Text$10.charAt(0)=="%")) {
         Text$10 = (Text$10).substring(1);
      } else if ((Text$10.substr(0,2)=="0b")) {
         Text$10 = (Text$10).substring(2);
      }
      if (!(TDatatype.ValidBinChars(Text$10))) {
         Result = false;
         return Result;
      }
      BitIndex = 0;
      for(x$39=Text$10.length;x$39>=1;x$39--) {
         if (Text$10.charAt(x$39-1) == "1") {
            TInteger.SetBit(BitIndex,true,value$16);
         }
         ++BitIndex;
         if (BitIndex > 31) {
            break;
         }
      }
      Result = true;
      return Result
   }
   /// function TDatatype.ExamineBoolean(Text: String; var Value: Boolean) : Boolean
   ///  [line: 1456, column: 26, file: System.Types.Convert]
   ,ExamineBoolean:function(Text$10, Value$5) {
      var Result = false;
      Text$10 = Trim$_String_(Text$10);
      {var $temp14 = (Text$10).toLocaleLowerCase();
         if ($temp14=="true") {
            Result = true;
            Value$5.v = true;
         }
          else if ($temp14=="yes") {
            Result = true;
            Value$5.v = true;
         }
          else if ($temp14=="false") {
            Result = true;
            Value$5.v = false;
         }
          else if ($temp14=="no") {
            Result = true;
            Value$5.v = false;
         }
      }
      return Result
   }
   /// function TDatatype.ExamineInteger(Text: String; var Value: Integer) : Boolean
   ///  [line: 1390, column: 26, file: System.Types.Convert]
   ,ExamineInteger:function(Text$10, Value$5) {
      var Result = false;
      var TextLen = 0,
         Prefix$1 = {v:0};
      Text$10 = Trim$_String_(Text$10);
      TextLen = Text$10.length;
      if (TextLen > 0) {
         Prefix$1.v = 0;
         if (TDatatype.ExaminePrefixType(Text$10,Prefix$1)) {
            switch (Prefix$1.v) {
               case 1 :
                  --TextLen;
                  Text$10 = RightStr(Text$10,TextLen);
                  Result = TDatatype.ValidHexChars(Text$10);
                  if (Result) {
                     Value$5.v = parseInt("0x" + Text$10,16);
                  }
                  break;
               case 2 :
                  (TextLen-= 2);
                  Text$10 = RightStr(Text$10,TextLen);
                  Result = TDatatype.ValidHexChars(Text$10);
                  if (Result) {
                     Value$5.v = parseInt("0x" + Text$10,16);
                  }
                  break;
               case 3 :
                  --TextLen;
                  Text$10 = RightStr(Text$10,TextLen);
                  Result = TDatatype.ValidBinChars(Text$10);
                  if (Result) {
                     Value$5.v = TDatatype.BinaryStrToInt(Text$10);
                  }
                  break;
               case 4 :
                  (TextLen-= 2);
                  Text$10 = RightStr(Text$10,TextLen);
                  Result = TDatatype.ValidBinChars(Text$10);
                  if (Result) {
                     Value$5.v = TDatatype.BinaryStrToInt(Text$10);
                  }
                  break;
               case 5 :
                  return Result;
                  break;
               default :
                  Result = TDatatype.ValidDecChars(Text$10);
                  if (Result) {
                     Value$5.v = parseInt(Text$10,10);
                  }
            }
         } else {
            Result = TDatatype.ValidDecChars(Text$10);
            if (Result) {
               Value$5.v = parseInt(Text$10,10);
            }
         }
      }
      return Result
   }
   /// function TDatatype.ExaminePrefixType(const Text: String; var Prefix: TValuePrefixType) : Boolean
   ///  [line: 1124, column: 26, file: System.Types.Convert]
   ,ExaminePrefixType:function(Text$10, Prefix$1) {
      var Result = false;
      Prefix$1.v = 0;
      if (Text$10.length > 0) {
         if ((Text$10.charAt(0)=="$")) {
            Prefix$1.v = 1;
         } else if ((Text$10.substr(0,2)=="0x")) {
            Prefix$1.v = 2;
         } else if ((Text$10.charAt(0)=="%")) {
            Prefix$1.v = 3;
         } else if ((Text$10.substr(0,2)=="0b")) {
            Prefix$1.v = 4;
         } else if ((Text$10.charAt(0)=="\"")) {
            Prefix$1.v = 5;
         }
         Result = (Prefix$1.v!=0);
      }
      return Result
   }
   /// function TDatatype.Float32ToBytes(Value: float32) : TByteArray
   ///  [line: 858, column: 26, file: System.Types.Convert]
   ,Float32ToBytes:function(Self, Value$5) {
      var Result = [];
      __CONV_VIEW.setFloat32(0,Value$5,a$42);
      Result.push(__CONV_VIEW.getUint8(0));
      Result.push(__CONV_VIEW.getUint8(1));
      Result.push(__CONV_VIEW.getUint8(2));
      Result.push(__CONV_VIEW.getUint8(3));
      return Result
   }
   /// function TDatatype.Float64ToBytes(Value: float64) : TByteArray
   ///  [line: 867, column: 26, file: System.Types.Convert]
   ,Float64ToBytes:function(Self, Value$5) {
      var Result = [];
      __CONV_VIEW.setFloat64(0,Number(Value$5),a$42);
      Result.push(__CONV_VIEW.getUint8(0));
      Result.push(__CONV_VIEW.getUint8(1));
      Result.push(__CONV_VIEW.getUint8(2));
      Result.push(__CONV_VIEW.getUint8(3));
      Result.push(__CONV_VIEW.getUint8(4));
      Result.push(__CONV_VIEW.getUint8(5));
      Result.push(__CONV_VIEW.getUint8(6));
      Result.push(__CONV_VIEW.getUint8(7));
      return Result
   }
   /// function TDatatype.HexStrToInt(HexStr: String) : Integer
   ///  [line: 1118, column: 26, file: System.Types.Convert]
   ,HexStrToInt:function(HexStr) {
      var Result = {v:0};
      try {
         if (!(TDatatype.ExamineInteger(HexStr,Result))) {
            throw EW3Exception.CreateFmt($New(EConvertHexStringInvalid),"Failed to convert hex string (%s)",[HexStr]);
         }
      } finally {return Result.v}
   }
   /// function TDatatype.InitUint32() : Longword
   ///  [line: 1091, column: 26, file: System.Types.Convert]
   ,InitUint32:function() {
      var Result = 0;
      var temp$1 = null;
      temp$1 = new Uint32Array(1);
      Result = temp$1[0];
      temp$1 = null;
      return Result
   }
   /// function TDatatype.Int16ToBytes(Value: Integer) : TByteArray
   ///  [line: 880, column: 26, file: System.Types.Convert]
   ,Int16ToBytes:function(Self, Value$5) {
      var Result = [];
      __CONV_VIEW.setInt16(0,Value$5,a$42);
      Result.push(__CONV_VIEW.getUint8(0));
      Result.push(__CONV_VIEW.getUint8(1));
      return Result
   }
   /// function TDatatype.Int32ToBytes(Value: Integer) : TByteArray
   ///  [line: 996, column: 26, file: System.Types.Convert]
   ,Int32ToBytes:function(Self, Value$5) {
      var Result = [];
      __CONV_VIEW.setUint32(0,Value$5,a$42);
      Result.push(__CONV_VIEW.getUint8(0));
      Result.push(__CONV_VIEW.getUint8(1));
      Result.push(__CONV_VIEW.getUint8(2));
      Result.push(__CONV_VIEW.getUint8(3));
      return Result
   }
   /// function TDatatype.NameOfType(const Kind: TRTLDatatype) : String
   ///  [line: 547, column: 26, file: System.Types.Convert]
   ,NameOfType:function(Self, Kind) {
      return _NAMES[Kind];
   }
   /// function TDatatype.SizeOfType(const Kind: TRTLDatatype) : Integer
   ///  [line: 542, column: 26, file: System.Types.Convert]
   ,SizeOfType:function(Self, Kind) {
      return __SIZES[Kind];
   }
   /// function TDatatype.StringToBytes(const Value: String) : TByteArray
   ///  [line: 822, column: 26, file: System.Types.Convert]
   ,StringToBytes:function(Self, Value$5) {
      var Result = [];
      var LLen$4 = 0,
         x$39 = 0,
         LCode = 0;
      LLen$4 = Value$5.length;
      if (LLen$4 > 0) {
         var $temp15;
         for(x$39=0,$temp15=LLen$4;x$39<$temp15;x$39++) {
            LCode = 0;
            LCode = (Value$5).charCodeAt(x$39);
            Result.push(LCode);
         }
      }
      return Result
   }
   /// function TDatatype.TypeByName(TypeName: String) : TRTLDatatype
   ///  [line: 552, column: 26, file: System.Types.Convert]
   ,TypeByName:function(Self, TypeName) {
      var Result = 0;
      var x$39 = 0,
         a$396 = 0,
         Name$13 = "";
      TypeName = Trim$_String_((TypeName).toLocaleLowerCase());
      if (TypeName.length > 0) {
         x$39 = 0;
         for(a$396=0;a$396<=10;a$396++) {
            Name$13 = _NAMES[a$396];
            if ((Name$13).toLocaleLowerCase() == TypeName) {
               Result = x$39;
               break;
            }
            ++x$39;
         }
      } else {
         Result = 0;
      }
      return Result
   }
   /// function TDatatype.TypedArrayToBytes(const Value: TDefaultBufferType) : TByteArray
   ///  [line: 589, column: 27, file: System.Types.Convert]
   ,TypedArrayToBytes:function(Self, Value$5) {
      var Result = [];
      if (TVariant.ValidRef(Value$5)) {
         Result = Array.prototype.slice.call(Value$5);
      }
      return Result
   }
   /// function TDatatype.TypedArrayToStr(const Value: TDefaultBufferType) : String
   ///  [line: 635, column: 26, file: System.Types.Convert]
   ,TypedArrayToStr:function(Self, Value$5) {
      var Result = "";
      var x$39 = 0;
      if (TVariant.ValidRef(Value$5)) {
         if (Value$5.length > 0) {
            var $temp16;
            for(x$39=0,$temp16=Value$5.length;x$39<$temp16;x$39++) {
               Result += String.fromCharCode((Value$5)[x$39]);
            }
         }
      }
      return Result
   }
   /// function TDatatype.TypedArrayToUInt32(const Value: TDefaultBufferType) : Integer
   ///  [line: 625, column: 26, file: System.Types.Convert]
   ,TypedArrayToUInt32:function(Self, Value$5) {
      var Result = 0;
      var mTemp$1 = null;
      mTemp$1 = new Uint32Array((Value$5).buffer);
      Result = mTemp$1[0];
      return Result
   }
   /// function TDatatype.ValidBinChars(const Text: String) : Boolean
   ///  [line: 1380, column: 26, file: System.Types.Convert]
   ,ValidBinChars:function(Text$10) {
      var Result = false;
      var character = "";
      for (var $temp17=0;$temp17<Text$10.length;$temp17++) {
         character=$uniCharAt(Text$10,$temp17);
         if (!character) continue;
         Result = ((character=="0")||(character=="1"));
         if (!(Result)) {
            break;
         }
      }
      return Result
   }
   /// function TDatatype.ValidDecChars(const Text: String) : Boolean
   ///  [line: 1370, column: 26, file: System.Types.Convert]
   ,ValidDecChars:function(Text$10) {
      var Result = false;
      var character = "";
      for (var $temp18=0;$temp18<Text$10.length;$temp18++) {
         character=$uniCharAt(Text$10,$temp18);
         if (!character) continue;
         Result = character>="0" && character<="9";
         if (!(Result)) {
            break;
         }
      }
      return Result
   }
   /// function TDatatype.ValidHexChars(const Text: String) : Boolean
   ///  [line: 1360, column: 26, file: System.Types.Convert]
   ,ValidHexChars:function(Text$10) {
      var Result = false;
      var character = "";
      for (var $temp19=0;$temp19<Text$10.length;$temp19++) {
         character=$uniCharAt(Text$10,$temp19);
         if (!character) continue;
         Result = ((character>="0" && character<="9")||(character>="a" && character<="f")||(character>="A" && character<="F"));
         if (!(Result)) {
            break;
         }
      }
      return Result
   }
   /// function TDatatype.VariantToBytes(Value: Variant) : TByteArray
   ///  [line: 938, column: 26, file: System.Types.Convert]
   ,VariantToBytes:function(Self, Value$5) {
      var Result = [];
      var chunk = [];
      function IsFloat32(x$39) {
         var Result = false;
         Result = isFinite(x$39) && x$39 == Math.fround(x$39);
         return Result
      };
      switch (TW3VariantHelper$DataType(Value$5)) {
         case 2 :
            Result = TDatatype.Int32ToBytes(Self,4027514882);
            Result.pusha(TDatatype.BooleanToBytes(Self,$VarToBool(Value$5)));
            break;
         case 3 :
            if (Value$5 >= 0 && Value$5 <= 255) {
               Result = TDatatype.Int32ToBytes(Self,4027514883);
               Result.push($VarToInt(Value$5,""));
            } else if (Value$5 >= 0 && Value$5 < 65536) {
               Result = TDatatype.Int32ToBytes(Self,4027514884);
               Result.pusha(TDatatype.Int16ToBytes(Self,$VarToInt(Value$5,"")));
            } else {
               Result = TDatatype.Int32ToBytes(Self,4027514885);
               Result.pusha(TDatatype.Int32ToBytes(Self,$VarToInt(Value$5,"")));
            }
            break;
         case 4 :
            if (IsFloat32(Value$5)) {
               Result = TDatatype.Int32ToBytes(Self,4027514886);
               Result.pusha(TDatatype.Float32ToBytes(Self,Number(Value$5)));
            } else {
               Result = TDatatype.Int32ToBytes(Self,4027514887);
               Result.pusha(TDatatype.Float64ToBytes(Self,Number(Value$5)));
            }
            break;
         case 5 :
            Result = TDatatype.Int32ToBytes(Self,4027514888);
            chunk = TString.EncodeUTF8(TString,String(Value$5));
            Result.pusha(chunk);
            break;
         default :
            throw Exception.Create($New(EDatatype),"Invalid datatype, byte conversion failed error");
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TBase64EncDec = class (TObject)
///  [line: 188, column: 3, file: System.Types.Convert]
var TBase64EncDec = {
   $ClassName:"TBase64EncDec",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TBase64EncDec.Base64ToBytes(const b64: String) : TByteArray
   ///  [line: 376, column: 30, file: System.Types.Convert]
   ,Base64ToBytes$1:function(Self, b64) {
      var Result = [];
      var ASeg = 0,
         BSeg = 0,
         CSeg = 0,
         DSeg = 0,
         LTextLen = 0,
         LPlaceholderCount = 0,
         BufferSize = 0,
         xpos$1 = 0,
         idx = 0,
         temp$1 = 0,
         temp$2 = 0,
         temp$3 = 0;
      LTextLen = b64.length;
      if (LTextLen > 0) {
         LPlaceholderCount = 0;
         if (LTextLen % 4 < 1) {
            LPlaceholderCount = (b64.charAt((LTextLen-1)-1) == "=")?2:(b64.charAt(LTextLen-1) == "=")?1:0;
         }
         BufferSize = ($Div(LTextLen * 3,4))-LPlaceholderCount;
         $ArraySetLenC(Result,BufferSize,function (){return 0});
         if (LPlaceholderCount > 0) {
            (LTextLen-= 4);
         }
         xpos$1 = 1;
         idx = 0;
         while (xpos$1 < LTextLen) {
            ASeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1-1))]<<18;
            BSeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1))]<<12;
            CSeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1+1))]<<6;
            DSeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1+2))];
            temp$1 = ((ASeg|BSeg)|CSeg)|DSeg;
            Result[idx]=(temp$1>>>16)&255;
            ++idx;
            Result[idx]=(temp$1>>>8)&255;
            ++idx;
            Result[idx]=temp$1&255;
            ++idx;
            (xpos$1+= 4);
         }
         switch (LPlaceholderCount) {
            case 1 :
               ASeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1-1))]<<2;
               BSeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1))]>>>4;
               temp$2 = ASeg|BSeg;
               Result[idx]=temp$2&255;
               break;
            case 2 :
               ASeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1-1))]<<10;
               BSeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1))]<<4;
               CSeg = __B64_RevLookup[TDatatype.CharToByte(TDatatype,b64.charAt(xpos$1+1))]>>>2;
               temp$3 = (ASeg|BSeg)|CSeg;
               Result[idx]=(temp$3>>>8)&255;
               ++idx;
               Result[idx]=temp$3&255;
               break;
         }
      }
      return Result
   }
   /// function TBase64EncDec.Base64ToString(const b64: String) : String
   ///  [line: 325, column: 30, file: System.Types.Convert]
   ,Base64ToString:function(Self, b64) {
      var Result = "";
      Result = atob(b64);
      return Result
   }
   /// function TBase64EncDec.BytesToBase64(const Data: TByteArray) : String
   ///  [line: 429, column: 30, file: System.Types.Convert]
   ,BytesToBase64$1:function(Self, Data$8) {
      var Result = "";
      var LParts = [],
         LLen$4 = 0,
         LExtra = 0,
         LStrideLen = 0,
         LMaxChunkLength = 0,
         i$5 = 0,
         Ahead = 0,
         SegSize = 0,
         output = "",
         LTemp = 0,
         LTemp$1 = 0;
      LLen$4 = Data$8.length;
      if (LLen$4 > 0) {
         LExtra = Data$8.length % 3;
         LStrideLen = LLen$4-LExtra;
         LMaxChunkLength = 16383;
         i$5 = 0;
         while (i$5 < LStrideLen) {
            Ahead = i$5+LMaxChunkLength;
            SegSize = (Ahead > LStrideLen)?LStrideLen:Ahead;
            LParts.push(TBase64EncDec.EncodeChunk(Self,Data$8,i$5,SegSize));
            (i$5+= LMaxChunkLength);
         }
         if (LExtra > 0) {
            --LLen$4;
         }
         output = "";
         switch (LExtra) {
            case 1 :
               LTemp = Data$8[LLen$4];
               output += __B64_Lookup[LTemp>>>2];
               output += __B64_Lookup[(LTemp<<4)&63];
               output += "==";
               break;
            case 2 :
               LTemp$1 = (Data$8[LLen$4-1]<<8)+Data$8[LLen$4];
               output += __B64_Lookup[LTemp$1>>>10];
               output += __B64_Lookup[(LTemp$1>>>4)&63];
               output += __B64_Lookup[(LTemp$1<<2)&63];
               output += "=";
               break;
         }
         LParts.push(output);
         Result = LParts.join("");
      }
      return Result
   }
   /// function TBase64EncDec.EncodeChunk(const Data: TByteArray; startpos: Integer; endpos: Integer) : String
   ///  [line: 340, column: 30, file: System.Types.Convert]
   ,EncodeChunk:function(Self, Data$8, startpos, endpos) {
      var Result = "";
      var temp$1 = 0,
         output = [];
      while (startpos < endpos) {
         temp$1 = (Data$8[startpos]<<16)+(Data$8[startpos+1]<<8)+Data$8[startpos+2];
         output.push(TBase64EncDec.TripletToBase64(Self,temp$1));
         (startpos+= 3);
      }
      Result = output.join("");
      return Result
   }
   /// function TBase64EncDec.StringToBase64(const Text: String) : String
   ///  [line: 318, column: 30, file: System.Types.Convert]
   ,StringToBase64:function(Self, Text$10) {
      var Result = "";
      Result = btoa(Text$10);
      return Result
   }
   /// function TBase64EncDec.TripletToBase64(const num: Integer) : String
   ///  [line: 332, column: 30, file: System.Types.Convert]
   ,TripletToBase64:function(Self, num) {
      return __B64_Lookup[(num>>>18)&63] + __B64_Lookup[(num>>>12)&63] + __B64_Lookup[(num>>>6)&63] + __B64_Lookup[num&63];
   }
   ,Destroy:TObject.Destroy
};
/// EDatatype = class (EW3Exception)
///  [line: 21, column: 3, file: System.Types.Convert]
var EDatatype = {
   $ClassName:"EDatatype",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EConvertError = class (EW3Exception)
///  [line: 22, column: 3, file: System.Types.Convert]
var EConvertError = {
   $ClassName:"EConvertError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EConvertHexStringInvalid = class (EConvertError)
///  [line: 23, column: 3, file: System.Types.Convert]
var EConvertHexStringInvalid = {
   $ClassName:"EConvertHexStringInvalid",$Parent:EConvertError
   ,$Init:function ($) {
      EConvertError.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EConvertBinaryStringInvalid = class (EConvertError)
///  [line: 25, column: 3, file: System.Types.Convert]
var EConvertBinaryStringInvalid = {
   $ClassName:"EConvertBinaryStringInvalid",$Parent:EConvertError
   ,$Init:function ($) {
      EConvertError.$Init($);
   }
   ,Destroy:Exception.Destroy
};
function SetupConversionLUT() {
   try {
      __CONV_BUFFER = new ArrayBuffer(16);
      __CONV_VIEW   = new DataView(__CONV_BUFFER);
      __CONV_ARRAY = new Uint8Array(__CONV_BUFFER,0,15);
   } catch ($e) {
      var e$1 = $W($e);
      /* null */
   }
};
function SetupBase64() {
   var i$5 = 0;
   var $temp20;
   for(i$5=1,$temp20=CNT_B64_CHARSET.length;i$5<=$temp20;i$5++) {
      __B64_Lookup[i$5-1] = CNT_B64_CHARSET.charAt(i$5-1);
      __B64_RevLookup[TDatatype.CharToByte(TDatatype,CNT_B64_CHARSET.charAt(i$5-1))] = i$5-1;
   }
   __B64_RevLookup[TDatatype.CharToByte(TDatatype,"-")] = 62;
   __B64_RevLookup[TDatatype.CharToByte(TDatatype,"_")] = 63;
};
/// TUnManaged = class (TObject)
///  [line: 113, column: 3, file: System.Memory]
var TUnManaged = {
   $ClassName:"TUnManaged",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TUnManaged.AllocMemA(const Size: Integer) : TMemoryHandle
   ///  [line: 252, column: 27, file: System.Memory]
   ,AllocMemA:function(Self, Size$12) {
      var Result = undefined;
      if (Size$12 > 0) {
         Result = new Uint8Array(Size$12);
      } else {
         Result = null;
      }
      return Result
   }
   /// function TUnManaged.ReAllocMemA(const Memory: TMemoryHandle; Size: Integer) : TMemoryHandle
   ///  [line: 271, column: 27, file: System.Memory]
   ,ReAllocMemA:function(Self, Memory$1, Size$12) {
      var Result = undefined;
      if (Memory$1) {
         if (Size$12 > 0) {
            Result = new Uint8Array(Size$12);
            TMarshal.Move$1(TMarshal,Memory$1,0,Result,0,Size$12);
         }
      } else {
         Result = TUnManaged.AllocMemA(Self,Size$12);
      }
      return Result
   }
   /// function TUnManaged.ReadMemoryA(const Memory: TMemoryHandle; const Offset: Integer; Size: Integer) : TMemoryHandle
   ///  [line: 354, column: 27, file: System.Memory]
   ,ReadMemoryA:function(Self, Memory$1, Offset$5, Size$12) {
      var Result = undefined;
      var mTotal = 0;
      if (Memory$1 && Offset$5 >= 0) {
         mTotal = Offset$5+Size$12;
         if (mTotal > Memory$1.length) {
            Size$12 = $VarToInt((Memory$1.length-mTotal),"");
         }
         if (Size$12 > 0) {
            Result = new Uint8Array(Memory$1.buffer.slice(Offset$5,Size$12));
         }
      }
      return Result
   }
   /// function TUnManaged.WriteMemoryA(const Memory: TMemoryHandle; const Offset: Integer; const Data: TMemoryHandle) : Integer
   ///  [line: 320, column: 27, file: System.Memory]
   ,WriteMemoryA:function(Self, Memory$1, Offset$5, Data$8) {
      var Result = 0;
      var mTotal,
         mChunk = null,
         mTemp$1 = null;
      if (Memory$1) {
         if (Data$8) {
            mTotal = Offset$5+Data$8.length;
            if (mTotal > Memory$1.length) {
               Result = $VarToInt((Memory$1.length-mTotal),"");
            } else {
               Result = $VarToInt(Data$8.length,"");
            }
            if (Result > 0) {
               if (Offset$5+Data$8.length <= Memory$1.length) {
                  Memory$1.set(Data$8,Offset$5);
               } else {
                  mChunk = Data$8.buffer.slice(0,Result-1);
                  mTemp$1 = new Uint8Array(mChunk);
                  Memory$1.set(mTemp$1,Offset$5);
               }
            }
         }
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// function TMemoryHandleHelper.Valid() : Boolean
///  [line: 219, column: 30, file: System.Memory]
function TMemoryHandleHelper$Valid$7(Self$22) {
   var Result = false;
   Result = !( (Self$22 == undefined) || (Self$22 == null) );
   return Result
}
/// function TMemoryHandleHelper.Defined() : Boolean
///  [line: 226, column: 30, file: System.Memory]
function TMemoryHandleHelper$Defined(Self$23) {
   var Result = false;
   Result = !(Self$23 == undefined);
   return Result
}
/// TMarshal = class (TObject)
///  [line: 140, column: 3, file: System.Memory]
var TMarshal = {
   $ClassName:"TMarshal",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TMarshal.Move(const Source: TMemoryHandle; const SourceStart: Integer; const Target: TMemoryHandle; const TargetStart: Integer; const Size: Integer)
   ///  [line: 560, column: 26, file: System.Memory]
   ,Move$1:function(Self, Source, SourceStart, Target$1, TargetStart, Size$12) {
      var mRef = null;
      if (TMemoryHandleHelper$Defined(Source) && TMemoryHandleHelper$Valid$7(Source) && SourceStart >= 0) {
         if (TMemoryHandleHelper$Defined(Target$1) && TMemoryHandleHelper$Valid$7(Target$1) && TargetStart >= 0) {
            mRef = Source.subarray(SourceStart,SourceStart+Size$12);
            Target$1.set(mRef,TargetStart);
         }
      }
   }
   /// procedure TMarshal.Move(const Source: TAddress; const Target: TAddress; const Size: Integer)
   ///  [line: 591, column: 26, file: System.Memory]
   ,Move:function(Self, Source, Target$1, Size$12) {
      if (Source !== null) {
         if (Target$1 !== null) {
            if (Size$12 > 0) {
               TMarshal.Move$1(Self,Source.FBuffer$1,Source.FOffset,Target$1.FBuffer$1,Target$1.FOffset,Size$12);
            }
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// function TBufferHandleHelper.Valid() : Boolean
///  [line: 187, column: 30, file: System.Memory]
function TBufferHandleHelper$Valid$6(Self$24) {
   var Result = false;
   Result = !( (Self$24 == undefined) || (Self$24 == null) );
   return Result
}
/// EAddress = class (EW3Exception)
///  [line: 94, column: 3, file: System.Memory]
var EAddress = {
   $ClassName:"EAddress",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TAllocationOptions = class (TW3OwnedObject)
///  [line: 100, column: 3, file: System.Memory.Allocation]
var TAllocationOptions = {
   $ClassName:"TAllocationOptions",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FCacheSize = 0;
      $.FUseCache = false;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 113, column: 41, file: System.Memory.Allocation]
   ,a$44:function(Self) {
      var Result = null;
      Result = $As(TW3OwnedObject.GetOwner(Self),TAllocation);
      return Result
   }
   /// function TAllocationOptions.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 134, column: 29, file: System.Memory.Allocation]
   ,AcceptOwner:function(Self, CandidateObject) {
      return CandidateObject !== null && $Is(CandidateObject,TAllocation);
   }
   /// constructor TAllocationOptions.Create(const AOwner: TAllocation)
   ///  [line: 127, column: 32, file: System.Memory.Allocation]
   ,Create$77:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FCacheSize = 4096;
      Self.FUseCache = true;
      return Self
   }
   /// function TAllocationOptions.GetCacheFree() : Integer
   ///  [line: 140, column: 29, file: System.Memory.Allocation]
   ,GetCacheFree:function(Self) {
      return Self.FCacheSize-TAllocationOptions.GetCacheUsed(Self);
   }
   /// function TAllocationOptions.GetCacheUsed() : Integer
   ///  [line: 145, column: 29, file: System.Memory.Allocation]
   ,GetCacheUsed:function(Self) {
      var Result = 0;
      if (Self.FUseCache) {
         Result = $VarToInt((Self.FCacheSize-(TAllocation.GetHandle(TAllocationOptions.a$44(Self)).length-TAllocation.GetSize$3(TAllocationOptions.a$44(Self)))),"");
      }
      return Result
   }
   /// procedure TAllocationOptions.SetCacheSize(const NewCacheSize: Integer)
   ///  [line: 156, column: 30, file: System.Memory.Allocation]
   ,SetCacheSize:function(Self, NewCacheSize) {
      if (NewCacheSize < 1024) {
         Self.FCacheSize = 1024;
      } else if (NewCacheSize > 1024000) {
         Self.FCacheSize = 1024000;
      } else {
         Self.FCacheSize = NewCacheSize;
      }
   }
   /// procedure TAllocationOptions.SetUseCache(const NewUseValue: Boolean)
   ///  [line: 151, column: 30, file: System.Memory.Allocation]
   ,SetUseCache:function(Self, NewUseValue) {
      Self.FUseCache = NewUseValue;
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TAllocationOptions.$Intf={
   IW3OwnedObjectAccess:[TAllocationOptions.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TAllocation = class (TObject)
///  [line: 51, column: 3, file: System.Memory.Allocation]
var TAllocation = {
   $ClassName:"TAllocation",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$3 = undefined;
      $.FOptions$2 = null;
      $.FSize = 0;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 73, column: 37, file: System.Memory.Allocation]
   ,a$45:function(Self) {
      var Result = false;
      Result = $VarToBool((!Self.FHandle$3));
      return Result
   }
   /// procedure TAllocation.Allocate(const NumberOfBytes: Integer)
   ///  [line: 259, column: 23, file: System.Memory.Allocation]
   ,Allocate$1:function(Self, NumberOfBytes) {
      var NewSize = 0;
      if (Self.FHandle$3) {
         TAllocation.Release$2(Self);
      }
      if (NumberOfBytes > 0) {
         if (Self.FOptions$2.FUseCache) {
            NewSize = TInteger.ToNearest(NumberOfBytes,Self.FOptions$2.FCacheSize);
         } else {
            NewSize = NumberOfBytes;
         }
         Self.FHandle$3 = TUnManaged.AllocMemA(TUnManaged,NewSize);
         Self.FSize = NumberOfBytes;
         TAllocation.HandleAllocated$(Self);
      }
   }
   /// constructor TAllocation.Create(const ByteSize: Integer)
   ///  [line: 179, column: 25, file: System.Memory.Allocation]
   ,Create$79:function(Self, ByteSize$1) {
      TAllocation.Create$78(Self);
      if (ByteSize$1 > 0) {
         TAllocation.Allocate$1(Self,ByteSize$1);
      }
      return Self
   }
   /// constructor TAllocation.Create()
   ///  [line: 173, column: 25, file: System.Memory.Allocation]
   ,Create$78:function(Self) {
      TObject.Create(Self);
      Self.FOptions$2 = TAllocationOptions.Create$77($New(TAllocationOptions),Self);
      return Self
   }
   /// function TAllocation.DataGetSize() : Integer
   ///  [line: 230, column: 22, file: System.Memory.Allocation]
   ,DataGetSize$1:function(Self) {
      return TAllocation.GetSize$3(Self);
   }
   /// function TAllocation.DataOffset() : Integer
   ///  [line: 224, column: 22, file: System.Memory.Allocation]
   ,DataOffset$1:function(Self) {
      return 0;
   }
   /// function TAllocation.DataRead(const Offset: Integer; const ByteCount: Integer) : TByteArray
   ///  [line: 236, column: 22, file: System.Memory.Allocation]
   ,DataRead$1:function(Self, Offset$5, ByteCount) {
      var Result = [];
      var MemSlice;
      MemSlice = TUnManaged.ReadMemoryA(TUnManaged,TAllocation.GetHandle(Self),Offset$5,ByteCount);
      Result = TDatatype.TypedArrayToBytes(TDatatype,MemSlice);
      return Result
   }
   /// procedure TAllocation.DataWrite(const Offset: Integer; const Bytes: TByteArray)
   ///  [line: 244, column: 23, file: System.Memory.Allocation]
   ,DataWrite$1:function(Self, Offset$5, Bytes$3) {
      TUnManaged.WriteMemoryA(TUnManaged,TAllocation.GetHandle(Self),Offset$5,TDatatype.BytesToTypedArray(TDatatype,Bytes$3));
   }
   /// destructor TAllocation.Destroy()
   ///  [line: 186, column: 24, file: System.Memory.Allocation]
   ,Destroy:function(Self) {
      if (Self.FHandle$3) {
         TAllocation.Release$2(Self);
      }
      TObject.Free(Self.FOptions$2);
      TObject.Destroy(Self);
   }
   /// function TAllocation.GetBufferHandle() : TBufferHandle
   ///  [line: 426, column: 22, file: System.Memory.Allocation]
   ,GetBufferHandle:function(Self) {
      var Result = undefined;
      if (Self.FHandle$3) {
         Result = Self.FHandle$3.buffer;
      } else {
         Result = null;
      }
      return Result
   }
   /// function TAllocation.GetHandle() : TMemoryHandle
   ///  [line: 421, column: 22, file: System.Memory.Allocation]
   ,GetHandle:function(Self) {
      return Self.FHandle$3;
   }
   /// function TAllocation.GetSize() : Integer
   ///  [line: 416, column: 22, file: System.Memory.Allocation]
   ,GetSize$3:function(Self) {
      return Self.FSize;
   }
   /// function TAllocation.GetTotalSize() : Integer
   ///  [line: 410, column: 22, file: System.Memory.Allocation]
   ,GetTotalSize:function(Self) {
      var Result = 0;
      if (Self.FHandle$3) {
         Result = $VarToInt(Self.FHandle$3.length,"");
      }
      return Result
   }
   /// function TAllocation.GetTransport() : IBinaryTransport
   ///  [line: 194, column: 22, file: System.Memory.Allocation]
   ,GetTransport:function(Self) {
      return $AsIntf(Self,"IBinaryTransport");
   }
   /// procedure TAllocation.Grow(const NumberOfBytes: Integer)
   ///  [line: 296, column: 23, file: System.Memory.Allocation]
   ,Grow:function(Self, NumberOfBytes) {
      var ExactNewSize = 0,
         TotalNewSize = 0;
      if (Self.FHandle$3) {
         ExactNewSize = Self.FSize+NumberOfBytes;
         if (Self.FOptions$2.FUseCache) {
            if (NumberOfBytes < TAllocationOptions.GetCacheFree(Self.FOptions$2)) {
               (Self.FSize+= NumberOfBytes);
            } else {
               TotalNewSize = TInteger.ToNearest(ExactNewSize,Self.FOptions$2.FCacheSize);
               TAllocation.ReAllocate(Self,TotalNewSize);
               Self.FSize = ExactNewSize;
            }
         } else {
            TAllocation.ReAllocate(Self,ExactNewSize);
         }
      } else {
         TAllocation.Allocate$1(Self,NumberOfBytes);
      }
   }
   /// procedure TAllocation.HandleAllocated()
   ///  [line: 249, column: 23, file: System.Memory.Allocation]
   ,HandleAllocated:function(Self) {
      /* null */
   }
   /// procedure TAllocation.HandleReleased()
   ///  [line: 254, column: 23, file: System.Memory.Allocation]
   ,HandleReleased:function(Self) {
      /* null */
   }
   /// procedure TAllocation.ReAllocate(const NewSize: Integer)
   ///  [line: 375, column: 23, file: System.Memory.Allocation]
   ,ReAllocate:function(Self, NewSize) {
      var LSizeToSet = 0;
      if (NewSize > 0) {
         if (Self.FHandle$3) {
            if (NewSize != Self.FSize) {
               TAllocation.HandleReleased$(Self);
               if (Self.FOptions$2.FUseCache) {
                  LSizeToSet = TInteger.ToNearest(NewSize,Self.FOptions$2.FCacheSize);
               } else {
                  LSizeToSet = TInteger.ToNearest(NewSize,16);
               }
               Self.FHandle$3 = TUnManaged.ReAllocMemA(TUnManaged,Self.FHandle$3,LSizeToSet);
               Self.FSize = NewSize;
            }
         } else {
            TAllocation.Allocate$1(Self,NewSize);
         }
         TAllocation.HandleAllocated$(Self);
      } else {
         TAllocation.Release$2(Self);
      }
   }
   /// procedure TAllocation.Release()
   ///  [line: 285, column: 23, file: System.Memory.Allocation]
   ,Release$2:function(Self) {
      if (Self.FHandle$3) {
         Self.FHandle$3.buffer = null;
         Self.FHandle$3 = null;
         Self.FSize = 0;
         TAllocation.HandleReleased$(Self);
      }
   }
   /// procedure TAllocation.Shrink(const NumberOfBytes: Integer)
   ///  [line: 328, column: 23, file: System.Memory.Allocation]
   ,Shrink:function(Self, NumberOfBytes) {
      var ExactNewSize = 0,
         Spare = 0,
         AlignedSize = 0;
      if (Self.FHandle$3) {
         ExactNewSize = TInteger.EnsureRange(Self.FSize-NumberOfBytes,0,2147483647);
         if (Self.FOptions$2.FUseCache) {
            if (ExactNewSize > 0) {
               Spare = ExactNewSize % Self.FOptions$2.FCacheSize;
               if (Spare > 0) {
                  AlignedSize = ExactNewSize;
                  (AlignedSize+= (Self.FOptions$2.FCacheSize-Spare));
                  TAllocation.ReAllocate(Self,AlignedSize);
                  Self.FSize = ExactNewSize;
               } else {
                  Self.FSize = ExactNewSize;
               }
            } else {
               TAllocation.Release$2(Self);
            }
         } else if (ExactNewSize > 0) {
            TAllocation.ReAllocate(Self,ExactNewSize);
         } else {
            TAllocation.Release$2(Self);
         }
      }
   }
   /// procedure TAllocation.Transport(const Target: IBinaryTransport)
   ///  [line: 199, column: 23, file: System.Memory.Allocation]
   ,Transport:function(Self, Target$1) {
      var Data$8 = [];
      if (Target$1===null) {
         throw Exception.Create($New(EAllocation),"Invalid transport interface, reference was NIL error");
      } else {
         if (!(TAllocation.a$45(Self))) {
            try {
               Data$8 = TDatatype.TypedArrayToBytes(TDatatype,TAllocation.GetHandle(Self));
               Target$1[3](Target$1[0](),Data$8);
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.CreateFmt($New(EAllocation),"Data transport failed, mechanism threw exception %s with error [%s]",[TObject.ClassName(e$1.ClassType), e$1.FMessage]);
            }
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,HandleAllocated$:function($){return $.ClassType.HandleAllocated($)}
   ,HandleReleased$:function($){return $.ClassType.HandleReleased($)}
};
TAllocation.$Intf={
   IBinaryTransport:[TAllocation.DataOffset$1,TAllocation.DataGetSize$1,TAllocation.DataRead$1,TAllocation.DataWrite$1]
   ,IAllocation:[TAllocation.GetHandle,TAllocation.GetTotalSize,TAllocation.GetSize$3,TAllocation.GetTransport,TAllocation.Allocate$1,TAllocation.Grow,TAllocation.Shrink,TAllocation.ReAllocate,TAllocation.Transport,TAllocation.Release$2]
}
function a$397(Self) {
   var Result = false;
   Result = $VarToBool((!Self[0]()));
   return Result
}/// EAllocation = class (EW3Exception)
///  [line: 22, column: 3, file: System.Memory.Allocation]
var EAllocation = {
   $ClassName:"EAllocation",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3CustomApplication = class (TObject)
///  [line: 260, column: 3, file: SmartCL.Dialogs]
var TW3CustomApplication = {
   $ClassName:"TW3CustomApplication",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FBody = $.FCurrentForm = $.FDisplay = $.FEnterAnim = $.FLeaveAnim = $.FMainForm = $.FOnBeforeUnload = $.FOnUnload = $.FTransDst = $.FTransSrc = null;
      $.FEntryEffect = 0;
      $.FFormChangeActive = $.FTerminated = false;
      $.FForms = [];
   }
   /// procedure TW3CustomApplication.AdjustScreen()
   ///  [line: 1133, column: 32, file: SmartCL.Application]
   ,AdjustScreen:function(Self) {
      if (Self.FDisplay !== null) {
         TW3ScrollInfo.ScrollTo(TW3CustomControl.GetScrollInfo(Self.FDisplay),0,0);
         TW3MovableControl.Invalidate$(Self.FDisplay);
      }
   }
   /// procedure TW3CustomApplication.ApplicationClosing()
   ///  [line: 1178, column: 32, file: SmartCL.Application]
   ,ApplicationClosing:function(Self) {
      /* null */
   }
   /// procedure TW3CustomApplication.ApplicationStarted()
   ///  [line: 1168, column: 32, file: SmartCL.Application]
   ,ApplicationStarted:function(Self) {
      /* null */
   }
   /// procedure TW3CustomApplication.ApplicationStarting()
   ///  [line: 1173, column: 32, file: SmartCL.Application]
   ,ApplicationStarting:function(Self) {
      TW3CustomApplication.AdjustScreen(Self);
   }
   /// procedure TW3CustomApplication.CBOnBeforeUnload()
   ///  [line: 1089, column: 32, file: SmartCL.Application]
   ,CBOnBeforeUnload:function(Self) {
      if (Self.FOnBeforeUnload) {
         Self.FOnBeforeUnload(Self);
      }
   }
   /// procedure TW3CustomApplication.CBOnOrientationChange()
   ///  [line: 1111, column: 32, file: SmartCL.Application]
   ,CBOnOrientationChange:function(Self) {
      var mOrientation = 0,
         mTemp$1 = 0,
         mEntry = null;
      mTemp$1 = $VarToInt(window.orientation,"");
      switch (mTemp$1) {
         case 0 :
            mOrientation = 0;
            break;
         case 90 :
            mOrientation = 1;
            break;
         case (-90) :
            mOrientation = 2;
            break;
         case 180 :
            mOrientation = 3;
            break;
      }
      if (Self.FDisplay) {
         mEntry = Self.FDisplay.OnOrientationChanged;
         if (mEntry) {
            mEntry(Self.FDisplay,mOrientation,mTemp$1);
         }
      }
   }
   /// procedure TW3CustomApplication.CBOnReSize()
   ///  [line: 1106, column: 32, file: SmartCL.Application]
   ,CBOnReSize:function(Self) {
      TW3CustomApplication.AdjustScreen(Self);
   }
   /// procedure TW3CustomApplication.CBOnUnLoad()
   ///  [line: 1095, column: 32, file: SmartCL.Application]
   ,CBOnUnLoad:function(Self) {
      try {
         if (Self.FOnUnload) {
            Self.FOnUnload(Self);
         }
      } finally {
         if (!(Self.FTerminated)) {
            TW3CustomApplication.Terminate(Self);
         }
      }
   }
   /// constructor TW3CustomApplication.Create()
   ///  [line: 853, column: 34, file: SmartCL.Application]
   ,Create$3:function(Self) {
      TObject.Create(Self);
      Self.FBody = TW3TagContainer.Create$81$($New(TDocumentBody),null);
      Self.FDisplay = TW3TagContainer.Create$81$($New(TW3Display),Self.FBody);
      if (!Instance) {
         Instance = Self;
      }
      return Self
   }
   /// destructor TW3CustomApplication.Destroy()
   ///  [line: 871, column: 33, file: SmartCL.Application]
   ,Destroy:function(Self) {
      if (!(Self.FTerminated)) {
         TW3CustomApplication.Terminate(Self);
      }
      TObject.Free(Self.FDisplay);
      TObject.Free(Self.FBody);
      Instance = null;
      TObject.Destroy(Self);
   }
   /// function TW3CustomApplication.GetAppName() : String
   ///  [line: 910, column: 31, file: SmartCL.Application]
   ,GetAppName:function(Self) {
      var Result = "";
      Result = "Throttle";
      return Result
   }
   /// procedure TW3CustomApplication.GotoFormByRef(aForm: TW3CustomForm; Effect: TFormEntryEffect = 0)
   ///  [line: 1460, column: 32, file: SmartCL.Application]
   ,GotoFormByRef:function(Self, aForm, Effect) {
      var FormResizeEvent = null,
         mIndex = 0,
         LBounds = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         wd = 0,
         hd = 0;
      if (Self.FTerminated) {
         return;
      }
      if (Self.FFormChangeActive) {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef", TObject.ClassName(Self.ClassType), "A form transition is already active error"]);
      }
      if (aForm === null) {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef", TObject.ClassName(Self.ClassType), "Form parameter is NIL error"]);
      }
      mIndex = Self.FForms.indexOf(aForm);
      if (mIndex < 0) {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.GotoFormByRef", TObject.ClassName(Self.ClassType), "Form not registered error"]);
      }
      if (aForm === Self.FCurrentForm) {
         return;
      }
      if (Self.FCurrentForm === null) {
         Self.FCurrentForm = aForm;
         TW3Display.PositionFormInView(Self.FDisplay,aForm);
         if (TW3MovableControl.GetVisible(aForm)) {
            TW3MovableControl.Invalidate$(aForm);
         } else {
            TW3MovableControl.SetVisible(aForm,true);
         }
         TW3CustomForm.FormActivated(aForm);
         return;
      }
      if (!Effect) {
         TW3CustomForm.FormDeactivated(Self.FCurrentForm);
         TW3MovableControl.SetVisible(Self.FCurrentForm,false);
         TW3Display.PositionFormInView(Self.FDisplay,aForm);
         if (TW3MovableControl.GetVisible(aForm)) {
            TW3MovableControl.Invalidate$(aForm);
         } else {
            TW3MovableControl.SetVisible(aForm,true);
         }
         TW3CustomForm.FormActivated(aForm);
         Self.FCurrentForm = aForm;
         return;
      }
      LBounds = TW3MovableControl.GetBoundsRect(Self.FDisplay);
      wd = TRect$Width$6(LBounds);
      hd = TRect$Height$5(LBounds);
      if (Effect == 1) {
         TW3MovableControl.SetBounds$(aForm,wd,LBounds.Top$3,wd,hd);
      } else {
         TW3MovableControl.SetBounds$(aForm,-wd,LBounds.Top$3,wd,hd);
      }
      FormResizeEvent = aForm.FOnResize;
      TW3MovableControl._SetOnResized(aForm,function (Sender) {
         TW3MovableControl._SetOnResized(aForm,FormResizeEvent);
         Self.FFormChangeActive = true;
         Self.FEntryEffect = Effect;
         TW3CustomForm.FormDeactivated(Self.FCurrentForm);
         Self.FTransSrc = Self.FCurrentForm;
         Self.FTransDst = aForm;
         if (Self.FEnterAnim === null) {
            Self.FEnterAnim = TW3CustomCSSAnimation.Create$134$($New(TW3NamedCSSAnimation));
            TW3CustomCSSAnimation.SetDuration(Self.FEnterAnim,0.3);
         }
         if (Self.FLeaveAnim === null) {
            Self.FLeaveAnim = TW3CustomCSSAnimation.Create$134$($New(TW3NamedCSSAnimation));
            TW3CustomCSSAnimation.SetDuration(Self.FLeaveAnim,0.3);
         }
         switch (Effect) {
            case 1 :
               TW3NamedCSSAnimation.SetName$3(Self.FEnterAnim,"MOVE-LEFT");
               TW3NamedCSSAnimation.SetName$3(Self.FLeaveAnim,"MOVE-OUT-LEFT");
               break;
            case 2 :
               TW3NamedCSSAnimation.SetName$3(Self.FEnterAnim,"MOVE-RIGHT");
               TW3NamedCSSAnimation.SetName$3(Self.FLeaveAnim,"MOVE-OUT-RIGHT");
               break;
         }
         TW3Dispatch.RequestAnimationFrame(TW3Dispatch,function () {
            TW3Display.PositionFormInView(Self.FDisplay,aForm);
            TW3MovableControl.SetVisible(aForm,true);
            TW3CustomCSSAnimation.ExecuteEx(Self.FEnterAnim,aForm,null,$Event1(Self,TW3CustomApplication.HandleEnterAnimEnds));
            TW3CustomCSSAnimation.ExecuteEx(Self.FLeaveAnim,Self.FCurrentForm,null,$Event1(Self,TW3CustomApplication.HandleLeaveAnimEnds));
         });
      });
      TW3MovableControl.SetVisible(aForm,true);
   }
   /// procedure TW3CustomApplication.HandleEnterAnimEnds(Sender: TObject)
   ///  [line: 1418, column: 32, file: SmartCL.Application]
   ,HandleEnterAnimEnds:function(Self, Sender) {
      var AnimObject = null;
      TW3TagObj.WillChange(Self.FTransDst,"auto");
      AnimObject = $As(Sender,TW3NamedCSSAnimation);
      switch (Self.FEntryEffect) {
         case 1 :
            TW3MovableControl.MoveTo$(Self.FTransDst,0,0);
            Self.FCurrentForm = Self.FTransDst;
            TW3CustomForm.FormActivated(Self.FCurrentForm);
            Self.FFormChangeActive = false;
            break;
         case 2 :
            TW3MovableControl.MoveTo$(Self.FTransDst,0,0);
            Self.FCurrentForm = Self.FTransDst;
            TW3CustomForm.FormActivated(Self.FCurrentForm);
            TW3MovableControl.SetVisible(Self.FTransSrc,false);
            TW3Display.PositionFormInView(Self.FDisplay,Self.FTransSrc);
            Self.FFormChangeActive = false;
            break;
      }
      if (AnimObject === Self.FEnterAnim) {
         Self.FEnterAnim = null;
      }
      TObject.Free(AnimObject);
      AnimObject = null;
   }
   /// procedure TW3CustomApplication.HandleLeaveAnimEnds(Sender: TObject)
   ///  [line: 1407, column: 32, file: SmartCL.Application]
   ,HandleLeaveAnimEnds:function(Self, Sender) {
      var AnimObject = null;
      TW3TagObj.WillChange(Self.FTransSrc,"transform");
      TW3MovableControl.SetVisible(Self.FTransSrc,false);
      AnimObject = $As(Sender,TW3NamedCSSAnimation);
      if (AnimObject === Self.FLeaveAnim) {
         Self.FLeaveAnim = null;
      }
      TObject.Free(AnimObject);
      AnimObject = null;
   }
   /// procedure TW3CustomApplication.HookWindowEvents()
   ///  [line: 902, column: 32, file: SmartCL.Application]
   ,HookWindowEvents:function(Self) {
      document.body.onunload = $Event0(Self,TW3CustomApplication.CBOnUnLoad);
      document.body.onbeforeunload = $Event0(Self,TW3CustomApplication.CBOnBeforeUnload);
      window.onresize = $Event0(Self,TW3CustomApplication.CBOnReSize);
      window.onorientationchange = $Event0(Self,TW3CustomApplication.CBOnOrientationChange);
   }
   /// procedure TW3CustomApplication.ReadySync()
   ///  [line: 1183, column: 32, file: SmartCL.Application]
   ,ReadySync:function(Self) {
      var Temp$1 = null;
      if ($SetIn(Self.FDisplay.FComponentState,4,0,11)) {
         if ($SetIn(Self.FDisplay.FView.FComponentState,4,0,11)) {
            if (Self.FMainForm) {
               if ($SetIn(Self.FMainForm.FComponentState,4,0,11)) {
                  TW3MovableControl.Invalidate$(Self.FDisplay);
                  TW3MovableControl.Invalidate$(Self.FDisplay.FView);
                  Temp$1 = Self.FMainForm;
                  Self.FMainForm = null;
                  TW3CustomApplication.GotoFormByRef(Self,Temp$1,0);
                  TW3CustomApplication.ApplicationStarted(Self);
               } else {
                  TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3CustomApplication.ReadySync),100);
               }
            } else {
               TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3CustomApplication.ReadySync),100);
            }
         } else {
            TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3CustomApplication.ReadySync),100);
         }
      } else {
         TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3CustomApplication.ReadySync),100);
      }
   }
   /// procedure TW3CustomApplication.RegisterFormInstance(aForm: TW3CustomForm; isMainForm: Boolean = False)
   ///  [line: 1323, column: 32, file: SmartCL.Application]
   ,RegisterFormInstance:function(Self, aForm, isMainForm) {
      if (Self.FTerminated) {
         return;
      }
      if (aForm) {
         if (Self.FForms.indexOf(aForm) < 0) {
            try {
               Self.FForms.push(aForm);
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomApplication.RegisterFormInstance", TObject.ClassName(Self.ClassType), e$1.FMessage]);
            }
            if (isMainForm) {
               Self.FMainForm = aForm;
               aForm.FHandle$4.style.left = "0px";
               aForm.FHandle$4.style.top = "0px";
            } else {
               TW3OwnedObject.InitAsync$(aForm,function () {
                  TW3MovableControl.SetVisible(aForm,false);
               });
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.RegisterFormInstance", TObject.ClassName(Self.ClassType), "Form already registered"]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.RegisterFormInstance", TObject.ClassName(Self.ClassType), "Form parameter is NIL error"]);
      }
   }
   /// procedure TW3CustomApplication.RunApp()
   ///  [line: 1253, column: 32, file: SmartCL.Application]
   ,RunApp:function(Self) {
      TW3CustomApplication.HookWindowEvents(Self);
      TW3CustomApplication.ApplicationStarting(Self);
      TW3Dispatch.ExecuteDocumentReady(TW3Dispatch,function () {
         TApplicationFormsList.AutoCreateForms(FormsFactory(),Self.FDisplay.FView);
         TW3CustomApplication.StartApp(Self);
      });
   }
   /// procedure TW3CustomApplication.StartApp()
   ///  [line: 1302, column: 32, file: SmartCL.Application]
   ,StartApp:function(Self) {
      TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3CustomApplication.ReadySync),100);
   }
   /// procedure TW3CustomApplication.Terminate()
   ///  [line: 1142, column: 32, file: SmartCL.Application]
   ,Terminate:function(Self) {
      var x$39 = 0;
      if (Self.FTerminated) {
         return;
      }
      Self.FTerminated = true;
      TW3CustomApplication.ApplicationClosing(Self);
      try {
         var $temp21;
         for(x$39=0,$temp21=Self.FForms.length;x$39<$temp21;x$39++) {
            TObject.Free(Self.FForms[x$39]);
            Self.FForms[x$39]=null;
         }
         Self.FForms.length=0;
      } finally {
         TObject.Free(Self);
      }
   }
   /// procedure TW3CustomApplication.UnRegisterFormInstance(aForm: TW3CustomForm)
   ///  [line: 1363, column: 32, file: SmartCL.Application]
   ,UnRegisterFormInstance:function(Self, aForm) {
      var mIndex = 0;
      if (!(Self.FTerminated)) {
         if (aForm) {
            mIndex = Self.FForms.indexOf(aForm);
            if (mIndex >= 0) {
               if (Self.FMainForm !== aForm) {
                  if (Self.FCurrentForm === aForm) {
                     TW3CustomApplication.GotoFormByRef(Self,Self.FMainForm,0);
                  }
                  Self.FForms.splice(mIndex,1)
                  ;
                  try {
                     TObject.Free(aForm);
                  } catch ($e) {
                     var e$1 = $W($e);
                     throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), e$1.FMessage]);
                  }
               } else {
                  throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), "Main form cannot be removed error"]);
               }
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3Application),$R[0],["TW3CustomApplication.UnRegisterFormInstance", TObject.ClassName(Self.ClassType), "Form parameter is NIL error"]);
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TApplication = class (TW3CustomApplication)
///  [line: 14, column: 3, file: Unit1]
var TApplication = {
   $ClassName:"TApplication",$Parent:TW3CustomApplication
   ,$Init:function ($) {
      TW3CustomApplication.$Init($);
   }
   ,Destroy:TW3CustomApplication.Destroy
};
/// TW3DisplayViewArangeType enumeration
///  [line: 64, column: 3, file: SmartCL.Application]
var TW3DisplayViewArangeType = [ "dvaSizeToView", "dvaVStack", "dvaHStack" ];
/// TW3TagObj = class (TW3Component)
///  [line: 317, column: 3, file: SmartCL.Components]
var TW3TagObj = {
   $ClassName:"TW3TagObj",$Parent:TW3Component
   ,$Init:function ($) {
      TW3Component.$Init($);
      $.FAttributes = null;
      $.FComponentState = [0];
      $.FDisplayMode = 0;
      $.FHandle$4 = undefined;
      $.FOwner$1 = undefined;
      $.FPositionMode = 24;
      $.FTagId = "";
      $.FUpdating = $.FZIndexCounter = 0;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 525, column: 38, file: SmartCL.Components]
   ,a$52:function(Self) {
      var Result = false;
      Result = $SetIn(Self.FComponentState,3,0,11);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 521, column: 38, file: SmartCL.Components]
   ,a$51:function(Self) {
      var Result = false;
      Result = $VarToBool(Self.FOwner$1);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 504, column: 64, file: SmartCL.Components]
   ,a$50:function(Self, Value$5) {
      Self.FHandle$4.innerText = Value$5;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 504, column: 38, file: SmartCL.Components]
   ,a$49:function(Self) {
      var Result = "";
      Result = String(Self.FHandle$4.innerText);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 497, column: 64, file: SmartCL.Components]
   ,a$48:function(Self, Value$5) {
      Self.FHandle$4.innerHTML = Value$5;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 497, column: 38, file: SmartCL.Components]
   ,a$47:function(Self) {
      var Result = "";
      Result = String(Self.FHandle$4.innerHTML);
      return Result
   }
   /// procedure TW3TagObj.AddToComponentState(const Flags: TComponentState)
   ///  [line: 2679, column: 21, file: SmartCL.Components]
   ,AddToComponentState:function(Self, Flags$2) {
      if ($SetIn(Flags$2,0,0,11)) {
         $SetInc(Self.FComponentState,0,0,11);
      }
      if ($SetIn(Flags$2,1,0,11)) {
         $SetInc(Self.FComponentState,1,0,11);
      }
      if ($SetIn(Flags$2,2,0,11)) {
         $SetInc(Self.FComponentState,2,0,11);
      }
      if ($SetIn(Flags$2,4,0,11)) {
         $SetInc(Self.FComponentState,4,0,11);
      }
      if ($SetIn(Flags$2,5,0,11)) {
         $SetInc(Self.FComponentState,5,0,11);
      }
      if ($SetIn(Flags$2,6,0,11)) {
         $SetInc(Self.FComponentState,6,0,11);
      }
      if ($SetIn(Flags$2,7,0,11)) {
         $SetInc(Self.FComponentState,7,0,11);
      }
      if ($SetIn(Flags$2,8,0,11)) {
         $SetInc(Self.FComponentState,8,0,11);
      }
      if ($SetIn(Flags$2,9,0,11)) {
         $SetInc(Self.FComponentState,9,0,11);
      }
      if ($SetIn(Flags$2,10,0,11)) {
         $SetInc(Self.FComponentState,10,0,11);
      }
   }
   /// procedure TW3TagObj.AfterUpdate()
   ///  [line: 2726, column: 21, file: SmartCL.Components]
   ,AfterUpdate:function(Self) {
      /* null */
   }
   /// function TW3TagObj.AllocateZIndex() : Integer
   ///  [line: 2746, column: 21, file: SmartCL.Components]
   ,AllocateZIndex:function(Self) {
      var Result = 0;
      ++Self.FZIndexCounter;
      Result = Self.FZIndexCounter;
      return Result
   }
   /// procedure TW3TagObj.BeginUpdate()
   ///  [line: 2707, column: 21, file: SmartCL.Components]
   ,BeginUpdate:function(Self) {
      ++Self.FUpdating;
      $SetInc(Self.FComponentState,3,0,11);
   }
   /// constructor TW3TagObj.Create(const AOwner: TObject)
   ///  [line: 2348, column: 23, file: SmartCL.Components]
   ,Create$11:function(Self, AOwner) {
      var AssignId = false;
      TW3CustomComponent.CreateEx(Self,AOwner);
      $SetInc(Self.FComponentState,0,0,11);
      try {
         Self.FTagId = TW3TagObj.MakeElementTagId$(Self);
         Self.FHandle$4 = TW3TagObj.MakeElementTagObj$(Self);
      } catch ($e) {
         var e$1 = $W($e);
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3TagObj.Create",Self,e$1.FMessage);
      }
      $SetInc(Self.FComponentState,2,0,11);
      AssignId = !(((Self.FHandle$4==window)||(Self.FHandle$4==document)||(Self.FHandle$4==document.body)));
      if (AssignId) {
         Self.FHandle$4.setAttribute("id",Self.FTagId);
      }
      if (AOwner !== null) {
         if (AssignId) {
            TW3TagObj.SetZIndex(Self,TW3TagObj.AllocateZIndex($As(AOwner,TW3TagObj)));
         }
      }
      TW3TagObj.StyleTagObject$(Self);
      TW3TagObj.BeginUpdate(Self);
      try {
         TW3CustomComponent.InitializeObject$(Self);
      } finally {
         TW3TagObj.EndUpdate(Self);
      }
      if (AssignId) {
         TW3ControlTracker.RegisterControl(TW3ControlTracker,Self);
      }
      $SetExc(Self.FComponentState,0,0,11);
      $SetExc(Self.FComponentState,2,0,11);
      return Self
   }
   /// function TW3TagObj.CreationFlags() : TW3CreationFlags
   ///  [line: 2654, column: 20, file: SmartCL.Components]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = [62];
      return Result
   }
   /// destructor TW3TagObj.Destroy()
   ///  [line: 2419, column: 22, file: SmartCL.Components]
   ,Destroy:function(Self) {
      $SetInc(Self.FComponentState,10,0,11);
      if (Self.FHandle$4) {
         try {
            TW3TagObj.UnHookEvents$(Self);
            if (TControlHandleHelper$Valid$3(Self.FOwner$1)) {
               if (!(((Self.FHandle$4==window)||(Self.FHandle$4==document)||(Self.FHandle$4==document.body)))) {
                  TW3TagObj.RemoveFrom(Self);
               }
            }
         } finally {
            TW3CustomComponent.FinalizeObject$(Self);
            if (!(((Self.FHandle$4==window)||(Self.FHandle$4==document)||(Self.FHandle$4==document.body)))) {
               TW3ControlTracker.UnRegisterControl(TW3ControlTracker,Self);
            }
            Self.FTagId = "";
            Self.FHandle$4 = undefined;
         }
      }
      if (Self.FAttributes) {
         TObject.Free(Self.FAttributes);
      }
      TW3CustomComponent.Destroy(Self);
   }
   /// procedure TW3TagObj.EndUpdate()
   ///  [line: 2713, column: 21, file: SmartCL.Components]
   ,EndUpdate:function(Self) {
      if (Self.FUpdating > 0) {
         --Self.FUpdating;
         if (!Self.FUpdating) {
            $SetExc(Self.FComponentState,3,0,11);
            TW3TagObj.AfterUpdate$(Self);
         }
      }
   }
   /// procedure TW3TagObj.FreeAfter(Delay: Integer)
   ///  [line: 2463, column: 21, file: SmartCL.Components]
   ,FreeAfter:function(Self, Delay$2) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3Dispatch.Execute(TW3Dispatch,function () {
            if (!($SetIn(Self.FComponentState,10,0,11))) {
               TObject.Free(Self);
            }
         },Delay$2);
      }
   }
   /// function TW3TagObj.GetAttributes() : TW3ElementAttributes
   ///  [line: 2836, column: 20, file: SmartCL.Components]
   ,GetAttributes:function(Self) {
      var Result = null;
      if (Self.FAttributes === null) {
         Self.FAttributes = TW3ElementAttributes.Create$133($New(TW3ElementAttributes),Self.FHandle$4);
      }
      Result = Self.FAttributes;
      return Result
   }
   /// function TW3TagObj.GetCursor() : TCursor
   ///  [line: 2644, column: 20, file: SmartCL.Components]
   ,GetCursor:function(Self) {
      return TW3MouseCursor.GetCursorFromElement(TW3MouseCursor,Self.FHandle$4);
   }
   /// function TW3TagObj.GetDisplayModeText() : String
   ///  [line: 2491, column: 20, file: SmartCL.Components]
   ,GetDisplayModeText:function(Self) {
      var Result = "";
      switch (Self.FDisplayMode) {
         case 0 :
            Result = "inline-block";
            break;
         case 1 :
            Result = "block";
            break;
         case 2 :
            if (w3_BrowserVendor() == 4) {
               Result = TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"flex");
            } else {
               Result = "flex";
            }
            break;
         case 3 :
            Result = "table";
            break;
         case 4 :
            Result = "table-caption";
            break;
         case 5 :
            Result = "table-cell";
            break;
         case 6 :
            Result = "table-row";
            break;
         case 7 :
            Result = "table-column";
            break;
         case 8 :
            Result = "run-in";
            break;
         case 9 :
            Result = "list-item";
            break;
      }
      return Result
   }
   /// function TW3TagObj.GetZIndex() : Integer
   ///  [line: 2731, column: 21, file: SmartCL.Components]
   ,GetZIndex:function(Self) {
      var Result = 0;
      if (Self.FHandle$4) {
         Result = TVariant.AsInteger(Self.FHandle$4.style.zIndex);
      } else {
         Result = -1;
      }
      return Result
   }
   /// procedure TW3TagObj.HandleControlBlured()
   ///  [line: 2794, column: 21, file: SmartCL.Components]
   ,HandleControlBlured:function(Self) {
      /* null */
   }
   /// procedure TW3TagObj.HandleControlFocused()
   ///  [line: 2789, column: 21, file: SmartCL.Components]
   ,HandleControlFocused:function(Self) {
      TW3ControlTracker.SetFocusedControl(TW3ControlTracker,Self);
   }
   /// procedure TW3TagObj.HookEvents()
   ///  [line: 2799, column: 21, file: SmartCL.Components]
   ,HookEvents:function(Self) {
      Self.FHandle$4.addEventListener("focus",$Event0(Self,TW3TagObj.HandleControlFocused));
      Self.FHandle$4.addEventListener("blur",$Event0(Self,TW3TagObj.HandleControlBlured));
   }
   /// procedure TW3TagObj.InsertInto(const OwnerHandle: THandle)
   ///  [line: 2843, column: 21, file: SmartCL.Components]
   ,InsertInto:function(Self, OwnerHandle) {
      if (THandleHelper$Valid$5(OwnerHandle)) {
         if (TControlHandleHelper$Valid$3(Self.FHandle$4)) {
            if (TControlHandleHelper$Valid$3(Self.FOwner$1)) {
               try {
                  TW3TagObj.RemoveFrom(Self);
               } catch ($e) {
                  var e$1 = $W($e);
                  throw EW3Exception.Create$18($New(EW3TagObj),"TW3TagObj.InsertInto",Self,e$1.FMessage);
               }
            }
            try {
               w3_SetElementParentByRef(Self.FHandle$4,OwnerHandle);
            } catch ($e) {
               var e$2 = $W($e);
               throw EW3Exception.Create$18($New(EW3TagObj),"TW3TagObj.InsertInto",Self,e$2.FMessage);
            }
            Self.FOwner$1 = OwnerHandle;
         } else {
            throw EW3Exception.Create$18($New(EW3TagObj),"TW3TagObj.InsertInto",Self,$R[18]);
         }
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3TagObj.InsertInto",Self,$R[25]);
      }
   }
   /// function TW3TagObj.MakeElementTagId() : String
   ///  [line: 2776, column: 20, file: SmartCL.Components]
   ,MakeElementTagId:function(Self) {
      return TW3Identifiers.GenerateUniqueComponentName$1(TW3Identifiers);
   }
   /// function TW3TagObj.MakeElementTagObj() : TControlHandle
   ///  [line: 2781, column: 20, file: SmartCL.Components]
   ,MakeElementTagObj:function(Self) {
      var Result = undefined;
      Result = document.createElement("div");
      return Result
   }
   /// procedure TW3TagObj.RemoveFrom()
   ///  [line: 2880, column: 21, file: SmartCL.Components]
   ,RemoveFrom:function(Self) {
      if (TControlHandleHelper$Valid$3(Self.FOwner$1)) {
         if (TControlHandleHelper$Valid$3(Self.FHandle$4)) {
            try {
               try {
                  w3_RemoveElementByRef(Self.FHandle$4,Self.FOwner$1);
               } catch ($e) {
                  var e$1 = $W($e);
                  /* null */
               }
            } finally {
               Self.FOwner$1 = undefined;
            }
         }
      }
   }
   /// procedure TW3TagObj.RemoveFromComponentState(const Flags: TComponentState)
   ///  [line: 2693, column: 21, file: SmartCL.Components]
   ,RemoveFromComponentState:function(Self, Flags$2) {
      if ($SetIn(Flags$2,0,0,11)) {
         $SetExc(Self.FComponentState,0,0,11);
      }
      if ($SetIn(Flags$2,1,0,11)) {
         $SetExc(Self.FComponentState,1,0,11);
      }
      if ($SetIn(Flags$2,2,0,11)) {
         $SetExc(Self.FComponentState,2,0,11);
      }
      if ($SetIn(Flags$2,4,0,11)) {
         $SetExc(Self.FComponentState,4,0,11);
      }
      if ($SetIn(Flags$2,5,0,11)) {
         $SetExc(Self.FComponentState,5,0,11);
      }
      if ($SetIn(Flags$2,6,0,11)) {
         $SetExc(Self.FComponentState,6,0,11);
      }
      if ($SetIn(Flags$2,7,0,11)) {
         $SetExc(Self.FComponentState,7,0,11);
      }
      if ($SetIn(Flags$2,8,0,11)) {
         $SetExc(Self.FComponentState,8,0,11);
      }
      if ($SetIn(Flags$2,9,0,11)) {
         $SetExc(Self.FComponentState,9,0,11);
      }
      if ($SetIn(Flags$2,10,0,11)) {
         $SetExc(Self.FComponentState,10,0,11);
      }
   }
   /// procedure TW3TagObj.SetCursor(const Value: TCursor)
   ///  [line: 2649, column: 21, file: SmartCL.Components]
   ,SetCursor:function(Self, Value$5) {
      TW3MouseCursor.SetCursorForElement(TW3MouseCursor,Self.FHandle$4,Value$5);
   }
   /// procedure TW3TagObj.SetDisplayMode(const NewMode: TW3TagDisplayMode)
   ///  [line: 2513, column: 21, file: SmartCL.Components]
   ,SetDisplayMode:function(Self, NewMode) {
      if (NewMode != Self.FDisplayMode) {
         if (!($SetIn(Self.FComponentState,10,0,11))) {
            Self.FDisplayMode = NewMode;
            if (Self.FHandle$4.style.visibility) {
               if (Self.FHandle$4.style.visibility == "hidden") {
                  return;
               }
            }
            Self.FHandle$4.style.display = TW3TagObj.GetDisplayModeText(Self);
         }
      }
   }
   /// procedure TW3TagObj.SetInitialTransformationStyles()
   ///  [line: 2540, column: 21, file: SmartCL.Components]
   ,SetInitialTransformationStyles:function(Self) {
      if (Self.FHandle$4) {
         Self.FHandle$4.style["will-change"] = "transform";
         Self.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"will-change")] = "transform";
         Self.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"transformStyle")] = "preserve-3d";
         Self.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Perspective")] = 800;
         Self.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"transformOrigin")] = "50% 50%";
         Self.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Transform")] = "translateZ(0px)";
      }
   }
   /// procedure TW3TagObj.SetPositionMode(const NewMode: TW3TagPositionMode)
   ///  [line: 2475, column: 21, file: SmartCL.Components]
   ,SetPositionMode:function(Self, NewMode) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewMode != Self.FPositionMode) {
            Self.FPositionMode = NewMode;
            switch (Self.FPositionMode) {
               case 23 :
               case 24 :
                  Self.FHandle$4.style.position = "absolute";
                  break;
               case 22 :
                  Self.FHandle$4.style.position = "relative";
                  break;
            }
         }
      }
   }
   /// procedure TW3TagObj.SetZIndex(const NewZIndex: Integer)
   ///  [line: 2739, column: 21, file: SmartCL.Components]
   ,SetZIndex:function(Self, NewZIndex) {
      if (Self.FHandle$4) {
         Self.FHandle$4.style.zIndex = NewZIndex;
      }
   }
   /// function TW3TagObj.Showing() : Boolean
   ///  [line: 2665, column: 20, file: SmartCL.Components]
   ,Showing:function(Self) {
      var Result = false;
      if (Self.FHandle$4) {
         if (TControlHandleHelper$Ready$4(Self.FHandle$4)) {
            if ($SetIn(Self.FComponentState,4,0,11)) {
               Result = true;
            }
         }
      }
      return Result
   }
   /// procedure TW3TagObj.StyleTagObject()
   ///  [line: 2753, column: 21, file: SmartCL.Components]
   ,StyleTagObject:function(Self) {
      (Self.FHandle$4).style.visibility = 'hidden';
    (Self.FHandle$4).style.display = 'none';
    (Self.FHandle$4).style.overflow = 'hidden';
    (Self.FHandle$4).style.left = "0px";
    (Self.FHandle$4).style.top = "0px";
      switch (Self.FPositionMode) {
         case 23 :
         case 24 :
            Self.FHandle$4.style.position = "absolute";
            break;
         case 22 :
            Self.FHandle$4.style.position = "relative";
            break;
      }
   }
   /// procedure TW3TagObj.UnHookEvents()
   ///  [line: 2807, column: 21, file: SmartCL.Components]
   ,UnHookEvents:function(Self) {
      Self.FHandle$4.style["pointer-events"] = "none";
      Self.FHandle$4.disabled = true;
   }
   /// procedure TW3TagObj.WillChange(const Value: String)
   ///  [line: 2553, column: 21, file: SmartCL.Components]
   ,WillChange:function(Self, Value$5) {
      if (Self.FHandle$4) {
         Self.FHandle$4.style["will-change"] = Value$5;
         Self.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"will-change")] = Value$5;
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject:TW3CustomComponent.FinalizeObject
   ,InitializeObject:TW3CustomComponent.InitializeObject
   ,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)}
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents$:function($){return $.ClassType.HookEvents($)}
   ,MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)}
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing$:function($){return $.ClassType.Showing($)}
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents$:function($){return $.ClassType.UnHookEvents($)}
};
TW3TagObj.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3TagContainer = class (TW3TagObj)
///  [line: 548, column: 3, file: SmartCL.Components]
var TW3TagContainer = {
   $ClassName:"TW3TagContainer",$Parent:TW3TagObj
   ,$Init:function ($) {
      TW3TagObj.$Init($);
      $.OnChildRemoved = null;
      $.OnChildAdded = null;
      $.FChildren = [];
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 623, column: 44, file: SmartCL.Components]
   ,a$53:function(Self) {
      var Result = null;
      Result = $As(TW3OwnedObject.GetOwner(Self),TW3TagContainer);
      return Result
   }
   /// procedure TW3TagContainer.BringToFront()
   ///  [line: 3070, column: 27, file: SmartCL.Components]
   ,BringToFront:function(Self) {
      var LStack = {olTags:[],olZIndex:[]};
      if ($SetIn(Self.FComponentState,4,0,11)) {
         LStack = TW3TagContainer.GetZOrderList(TW3TagContainer.a$53(Self),false,null);
         TW3StackingOrderList$MoveToLast(LStack,Self.FHandle$4);
         TW3StackingOrderList$Remap(LStack);
      }
   }
   /// procedure TW3TagContainer.CBNoBehavior(eventObj: JEvent)
   ///  [line: 3106, column: 27, file: SmartCL.Components]
   ,CBNoBehavior$1:function(Self, eventObj) {
      if (eventObj !== null) {
         eventObj.stopPropagation();
      }
   }
   /// procedure TW3TagContainer.ChildAdded(const NewChild: TW3TagContainer)
   ///  [line: 3327, column: 27, file: SmartCL.Components]
   ,ChildAdded:function(Self, NewChild) {
      if (Self.OnChildAdded) {
         Self.OnChildAdded(Self,NewChild);
      }
   }
   /// function TW3TagContainer.ChildByHandle(const ControlHandle: TControlHandle) : TW3TagContainer
   ///  [line: 3173, column: 26, file: SmartCL.Components]
   ,ChildByHandle:function(Self, ControlHandle) {
      var Result = null;
      var a$398 = 0,
         LItem$3 = null,
         a$399 = [];
      a$399 = Self.FChildren;
      var $temp22;
      for(a$398=0,$temp22=a$399.length;a$398<$temp22;a$398++) {
         LItem$3 = a$399[a$398];
         if (LItem$3.FHandle$4 == ControlHandle) {
            Result = LItem$3;
            break;
         }
      }
      return Result
   }
   /// function TW3TagContainer.ChildByName(ComponentName: String) : TW3TagContainer
   ///  [line: 3160, column: 26, file: SmartCL.Components]
   ,ChildByName:function(Self, ComponentName) {
      var Result = null;
      var a$400 = 0,
         LItem$3 = null,
         a$401 = [];
      ComponentName = (Trim$_String_(ComponentName)).toLocaleLowerCase();
      a$401 = Self.FChildren;
      var $temp23;
      for(a$400=0,$temp23=a$401.length;a$400<$temp23;a$400++) {
         LItem$3 = a$401[a$400];
         if ((TW3TagContainer.GetComponentName(LItem$3)).toLocaleLowerCase() == ComponentName) {
            Result = LItem$3;
            break;
         }
      }
      return Result
   }
   /// procedure TW3TagContainer.ChildRemoved(const OldChild: TW3TagContainer)
   ///  [line: 3333, column: 27, file: SmartCL.Components]
   ,ChildRemoved:function(Self, OldChild) {
      if (Self.OnChildRemoved) {
         Self.OnChildRemoved(Self,OldChild);
      }
   }
   /// constructor TW3TagContainer.Create(AOwner: TW3TagContainer)
   ///  [line: 2908, column: 29, file: SmartCL.Components]
   ,Create$81:function(Self, AOwner) {
      TW3TagObj.Create$11(Self,AOwner);
      if (TW3TagContainer.a$53(Self) !== null) {
         TW3TagContainer.RegisterChild$(TW3TagContainer.a$53(Self),Self);
      }
      return Self
   }
   /// function TW3TagContainer.FilterZOrderListItem(const Item: TObject) : TW3ZOrderFilterResult
   ///  [line: 2972, column: 26, file: SmartCL.Components]
   ,FilterZOrderListItem:function(Self, Item$3) {
      return (Item$3 !== null)?0:1;
   }
   /// procedure TW3TagContainer.FinalizeObject()
   ///  [line: 3259, column: 27, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      TW3TagContainer.FreeChildren(Self);
      if (TW3TagContainer.a$53(Self) !== null) {
         TW3TagContainer.UnRegisterChild(TW3TagContainer.a$53(Self),Self);
      }
      TW3CustomComponent.FinalizeObject(Self);
   }
   /// procedure TW3TagContainer.ForEach(const Process: TW3TagContainerChildEnumProc)
   ///  [line: 3228, column: 27, file: SmartCL.Components]
   ,ForEach$1:function(Self, Process) {
      var a$402 = 0,
         LChild = null;
      if (Process) {
         var a$403 = [];
         a$403 = Self.FChildren;
         var $temp24;
         for(a$402=0,$temp24=a$403.length;a$402<$temp24;a$402++) {
            LChild = a$403[a$402];
            if (Process(LChild) == 16) {
               break;
            }
         }
      }
   }
   /// procedure TW3TagContainer.FreeChildren()
   ///  [line: 3300, column: 27, file: SmartCL.Components]
   ,FreeChildren:function(Self) {
      var LOldCount = 0;
      try {
         while (Self.FChildren.length > 0) {
            LOldCount = Self.FChildren.length;
            TObject.Free(Self.FChildren[0]);
            if (LOldCount == Self.FChildren.length) {
               Self.FChildren.shift();
            }
         }
      } finally {
         Self.FChildren.length=0;
      }
   }
   /// function TW3TagContainer.GetChildCount() : Integer
   ///  [line: 3271, column: 26, file: SmartCL.Components]
   ,GetChildCount:function(Self) {
      return Self.FChildren.length;
   }
   /// function TW3TagContainer.GetChildHasFocus(var Child: TW3TagContainer) : Boolean
   ///  [line: 3140, column: 26, file: SmartCL.Components]
   ,GetChildHasFocus:function(Self, Child$1) {
      var Result = false;
      var a$404 = 0,
         LItem$3 = null,
         a$405 = [];
      Result = false;
      Child$1.v = null;
      a$405 = Self.FChildren;
      var $temp25;
      for(a$404=0,$temp25=a$405.length;a$404<$temp25;a$404++) {
         LItem$3 = a$405[a$404];
         if (TW3TagContainer.GetHasFocus(LItem$3)) {
            Child$1.v = LItem$3;
            break;
         } else {
            Result = TW3TagContainer.GetChildHasFocus(LItem$3,Child$1);
            if (Result) {
               break;
            }
         }
      }
      return Result
   }
   /// function TW3TagContainer.GetChildObject(const Index: Integer) : TW3TagContainer
   ///  [line: 3285, column: 26, file: SmartCL.Components]
   ,GetChildObject:function(Self, Index$6) {
      return Self.FChildren[Index$6];
   }
   /// function TW3TagContainer.GetChildren() : TW3TagContainerArray
   ///  [line: 2966, column: 26, file: SmartCL.Components]
   ,GetChildren:function(Self) {
      return Self.FChildren;
   }
   /// function TW3TagContainer.GetComponentName() : String
   ///  [line: 3290, column: 26, file: SmartCL.Components]
   ,GetComponentName:function(Self) {
      return Self.Name;
   }
   /// function TW3TagContainer.GetHasFocus() : Boolean
   ///  [line: 3112, column: 26, file: SmartCL.Components]
   ,GetHasFocus:function(Self) {
      var Result = false;
      var LFocusedElement;
      if (TControlHandleHelper$Valid$3(Self.FHandle$4)) {
         LFocusedElement = TW3ControlTracker.GetDOMFocus(TW3ControlTracker);
         if (LFocusedElement) {
            Result = LFocusedElement == Self.FHandle$4;
         } else {
            Result = false;
         }
      }
      return Result
   }
   /// function TW3TagContainer.GetMaxZIndex() : Integer
   ///  [line: 3091, column: 26, file: SmartCL.Components]
   ,GetMaxZIndex:function(Self) {
      var Result = 0;
      var a$406 = 0,
         LChild = null,
         a$407 = [];
      a$407 = Self.FChildren;
      var $temp26;
      for(a$406=0,$temp26=a$407.length;a$406<$temp26;a$406++) {
         LChild = a$407[a$406];
         if (TW3TagObj.GetZIndex(LChild) > Result) {
            Result = TW3TagObj.GetZIndex(LChild);
         }
      }
      return Result
   }
   /// function TW3TagContainer.GetZOrderList(const Sort: Boolean; const Filter: TW3ZOrderFilterFunction) : TW3StackingOrderList
   ///  [line: 2978, column: 26, file: SmartCL.Components]
   ,GetZOrderList:function(Self, Sort$7, Filter$1) {
      var Result = {olTags:[],olZIndex:[]};
      var LFilter = null,
         LHandles = [],
         x$39 = 0,
         LHandle,
         LChild = null;
      if (Filter$1) {
         LFilter = Filter$1;
      } else {
         LFilter = $Event1(Self,TW3TagContainer.FilterZOrderListItem);
      }
      LHandles = TControlHandleHelper$GetChildren$1(Self.FHandle$4);
      var $temp27;
      for(x$39=0,$temp27=LHandles.length;x$39<$temp27;x$39++) {
         LHandle = LHandles[x$39];
         if (LHandle) {
            LChild = TW3TagContainer.ChildByHandle(Self,LHandle);
            if (LChild !== null) {
               if (!LFilter(LChild)) {
                  Result.olTags.push(LHandle);
                  Result.olZIndex.push(TVariant.AsInteger(LHandle.style.zIndex));
               }
            }
         }
      }
      TW3StackingOrderList$Sort$1(Result,Sort$7);
      return Result
   }
   /// function TW3TagContainer.IndexOfChild(const Child: TW3CustomControl) : Integer
   ///  [line: 3011, column: 26, file: SmartCL.Components]
   ,IndexOfChild:function(Self, Child$1) {
      var Result = 0;
      var LCount$1 = 0,
         x$39 = 0;
      Result = -1;
      if (Child$1 !== null) {
         LCount$1 = TW3TagContainer.GetChildCount(Self);
         var $temp28;
         for(x$39=0,$temp28=LCount$1;x$39<$temp28;x$39++) {
            if (TW3TagContainer.GetChildObject(Self,x$39) === Child$1) {
               Result = x$39;
               break;
            }
         }
      }
      return Result
   }
   /// function TW3TagContainer.QueryChildrenReady() : Boolean
   ///  [line: 2925, column: 26, file: SmartCL.Components]
   ,QueryChildrenReady:function(Self) {
      var Result = false;
      var LCount$1 = 0,
         x$39 = 0,
         LItem$3 = null;
      if (!($SetIn(Self.FComponentState,0,0,11))) {
         if (!($SetIn(Self.FComponentState,2,0,11))) {
            LCount$1 = TW3TagContainer.GetChildCount(Self);
            if (LCount$1 > 0) {
               var $temp29;
               for(x$39=0,$temp29=LCount$1;x$39<$temp29;x$39++) {
                  LItem$3 = TW3TagContainer.GetChildObject(Self,x$39);
                  try {
                     if ((!LItem$3.FHandle$4)) {
                        break;
                     }
                     Result = $SetIn(LItem$3.FComponentState,4,0,11);
                  } catch ($e) {
                     Result = false;
                  }
                  if (!(Result)) {
                     break;
                  }
               }
            } else {
               Result = true;
            }
         }
      }
      return Result
   }
   /// procedure TW3TagContainer.RegisterChild(const Child: TW3TagContainer)
   ///  [line: 3339, column: 27, file: SmartCL.Components]
   ,RegisterChild:function(Self, Child$1) {
      if (Child$1 !== null && Child$1 !== Self && Self.FChildren.indexOf(Child$1) < 0) {
         if (TW3TagObj.a$51(Child$1)) {
            TW3TagObj.RemoveFrom(Child$1);
         }
         TW3TagObj.BeginUpdate(Self);
         Self.FChildren.push(Child$1);
         TW3TagObj.InsertInto(Child$1,Self.FHandle$4);
         if (TW3TagContainer.a$53(Child$1) !== Self) {
            TW3OwnedObject.SetOwner(Child$1,Self);
         }
         TW3TagObj.AddToComponentState(Self,[128]);
         TW3TagObj.EndUpdate(Self);
         if ($SetIn(TW3TagObj.CreationFlags$(Self),2,0,8)) {
            TW3TagContainer.ChildAdded$(Self,Child$1);
         }
      }
   }
   /// procedure TW3TagContainer.SendToBack()
   ///  [line: 3057, column: 27, file: SmartCL.Components]
   ,SendToBack:function(Self) {
      var LStack = {olTags:[],olZIndex:[]};
      if (TW3TagContainer.a$53(Self) !== null) {
         LStack = TW3TagContainer.GetZOrderList(TW3TagContainer.a$53(Self),false,null);
         TW3StackingOrderList$MoveToFirst(LStack,Self.FHandle$4);
         TW3StackingOrderList$Remap(LStack);
      }
   }
   /// procedure TW3TagContainer.SetComponentName(const NewComponentName: String)
   ///  [line: 3295, column: 27, file: SmartCL.Components]
   ,SetComponentName:function(Self, NewComponentName) {
      Self.Name = NewComponentName;
   }
   /// procedure TW3TagContainer.SetParent(const Value: TW3TagContainer)
   ///  [line: 3400, column: 27, file: SmartCL.Components]
   ,SetParent:function(Self, Value$5) {
      TW3TagContainer.RegisterChild$(Value$5,Self);
   }
   /// function TW3TagContainer.Showing() : Boolean
   ///  [line: 3100, column: 26, file: SmartCL.Components]
   ,Showing:function(Self) {
      var Result = false;
      if (TW3TagObj.Showing(Self)) {
         Result = TW3TagContainer.QueryChildrenReady(Self);
      }
      return Result
   }
   /// procedure TW3TagContainer.UnRegisterChild(const Child: TW3TagContainer)
   ///  [line: 3367, column: 27, file: SmartCL.Components]
   ,UnRegisterChild:function(Self, Child$1) {
      var LIndex = 0;
      if (Child$1 !== null && Child$1 !== Self) {
         LIndex = Self.FChildren.indexOf(Child$1);
         if (LIndex >= 0) {
            Self.FChildren.splice(LIndex,1)
            ;
            if (!Self.FChildren.length) {
               if ($SetIn(Self.FComponentState,7,0,11)) {
                  TW3TagObj.RemoveFromComponentState(Self,[128]);
               }
            }
            if ($SetIn(TW3TagObj.CreationFlags$(Self),3,0,8)) {
               TW3TagContainer.ChildRemoved$(Self,Child$1);
            }
            if (!($SetIn(Child$1.FComponentState,10,0,11))) {
               TW3TagObj.RemoveFrom(Child$1);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3TagContainer),"Failed to remove child component [%s], component not a child of this container error",[TW3TagContainer.GetComponentName(Child$1)]);
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject:TW3CustomComponent.InitializeObject
   ,AfterUpdate:TW3TagObj.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3TagObj.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing$:function($){return $.ClassType.Showing($)}
   ,StyleTagObject:TW3TagObj.StyleTagObject
   ,UnHookEvents:TW3TagObj.UnHookEvents
   ,ChildAdded$:function($){return $.ClassType.ChildAdded.apply($.ClassType, arguments)}
   ,ChildRemoved$:function($){return $.ClassType.ChildRemoved.apply($.ClassType, arguments)}
   ,Create$81$:function($){return $.ClassType.Create$81.apply($.ClassType, arguments)}
   ,RegisterChild$:function($){return $.ClassType.RegisterChild.apply($.ClassType, arguments)}
};
TW3TagContainer.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3MovableControl = class (TW3TagContainer)
///  [line: 878, column: 3, file: SmartCL.Components]
var TW3MovableControl = {
   $ClassName:"TW3MovableControl",$Parent:TW3TagContainer
   ,$Init:function ($) {
      TW3TagContainer.$Init($);
      $.FAlign = 0;
      $.FAlpha = $.FAnchorGapBottom = $.FAnchorGapRight = $.FControlHeight = $.FControlLeft = $.FControlTop = $.FControlWidth = $.FSyncCount = 0;
      $.FAnchors = [0];
      $.FBackground = $.FBorders = $.FConstraints = $.FEdgeRadius = $.FFont = $.FOnMoved = $.FOnResize = $.FOnVisible = $.FTextShadow = null;
      $.FColor = 0;
      $.FTransparent = $.FUseAlpha = false;
   }
   /// function TW3MovableControl.AdjustClientRect(const Rect: TRect) : TRect
   ///  [line: 3919, column: 28, file: SmartCL.Components]
   ,AdjustClientRect:function(Self, Rect$1) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      if (Self.FPositionMode == 24) {
         Result.Left$3 = Rect$1.Left$3;
         Result.Top$3 = Rect$1.Top$3;
         Result.Right$1 = Rect$1.Right$1;
         Result.Bottom$1 = Rect$1.Bottom$1;
      } else {
         Result = TW3Borders.AdjustClientRect$1(TW3MovableControl.GetBorder(Self),Rect$1);
      }
      return Result
   }
   /// procedure TW3MovableControl.AfterUpdate()
   ///  [line: 4035, column: 29, file: SmartCL.Components]
   ,AfterUpdate:function(Self) {
      if ($SetIn(Self.FComponentState,5,0,11)) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3TagObj.AddToComponentState(Self,[256]);
            TW3MovableControl.ResizeWhenReady(Self);
         }
         if ($Is(Self,TW3GraphicControl)) {
            TW3TagObj.AddToComponentState(Self,[64]);
         }
      }
      if ($SetIn(Self.FComponentState,6,0,11)) {
         if ($SetIn(TW3TagObj.CreationFlags$(Self),4,0,8)) {
            if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3MovableControl.Moved(Self);
               if (Self.FOnMoved) {
                  Self.FOnMoved(Self);
               }
            }
         }
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if ($Is(Self,TW3GraphicControl)) {
               TW3MovableControl.Invalidate$($As(Self,TW3GraphicControl));
            }
         }
      }
      TW3TagObj.RemoveFromComponentState(Self,[96]);
   }
   /// procedure TW3MovableControl.AlignChildren()
   ///  [line: 4086, column: 29, file: SmartCL.Components]
   ,AlignChildren:function(Self) {
      var AChildren = [],
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         i$5 = 0,
         a$408 = null,
         a$409 = null;
      function AlignControl$1(cc, CRect$1) {
         var EmptyAnchors = [0],
            h = 0,
            h$1 = 0,
            w = 0,
            w$1 = 0;
         EmptyAnchors = [0];
         switch (cc.FAlign) {
            case 1 :
               h = TW3MovableControl.GetHeight$(cc);
               TW3MovableControl.SetBounds$2(cc,CRect$1.Left$3,CRect$1.Top$3,TRect$Width$6(CRect$1),h,0,EmptyAnchors.slice(0));
               CRect$1.Top$3 += h;
               break;
            case 2 :
               h$1 = TW3MovableControl.GetHeight$(cc);
               TW3MovableControl.SetBounds$2(cc,CRect$1.Left$3,CRect$1.Top$3+TRect$Height$5(CRect$1)-h$1,TRect$Width$6(CRect$1),h$1,0,EmptyAnchors.slice(0));
               CRect$1.Bottom$1 -= h$1;
               break;
            case 3 :
               w = TW3MovableControl.GetWidth$(cc);
               TW3MovableControl.SetBounds$2(cc,CRect$1.Left$3,CRect$1.Top$3,w,TRect$Height$5(CRect$1),0,EmptyAnchors.slice(0));
               CRect$1.Left$3 += w;
               break;
            case 4 :
               w$1 = TW3MovableControl.GetWidth$(cc);
               TW3MovableControl.SetBounds$2(cc,CRect$1.Left$3+TRect$Width$6(CRect$1)-w$1,CRect$1.Top$3,w$1,TRect$Height$5(CRect$1),0,EmptyAnchors.slice(0));
               CRect$1.Right$1 -= w$1;
               break;
            case 5 :
               TW3MovableControl.SetBounds$2(cc,CRect$1.Left$3,CRect$1.Top$3,TRect$Width$6(CRect$1),TRect$Height$5(CRect$1),0,EmptyAnchors.slice(0));
               break;
         }
      };
      TW3TagContainer.ForEach$1(Self,function (Child$1) {
         var Result = 160;
         var cc = null;
         if ($Is(Child$1,TW3CustomControl)) {
            cc = $As(Child$1,TW3CustomControl);
            if (cc.FAlign > 0) {
               AChildren.push(cc);
            }
         }
         Result = 160;
         return Result
      });
      if (!AChildren.length) {
         return;
      }
      AChildren.sort(function (c1, c2) {
         var Result = 0;
         Result = c1.FAlign-c2.FAlign;
         if (Result) {
            return Result;
         }
         switch (c1.FAlign) {
            case 1 :
               Result = TW3MovableControl.GetTop(c1)-TW3MovableControl.GetTop(c2);
               break;
            case 2 :
               Result = TW3MovableControl.GetTop(c2)+TW3MovableControl.GetHeight$(c2)-(TW3MovableControl.GetTop(c1)+TW3MovableControl.GetHeight$(c1));
               break;
            case 3 :
               Result = TW3MovableControl.GetLeft(c1)-TW3MovableControl.GetLeft(c2);
               break;
            case 4 :
               Result = TW3MovableControl.GetLeft(c2)+TW3MovableControl.GetWidth$(c2)-(TW3MovableControl.GetLeft(c1)+TW3MovableControl.GetWidth$(c1));
               break;
         }
         return Result
      });
      ;
      CRect = TW3MovableControl.ClientRect$(Self);
      var $temp30;
      for(i$5=0,$temp30=AChildren.length;i$5<$temp30;i$5++) {
         AlignControl$1(AChildren[i$5],CRect);
      }
      if ($SetIn(Self.FComponentState,9,0,11)) {
         TW3TagObj.RemoveFromComponentState(Self,[512]);
      }
   }
   /// procedure TW3MovableControl.AnchorChildren()
   ///  [line: 4154, column: 29, file: SmartCL.Components]
   ,AnchorChildren:function(Self) {
      var PRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      PRect = TW3MovableControl.ClientRect$(Self);
      TW3TagContainer.ForEach$1(Self,function (Child$1) {
         var Result = 160;
         var cc = null,
            ChildRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
            ChildChanged = false,
            dRight = 0,
            dBottom = 0,
            EmptyAnchors = [0];
         if ($Is(Child$1,TW3CustomControl)) {
            cc = $As(Child$1,TW3CustomControl);
            if ((cc.FAlign==0) && ($SetIn(cc.FAnchors,2,0,4) || $SetIn(cc.FAnchors,3,0,4))) {
               ChildRect = TW3MovableControl.GetBoundsRect(cc);
               ChildChanged = false;
               if ($SetIn(cc.FAnchors,2,0,4)) {
                  dRight = PRect.Right$1-cc.FAnchorGapRight-ChildRect.Right$1;
                  if (dRight) {
                     if (!($SetIn(cc.FAnchors,1,0,4))) {
                        ChildRect.Left$3 += dRight;
                     }
                     ChildRect.Right$1 = PRect.Right$1-cc.FAnchorGapRight;
                     ChildChanged = true;
                  }
               }
               if ($SetIn(cc.FAnchors,3,0,4)) {
                  dBottom = PRect.Bottom$1-cc.FAnchorGapBottom-ChildRect.Bottom$1;
                  if (dBottom) {
                     if (!($SetIn(cc.FAnchors,0,0,4))) {
                        ChildRect.Top$3 += dBottom;
                     }
                     ChildRect.Bottom$1 = PRect.Bottom$1-cc.FAnchorGapBottom;
                     ChildChanged = true;
                  }
               }
               if (ChildChanged) {
                  EmptyAnchors = [0];
                  TW3MovableControl.SetBounds$2(cc,ChildRect.Left$3,ChildRect.Top$3,TRect$Width$6(ChildRect),TRect$Height$5(ChildRect),0,EmptyAnchors.slice(0));
               }
            }
         }
         Result = 160;
         return Result
      });
   }
   /// function TW3MovableControl.ClientHeight() : Integer
   ///  [line: 3905, column: 28, file: SmartCL.Components]
   ,ClientHeight:function(Self) {
      var Result = 0;
      var CSHandle;
      if (Self.FHandle$4) {
         Result = w3_getPropertyAsInt(Self.FHandle$4,"clientHeight");
         if (Self.FPositionMode == 24) {
            CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,Self.FHandle$4);
            if (CSHandle) {
               Result-=w3_getPropertyAsInt(CSHandle,"paddingTop")+w3_getPropertyAsInt(CSHandle,"paddingBottom");
            }
         }
      }
      return Result
   }
   /// function TW3MovableControl.ClientRect() : TRect
   ///  [line: 3929, column: 28, file: SmartCL.Components]
   ,ClientRect:function(Self) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      Result = Create$102(0,0,TW3MovableControl.ClientWidth(Self),TW3MovableControl.ClientHeight(Self));
      return Result
   }
   /// function TW3MovableControl.ClientWidth() : Integer
   ///  [line: 3891, column: 28, file: SmartCL.Components]
   ,ClientWidth:function(Self) {
      var Result = 0;
      var CSHandle;
      if (Self.FHandle$4) {
         Result = w3_getPropertyAsInt(Self.FHandle$4,"clientWidth");
         if (Self.FPositionMode == 24) {
            CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,Self.FHandle$4);
            if (CSHandle) {
               Result-=w3_getPropertyAsInt(CSHandle,"paddingLeft")+w3_getPropertyAsInt(CSHandle,"paddingRight");
            }
         }
      }
      return Result
   }
   /// procedure TW3MovableControl.FinalizeObject()
   ///  [line: 3983, column: 29, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      if (Self.FBackground) {
         TObject.Free(Self.FBackground);
      }
      if (Self.FBorders) {
         TObject.Free(Self.FBorders);
      }
      if (Self.FConstraints) {
         TObject.Free(Self.FConstraints);
      }
      if (Self.FTextShadow) {
         TObject.Free(Self.FTextShadow);
      }
      if (Self.FEdgeRadius) {
         TObject.Free(Self.FEdgeRadius);
      }
      TW3TagContainer.FinalizeObject(Self);
   }
   /// function TW3MovableControl.fxBusy() : Boolean
   ///  [line: 379, column: 28, file: SmartCL.Effects]
   ,fxBusy:function(Self) {
      var Result = false;
      if (TW3ElementAttributes.Exists$1(TW3TagObj.GetAttributes(Self),"fxBusy")) {
         Result = TW3ElementAttributes.Read$3(TW3TagObj.GetAttributes(Self),"fxBusy") == "yes";
      } else {
         Result = false;
      }
      return Result
   }
   /// procedure TW3MovableControl.fxFadeIn(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 1041, column: 29, file: SmartCL.Effects]
   ,fxFadeIn$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxFadeIn$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectFade));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         $As(mEffect,TW3CssEffectFade).FFrom$1 = 0;
         $As(mEffect,TW3CssEffectFade).FTo$1 = 1;
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         mEffect.OnAnimationEnds = function (Sender) {
            TW3MovableControl.SetVisible(Self,true);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(Sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3MovableControl.SetVisible(Self,true);
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxFadeOut(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 1094, column: 29, file: SmartCL.Effects]
   ,fxFadeOut$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxFadeOut$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectFade));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         $As(mEffect,TW3CssEffectFade).FFrom$1 = 1;
         $As(mEffect,TW3CssEffectFade).FTo$1 = 0;
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         mEffect.OnAnimationEnds = function (Sender) {
            TW3MovableControl.SetVisible(Self,false);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(Sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveBy(const dx: Integer; const dy: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 676, column: 29, file: SmartCL.Effects]
   ,fxMoveBy$1:function(Self, dx$3, dy$3, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxMoveBy$1(Self,dx$3,dy$3,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectMove));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         $As(mEffect,TW3CssEffectMove).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectMove).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect,TW3CssEffectMove).FToX = TW3MovableControl.GetLeft(Self)+dx$3;
         $As(mEffect,TW3CssEffectMove).FToY = TW3MovableControl.GetTop(Self)+dy$3;
         TW3CustomCSSAnimation.SetEasing($As(mEffect,TW3CssEffectMove),5);
         mEffect.OnAnimationEnds = function (sender) {
            TW3MovableControl.MoveTo$(Self,$As(sender,TW3CssEffectMove).FToX,$As(sender,TW3CssEffectMove).FToY);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveDown(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 623, column: 29, file: SmartCL.Effects]
   ,fxMoveDown$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxMoveDown$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectMove));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         $As(mEffect,TW3CssEffectMove).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectMove).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect,TW3CssEffectMove).FToX = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectMove).FToY = TW3MovableControl.GetHeight$($As(TW3TagContainer.a$53(Self),TW3MovableControl))-TW3MovableControl.GetHeight$(Self);
         TW3CustomCSSAnimation.SetEasing($As(mEffect,TW3CssEffectMove),5);
         mEffect.OnAnimationEnds = function (sender) {
            TW3MovableControl.SetTop$(Self,TW3MovableControl.GetHeight$($As(TW3TagContainer.a$53(Self),TW3MovableControl))-TW3MovableControl.GetHeight$(Self));
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveTo(const dx: Integer; const dy: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 799, column: 29, file: SmartCL.Effects]
   ,fxMoveTo$1:function(Self, dx$3, dy$3, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxMoveTo$1(Self,dx$3,dy$3,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectMove));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         mEffect.FFromX = TW3MovableControl.GetLeft(Self);
         mEffect.FFromY = TW3MovableControl.GetTop(Self);
         mEffect.FToX = dx$3;
         mEffect.FToY = dy$3;
         TW3CustomCSSAnimation.SetEasing(mEffect,5);
         mEffect.OnAnimationEnds = function (sender) {
            TW3MovableControl.MoveTo$(Self,dx$3,dy$3);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxMoveUp(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 571, column: 29, file: SmartCL.Effects]
   ,fxMoveUp$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxMoveUp$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectMove));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         $As(mEffect,TW3CssEffectMove).FFromX = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectMove).FFromY = TW3MovableControl.GetTop(Self);
         $As(mEffect,TW3CssEffectMove).FToX = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectMove).FToY = 0;
         TW3CustomCSSAnimation.SetEasing($As(mEffect,TW3CssEffectMove),5);
         mEffect.OnAnimationEnds = function (sender) {
            TW3MovableControl.SetTop$(Self,0);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxScaleDown(FromScale: Float; ToScale: Float; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 450, column: 29, file: SmartCL.Effects]
   ,fxScaleDown$1:function(Self, FromScale$1, ToScale$1, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxScaleDown$1(Self,FromScale$1,ToScale$1,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectScale));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         $As(mEffect,TW3CssEffectScale).FFrom = FromScale$1;
         $As(mEffect,TW3CssEffectScale).FTo = ToScale$1;
         TW3CustomCSSAnimation.SetEasing($As(mEffect,TW3CssEffectScale),5);
         TW3CustomCSSAnimation.SetDuration($As(mEffect,TW3CssEffectScale),Duration$1);
         mEffect.OnAnimationEnds = function (sender) {
            if (ToScale$1 == 1) {
               Self.FHandle$4.style["-webkit-transform"] = "";
            } else {
               Self.FHandle$4.style["-webkit-transform"] = "scale(" + ToScale$1.toString() + ")";
            }
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxScaleTo(const aToX: Integer; const aToY: Integer; const aToWidth: Integer; const aToHeight: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 734, column: 29, file: SmartCL.Effects]
   ,fxScaleTo$1:function(Self, aToX, aToY, aToWidth, aToHeight, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxScaleTo$1(Self,aToX,aToY,aToWidth,aToHeight,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectSize));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         $As(mEffect,TW3CssEffectSize).FromLeft = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectSize).FromTop = TW3MovableControl.GetTop(Self);
         $As(mEffect,TW3CssEffectSize).FromWidth = TW3MovableControl.GetWidth$(Self);
         $As(mEffect,TW3CssEffectSize).FromHeight = TW3MovableControl.GetHeight$(Self);
         $As(mEffect,TW3CssEffectSize).ToLeft = aToX;
         $As(mEffect,TW3CssEffectSize).ToTop = aToY;
         $As(mEffect,TW3CssEffectSize).ToWidth = aToWidth;
         $As(mEffect,TW3CssEffectSize).ToHeight = aToHeight;
         TW3CustomCSSAnimation.SetEasing($As(mEffect,TW3CssEffectSize),5);
         mEffect.OnAnimationEnds = function (sender) {
            TW3MovableControl.SetBounds$(Self,aToX,aToY,aToWidth,aToHeight);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxScaleUp(FromScale: Float; ToScale: Float; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 399, column: 29, file: SmartCL.Effects]
   ,fxScaleUp$1:function(Self, FromScale$1, ToScale$1, Duration$1, OnFinished) {
      var Effect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxScaleUp$1(Self,FromScale$1,ToScale$1,Duration$1,OnFinished);
         },50);
      } else {
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         Effect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectScale));
         Effect.FFrom = FromScale$1;
         Effect.FTo = ToScale$1;
         TW3CustomCSSAnimation.SetEasing(Effect,5);
         TW3CustomCSSAnimation.SetDuration(Effect,Duration$1);
         Effect.OnAnimationEnds = function (sender) {
            if (ToScale$1 == 1) {
               Self.FHandle$4.style["-webkit-transform"] = "";
            } else {
               Self.FHandle$4.style["-webkit-transform"] = "scale(" + ToScale$1.toString() + ")";
            }
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(Effect,Self);
      }
   }
   /// procedure TW3MovableControl.fxSizeTo(const aWidth: Integer; const aHeight: Integer; const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 505, column: 29, file: SmartCL.Effects]
   ,fxSizeTo$1:function(Self, aWidth, aHeight, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxSizeTo$1(Self,aWidth,aHeight,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectSize));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         $As(mEffect,TW3CssEffectSize).FromLeft = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectSize).FromTop = TW3MovableControl.GetTop(Self);
         $As(mEffect,TW3CssEffectSize).FromWidth = TW3MovableControl.GetWidth$(Self);
         $As(mEffect,TW3CssEffectSize).FromHeight = TW3MovableControl.GetHeight$(Self);
         $As(mEffect,TW3CssEffectSize).ToLeft = TW3MovableControl.GetLeft(Self);
         $As(mEffect,TW3CssEffectSize).ToTop = TW3MovableControl.GetTop(Self);
         $As(mEffect,TW3CssEffectSize).ToWidth = aWidth;
         $As(mEffect,TW3CssEffectSize).ToHeight = aHeight;
         TW3CustomCSSAnimation.SetEasing($As(mEffect,TW3CssEffectSize),5);
         mEffect.OnAnimationEnds = function (sender) {
            TW3MovableControl.SetBounds$(Self,$As(mEffect,TW3CssEffectSize).ToLeft,$As(mEffect,TW3CssEffectSize).ToTop,$As(mEffect,TW3CssEffectSize).ToWidth,$As(mEffect,TW3CssEffectSize).ToHeight);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxWarpIn(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 992, column: 29, file: SmartCL.Effects]
   ,fxWarpIn$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxWarpIn$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectWarpIn));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         mEffect.OnAnimationEnds = function (Sender) {
            TW3MovableControl.SetVisible(Self,true);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(Sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3MovableControl.SetVisible(Self,true);
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxWarpOut(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 944, column: 29, file: SmartCL.Effects]
   ,fxWarpOut$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxWarpOut$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectWarpOut));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         mEffect.OnAnimationEnds = function (Sender) {
            TW3MovableControl.SetVisible(Self,false);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(Sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// procedure TW3MovableControl.fxZoomIn(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 852, column: 29, file: SmartCL.Effects]
   ,fxZoomIn$1:function(Self, Duration$1, OnFinished) {
      var Effect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxZoomIn$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         Effect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectZoomIn));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(Effect,Duration$1);
         Effect.OnAnimationEnds = function (Sender) {
            TW3MovableControl.SetVisible(Self,true);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(Sender,TW3CssEffectZoomIn));
            },1000);
         };
         TW3MovableControl.SetVisible(Self,true);
         TW3CustomCSSAnimation.Execute$1(Effect,Self);
      }
   }
   /// procedure TW3MovableControl.fxZoomOut(const Duration: Float; const OnFinished: TProcedureRef)
   ///  [line: 897, column: 29, file: SmartCL.Effects]
   ,fxZoomOut$1:function(Self, Duration$1, OnFinished) {
      var mEffect = null;
      if (TW3MovableControl.fxBusy(Self)) {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.fxZoomOut$1(Self,Duration$1,OnFinished);
         },50);
      } else {
         mEffect = TW3CustomCSSAnimation.Create$134$($New(TW3CssEffectZoomOut));
         TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[true?1:0]);
         TW3CustomCSSAnimation.SetDuration(mEffect,Duration$1);
         mEffect.OnAnimationEnds = function (Sender) {
            TW3MovableControl.SetVisible(Self,false);
            TW3ElementAttributes.Write$3(TW3TagObj.GetAttributes(Self),"fxBusy",cYesNoLUT[false?1:0]);
            if (OnFinished) {
               OnFinished();
            }
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TObject.Free($As(Sender,TW3CustomCSSAnimation));
            },1000);
         };
         TW3CustomCSSAnimation.Execute$1(mEffect,Self);
      }
   }
   /// function TW3MovableControl.GetBackGround() : TW3ControlBackground
   ///  [line: 4203, column: 28, file: SmartCL.Components]
   ,GetBackGround:function(Self) {
      var Result = null;
      if (Self.FBackground === null) {
         Self.FBackground = TW3OwnedObject.Create$11$($New(TW3ControlBackground),Self);
      }
      Result = Self.FBackground;
      return Result
   }
   /// function TW3MovableControl.GetBorder() : TW3Borders
   ///  [line: 4028, column: 28, file: SmartCL.Components]
   ,GetBorder:function(Self) {
      var Result = null;
      if (Self.FBorders === null) {
         Self.FBorders = TW3OwnedObject.Create$11$($New(TW3Borders),Self);
      }
      Result = Self.FBorders;
      return Result
   }
   /// function TW3MovableControl.GetBoundsRect() : TRect
   ///  [line: 4256, column: 28, file: SmartCL.Components]
   ,GetBoundsRect:function(Self) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      var CSHandle,
         PCSHandle;
      if (Self.FHandle$4) {
         CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,Self.FHandle$4);
         if (CSHandle) {
            Result.Left$3 = w3_getPropertyAsInt(CSHandle,"left");
            Result.Top$3 = w3_getPropertyAsInt(CSHandle,"top");
            if (Self.FPositionMode == 24 && TW3TagContainer.a$53(Self) !== null && TW3TagContainer.a$53(Self).FHandle$4) {
               PCSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,TW3TagContainer.a$53(Self).FHandle$4);
               if (PCSHandle) {
                  Result.Left$3 -= w3_getPropertyAsInt(PCSHandle,"paddingLeft");
                  Result.Top$3 -= w3_getPropertyAsInt(PCSHandle,"paddingTop");
               }
            }
            Result.Right$1 = Result.Left$3+w3_getPropertyAsInt(CSHandle,"width");
            Result.Bottom$1 = Result.Top$3+w3_getPropertyAsInt(CSHandle,"height");
            if (Self.FPositionMode == 24) {
               Result.Right$1 = Result.Right$1+w3_GetStyleAsInt(Self.FHandle$4,"margin-left")+w3_GetStyleAsInt(Self.FHandle$4,"margin-right");
               Result.Bottom$1 = Result.Bottom$1+w3_GetStyleAsInt(Self.FHandle$4,"margin-top")+w3_GetStyleAsInt(Self.FHandle$4,"margin-bottom");
            }
         }
      }
      return Result
   }
   /// function TW3MovableControl.GetConstraints() : TW3Constraints
   ///  [line: 4006, column: 28, file: SmartCL.Components]
   ,GetConstraints:function(Self) {
      var Result = null;
      if (Self.FConstraints === null) {
         Self.FConstraints = TW3Constraints.Create$125($New(TW3Constraints),Self);
      }
      Result = Self.FConstraints;
      return Result
   }
   /// function TW3MovableControl.GetFont() : TW3CustomFont
   ///  [line: 3696, column: 28, file: SmartCL.Components]
   ,GetFont:function(Self) {
      var Result = null;
      if (Self.FFont === null) {
         Self.FFont = TW3ControlFont.Create$123($New(TW3ControlFont),Self);
      }
      Result = Self.FFont;
      return Result
   }
   /// function TW3MovableControl.GetHeight() : Integer
   ///  [line: 4407, column: 28, file: SmartCL.Components]
   ,GetHeight:function(Self) {
      var Result = 0;
      Result = TRect$Height$5(TW3MovableControl.GetBoundsRect(Self));
      return Result
   }
   /// function TW3MovableControl.GetIsVisible() : Boolean
   ///  [line: 4215, column: 28, file: SmartCL.Components]
   ,GetIsVisible:function(Self) {
      return Self.FHandle$4 && Self.FHandle$4.offsetWidth > 0 && Self.FHandle$4.offsetHeight > 0;
   }
   /// function TW3MovableControl.GetLeft() : Integer
   ///  [line: 4282, column: 28, file: SmartCL.Components]
   ,GetLeft:function(Self) {
      var Result = 0;
      Result = TW3MovableControl.GetBoundsRect(Self).Left$3;
      return Result
   }
   /// function TW3MovableControl.GetStyleClass() : String
   ///  [line: 3717, column: 28, file: SmartCL.Components]
   ,GetStyleClass:function(Self) {
      return w3_getAttribAsStr(Self.FHandle$4,"class");
   }
   /// function TW3MovableControl.GetTop() : Integer
   ///  [line: 4318, column: 28, file: SmartCL.Components]
   ,GetTop:function(Self) {
      var Result = 0;
      Result = TW3MovableControl.GetBoundsRect(Self).Top$3;
      return Result
   }
   /// function TW3MovableControl.GetVisible() : Boolean
   ///  [line: 4210, column: 28, file: SmartCL.Components]
   ,GetVisible:function(Self) {
      return Self.FHandle$4 && Self.FHandle$4.style["visibility"] == "visible";
   }
   /// function TW3MovableControl.GetWidth() : Integer
   ///  [line: 4353, column: 28, file: SmartCL.Components]
   ,GetWidth:function(Self) {
      var Result = 0;
      Result = TRect$Width$6(TW3MovableControl.GetBoundsRect(Self));
      return Result
   }
   /// procedure TW3MovableControl.InitAsync(const OnReady: TProcedureRef)
   ///  [line: 3635, column: 29, file: SmartCL.Components]
   ,InitAsync:function(Self, OnReady$3) {
      TW3ControlTracker.RegisterUnderConstruction(TW3ControlTracker,Self);
      TW3MovableControl.ReadyExecute(Self,function () {
         try {
            OnReady$3();
         } finally {
            TW3ControlTracker.RegisterObjectReady(TW3ControlTracker,Self);
         }
      });
   }
   /// procedure TW3MovableControl.InitializeObject()
   ///  [line: 3604, column: 29, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3CustomComponent.InitializeObject(Self);
      Self.FAlpha = 100;
      Self.FColor = 536870911;
      Self.FTransparent = false;
      Self.FAlign = 0;
      Self.FAnchors = [3];
      if (TW3TagContainer.a$53(Self)) {
         if ($SetIn(TW3TagObj.CreationFlags$(Self),0,0,8)) {
            TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ObjectReady$),16);
         } else {
            TW3MovableControl.ReadySync$1(Self);
         }
      } else {
         TW3MovableControl.ObjectReady$(Self);
      }
   }
   /// procedure TW3MovableControl.Invalidate()
   ///  [line: 4460, column: 29, file: SmartCL.Components]
   ,Invalidate:function(Self) {
      if ((!($SetIn(Self.FComponentState,8,0,11))) && (!($SetIn(Self.FComponentState,10,0,11)))) {
         if (TW3MovableControl.GetVisible(Self)) {
            TW3TagObj.AddToComponentState(Self,[256]);
            if (!($SetIn(Self.FComponentState,1,0,11))) {
               TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ResizeWhenReady),10);
            }
         }
      }
   }
   /// procedure TW3MovableControl.InvalidateAlign()
   ///  [line: 4474, column: 29, file: SmartCL.Components]
   ,InvalidateAlign:function(Self) {
      if ((!($SetIn(Self.FComponentState,9,0,11))) && (!($SetIn(Self.FComponentState,10,0,11)))) {
         if (TW3MovableControl.GetVisible(Self)) {
            TW3TagObj.AddToComponentState(Self,[512]);
            if (!($SetIn(Self.FComponentState,1,0,11))) {
               TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ResizeWhenReady),10);
            }
         }
      }
   }
   /// function TW3MovableControl.IsObjectReady() : Boolean
   ///  [line: 3652, column: 28, file: SmartCL.Components]
   ,IsObjectReady:function(Self) {
      var Result = false;
      var disp = "",
         vis = "",
         CSHandle;
      if ($SetIn(Self.FComponentState,4,0,11) && Self.FHandle$4) {
         disp = w3_GetStyleAsStr(Self.FHandle$4,"display");
         vis = w3_GetStyleAsStr(Self.FHandle$4,"visibility");
         if (disp != "" && vis != "") {
            CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,Self.FHandle$4);
            if (CSHandle) {
               Result = true;
               return Result;
            }
         }
      }
      Result = false;
      return Result
   }
   /// function TW3MovableControl.MeasureTextFixed(const TextContent: String) : TW3TextMetric
   ///  [line: 4959, column: 28, file: SmartCL.Components]
   ,MeasureTextFixed:function(Self, TextContent) {
      var Result = {tmWidth:0,tmHeight:0};
      Result = TW3FontDetector.MeasureText$5(W3FontDetector(),TW3FontDetector.GetFontInfo$2(W3FontDetector(),Self.FHandle$4),TW3MovableControl.ClientWidth(Self),TextContent);
      return Result
   }
   /// procedure TW3MovableControl.Moved()
   ///  [line: 4531, column: 29, file: SmartCL.Components]
   ,Moved:function(Self) {
      /* null */
   }
   /// procedure TW3MovableControl.MoveTo(const NewLeft: Integer; const NewTop: Integer)
   ///  [line: 4615, column: 29, file: SmartCL.Components]
   ,MoveTo:function(Self, NewLeft, NewTop) {
      var LLeft = 0,
         LTop = 0,
         CSHandle,
         pxLeft = "",
         pxTop = "",
         LMoved = false;
      Self.FControlLeft = NewLeft;
      Self.FControlTop = NewTop;
      if (Self.FAlign) {
         return;
      }
      LLeft = NewLeft;
      LTop = NewTop;
      if (Self.FPositionMode == 24) {
         if (TW3TagContainer.a$53(Self) !== null) {
            if (TW3TagContainer.a$53(Self).FHandle$4) {
               CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,TW3TagContainer.a$53(Self).FHandle$4);
               if (CSHandle) {
                  LLeft+=w3_getPropertyAsInt(CSHandle,"paddingLeft");
                  LTop+=w3_getPropertyAsInt(CSHandle,"paddingTop");
               }
            }
         }
      }
      pxLeft = TInteger.ToPxStr(LLeft);
      pxTop = TInteger.ToPxStr(LTop);
      LMoved = Self.FHandle$4.style.left != pxLeft || Self.FHandle$4.style.top != pxTop;
      if (LMoved) {
         TW3TagObj.BeginUpdate(Self);
         try {
            Self.FHandle$4.style.left = pxLeft;
            Self.FHandle$4.style.top = pxTop;
            TW3TagObj.AddToComponentState(Self,[64]);
            TW3MovableControl.RecalculateAnchorGaps(Self);
         } finally {
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3MovableControl.ObjectReady()
   ///  [line: 3813, column: 29, file: SmartCL.Components]
   ,ObjectReady:function(Self) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHandle$4) {
            TW3TagObj.AddToComponentState(Self,[16]);
            TW3TagObj.HookEvents$(Self);
            if ((TW3TagContainer.a$53(Self)!==null) && TW3MovableControl.GetVisible(Self)) {
               if (!($Is(Self,TW3CustomForm) || $Is(Self,TW3DisplayView))) {
                  TW3MovableControl.Invalidate$(Self);
               }
            }
         }
      }
   }
   /// procedure TW3MovableControl.ReadyExecute(const OnReady: TProcedureRef)
   ///  [line: 3677, column: 29, file: SmartCL.Components]
   ,ReadyExecute:function(Self, OnReady$3) {
      if (TW3OwnedObject.IsObjectReady$(Self)) {
         OnReady$3();
      } else {
         TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
            TW3MovableControl.ReadyExecute(Self,OnReady$3);
         },30);
      }
   }
   /// procedure TW3MovableControl.ReadySync()
   ///  [line: 3755, column: 29, file: SmartCL.Components]
   ,ReadySync$1:function(Self) {
      function ReSync() {
         ++Self.FSyncCount;
         if (Self.FSyncCount > 300) {
            TW3MovableControl.ObjectReady$(Self);
            Self.FSyncCount = 0;
            return;
         }
         TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ReadySync$1),40);
      };
      if (Self.FHandle$4) {
         if (TControlHandleHelper$Ready$4(Self.FHandle$4)) {
            if ($SetIn(Self.FComponentState,10,0,11)) {
               return;
            }
            if ($SetIn(Self.FComponentState,0,0,11)) {
               ReSync();
            } else {
               if ($SetIn(Self.FComponentState,2,0,11)) {
                  ReSync();
               } else {
                  if (!(TW3MovableControl.GetVisible(Self))) {
                     if (Self.FSyncCount > 0) {
                        TW3MovableControl.ObjectReady$(Self);
                     } else {
                        TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ObjectReady$),10);
                     }
                     return;
                  }
                  if (TW3TagContainer.QueryChildrenReady(Self)) {
                     if (Self.FSyncCount > 0) {
                        TW3MovableControl.ObjectReady$(Self);
                     } else {
                        TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ObjectReady$),10);
                     }
                  } else {
                     ReSync();
                  }
               }
            }
         } else {
            ReSync();
         }
      } else {
         ReSync();
      }
   }
   /// procedure TW3MovableControl.RecalculateAnchorGaps()
   ///  [line: 4190, column: 29, file: SmartCL.Components]
   ,RecalculateAnchorGaps:function(Self) {
      var PRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         MyRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      if (!($SetIn(Self.FAnchors,2,0,4) || $SetIn(Self.FAnchors,3,0,4))) {
         return;
      }
      if ($SetIn(Self.FComponentState,1,0,11)) {
         return;
      }
      if (TW3TagContainer.a$53(Self) !== null) {
         PRect = TW3MovableControl.ClientRect$($As(TW3TagContainer.a$53(Self),TW3CustomControl));
         MyRect = TW3MovableControl.GetBoundsRect(Self);
         Self.FAnchorGapRight = PRect.Right$1-MyRect.Right$1;
         Self.FAnchorGapBottom = PRect.Bottom$1-MyRect.Bottom$1;
      }
   }
   /// procedure TW3MovableControl.Resize()
   ///  [line: 4535, column: 29, file: SmartCL.Components]
   ,Resize:function(Self) {
      var wd = 0,
         xwidth = 0,
         fbase = 0,
         fSize = 0;
      if (Self.FFont !== null) {
         if (Self.FFont.FAuto) {
            wd = TW3MovableControl.GetWidth$(Self);
            if (wd > 0) {
               xwidth = (wd > 9999)?9999:(wd < 1)?1:wd;
               fbase = Math.round(xwidth / 6.3);
               fSize = (fbase > 9999)?9999:(fbase < 1)?1:fbase;
               Self.FHandle$4.style.fontSize = TInteger.ToPxStr(fSize);
            }
         }
      }
      TW3MovableControl.AlignChildren(Self);
      TW3MovableControl.AnchorChildren(Self);
   }
   /// procedure TW3MovableControl.ResizeWhenReady()
   ///  [line: 4562, column: 29, file: SmartCL.Components]
   ,ResizeWhenReady:function(Self) {
      if (Self.FHandle$4 && (!($SetIn(Self.FComponentState,1,0,11)))) {
         if ($SetIn(Self.FComponentState,7,0,11)) {
            if (TW3TagContainer.QueryChildrenReady(Self)) {
               TW3TagObj.RemoveFromComponentState(Self,[128]);
            } else {
               ++Self.FSyncCount;
               if (Self.FSyncCount < 300) {
                  if (!($SetIn(Self.FComponentState,10,0,11))) {
                     TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3MovableControl.ResizeWhenReady),10);
                  }
                  return;
               } else {
                  Self.FSyncCount = 0;
               }
            }
         }
         if ($SetIn(Self.FComponentState,4,0,11) && TW3MovableControl.GetVisible(Self)) {
            if ($SetIn(Self.FComponentState,9,0,11)) {
               try {
                  TW3MovableControl.AlignChildren(Self);
               } finally {
                  TW3TagObj.RemoveFromComponentState(Self,[512]);
               }
            }
            if ($SetIn(Self.FComponentState,8,0,11)) {
               TW3MovableControl.Resize$(Self);
               TW3TagObj.RemoveFromComponentState(Self,[256]);
               if ($SetIn(TW3TagObj.CreationFlags$(Self),5,0,8)) {
                  if (Self.FOnResize) {
                     Self.FOnResize(Self);
                  }
               }
            }
         }
      }
      if (!($SetIn(Self.FComponentState,1,0,11))) {
         TW3TagObj.RemoveFromComponentState(Self,[256]);
      }
   }
   /// function TW3MovableControl.ScreenRect() : TRect
   ///  [line: 3934, column: 28, file: SmartCL.Components]
   ,ScreenRect:function(Self) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      var dx$3 = 0,
         dy$3 = 0,
         Element$2 = null,
         LElement;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Element$2 = Self;
         while (Element$2 !== null) {
            LElement = Element$2.FHandle$4;
            dx$3 += $VarToInt(LElement.offsetLeft,"");
            dy$3 += $VarToInt(LElement.offsetTop,"");
            if ($Is(TW3TagContainer.a$53(Element$2),TW3MovableControl)) {
               Element$2 = $As(TW3TagContainer.a$53(Element$2),TW3MovableControl);
            } else {
               break;
            }
            LElement = Element$2.FHandle$4;
            if (LElement) {
               dx$3 -= $VarToInt(LElement.scrollLeft,"");
               dx$3+=TW3Border.GetWidth$6(TW3MovableControl.GetBorder(Element$2).FLeft);
               dy$3 -= $VarToInt(LElement.scrollTop,"");
               dy$3+=TW3Border.GetWidth$6(TW3MovableControl.GetBorder(Element$2).FTop);
            } else {
               break;
            }
         }
         Result.Left$3 = dx$3;
         Result.Top$3 = dy$3;
         Result.Right$1 = $VarToInt((dx$3+Self.FHandle$4.offsetWidth),"");
         Result.Bottom$1 = $VarToInt((dy$3+Self.FHandle$4.offsetHeight),"");
      }
      return Result
   }
   /// procedure TW3MovableControl.SetAlign(const Value: TW3Align)
   ///  [line: 4488, column: 29, file: SmartCL.Components]
   ,SetAlign:function(Self, Value$5) {
      var FOldAlign = 0;
      if (Self.FAlign != Value$5) {
         FOldAlign = Self.FAlign;
         Self.FAlign = Value$5;
         switch (FOldAlign) {
            case 1 :
            case 2 :
               TW3MovableControl.SetBounds$(Self,Self.FControlLeft,Self.FControlTop,Self.FControlWidth,TW3MovableControl.GetHeight$(Self));
               break;
            case 3 :
            case 4 :
               TW3MovableControl.SetBounds$(Self,Self.FControlLeft,Self.FControlTop,TW3MovableControl.GetWidth$(Self),Self.FControlHeight);
               break;
            case 5 :
               TW3MovableControl.SetBounds$(Self,Self.FControlLeft,Self.FControlTop,Self.FControlWidth,Self.FControlHeight);
               break;
         }
         if (TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3MovableControl)) {
            TW3MovableControl.InvalidateAlign($As(TW3TagContainer.a$53(Self),TW3MovableControl));
         }
      }
   }
   /// procedure TW3MovableControl.SetAlpha(const NewAlphaValue: Integer)
   ///  [line: 4880, column: 29, file: SmartCL.Components]
   ,SetAlpha:function(Self, NewAlphaValue) {
      Self.FAlpha = TInteger.EnsureRange(NewAlphaValue,0,100);
      if (Self.FUseAlpha) {
         Self.FHandle$4.style["opacity"] = Self.FAlpha * 0.01;
      }
   }
   /// procedure TW3MovableControl.SetAnchorGapBottom(const Value: Integer)
   ///  [line: 4523, column: 29, file: SmartCL.Components]
   ,SetAnchorGapBottom:function(Self, Value$5) {
      Self.FAnchorGapBottom = Value$5;
      if (!($SetIn(Self.FComponentState,1,0,11))) {
         if ($SetIn(Self.FAnchors,3,0,4) && TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3MovableControl)) {
            TW3MovableControl.AnchorChildren($As(TW3TagContainer.a$53(Self),TW3MovableControl));
         }
      }
   }
   /// procedure TW3MovableControl.SetAnchorGapRight(const Value: Integer)
   ///  [line: 4515, column: 29, file: SmartCL.Components]
   ,SetAnchorGapRight:function(Self, Value$5) {
      Self.FAnchorGapRight = Value$5;
      if (!($SetIn(Self.FComponentState,1,0,11))) {
         if ($SetIn(Self.FAnchors,2,0,4) && TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3MovableControl)) {
            TW3MovableControl.AnchorChildren($As(TW3TagContainer.a$53(Self),TW3MovableControl));
         }
      }
   }
   /// procedure TW3MovableControl.SetAnchors(const Value: TW3Anchors)
   ///  [line: 4507, column: 29, file: SmartCL.Components]
   ,SetAnchors:function(Self, Value$5) {
      if (Value$5-Self.FAnchors != 0) {
         Self.FAnchors = Value$5.slice(0);
         TW3MovableControl.RecalculateAnchorGaps(Self);
      }
   }
   /// procedure TW3MovableControl.SetBounds(const NewLeft: Integer; const NewTop: Integer; const NewWidth: Integer; const NewHeight: Integer; UseAlign: TW3Align; UseAnchors: TW3Anchors)
   ///  [line: 4672, column: 29, file: SmartCL.Components]
   ,SetBounds$2:function(Self, NewLeft, NewTop, NewWidth, NewHeight, UseAlign, UseAnchors) {
      var LHeight = 0,
         LWidth = 0,
         LLeft = 0,
         LTop = 0,
         CSHandle,
         PCSHandle,
         pxLeft = "",
         pxTop = "",
         pxWidth = "",
         pxHeight = "",
         LMoved = false,
         LSized = false;
      LHeight = NewHeight;
      LWidth = NewWidth;
      if (TW3MovableControl.GetConstraints(Self).FEnabled) {
         if (TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewHeight < TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self))) {
               LHeight = TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewHeight > TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self))) {
               LHeight = TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewWidth < TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self))) {
               LWidth = TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewWidth > TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self))) {
               LWidth = TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self));
            }
         }
      }
      LLeft = NewLeft;
      LTop = NewTop;
      if (Self.FPositionMode == 24) {
         CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,Self.FHandle$4);
         if (CSHandle) {
            LWidth-=w3_getPropertyAsInt(CSHandle,"margin-left")+w3_getPropertyAsInt(CSHandle,"margin-right");
            LHeight-=w3_getPropertyAsInt(CSHandle,"margin-top")+w3_getPropertyAsInt(CSHandle,"margin-bottom");
         }
         if (TW3TagContainer.a$53(Self) !== null) {
            if (TW3TagContainer.a$53(Self).FHandle$4) {
               PCSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,TW3TagContainer.a$53(Self).FHandle$4);
               if (PCSHandle) {
                  LLeft+=w3_getPropertyAsInt(PCSHandle,"paddingLeft");
                  LTop+=w3_getPropertyAsInt(PCSHandle,"paddingTop");
               }
            }
         }
      }
      pxLeft = TInteger.ToPxStr(LLeft);
      pxTop = TInteger.ToPxStr(LTop);
      pxWidth = TInteger.ToPxStr(LWidth);
      pxHeight = TInteger.ToPxStr(LHeight);
      LMoved = (UseAlign==0) && (Self.FHandle$4.style.left != pxLeft || Self.FHandle$4.style.top != pxTop);
      LSized = Self.FHandle$4.style.width != pxWidth || Self.FHandle$4.style.height != pxHeight;
      if (LSized) {
         if ((1<<UseAlign&6)!=0) {
            LSized = Self.FHandle$4.style.height != pxHeight;
         }
         if ((1<<UseAlign&24)!=0) {
            LSized = Self.FHandle$4.style.width != pxWidth;
         }
      }
      if (LMoved || LSized) {
         TW3TagObj.BeginUpdate(Self);
         try {
            if (LMoved) {
               Self.FHandle$4.style.left = pxLeft;
               Self.FHandle$4.style.top = pxTop;
               if ($SetIn(Self.FComponentState,4,0,11)) {
                  TW3TagObj.AddToComponentState(Self,[64]);
               }
            }
            if (LSized) {
               if (!((1<<UseAlign&6)!=0)) {
                  Self.FHandle$4.style.width = pxWidth;
               }
               if (!((1<<UseAlign&24)!=0)) {
                  Self.FHandle$4.style.height = pxHeight;
               }
               if ($SetIn(Self.FComponentState,4,0,11)) {
                  TW3TagObj.AddToComponentState(Self,[32]);
               }
               if ($SetIn(UseAnchors,2,0,4) || $SetIn(UseAnchors,3,0,4)) {
                  TW3MovableControl.RecalculateAnchorGaps(Self);
               }
               if ((UseAlign!=0) && TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3MovableControl)) {
                  TW3MovableControl.InvalidateAlign($As(TW3TagContainer.a$53(Self),TW3MovableControl));
               }
            }
         } finally {
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3MovableControl.SetBounds(const NewBounds: TRect)
   ///  [line: 4783, column: 29, file: SmartCL.Components]
   ,SetBounds$1:function(Self, NewBounds) {
      TW3MovableControl.SetBounds$(Self,NewBounds.Left$3,NewBounds.Top$3,TRect$Width$6(NewBounds),TRect$Height$5(NewBounds));
   }
   /// procedure TW3MovableControl.SetBounds(const NewLeft: Integer; const NewTop: Integer; const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 4663, column: 29, file: SmartCL.Components]
   ,SetBounds:function(Self, NewLeft, NewTop, NewWidth, NewHeight) {
      Self.FControlLeft = NewLeft;
      Self.FControlTop = NewTop;
      Self.FControlWidth = NewWidth;
      Self.FControlHeight = NewHeight;
      TW3MovableControl.SetBounds$2(Self,NewLeft,NewTop,NewWidth,NewHeight,Self.FAlign,Self.FAnchors.slice(0));
   }
   /// procedure TW3MovableControl.SetColor(const NewColor: TColor)
   ///  [line: 4912, column: 29, file: SmartCL.Components]
   ,SetColor:function(Self, NewColor) {
      var LAlpha = 0,
         LHandle,
         LTransparent = false,
         r$3 = 0,
         g$1 = 0,
         b$2 = 0;
      if (NewColor != Self.FColor) {
         Self.FColor = NewColor;
         LAlpha = Self.FAlpha;
         LHandle = Self.FHandle$4;
         LTransparent = Self.FTransparent;
         r$3 = (NewColor>>>16)&255;
         g$1 = (NewColor>>>8)&255;
         b$2 = NewColor&255;
         if (Self.FTransparent) {
            Self.FHandle$4.style.backgroundColor = "rgba(" + __StrByteLUT[r$3] + "," + __StrByteLUT[g$1] + "," + __StrByteLUT[b$2] + "," + __StrByteLUT[$Div(Self.FAlpha,100)] + ")";
         } else {
            Self.FHandle$4.style.backgroundColor = "#" + __ByteToHexLUT[r$3] + __ByteToHexLUT[g$1] + __ByteToHexLUT[b$2];
         }
      }
   }
   /// procedure TW3MovableControl.SetHeight(const NewHeight: Integer)
   ///  [line: 4412, column: 29, file: SmartCL.Components]
   ,SetHeight:function(Self, NewHeight) {
      var LHeight = 0;
      Self.FControlHeight = NewHeight;
      LHeight = NewHeight;
      if (TW3MovableControl.GetConstraints(Self).FEnabled) {
         if (TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewHeight < TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self))) {
               LHeight = TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewHeight > TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self))) {
               LHeight = TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self));
            }
         }
      }
      if ((1<<Self.FAlign&56)!=0) {
         return;
      }
      if (Self.FPositionMode == 24) {
         LHeight-=w3_GetStyleAsInt(Self.FHandle$4,"margin-top")+w3_GetStyleAsInt(Self.FHandle$4,"margin-bottom");
      }
      if (LHeight != TW3MovableControl.GetHeight$(Self)) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3TagObj.BeginUpdate(Self);
            Self.FHandle$4.style.height = LHeight.toString() + "px";
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3MovableControl.RecalculateAnchorGaps(Self);
            TW3TagObj.EndUpdate(Self);
            if ((Self.FAlign!=0) && TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3MovableControl)) {
               TW3MovableControl.InvalidateAlign($As(TW3TagContainer.a$53(Self),TW3MovableControl));
            }
         } else {
            Self.FHandle$4.style.height = LHeight.toString() + "px";
         }
      }
   }
   /// procedure TW3MovableControl.SetLeft(const NewLeft: Integer)
   ///  [line: 4287, column: 29, file: SmartCL.Components]
   ,SetLeft:function(Self, NewLeft) {
      var LLeft = 0,
         CSHandle;
      Self.FControlLeft = NewLeft;
      if (Self.FAlign) {
         return;
      }
      LLeft = NewLeft;
      if ($SetIn(Self.FComponentState,4,0,11)) {
         if (Self.FPositionMode == 24) {
            if (TW3TagContainer.a$53(Self) !== null) {
               if (TW3TagContainer.a$53(Self).FHandle$4) {
                  CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,TW3TagContainer.a$53(Self).FHandle$4);
                  if (CSHandle) {
                     LLeft+=w3_getPropertyAsInt(CSHandle,"paddingLeft");
                  }
               }
            }
         }
         TW3TagObj.BeginUpdate(Self);
         Self.FHandle$4.style.left = TInteger.ToPxStr(LLeft);
         TW3TagObj.AddToComponentState(Self,[64]);
         TW3MovableControl.RecalculateAnchorGaps(Self);
         TW3TagObj.EndUpdate(Self);
      } else {
         Self.FHandle$4.style.left = TInteger.ToPxStr(LLeft);
      }
   }
   /// procedure TW3MovableControl.SetSize(const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 4788, column: 29, file: SmartCL.Components]
   ,SetSize$2:function(Self, NewWidth, NewHeight) {
      var LHeight = 0,
         LWidth = 0,
         CSHandle,
         pxWidth = "",
         pxHeight = "",
         LSized = false;
      Self.FControlWidth = NewWidth;
      Self.FControlHeight = NewHeight;
      LHeight = NewHeight;
      LWidth = NewWidth;
      if (TW3MovableControl.GetConstraints(Self).FEnabled) {
         if (TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewHeight < TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self))) {
               LHeight = TW3Constraints.GetMinHeight(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewHeight > TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self))) {
               LHeight = TW3Constraints.GetMaxHeight(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewWidth < TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self))) {
               LWidth = TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewWidth > TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self))) {
               LWidth = TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self));
            }
         }
      }
      if (Self.FPositionMode == 24) {
         CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,Self.FHandle$4);
         if (CSHandle) {
            LWidth-=w3_getPropertyAsInt(CSHandle,"margin-left")+w3_getPropertyAsInt(CSHandle,"margin-right");
            LHeight-=w3_getPropertyAsInt(CSHandle,"margin-top")+w3_getPropertyAsInt(CSHandle,"margin-bottom");
         }
      }
      pxWidth = TInteger.ToPxStr(LWidth);
      pxHeight = TInteger.ToPxStr(LHeight);
      LSized = Self.FHandle$4.style.width != pxWidth || Self.FHandle$4.style.height != pxHeight;
      if (LSized) {
         if ((1<<Self.FAlign&6)!=0) {
            LSized = Self.FHandle$4.style.height != pxHeight;
         }
         if ((1<<Self.FAlign&24)!=0) {
            LSized = Self.FHandle$4.style.width != pxWidth;
         }
      }
      if (LSized) {
         TW3TagObj.BeginUpdate(Self);
         try {
            if (!((1<<Self.FAlign&6)!=0)) {
               Self.FHandle$4.style.width = pxWidth;
            }
            if (!((1<<Self.FAlign&24)!=0)) {
               Self.FHandle$4.style.height = pxHeight;
            }
            if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3TagObj.AddToComponentState(Self,[32]);
            }
            TW3MovableControl.RecalculateAnchorGaps(Self);
         } finally {
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3MovableControl.SetStyleClass(const NewStyleClass: String)
   ///  [line: 3722, column: 29, file: SmartCL.Components]
   ,SetStyleClass:function(Self, NewStyleClass) {
      w3_setAttrib(Self.FHandle$4,"class",NewStyleClass);
   }
   /// procedure TW3MovableControl.SetTop(const NewTop: Integer)
   ///  [line: 4323, column: 29, file: SmartCL.Components]
   ,SetTop:function(Self, NewTop) {
      var LTop = 0,
         CSHandle;
      Self.FControlTop = NewTop;
      if (Self.FAlign) {
         return;
      }
      LTop = NewTop;
      if ($SetIn(Self.FComponentState,4,0,11)) {
         TW3TagObj.BeginUpdate(Self);
         if (Self.FPositionMode == 24) {
            if (TW3TagContainer.a$53(Self) !== null) {
               if (TW3TagContainer.a$53(Self).FHandle$4) {
                  CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,TW3TagContainer.a$53(Self).FHandle$4);
                  if (CSHandle) {
                     LTop+=w3_getPropertyAsInt(CSHandle,"paddingTop");
                  }
               }
            }
         }
         Self.FHandle$4.style.top = TInteger.ToPxStr(LTop);
         TW3TagObj.AddToComponentState(Self,[64]);
         TW3MovableControl.RecalculateAnchorGaps(Self);
         TW3TagObj.EndUpdate(Self);
      } else {
         Self.FHandle$4.style.top = TInteger.ToPxStr(LTop);
      }
   }
   /// procedure TW3MovableControl.SetTransparent(const Transparency: Boolean)
   ///  [line: 4890, column: 29, file: SmartCL.Components]
   ,SetTransparent:function(Self, Transparency) {
      var LWebColor = "";
      if (Transparency != Self.FTransparent) {
         LWebColor = ColorToWebStr(Self.FColor,(Transparency)?0:255);
         Self.FHandle$4.style["backgroundColor"] = LWebColor;
         Self.FTransparent = Transparency;
         if ($Is(Self,TW3GraphicControl)) {
            if ((!($SetIn(Self.FComponentState,10,0,11))) && TW3TagObj.Showing$(Self)) {
               TW3TagObj.BeginUpdate(Self);
               TW3TagObj.AddToComponentState(Self,[32]);
               TW3TagObj.EndUpdate(Self);
            }
         }
      }
   }
   /// procedure TW3MovableControl.SetUseAlpha(const NewUseAlpha: Boolean)
   ///  [line: 4871, column: 29, file: SmartCL.Components]
   ,SetUseAlpha:function(Self, NewUseAlpha) {
      if (Self.FUseAlpha != NewUseAlpha) {
         Self.FUseAlpha = NewUseAlpha;
         Self.FHandle$4.style["opacity"] = (NewUseAlpha)?Self.FAlpha * 0.01:1;
      }
   }
   /// procedure TW3MovableControl.SetVisible(const NewVisibility: Boolean)
   ///  [line: 4225, column: 29, file: SmartCL.Components]
   ,SetVisible:function(Self, NewVisibility) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewVisibility) {
            if (Self.FHandle$4.style["visibility"] != "visible") {
               TW3TagObj.BeginUpdate(Self);
               Self.FHandle$4.style["display"] = TW3TagObj.GetDisplayModeText(Self);
               Self.FHandle$4.style["visibility"] = "visible";
               TW3TagObj.AddToComponentState(Self,[32]);
               TW3TagObj.EndUpdate(Self);
            }
         } else {
            TW3TagObj.BeginUpdate(Self);
            Self.FHandle$4.style["display"] = "none";
            Self.FHandle$4.style["visibility"] = "hidden";
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         }
         if (Self.FOnVisible) {
            Self.FOnVisible(Self);
         }
      }
   }
   /// procedure TW3MovableControl.SetWidth(const NewWidth: Integer)
   ///  [line: 4358, column: 29, file: SmartCL.Components]
   ,SetWidth:function(Self, NewWidth) {
      var LWidth = 0;
      Self.FControlWidth = NewWidth;
      LWidth = NewWidth;
      if (TW3MovableControl.GetConstraints(Self).FEnabled) {
         if (TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewWidth < TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self))) {
               LWidth = TW3Constraints.GetMinWidth(TW3MovableControl.GetConstraints(Self));
            }
         }
         if (TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self)) > 0) {
            if (NewWidth > TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self))) {
               LWidth = TW3Constraints.GetMaxWidth(TW3MovableControl.GetConstraints(Self));
            }
         }
      }
      if ((1<<Self.FAlign&38)!=0) {
         return;
      }
      if (Self.FPositionMode == 24) {
         LWidth-=w3_GetStyleAsInt(Self.FHandle$4,"margin-left")+w3_GetStyleAsInt(Self.FHandle$4,"margin-right");
      }
      if (LWidth != TW3MovableControl.GetWidth$(Self)) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3TagObj.BeginUpdate(Self);
            Self.FHandle$4.style.width = LWidth.toString() + "px";
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3MovableControl.RecalculateAnchorGaps(Self);
            TW3TagObj.EndUpdate(Self);
            if ((Self.FAlign!=0) && TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3MovableControl)) {
               TW3MovableControl.InvalidateAlign($As(TW3TagContainer.a$53(Self),TW3MovableControl));
            }
         } else {
            Self.FHandle$4.style.width = LWidth.toString() + "px";
         }
      }
   }
   /// function TW3MovableControl.Showing() : Boolean
   ///  [line: 3741, column: 28, file: SmartCL.Components]
   ,Showing:function(Self) {
      var Result = false;
      if (TW3TagContainer.Showing(Self)) {
         if (TW3MovableControl.GetWidth$(Self) > 0) {
            if (TW3MovableControl.GetHeight$(Self) > 0) {
               Result = $SetIn(Self.FComponentState,4,0,11);
            }
         }
      }
      return Result
   }
   /// procedure TW3MovableControl.StyleTagObject()
   ///  [line: 3705, column: 29, file: SmartCL.Components]
   ,StyleTagObject:function(Self) {
      TW3TagObj.StyleTagObject(Self);
      if ($SetIn(TW3TagObj.CreationFlags$(Self),7,0,8)) {
         w3_setAttrib(Self.FHandle$4,"tabindex",0);
      }
      TW3MovableControl.SetStyleClass(Self,TObject.ClassName(Self.ClassType));
      TW3MovableControl.SetVisible(Self,true);
   }
   /// procedure TW3MovableControl._SetOnMoved(const EventHandler: TMovedEvent)
   ///  [line: 3736, column: 29, file: SmartCL.Components]
   ,_SetOnMoved:function(Self, EventHandler) {
      Self.FOnMoved = EventHandler;
   }
   /// procedure TW3MovableControl._SetOnResized(const EventHandler: TReSizeEvent)
   ///  [line: 3731, column: 29, file: SmartCL.Components]
   ,_SetOnResized:function(Self, EventHandler) {
      Self.FOnResize = EventHandler;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync$:function($){return $.ClassType.InitAsync.apply($.ClassType, arguments)}
   ,IsObjectReady$:function($){return $.ClassType.IsObjectReady($)}
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)}
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3TagObj.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing$:function($){return $.ClassType.Showing($)}
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3TagObj.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect$:function($){return $.ClassType.AdjustClientRect.apply($.ClassType, arguments)}
   ,ClientRect$:function($){return $.ClassType.ClientRect($)}
   ,GetHeight$:function($){return $.ClassType.GetHeight($)}
   ,GetWidth$:function($){return $.ClassType.GetWidth($)}
   ,Invalidate$:function($){return $.ClassType.Invalidate($)}
   ,MoveTo$:function($){return $.ClassType.MoveTo.apply($.ClassType, arguments)}
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign$:function($){return $.ClassType.SetAlign.apply($.ClassType, arguments)}
   ,SetBounds$1$:function($){return $.ClassType.SetBounds$1.apply($.ClassType, arguments)}
   ,SetBounds$:function($){return $.ClassType.SetBounds.apply($.ClassType, arguments)}
   ,SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType, arguments)}
   ,SetLeft$:function($){return $.ClassType.SetLeft.apply($.ClassType, arguments)}
   ,SetSize$2$:function($){return $.ClassType.SetSize$2.apply($.ClassType, arguments)}
   ,SetTop$:function($){return $.ClassType.SetTop.apply($.ClassType, arguments)}
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
};
TW3MovableControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3CustomControl = class (TW3MovableControl)
///  [line: 1070, column: 3, file: SmartCL.Components]
var TW3CustomControl = {
   $ClassName:"TW3CustomControl",$Parent:TW3MovableControl
   ,$Init:function ($) {
      TW3MovableControl.$Init($);
      $.AllowContextMenu = $.TouchPreventDefault = $.SimulateMouseEvents = $.FKeyPressSent = $.FTransparentEvents = false;
      $.FAngle = 0;
      $.FBackgroundType = 0;
      $.FBorderType = 0;
      $.FGestureData = $.FOnAllMovement = $.FOnAnimationBegins = $.FOnAnimationEnds = $.FOnBeginMovement = $.FOnChanged = $.FOnClick = $.FOnContextPopup = $.FOnDblClick = $.FOnEndMovement = $.FOnGestureChange = $.FOnGestureEnd = $.FOnGestureStart = $.FOnGotFocus = $.FOnHorizontalMovement = $.FOnInput = $.FOnKeyDown = $.FOnKeyPress = $.FOnKeyUp = $.FOnLostFocus = $.FOnMouseDown = $.FOnMouseEnter = $.FOnMouseExit = $.FOnMouseMove = $.FOnMouseUp = $.FOnMouseWheel = $.FOnScroll = $.FOnSelectionEnds = $.FOnSelectionStarts = $.FOnTouchBegins = $.FOnTouchEnds = $.FOnTouchMoves = $.FOnVerticalMovement = $.FScrollInfo = $.FTagStyle = $.FTouchData = null;
      $.FMouseTouchEventsCount = 0;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 1282, column: 40, file: SmartCL.Components]
   ,a$62:function(Self) {
      var Result = null;
      Result = $As(TW3MovableControl.GetFont(Self),TW3ControlFont);
      return Result
   }
   /// procedure TW3CustomControl.CBAnimationBegins(const EventObj: Variant)
   ///  [line: 6017, column: 28, file: SmartCL.Components]
   ,CBAnimationBegins:function(Self, EventObj) {
      if (Self.FOnAnimationBegins) {
         Self.FOnAnimationBegins(Self);
      }
   }
   /// procedure TW3CustomControl.CBAnimationEnds(const EventObj: Variant)
   ///  [line: 6069, column: 28, file: SmartCL.Components]
   ,CBAnimationEnds:function(Self, EventObj) {
      if (Self.FOnAnimationEnds) {
         Self.FOnAnimationEnds(Self);
      }
   }
   /// procedure TW3CustomControl.CBChanged(eventObj: JEvent)
   ///  [line: 6084, column: 28, file: SmartCL.Components]
   ,CBChanged:function(Self, eventObj) {
      if (Self.FOnChanged) {
         Self.FOnChanged(Self);
      }
   }
   /// procedure TW3CustomControl.CBClick(eventObj: JEvent)
   ///  [line: 5891, column: 28, file: SmartCL.Components]
   ,CBClick:function(Self, eventObj) {
      if (Self.FOnClick) {
         Self.FOnClick(Self);
      }
   }
   /// function TW3CustomControl.CBContextPopup(Event: JMouseEvent) : Boolean
   ///  [line: 6099, column: 27, file: SmartCL.Components]
   ,CBContextPopup:function(Self, Event$3) {
      var Result = false;
      var Lsr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         LMP = {X$1:0,Y$1:0},
         LHandled = {v:0};
      Lsr = TW3MovableControl.ScreenRect(Self);
      LMP = Create$105(Event$3.clientX-Lsr.Left$3,Event$3.clientY-Lsr.Top$3);
      LHandled.v = 0;
      TW3CustomControl.ContextPopup(Self,LMP,LHandled);
      if (LHandled.v) {
         Event$3.stopPropagation();
      }
      switch (LHandled.v) {
         case 0 :
            return Result;
            break;
         case 2 :
            Result = true;
            break;
         case 1 :
            Result = false;
            break;
      }
      return Result
   }
   /// procedure TW3CustomControl.CBDblClick(eventObj: JEvent)
   ///  [line: 5909, column: 28, file: SmartCL.Components]
   ,CBDblClick:function(Self, eventObj) {
      if (Self.FOnDblClick) {
         Self.FOnDblClick(Self);
      }
   }
   /// procedure TW3CustomControl.CBFocused()
   ///  [line: 5512, column: 28, file: SmartCL.Components]
   ,CBFocused:function(Self) {
      if (Self.FOnGotFocus) {
         Self.FOnGotFocus(Self);
      }
   }
   /// procedure TW3CustomControl.CBInput(eventObj: JInputEvent)
   ///  [line: 5990, column: 28, file: SmartCL.Components]
   ,CBInput:function(Self, eventObj) {
      var LChar = "";
      try {
         if ((Self.FOnKeyPress!==null) && (!(Self.FKeyPressSent))) {
            if (eventObj.data) {
               LChar = eventObj.data;
               Self.FOnKeyPress(Self,LChar);
            }
         }
      } finally {
         Self.FKeyPressSent = false;
      }
      if (Self.FOnInput) {
         Self.FOnInput(Self);
      }
   }
   /// procedure TW3CustomControl.CBKeyDown(eventObj: JKeyboardEvent)
   ///  [line: 5924, column: 28, file: SmartCL.Components]
   ,CBKeyDown:function(Self, eventObj) {
      if (Self.FOnKeyDown) {
         Self.FOnKeyDown(Self,eventObj.keyCode);
      }
   }
   /// procedure TW3CustomControl.CBKeyPress(eventObj: JKeyboardEvent)
   ///  [line: 5957, column: 28, file: SmartCL.Components]
   ,CBKeyPress:function(Self, eventObj) {
      var LChar = "",
         LChar$1 = "";
      Self.FKeyPressSent = false;
      if (Self.FOnKeyPress) {
         try {
            if (eventObj.keyCode) {
               LChar = TDatatype.ByteToChar(TDatatype,eventObj.keyCode);
               Self.FKeyPressSent = true;
               Self.FOnKeyPress(Self,LChar);
            } else if (eventObj.key) {
               LChar$1 = eventObj.key;
               if (LChar$1 == "Enter") {
                  LChar$1 = "\r";
               }
               Self.FKeyPressSent = true;
               Self.FOnKeyPress(Self,LChar$1);
            }
         } catch ($e) {
            /* null */
         }
      }
   }
   /// procedure TW3CustomControl.CBKeyUp(eventObj: JKeyboardEvent)
   ///  [line: 5939, column: 28, file: SmartCL.Components]
   ,CBKeyUp:function(Self, eventObj) {
      if (Self.FOnKeyUp) {
         Self.FOnKeyUp(Self,eventObj.keyCode);
      }
   }
   /// procedure TW3CustomControl.CBLostFocus()
   ///  [line: 5518, column: 28, file: SmartCL.Components]
   ,CBLostFocus:function(Self) {
      if (Self.FOnLostFocus) {
         Self.FOnLostFocus(Self);
      }
   }
   /// procedure TW3CustomControl.CBMouseDown(eventObj: JMouseEvent)
   ///  [line: 5704, column: 28, file: SmartCL.Components]
   ,CBMouseDown:function(Self, eventObj) {
      var sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         shiftState = null,
         dx$3 = 0,
         dy$3 = 0;
      sr = TW3MovableControl.ScreenRect(Self);
      shiftState = TShiftState.Current();
      shiftState.FMouseButtons = shiftState.FMouseButtons|(1<<eventObj.button);
      TShiftState.SetMouseEvent(shiftState,eventObj);
      dx$3 = eventObj.clientX;
      (dx$3-= sr.Left$3);
      (dx$3+= TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(Self)));
      dy$3 = eventObj.clientY;
      (dy$3-= sr.Top$3);
      (dy$3+= TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Self)));
      TW3CustomControl.MouseDown$(Self,$VarToInt(eventObj.button,""),shiftState,dx$3,dy$3);
   }
   /// procedure TW3CustomControl.CBMouseEnter(eventObj: JMouseEvent)
   ///  [line: 5802, column: 28, file: SmartCL.Components]
   ,CBMouseEnter:function(Self, eventObj) {
      var sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         shiftState = null;
      sr = TW3MovableControl.ScreenRect(Self);
      shiftState = TShiftState.Current();
      TShiftState.SetMouseEvent(shiftState,eventObj);
      TW3CustomControl.MouseEnter(Self,shiftState,eventObj.clientX-sr.Left$3,eventObj.clientY-sr.Top$3);
   }
   /// procedure TW3CustomControl.CBMouseExit(eventObj: JMouseEvent)
   ///  [line: 5824, column: 28, file: SmartCL.Components]
   ,CBMouseExit:function(Self, eventObj) {
      var sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         shiftState = null;
      sr = TW3MovableControl.ScreenRect(Self);
      shiftState = TShiftState.Current();
      TShiftState.SetMouseEvent(shiftState,eventObj);
      TW3CustomControl.MouseExit(Self,shiftState,eventObj.clientX-sr.Left$3,eventObj.clientY-sr.Top$3);
   }
   /// procedure TW3CustomControl.CBMouseMove(eventObj: JMouseEvent)
   ///  [line: 5762, column: 28, file: SmartCL.Components]
   ,CBMouseMove:function(Self, eventObj) {
      var sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         shiftState = null,
         dx$3 = 0,
         dy$3 = 0;
      sr = TW3MovableControl.ScreenRect(Self);
      shiftState = TShiftState.Current();
      TShiftState.SetMouseEvent(shiftState,eventObj);
      dx$3 = eventObj.clientX;
      (dx$3-= sr.Left$3);
      (dx$3+= TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(Self)));
      dy$3 = eventObj.clientY;
      (dy$3-= sr.Top$3);
      (dy$3+= TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Self)));
      TW3CustomControl.MouseMove$(Self,shiftState,dx$3,dy$3);
   }
   /// procedure TW3CustomControl.CBMouseUp(eventObj: JMouseEvent)
   ///  [line: 5728, column: 28, file: SmartCL.Components]
   ,CBMouseUp:function(Self, eventObj) {
      var sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         shiftState = null,
         dx$3 = 0,
         dy$3 = 0;
      sr = TW3MovableControl.ScreenRect(Self);
      shiftState = TShiftState.Current();
      shiftState.FMouseButtons = shiftState.FMouseButtons&(~(1<<eventObj.button));
      TShiftState.SetMouseEvent(shiftState,eventObj);
      dx$3 = eventObj.clientX;
      (dx$3-= sr.Left$3);
      (dx$3+= TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(Self)));
      dy$3 = eventObj.clientY;
      (dy$3-= sr.Top$3);
      (dy$3+= TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Self)));
      TW3CustomControl.MouseUp$(Self,$VarToInt(eventObj.button,""),shiftState,dx$3,dy$3);
   }
   /// procedure TW3CustomControl.CBMouseWheel(eventObj: JMouseWheelEvent)
   ///  [line: 5843, column: 28, file: SmartCL.Components]
   ,CBMouseWheel:function(Self, eventObj) {
      var wheelDelta$1 = 0,
         sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         shiftState = null,
         mousePos = {X$1:0,Y$1:0},
         Handled = {v:false};
      if (Self.FOnMouseWheel) {
         if (eventObj.detail) {
            wheelDelta$1 = eventObj.detail * -40;
         } else {
            wheelDelta$1 = eventObj.wheelDelta;
         }
         sr = TW3MovableControl.ScreenRect(Self);
         shiftState = TShiftState.Current();
         TShiftState.SetMouseEvent(shiftState,eventObj);
         mousePos.X$1 = eventObj.clientX-sr.Left$3;
         mousePos.Y$1 = eventObj.clientY-sr.Top$3;
         Handled.v = false;
         TW3CustomControl.MouseWheel(Self,shiftState,wheelDelta$1,mousePos,Handled);
         if (Handled.v) {
            eventObj.preventDefault();
            eventObj.stopPropagation();
         }
      }
   }
   /// procedure TW3CustomControl.CBScroll(EventObj: JEvent)
   ///  [line: 6023, column: 28, file: SmartCL.Components]
   ,CBScroll:function(Self, EventObj) {
      if (Self.FOnScroll) {
         Self.FOnScroll(Self);
      }
   }
   /// procedure TW3CustomControl.CBSelectionStarts(EventObj: JEvent)
   ///  [line: 6029, column: 28, file: SmartCL.Components]
   ,CBSelectionStarts:function(Self, EventObj) {
      if (Self.FOnSelectionStarts) {
         Self.FOnSelectionStarts(Self);
      }
   }
   /// procedure TW3CustomControl.CMGestureChange()
   ///  [line: 5413, column: 28, file: SmartCL.Components]
   ,CMGestureChange:function(Self) {
      if (Self.FOnGestureChange) {
         if (!Self.FGestureData) {
            Self.FGestureData = TObject.Create($New(TW3GestureData));
         }
         TW3GestureData.Update$3(Self.FGestureData);
         Self.FOnGestureChange(Self,Self.FGestureData);
      }
   }
   /// procedure TW3CustomControl.CMGestureEnd()
   ///  [line: 5439, column: 28, file: SmartCL.Components]
   ,CMGestureEnd:function(Self) {
      if (Self.FOnGestureEnd) {
         if (!Self.FGestureData) {
            Self.FGestureData = TObject.Create($New(TW3GestureData));
         }
         TW3GestureData.Update$3(Self.FGestureData);
         Self.FOnGestureEnd(Self,Self.FGestureData);
      }
   }
   /// procedure TW3CustomControl.CMGestureStart()
   ///  [line: 5387, column: 28, file: SmartCL.Components]
   ,CMGestureStart:function(Self) {
      if (Self.FOnGestureStart) {
         if (!Self.FGestureData) {
            Self.FGestureData = TObject.Create($New(TW3GestureData));
         }
         TW3GestureData.Update$3(Self.FGestureData);
         Self.FOnGestureStart(Self,Self.FGestureData);
      }
   }
   /// procedure TW3CustomControl.CMTouchBegins(eventObj: JTouchEvent)
   ///  [line: 5308, column: 28, file: SmartCL.Components]
   ,CMTouchBegins:function(Self, eventObj) {
      if (Self.FOnTouchBegins) {
         if (!Self.FTouchData) {
            Self.FTouchData = TObject.Create($New(TW3TouchData));
         }
         TW3TouchData.Update$1(Self.FTouchData,eventObj);
         Self.FOnTouchBegins(Self,Self.FTouchData);
      }
   }
   /// procedure TW3CustomControl.CMTouchEnds(eventObj: JTouchEvent)
   ///  [line: 5361, column: 28, file: SmartCL.Components]
   ,CMTouchEnds:function(Self, eventObj) {
      if (Self.FOnTouchEnds) {
         if (!Self.FTouchData) {
            Self.FTouchData = TObject.Create($New(TW3TouchData));
         }
         TW3TouchData.Update$1(Self.FTouchData,eventObj);
         Self.FOnTouchEnds(Self,Self.FTouchData);
      }
   }
   /// procedure TW3CustomControl.CMTouchMove(eventObj: JTouchEvent)
   ///  [line: 5337, column: 28, file: SmartCL.Components]
   ,CMTouchMove:function(Self, eventObj) {
      if (Self.FOnTouchMoves) {
         if (Self.FTouchData === null) {
            Self.FTouchData = TObject.Create($New(TW3TouchData));
         }
         TW3TouchData.Update$1(Self.FTouchData,eventObj);
         Self.FOnTouchMoves(Self,Self.FTouchData);
      }
   }
   /// procedure TW3CustomControl.ContextPopup(const MousePos: TPoint; var Handled: TContectPopupResult)
   ///  [line: 6113, column: 28, file: SmartCL.Components]
   ,ContextPopup:function(Self, MousePos, Handled) {
      if (Self.FOnContextPopup) {
         Self.FOnContextPopup(Self,MousePos,Handled);
      }
   }
   /// procedure TW3CustomControl.Dispatch(Kind: TW3EventManagerTypes; eventObj: JEvent)
   ///  [line: 5273, column: 28, file: SmartCL.Components]
   ,Dispatch:function(Self, Kind, eventObj) {
      if (Self.FHandle$4) {
         try {
            switch (Kind) {
               case 1 :
                  TW3CustomControl.CBMouseDown(Self,eventObj);
                  break;
               case 2 :
                  TW3CustomControl.CBMouseMove(Self,eventObj);
                  break;
               case 3 :
                  TW3CustomControl.CBMouseUp(Self,eventObj);
                  break;
               case 4 :
                  TW3CustomControl.CMTouchBegins(Self,eventObj);
                  break;
               case 5 :
                  TW3CustomControl.CMTouchMove(Self,eventObj);
                  break;
               case 6 :
                  TW3CustomControl.CMTouchEnds(Self,eventObj);
                  break;
               case 7 :
                  TW3CustomControl.CBClick$(Self,eventObj);
                  break;
               case 8 :
                  TW3CustomControl.CBMouseEnter(Self,eventObj);
                  break;
               case 9 :
                  TW3CustomControl.CBMouseExit(Self,eventObj);
                  break;
               case 10 :
                  TW3CustomControl.CBMouseWheel(Self,eventObj);
                  break;
               case 11 :
                  TW3CustomControl.CBDblClick(Self,eventObj);
                  break;
            }
         } catch ($e) {
            /* null */
         }
      }
   }
   /// procedure TW3CustomControl.FinalizeObject()
   ///  [line: 5089, column: 28, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FTagStyle);
      TObject.Free(Self.FScrollInfo);
      TObject.Free(Self.FTouchData);
      TObject.Free(Self.FGestureData);
      TW3MovableControl.FinalizeObject(Self);
   }
   /// function TW3CustomControl.GetBorderRadius() : Integer
   ///  [line: 6149, column: 27, file: SmartCL.Components]
   ,GetBorderRadius:function(Self) {
      return w3_GetStyleAsInt(Self.FHandle$4,"bordertopleftRadius");
   }
   /// function TW3CustomControl.GetChildrenSortedByYPos() : TW3TagContainerArray
   ///  [line: 5558, column: 27, file: SmartCL.Components]
   ,GetChildrenSortedByYPos:function(Self) {
      var Result = [];
      var mCount = 0,
         x$39 = 0,
         mObj = null,
         mAltered = false,
         x$40 = 0,
         mLast = null,
         mCurrent = null;
      mCount = TW3TagContainer.GetChildCount(Self);
      if (mCount > 0) {
         var $temp31;
         for(x$39=0,$temp31=mCount;x$39<$temp31;x$39++) {
            mObj = TW3TagContainer.GetChildObject(Self,x$39);
            if ($Is(mObj,TW3CustomControl)) {
               Result.push(mObj);
            }
         }
         if (Result.length > 1) {
            mAltered = false;
            do {
               mAltered = false;
               var $temp32;
               for(x$40=1,$temp32=mCount;x$40<$temp32;x$40++) {
                  mLast = $As(Result[x$40-1],TW3CustomControl);
                  mCurrent = $As(Result[x$40],TW3CustomControl);
                  if (TW3MovableControl.GetTop(mCurrent) < TW3MovableControl.GetTop(mLast)) {
                     $ArraySwap(Result,(x$40-1),x$40);
                     mAltered = true;
                  }
               }
            } while (!(mAltered == false));
         }
      }
      return Result
   }
   /// function TW3CustomControl.GetEnabled() : Boolean
   ///  [line: 5480, column: 27, file: SmartCL.Components]
   ,GetEnabled$1:function(Self) {
      var Result = false;
      if (Self.FHandle$4) {
         Result = w3_HasAttrib(Self.FHandle$4,"disabled") == false;
      }
      return Result
   }
   /// function TW3CustomControl.GetNativeScrolling() : Boolean
   ///  [line: 5249, column: 27, file: SmartCL.Components]
   ,GetNativeScrolling:function(Self) {
      var Result = false;
      var oflow;
      if (Self.FHandle$4) {
         oflow = Self.FHandle$4.style["overflow"];
         Result = oflow == "auto" || oflow == "scroll" || Self.FHandle$4.style["-webkit-overflow-scrolling"] == "touch";
      } else {
         Result = false;
      }
      return Result
   }
   /// function TW3CustomControl.GetScrollInfo() : TW3ScrollInfo
   ///  [line: 5461, column: 27, file: SmartCL.Components]
   ,GetScrollInfo:function(Self) {
      var Result = null;
      if (Self.FScrollInfo === null) {
         Self.FScrollInfo = TW3ScrollInfo.Create$122($New(TW3ScrollInfo),Self);
      }
      Result = Self.FScrollInfo;
      return Result
   }
   /// function TW3CustomControl.GetTagStyle() : TW3TagStyle
   ///  [line: 5098, column: 27, file: SmartCL.Components]
   ,GetTagStyle:function(Self) {
      var Result = null;
      if (Self.FTagStyle === null) {
         Self.FTagStyle = TW3OwnedObject.Create$11$($New(TW3TagStyle),Self);
      }
      Result = Self.FTagStyle;
      return Result
   }
   /// function TW3CustomControl.GetTransparentEvents() : Boolean
   ///  [line: 5241, column: 27, file: SmartCL.Components]
   ,GetTransparentEvents:function(Self) {
      return (Self.FMouseTouchEventsCount > 0)?false:Self.FTransparentEvents;
   }
   /// function TW3CustomControl.GetZoom() : Float
   ///  [line: 5468, column: 27, file: SmartCL.Components]
   ,GetZoom:function(Self) {
      var Result = 0;
      if (Self.FHandle$4) {
         Result = w3_GetStyleAsFloat(Self.FHandle$4,"zoom");
      }
      return Result
   }
   /// procedure TW3CustomControl.HookEvents()
   ///  [line: 5179, column: 28, file: SmartCL.Components]
   ,HookEvents:function(Self) {
      TW3TagObj.HookEvents(Self);
      Self.FHandle$4.onfocus = $Event0(Self,TW3CustomControl.CBFocused);
      Self.FHandle$4.onblur = $Event0(Self,TW3CustomControl.CBLostFocus);
   }
   /// procedure TW3CustomControl.InitializeObject()
   ///  [line: 5075, column: 28, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3MovableControl.InitializeObject(Self);
      if (function(v$){return ((v$=="DIV")||(v$=="IMG"))}(Self.FHandle$4.nodeName)) {
         Self.FTransparentEvents = true;
         Self.TouchPreventDefault = true;
      }
      if (Self.FHandle$4.nodeName == "BUTTON") {
         Self.TouchPreventDefault = true;
      }
      if (function(v$){return ((v$=="INPUT")||(v$=="TEXTAREA"))}(Self.FHandle$4.nodeName)) {
         Self.AllowContextMenu = true;
      }
   }
   /// procedure TW3CustomControl.LayoutChildren()
   ///  [line: 6120, column: 28, file: SmartCL.Components]
   ,LayoutChildren:function(Self) {
      if (TW3TagObj.Showing$(Self)) {
         TW3TagContainer.ForEach$1(Self,function (Child$1) {
            var Result = 160;
            if ($Is(Child$1,TW3CustomControl)) {
               TW3CustomControl.LayoutChildren($As(Child$1,TW3CustomControl));
            }
            Result = 160;
            return Result
         });
      } else {
         TW3TagObj.BeginUpdate(Self);
         TW3TagObj.AddToComponentState(Self,[96]);
         TW3TagObj.EndUpdate(Self);
      }
   }
   /// procedure TW3CustomControl.MouseDown(Button: TMouseButton; ShiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 5722, column: 28, file: SmartCL.Components]
   ,MouseDown:function(Self, Button$1, ShiftState, X$2, Y$2) {
      if (Self.FOnMouseDown) {
         Self.FOnMouseDown(Self,Button$1,ShiftState,X$2,Y$2);
      }
   }
   /// procedure TW3CustomControl.MouseEnter(ShiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 5810, column: 28, file: SmartCL.Components]
   ,MouseEnter:function(Self, ShiftState, X$2, Y$2) {
      if (Self.FOnMouseEnter) {
         Self.FOnMouseEnter(Self,ShiftState,X$2,Y$2);
      }
   }
   /// procedure TW3CustomControl.MouseExit(ShiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 5832, column: 28, file: SmartCL.Components]
   ,MouseExit:function(Self, ShiftState, X$2, Y$2) {
      if (Self.FOnMouseExit) {
         Self.FOnMouseExit(Self,ShiftState,X$2,Y$2);
      }
   }
   /// procedure TW3CustomControl.MouseMove(ShiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 5788, column: 28, file: SmartCL.Components]
   ,MouseMove:function(Self, ShiftState, X$2, Y$2) {
      if (Self.FOnMouseMove) {
         Self.FOnMouseMove(Self,ShiftState,X$2,Y$2);
      }
   }
   /// procedure TW3CustomControl.MouseUp(Button: TMouseButton; shiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 5755, column: 28, file: SmartCL.Components]
   ,MouseUp:function(Self, Button$1, shiftState, X$2, Y$2) {
      if (Self.FOnMouseUp) {
         Self.FOnMouseUp(Self,Button$1,shiftState,X$2,Y$2);
      }
   }
   /// procedure TW3CustomControl.MouseWheel(Shift: TShiftState; wheelDelta: Integer; const MousePos: TPoint; var Handled: Boolean)
   ///  [line: 5872, column: 28, file: SmartCL.Components]
   ,MouseWheel:function(Self, Shift, wheelDelta$1, MousePos, Handled) {
      if (Self.FOnMouseWheel) {
         Self.FOnMouseWheel(Self,Shift,wheelDelta$1,MousePos,Handled);
      }
   }
   /// procedure TW3CustomControl.ReleaseCapture()
   ///  [line: 6184, column: 28, file: SmartCL.Components]
   ,ReleaseCapture:function(Self) {
      TW3EventManager.ReleaseCapture$1(EventManager,Self);
   }
   /// procedure TW3CustomControl.SetAngle(const NewAngle: Float)
   ///  [line: 5593, column: 28, file: SmartCL.Components]
   ,SetAngle:function(Self, NewAngle) {
      if (NewAngle != Self.FAngle) {
         Self.FAngle = NewAngle;
         if (Self.FAngle != 0) {
            Self.FHandle$4.style["transform"] = "rotate(" + (Self.FAngle).toFixed(2) + "deg)";
         } else {
            Self.FHandle$4.style["transform"] = "";
         }
      }
   }
   /// procedure TW3CustomControl.SetBackgroundType(const NewBackground: TW3ThemeBackground)
   ///  [line: 370, column: 28, file: SmartCL.Theme]
   ,SetBackgroundType:function(Self, NewBackground) {
      if (NewBackground != Self.FBackgroundType) {
         if (Self.FBackgroundType) {
            TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,_BGTypeToName[Self.FBackgroundType]);
         }
         Self.FBackgroundType = NewBackground;
         if (NewBackground) {
            TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,_BGTypeToName[NewBackground]);
         }
      }
   }
   /// procedure TW3CustomControl.SetBorderRadius(aNewRadius: Integer)
   ///  [line: 6160, column: 28, file: SmartCL.Components]
   ,SetBorderRadius:function(Self, aNewRadius) {
      if ($SetIn(Self.FComponentState,0,0,11)) {
         Self.FHandle$4.style["borderRadius"] = TInteger.ToPxStr(aNewRadius);
      } else {
         TW3TagObj.BeginUpdate(Self);
         Self.FHandle$4.style["borderRadius"] = TInteger.ToPxStr(aNewRadius);
         TW3TagObj.AddToComponentState(Self,[32]);
         TW3TagObj.EndUpdate(Self);
      }
   }
   /// procedure TW3CustomControl.SetBorderType(const NewBorder: TW3ThemeBorder)
   ///  [line: 397, column: 28, file: SmartCL.Theme]
   ,SetBorderType:function(Self, NewBorder) {
      if (NewBorder != Self.FBorderType) {
         if (Self.FBorderType) {
            TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,_BRTypeToName[Self.FBorderType]);
         }
         Self.FBorderType = NewBorder;
         if (NewBorder) {
            TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,_BRTypeToName[NewBorder]);
         }
      }
   }
   /// procedure TW3CustomControl.SetCapture()
   ///  [line: 6179, column: 28, file: SmartCL.Components]
   ,SetCapture:function(Self) {
      TW3EventManager.SetCapture$1(EventManager,Self);
   }
   /// procedure TW3CustomControl.SetEnabled(const EnabledValue: Boolean)
   ///  [line: 5486, column: 28, file: SmartCL.Components]
   ,SetEnabled$1:function(Self, EnabledValue) {
      if (EnabledValue) {
         if (w3_HasAttrib(Self.FHandle$4,"disabled")) {
            w3_RemoveAttrib(Self.FHandle$4,"disabled");
         }
         if (TW3TagStyle.ControlContainsClass(TW3TagStyle,Self.FHandle$4,"DisabledState")) {
            TW3TagStyle.RemoveClassFromControl(TW3TagStyle,Self.FHandle$4,"DisabledState");
         }
      } else {
         if (!(w3_HasAttrib(Self.FHandle$4,"disabled"))) {
            w3_setAttrib(Self.FHandle$4,"disabled","true");
         }
         if (!(TW3TagStyle.ControlContainsClass(TW3TagStyle,Self.FHandle$4,"DisabledState"))) {
            TW3TagStyle.AddClassToControl(TW3TagStyle,Self.FHandle$4,"DisabledState");
         }
      }
   }
   /// procedure TW3CustomControl.SetFocus()
   ///  [line: 5633, column: 28, file: SmartCL.Components]
   ,SetFocus:function(Self) {
      var eventType = undefined;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHandle$4) {
            try {
               if (event) {
                  try {
                     eventType = TVariant.AsString(event.type);
                     if (((eventType=="mouseup")||(eventType=="mousedown")||(eventType=="touchend"))) {
                        event.preventDefault();
                     }
                  } catch ($e) {
                     /* null */
                  }
               }
            } catch ($e) {
               /* null */
            }
            try {
               Self.FHandle$4.focus();
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.Create$18($New(EW3CustomControl),"TW3CustomControl.SetFocus",Self,e$1.FMessage);
            }
            TW3ControlTracker.SetFocusedControl(TW3ControlTracker,Self);
         }
      }
   }
   /// procedure TW3CustomControl.SetNativeScrolling(const Value: Boolean)
   ///  [line: 5258, column: 28, file: SmartCL.Components]
   ,SetNativeScrolling:function(Self, Value$5) {
      if (Self.FHandle$4) {
         if (Value$5) {
            Self.FHandle$4.style["overflow"] = "auto";
            if (w3_getIsIPhone() || w3_getIsIPad() || w3_getIsIPod()) {
               Self.FHandle$4.style["-webkit-overflow-scrolling"] = "touch";
            }
         } else {
            Self.FHandle$4.style["overflow"] = "hidden";
            if (w3_getIsIPhone() || w3_getIsIPad() || w3_getIsIPod()) {
               Self.FHandle$4.style["-webkit-overflow-scrolling"] = "auto";
            }
         }
      }
   }
   /// procedure TW3CustomControl.SetZoom(const ZoomValue: Float)
   ///  [line: 5474, column: 28, file: SmartCL.Components]
   ,SetZoom:function(Self, ZoomValue) {
      if (Self.FHandle$4) {
         Self.FHandle$4.style.zoom = ZoomValue;
      }
   }
   /// procedure TW3CustomControl.ThemeReset()
   ///  [line: 355, column: 28, file: SmartCL.Theme]
   ,ThemeReset:function(Self) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FBackgroundType) {
            TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,_BGTypeToName[Self.FBackgroundType]);
         }
         if (Self.FBorderType) {
            TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,_BRTypeToName[Self.FBorderType]);
         }
         Self.FBackgroundType = 0;
         Self.FBorderType = 0;
      }
   }
   /// procedure TW3CustomControl.UnHookEvents()
   ///  [line: 5186, column: 28, file: SmartCL.Components]
   ,UnHookEvents:function(Self) {
      Self.FHandle$4.onfocus = null;
      Self.FHandle$4.onblur = null;
      if (!($SetIn(TW3TagObj.CreationFlags$(Self),6,0,8))) {
         Self.FHandle$4.onselectstart = null;
      }
   }
   /// procedure TW3CustomControl._SetAllMovement(const aValue: TMovementEvent)
   ///  [line: 5227, column: 28, file: SmartCL.Components]
   ,_SetAllMovement:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnAllMovement) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnAllMovement) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnAllMovement = aValue;
   }
   /// procedure TW3CustomControl._setAnimationBegins(const aValue: TAnimationBeginsEvent)
   ///  [line: 6008, column: 28, file: SmartCL.Components]
   ,_setAnimationBegins:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationStart")] = $Event1(Self,TW3CustomControl.CBAnimationBegins);
      } else {
         Self.FHandle$4[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationStart")] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnAnimationBegins = aValue;
   }
   /// procedure TW3CustomControl._setAnimationEnds(const aValue: TAnimationEndsEvent)
   ///  [line: 6060, column: 28, file: SmartCL.Components]
   ,_setAnimationEnds:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd")] = $Event1(Self,TW3CustomControl.CBAnimationEnds);
      } else {
         Self.FHandle$4[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd")] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnAnimationEnds = aValue;
   }
   /// procedure TW3CustomControl._SetBeginMovement(const aValue: TNotifyEvent)
   ///  [line: 5195, column: 28, file: SmartCL.Components]
   ,_SetBeginMovement:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnBeginMovement) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnBeginMovement) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnBeginMovement = aValue;
   }
   /// procedure TW3CustomControl._setChanged(const aValue: TChangedEvent)
   ///  [line: 6075, column: 28, file: SmartCL.Components]
   ,_setChanged:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4["onchange"] = $Event1(Self,TW3CustomControl.CBChanged);
      } else {
         Self.FHandle$4["onchange"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnChanged = aValue;
   }
   /// procedure TW3CustomControl._setContextPopup(const aValue: TContextPopupEvent)
   ///  [line: 6090, column: 28, file: SmartCL.Components]
   ,_setContextPopup:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4["oncontextmenu"] = $Event1(Self,TW3CustomControl.CBContextPopup);
      } else {
         Self.FHandle$4["oncontextmenu"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnContextPopup = aValue;
   }
   /// procedure TW3CustomControl._SetEndMovement(const aValue: TNotifyEvent)
   ///  [line: 5203, column: 28, file: SmartCL.Components]
   ,_SetEndMovement:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnEndMovement) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnEndMovement) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnEndMovement = aValue;
   }
   /// procedure TW3CustomControl._setGestureChange(aValue: TGestureChangeEvent)
   ///  [line: 5398, column: 28, file: SmartCL.Components]
   ,_setGestureChange:function(Self, aValue) {
      if (Self.FOnGestureChange) {
         w3_RemoveEvent(Self.FHandle$4,"gesturechange",$Event0(Self,TW3CustomControl.CMGestureChange),true);
         Self.FOnGestureChange = null;
      }
      if (aValue) {
         Self.FOnGestureChange = aValue;
         w3_AddEvent(Self.FHandle$4,"gesturechange",$Event0(Self,TW3CustomControl.CMGestureChange),true);
      }
   }
   /// procedure TW3CustomControl._setGestureEnd(aValue: TGestureEndEvent)
   ///  [line: 5424, column: 28, file: SmartCL.Components]
   ,_setGestureEnd:function(Self, aValue) {
      if (Self.FOnGestureEnd) {
         w3_RemoveEvent(Self.FHandle$4,"gestureend",$Event0(Self,TW3CustomControl.CMGestureEnd),true);
         Self.FOnGestureEnd = null;
      }
      if (aValue) {
         Self.FOnGestureEnd = aValue;
         w3_AddEvent(Self.FHandle$4,"gestureend",$Event0(Self,TW3CustomControl.CMGestureEnd),true);
      }
   }
   /// procedure TW3CustomControl._setGestureStart(aValue: TGestureStartEvent)
   ///  [line: 5372, column: 28, file: SmartCL.Components]
   ,_setGestureStart:function(Self, aValue) {
      if (Self.FOnGestureStart) {
         w3_RemoveEvent(Self.FHandle$4,"gesturestart",$Event0(Self,TW3CustomControl.CMGestureStart),true);
         Self.FOnGestureStart = null;
      }
      if (aValue) {
         Self.FOnGestureStart = aValue;
         w3_AddEvent(Self.FHandle$4,"gesturestart",$Event0(Self,TW3CustomControl.CMGestureStart),true);
      }
   }
   /// procedure TW3CustomControl._setGotFocus(const aValue: TGotFocusEvent)
   ///  [line: 5680, column: 28, file: SmartCL.Components]
   ,_setGotFocus:function(Self, aValue) {
      Self.FOnGotFocus = aValue;
   }
   /// procedure TW3CustomControl._SetHorizontalMovement(const aValue: TMovementEvent)
   ///  [line: 5211, column: 28, file: SmartCL.Components]
   ,_SetHorizontalMovement:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnHorizontalMovement) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnHorizontalMovement) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnHorizontalMovement = aValue;
   }
   /// procedure TW3CustomControl._setInput(const aValue: TNotifyEvent)
   ///  [line: 5981, column: 28, file: SmartCL.Components]
   ,_setInput:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4["oninput"] = $Event1(Self,TW3CustomControl.CBInput);
      } else {
         Self.FHandle$4["oninput"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnInput = aValue;
   }
   /// procedure TW3CustomControl._setKeyDown(const aValue: TKeyDownEvent)
   ///  [line: 5915, column: 28, file: SmartCL.Components]
   ,_setKeyDown:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4["onkeydown"] = $Event1(Self,TW3CustomControl.CBKeyDown);
      } else {
         Self.FHandle$4["onkeydown"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnKeyDown = aValue;
   }
   /// procedure TW3CustomControl._setKeyPress(const aValue: TKeyPressEvent)
   ///  [line: 5945, column: 28, file: SmartCL.Components]
   ,_setKeyPress:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4["onkeypress"] = $Event1(Self,TW3CustomControl.CBKeyPress);
         if (!Self.FOnInput) {
            Self.FHandle$4["oninput"] = $Event1(Self,TW3CustomControl.CBInput);
         }
      } else {
         Self.FHandle$4["onkeypress"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
         if (!Self.FOnInput) {
            Self.FHandle$4["oninput"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
         }
      }
      Self.FOnKeyPress = aValue;
   }
   /// procedure TW3CustomControl._setKeyUp(const aValue: TKeyUpEvent)
   ///  [line: 5930, column: 28, file: SmartCL.Components]
   ,_setKeyUp:function(Self, aValue) {
      if (aValue) {
         Self.FHandle$4["onkeyup"] = $Event1(Self,TW3CustomControl.CBKeyUp$);
      } else {
         Self.FHandle$4["onkeyup"] = $Event1(Self,TW3TagContainer.CBNoBehavior$1);
      }
      Self.FOnKeyUp = aValue;
   }
   /// procedure TW3CustomControl._setLostFocus(const aValue: TLostFocusEvent)
   ///  [line: 5689, column: 28, file: SmartCL.Components]
   ,_setLostFocus:function(Self, aValue) {
      Self.FOnLostFocus = aValue;
   }
   /// procedure TW3CustomControl._setMouseClick(const aValue: TMouseClickEvent)
   ///  [line: 5879, column: 28, file: SmartCL.Components]
   ,_setMouseClick:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnClick) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnClick) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnClick = aValue;
   }
   /// procedure TW3CustomControl._setMouseDblClick(const aValue: TMouseDblClickEvent)
   ///  [line: 5897, column: 28, file: SmartCL.Components]
   ,_setMouseDblClick:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnDblClick) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnDblClick) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnDblClick = aValue;
   }
   /// procedure TW3CustomControl._setMouseDown(const aValue: TMouseDownEvent)
   ///  [line: 5695, column: 28, file: SmartCL.Components]
   ,_setMouseDown:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnMouseDown) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnMouseDown) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnMouseDown = aValue;
   }
   /// procedure TW3CustomControl._setMouseEnter(const aValue: TMouseEnterEvent)
   ///  [line: 5794, column: 28, file: SmartCL.Components]
   ,_setMouseEnter:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnMouseEnter) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnMouseEnter) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnMouseEnter = aValue;
   }
   /// procedure TW3CustomControl._setMouseExit(const aValue: TMouseExitEvent)
   ///  [line: 5816, column: 28, file: SmartCL.Components]
   ,_setMouseExit:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnMouseExit) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnMouseExit) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnMouseExit = aValue;
   }
   /// procedure TW3CustomControl._setMouseMove(const aValue: TMouseMoveEvent)
   ///  [line: 5779, column: 28, file: SmartCL.Components]
   ,_setMouseMove:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnMouseMove) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnMouseMove) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnMouseMove = aValue;
   }
   /// procedure TW3CustomControl._setMouseUp(const aValue: TMouseUpEvent)
   ///  [line: 5746, column: 28, file: SmartCL.Components]
   ,_setMouseUp:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnMouseUp) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnMouseUp) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnMouseUp = aValue;
   }
   /// procedure TW3CustomControl._setMouseWheel(const aValue: TMouseWheelEvent)
   ///  [line: 5838, column: 28, file: SmartCL.Components]
   ,_setMouseWheel:function(Self, aValue) {
      Self.FOnMouseWheel = aValue;
   }
   /// procedure TW3CustomControl._setScroll(const Handler: TNotifyEvent)
   ///  [line: 6053, column: 28, file: SmartCL.Components]
   ,_setScroll:function(Self, Handler) {
      Self.FHandle$4["onscroll"] = $Event1(Self,TW3CustomControl.CBScroll);
      Self.FOnScroll = Handler;
   }
   /// procedure TW3CustomControl._setSelectionEnds(const Handler: TSelectionEndsEvent)
   ///  [line: 6047, column: 28, file: SmartCL.Components]
   ,_setSelectionEnds:function(Self, Handler) {
      Self.FHandle$4["onselect"] = $Event1(Self,TW3CustomControl.CBSelectionStarts);
      Self.FOnSelectionStarts = Handler;
   }
   /// procedure TW3CustomControl._setSelectionStarts(const Handler: TSelectionStartsEvent)
   ///  [line: 6041, column: 28, file: SmartCL.Components]
   ,_setSelectionStarts:function(Self, Handler) {
      Self.FHandle$4["onselectstart"] = $Event1(Self,TW3CustomControl.CBSelectionStarts);
      Self.FOnSelectionStarts = Handler;
   }
   /// procedure TW3CustomControl._setTouchBegins(const aValue: TTouchBeginEvent)
   ///  [line: 5296, column: 28, file: SmartCL.Components]
   ,_setTouchBegins:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnTouchBegins) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnTouchBegins) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnTouchBegins = aValue;
   }
   /// procedure TW3CustomControl._setTouchEnds(const aValue: TTouchEndEvent)
   ///  [line: 5349, column: 28, file: SmartCL.Components]
   ,_setTouchEnds:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnTouchEnds) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnTouchEnds) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnTouchEnds = aValue;
   }
   /// procedure TW3CustomControl._setTouchMoves(const aValue: TTouchMoveEvent)
   ///  [line: 5325, column: 28, file: SmartCL.Components]
   ,_setTouchMoves:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnTouchMoves) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnTouchMoves) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnTouchMoves = aValue;
   }
   /// procedure TW3CustomControl._SetVerticalMovement(const aValue: TMovementEvent)
   ///  [line: 5219, column: 28, file: SmartCL.Components]
   ,_SetVerticalMovement:function(Self, aValue) {
      if (aValue) {
         if (!Self.FOnVerticalMovement) {
            ++Self.FMouseTouchEventsCount;
         }
      } else if (Self.FOnVerticalMovement) {
         --Self.FMouseTouchEventsCount;
      }
      Self.FOnVerticalMovement = aValue;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents$:function($){return $.ClassType.HookEvents($)}
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents$:function($){return $.ClassType.UnHookEvents($)}
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp$:function($){return $.ClassType.CBKeyUp.apply($.ClassType, arguments)}
   ,Dispatch$:function($){return $.ClassType.Dispatch.apply($.ClassType, arguments)}
   ,GetEnabled$1$:function($){return $.ClassType.GetEnabled$1($)}
   ,MouseDown$:function($){return $.ClassType.MouseDown.apply($.ClassType, arguments)}
   ,MouseMove$:function($){return $.ClassType.MouseMove.apply($.ClassType, arguments)}
   ,MouseUp$:function($){return $.ClassType.MouseUp.apply($.ClassType, arguments)}
   ,SetEnabled$1$:function($){return $.ClassType.SetEnabled$1.apply($.ClassType, arguments)}
};
TW3CustomControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DisplayView = class (TW3CustomControl)
///  [line: 77, column: 3, file: SmartCL.Application]
var TW3DisplayView = {
   $ClassName:"TW3DisplayView",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FArrange = false;
      $.FArrangeKind = 0;
   }
   /// procedure TW3DisplayView.ArrangeChildren(aKind: TW3DisplayViewArangeType)
   ///  [line: 626, column: 26, file: SmartCL.Application]
   ,ArrangeChildren:function(Self, aKind) {
      var x$39 = 0,
         dx$3 = 0,
         dy$3 = 0,
         mObj = null,
         mCount = 0,
         mRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         wd = 0,
         hd = 0;
      mCount = TW3TagContainer.GetChildCount(Self);
      if (mCount > 0) {
         mRect = TW3MovableControl.GetBoundsRect(Self);
         switch (aKind) {
            case 0 :
               wd = TRect$Width$6(mRect);
               hd = TRect$Height$5(mRect);
               var $temp33;
               for(x$39=0,$temp33=mCount;x$39<$temp33;x$39++) {
                  mObj = TW3TagContainer.GetChildObject(Self,x$39);
                  if ($Is(mObj,TW3CustomControl) && (!($Is(mObj,TW3BlockBox)))) {
                     TW3MovableControl.SetSize$2$($As(mObj,TW3CustomControl),wd,hd);
                  }
               }
               break;
            case 1 :
               dy$3 = mRect.Top$3;
               wd = TRect$Width$6(mRect);
               var $temp34;
               for(x$39=0,$temp34=mCount;x$39<$temp34;x$39++) {
                  mObj = TW3TagContainer.GetChildObject(Self,x$39);
                  if ($Is(mObj,TW3CustomControl) && (!($Is(mObj,TW3BlockBox)))) {
                     hd = TW3MovableControl.GetHeight$($As(mObj,TW3CustomControl));
                     TW3MovableControl.SetBounds$($As(mObj,TW3CustomControl),mRect.Left$3,dy$3,wd,hd);
                     (dy$3+= hd);
                  }
               }
               break;
            case 2 :
               dx$3 = mRect.Left$3;
               hd = TRect$Height$5(mRect);
               var $temp35;
               for(x$39=0,$temp35=mCount;x$39<$temp35;x$39++) {
                  mObj = TW3TagContainer.GetChildObject(Self,x$39);
                  if ($Is(mObj,TW3CustomControl) && (!($Is(mObj,TW3BlockBox)))) {
                     wd = TW3MovableControl.GetWidth$($As(mObj,TW3CustomControl));
                     TW3MovableControl.SetBounds$($As(mObj,TW3CustomControl),dx$3,mRect.Top$3,wd,hd);
                     (dx$3+= wd);
                  }
               }
               break;
         }
      }
   }
   /// procedure TW3DisplayView.InitializeObject()
   ///  [line: 574, column: 26, file: SmartCL.Application]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FArrange = true;
      Self.FArrangeKind = 0;
   }
   /// procedure TW3DisplayView.ReSize()
   ///  [line: 710, column: 26, file: SmartCL.Application]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      if (TW3MovableControl.GetWidth$(Self) > 0 && TW3MovableControl.GetHeight$(Self) > 0) {
         if (Self.FArrange) {
            TW3DisplayView.ArrangeChildren(Self,Self.FArrangeKind);
         } else if (Self.FOnResize) {
            Self.FOnResize(Self);
         }
      }
   }
   /// procedure TW3DisplayView.StyleTagObject()
   ///  [line: 581, column: 26, file: SmartCL.Application]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DisplayView.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Display = class (TW3CustomControl)
///  [line: 94, column: 3, file: SmartCL.Application]
var TW3Display = {
   $ClassName:"TW3Display",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnOrientationChanged = null;
      $.FFooter = $.FHeader = $.FView = null;
   }
   /// procedure TW3Display.FinalizeObject()
   ///  [line: 749, column: 22, file: SmartCL.Application]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FView);
      if (Self.FHeader) {
         TObject.Free(Self.FHeader);
         Self.FHeader = null;
      }
      if (Self.FFooter) {
         TObject.Free(Self.FFooter);
         Self.FFooter = null;
      }
      TW3CustomControl.FinalizeObject(Self);
   }
   /// function TW3Display.GetHeightOfChildren() : Integer
   ///  [line: 786, column: 21, file: SmartCL.Application]
   ,GetHeightOfChildren:function(Self) {
      var Result = 0;
      var x$39 = 0,
         mObj = null;
      var $temp36;
      for(x$39=0,$temp36=TW3TagContainer.GetChildCount(Self);x$39<$temp36;x$39++) {
         mObj = TW3TagContainer.GetChildObject(Self,x$39);
         if (mObj !== Self.FView && $Is(mObj,TW3CustomControl) && (!($Is(mObj,TW3BlockBox)))) {
            (Result+= TW3MovableControl.GetHeight$($As(mObj,TW3CustomControl)));
         }
      }
      return Result
   }
   /// procedure TW3Display.InitializeObject()
   ///  [line: 728, column: 22, file: SmartCL.Application]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FView = TW3TagContainer.Create$81$($New(TW3DisplayView),Self);
      TW3MovableControl.SetTop$(Self.FView,5);
      EventManager = TObject.Create($New(TW3EventManager));
      w3_SetStyle(Self.FHandle$4,"min-width","100%");
      w3_SetStyle(Self.FHandle$4,"min-height","100%");
   }
   /// procedure TW3Display.Invalidate()
   ///  [line: 738, column: 22, file: SmartCL.Application]
   ,Invalidate:function(Self) {
      TW3MovableControl.Resize$(Self);
   }
   /// procedure TW3Display.ObjectReady()
   ///  [line: 743, column: 22, file: SmartCL.Application]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3EventManager.BindInteractionEvents(EventManager,Self.FHandle$4);
   }
   /// procedure TW3Display.PositionFormInView(aForm: TW3CustomForm)
   ///  [line: 827, column: 22, file: SmartCL.Application]
   ,PositionFormInView:function(Self, aForm) {
      var mApp = null,
         dx$3 = 0,
         dy$3 = 0;
      if (aForm) {
         mApp = Application();
         if ((mApp!==null) && (!(mApp.FTerminated))) {
            dx$3 = TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(Self.FView));
            dy$3 = TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Self.FView));
            TW3MovableControl.SetBounds$(aForm,dx$3,dy$3,TW3MovableControl.GetWidth$(Self.FView),TW3MovableControl.GetHeight$(Self.FView));
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Screen),$R[0],["TW3Display.PositionFormInView", TObject.ClassName(Self.ClassType), "Form parameter was NIL error"]);
      }
   }
   /// procedure TW3Display.ReSize()
   ///  [line: 799, column: 22, file: SmartCL.Application]
   ,Resize:function(Self) {
      var mTotal = 0,
         mList = [],
         x$39 = 0,
         dy$3 = 0,
         h = 0,
         mObj = null;
      TW3MovableControl.Resize(Self);
      mTotal = TW3Display.GetHeightOfChildren(Self);
      mList = TW3CustomControl.GetChildrenSortedByYPos(Self);
      dy$3 = 0;
      var $temp37;
      for(x$39=0,$temp37=mList.length;x$39<$temp37;x$39++) {
         mObj = $As(mList[x$39],TW3CustomControl);
         if ($Is(mObj,TW3BlockBox)) {
            TW3MovableControl.SetBounds$(mObj,0,0,TW3MovableControl.GetWidth$(Self),TW3MovableControl.GetHeight$(Self));
         } else {
            if (mObj === Self.FView) {
               h = TW3MovableControl.GetHeight$(Self)-mTotal;
            } else {
               h = TW3MovableControl.GetHeight$(mObj);
            }
            TW3MovableControl.SetBounds$(mObj,0,dy$3,TW3MovableControl.GetWidth$(Self),h);
            (dy$3+= h);
         }
      }
   }
   /// procedure TW3Display.StyleTagObject()
   ///  [line: 768, column: 22, file: SmartCL.Application]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate$:function($){return $.ClassType.Invalidate($)}
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Display.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BlockBox = class (TW3CustomControl)
///  [line: 70, column: 3, file: SmartCL.Application]
var TW3BlockBox = {
   $ClassName:"TW3BlockBox",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// procedure TW3BlockBox.InitializeObject()
   ///  [line: 1767, column: 23, file: SmartCL.Application]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FTransparentEvents = false;
      TW3BlockBox.SizeToParent(Self);
   }
   /// procedure TW3BlockBox.SizeToParent()
   ///  [line: 1756, column: 23, file: SmartCL.Application]
   ,SizeToParent:function(Self) {
      if (TW3TagContainer.a$53(Self) !== null) {
         if ((TW3MovableControl.GetLeft(Self)!=0) || (TW3MovableControl.GetTop(Self)!=0)) {
            TW3MovableControl.MoveTo$(Self,0,0);
         }
         Self.FHandle$4.style["width"] = "100%";
         Self.FHandle$4.style["height"] = "100%";
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3BlockBox.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TModalInfo = class (TObject)
///  [line: 308, column: 3, file: SmartCL.Application]
var TModalInfo = {
   $ClassName:"TModalInfo",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FFreeForm = false;
      $.ModalForm = $.ModalPanel = $.OnCancel = $.OnOK = $.OpaqueMask = $.OwnerForm = null;
   }
   ,Destroy:TObject.Destroy
};
/// TFormEntryEffect enumeration
///  [line: 37, column: 3, file: SmartCL.Application]
var TFormEntryEffect = [ "feNone", "feFromRight", "feToLeft" ];
/// TDisplayOrientation enumeration
///  [line: 39, column: 3, file: SmartCL.Application]
var TDisplayOrientation = [ "soPortrait", "soLandscapeLeft", "soLandscapeRight", "soFlipped", "soPortraitPrimary", "soPortraitSecondary", "soLandscapePrimary", "soLandscapeSecondary", "soLandscape", "soDefault" ];
/// TApplicationFormsList = class (TObject)
///  [line: 284, column: 3, file: SmartCL.Application]
var TApplicationFormsList = {
   $ClassName:"TApplicationFormsList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAutoCreatingForm = $.FFormOwner = null;
      $.FList = [];
   }
   /// procedure TApplicationFormsList.AutoCreateForm(aFormInfo: TApplicationFormInfo)
   ///  [line: 1594, column: 33, file: SmartCL.Application]
   ,AutoCreateForm:function(Self, aFormInfo) {
      Self.FAutoCreatingForm = aFormInfo;
      if (aFormInfo.IsAutoCreated && (!(aFormInfo.Instance!==null))) {
         aFormInfo.Instance = TW3TagContainer.Create$81$($NewDyn(aFormInfo.FormClass,""),Self.FFormOwner);
         TW3CustomApplication.RegisterFormInstance(Application(),aFormInfo.Instance,aFormInfo.IsMainForm);
      }
      aFormInfo.InitialAutoCreateDone = true;
   }
   /// procedure TApplicationFormsList.AutoCreateForms(owner: TW3TagContainer)
   ///  [line: 1605, column: 33, file: SmartCL.Application]
   ,AutoCreateForms:function(Self, owner) {
      var a$410 = 0,
         info = null,
         a$411 = [];
      Self.FFormOwner = owner;
      Self.FAutoCreatingForm = null;
      a$411 = Self.FList;
      var $temp38;
      for(a$410=0,$temp38=a$411.length;a$410<$temp38;a$410++) {
         info = a$411[a$410];
         TApplicationFormsList.AutoCreateForm(Self,info);
         if (info.IsMainForm) {
            break;
         }
      }
      TW3Dispatch.SetTimeOut(TW3Dispatch,$Event0(Self,TApplicationFormsList.AutoCreateNextForm),50);
   }
   /// procedure TApplicationFormsList.AutoCreateNextForm()
   ///  [line: 1620, column: 33, file: SmartCL.Application]
   ,AutoCreateNextForm:function(Self) {
      var iForm = 0,
         info = null;
      iForm = Self.FList.indexOf(Self.FAutoCreatingForm);
      if (iForm == -1) {
         Self.FAutoCreatingForm = null;
         return;
      }
      ++iForm;
      while (iForm <= (Self.FList.length-1)) {
         info = Self.FList[iForm];
         if (info.IsAutoCreated && (!(info.Instance!==null)) && (!(info.InitialAutoCreateDone))) {
            TApplicationFormsList.AutoCreateForm(Self,info);
            if (iForm < (Self.FList.length-1)) {
               TW3Dispatch.SetTimeOut(TW3Dispatch,$Event0(Self,TApplicationFormsList.AutoCreateNextForm),50);
            } else {
               Self.FAutoCreatingForm = null;
            }
            return;
         }
         ++iForm;
      }
      Self.FAutoCreatingForm = null;
   }
   /// function TApplicationFormsList.IndexOfFormClass(aFormClass: TW3CustomFormClass) : Integer
   ///  [line: 1682, column: 32, file: SmartCL.Application]
   ,IndexOfFormClass:function(Self, aFormClass) {
      var Result = 0;
      var $temp39;
      for(Result=0,$temp39=Self.FList.length;Result<$temp39;Result++) {
         if (Self.FList[Result].FormClass == aFormClass) {
            return Result;
         }
      }
      Result = -1;
      return Result
   }
   /// function TApplicationFormsList.IndexOfUnitName(aUnitName: String) : Integer
   ///  [line: 1690, column: 32, file: SmartCL.Application]
   ,IndexOfUnitName:function(Self, aUnitName) {
      var Result = 0;
      var $temp40;
      for(Result=0,$temp40=Self.FList.length;Result<$temp40;Result++) {
         if (SameText(Self.FList[Result].UnitName,aUnitName)) {
            return Result;
         }
      }
      Result = -1;
      return Result
   }
   /// procedure TApplicationFormsList.RegisterAutoCreate(aUnitName: String; isAutoCreate: Boolean; isMainForm: Boolean)
   ///  [line: 1698, column: 33, file: SmartCL.Application]
   ,RegisterAutoCreate:function(Self, aUnitName, isAutoCreate, isMainForm) {
      var formInfo = null,
         idx = 0;
      idx = TApplicationFormsList.IndexOfUnitName(Self,aUnitName);
      if (idx >= 0) {
         formInfo = Self.FList[idx];
      } else {
         formInfo = TObject.Create($New(TApplicationFormInfo));
         formInfo.UnitName = aUnitName;
         Self.FList.push(formInfo);
      }
      formInfo.IsMainForm = isMainForm;
      formInfo.IsAutoCreated = isAutoCreate;
   }
   /// procedure TApplicationFormsList.RegisterForm(aUnitName: String; aFormClass: TW3CustomFormClass)
   ///  [line: 1714, column: 33, file: SmartCL.Application]
   ,RegisterForm:function(Self, aUnitName, aFormClass) {
      var formInfo = null,
         idx = 0;
      idx = TApplicationFormsList.IndexOfUnitName(Self,aUnitName);
      if (idx >= 0) {
         formInfo = Self.FList[idx];
      } else {
         formInfo = TObject.Create($New(TApplicationFormInfo));
         formInfo.UnitName = aUnitName;
         Self.FList.push(formInfo);
      }
      formInfo.FormClass = aFormClass;
   }
   /// procedure TApplicationFormsList.RegisterFormInstance(aFormClass: TW3CustomFormClass; aFormInstance: TW3CustomForm)
   ///  [line: 1729, column: 33, file: SmartCL.Application]
   ,RegisterFormInstance$1:function(Self, aFormClass, aFormInstance) {
      var formInfo = null,
         idx = 0;
      idx = TApplicationFormsList.IndexOfFormClass(Self,aFormClass);
      if (idx >= 0) {
         formInfo = Self.FList[idx];
      } else {
         formInfo = TObject.Create($New(TApplicationFormInfo));
         formInfo.FormClass = aFormClass;
         Self.FList.push(formInfo);
      }
      formInfo.Instance = aFormInstance;
      formInfo.InitialAutoCreateDone = true;
   }
   /// procedure TApplicationFormsList.UnregisterFormInstance(aFormInstance: TW3CustomForm)
   ///  [line: 1745, column: 33, file: SmartCL.Application]
   ,UnregisterFormInstance:function(Self, aFormInstance) {
      var i$5 = 0;
      var $temp41;
      for(i$5=0,$temp41=Self.FList.length;i$5<$temp41;i$5++) {
         if (Self.FList[i$5].Instance === aFormInstance) {
            Self.FList[i$5].Instance = null;
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// TApplicationFormInfo = class (TObject)
///  [line: 272, column: 3, file: SmartCL.Application]
var TApplicationFormInfo = {
   $ClassName:"TApplicationFormInfo",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.InitialAutoCreateDone = $.IsMainForm = $.IsAutoCreated = false;
      $.UnitName = "";
      $.Instance = null;
      $.FormClass = null;
   }
   ,Destroy:TObject.Destroy
};
function Forms$2() {
   return FormsFactory();
};
/// EW3Screen = class (EW3Exception)
///  [line: 31, column: 3, file: SmartCL.Application]
var EW3Screen = {
   $ClassName:"EW3Screen",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3Application = class (EW3Exception)
///  [line: 32, column: 3, file: SmartCL.Application]
var EW3Application = {
   $ClassName:"EW3Application",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
function Application() {
   return Instance;
};
function FormsFactory() {
   var Result = null;
   if (!GForms) {
      GForms = TObject.Create($New(TApplicationFormsList));
   }
   Result = GForms;
   return Result
};
/// TRectF = record
///  [line: 141, column: 3, file: System.Types.Graphics]
function Copy$TRectF(s,d) {
   d.Bottom=s.Bottom;
   d.Left$2=s.Left$2;
   d.Right=s.Right;
   d.Top$2=s.Top$2;
   return d;
}
function Clone$TRectF($) {
   return {
      Bottom:$.Bottom,
      Left$2:$.Left$2,
      Right:$.Right,
      Top$2:$.Top$2
   }
}
/// function TRectF.CreateBounded(x1: Float; y1: Float; x2: Float; y2: Float) : TRectF
///  [line: 750, column: 23, file: System.Types.Graphics]
function CreateBounded(x1$6, y1$6, x2$6, y2$6) {
   var Result = {Bottom:0,Left$2:0,Right:0,Top$2:0};
   if (x1$6 < x2$6) {
      Result.Left$2 = x1$6;
      Result.Right = x2$6;
   } else {
      Result.Left$2 = x2$6;
      Result.Right = x1$6;
   }
   if (y1$6 < y2$6) {
      Result.Top$2 = y1$6;
      Result.Bottom = y2$6;
   } else {
      Result.Top$2 = y2$6;
      Result.Bottom = y1$6;
   }
   return Result
}
/// function TRectF.Height(var Self: TRectF) : Float
///  [line: 881, column: 17, file: System.Types.Graphics]
function TRectF$Height$4(Self$25) {
   return Self$25.Bottom-Self$25.Top$2;
}
/// function TRectF.Width(var Self: TRectF) : Float
///  [line: 876, column: 17, file: System.Types.Graphics]
function TRectF$Width$5(Self$26) {
   return Self$26.Right-Self$26.Left$2;
}
/// TRect = record
///  [line: 103, column: 3, file: System.Types.Graphics]
function Copy$TRect(s,d) {
   d.Bottom$1=s.Bottom$1;
   d.Left$3=s.Left$3;
   d.Right$1=s.Right$1;
   d.Top$3=s.Top$3;
   return d;
}
function Clone$TRect($) {
   return {
      Bottom$1:$.Bottom$1,
      Left$3:$.Left$3,
      Right$1:$.Right$1,
      Top$3:$.Top$3
   }
}
/// function TRect.ContainsPos(var Self: TRect; const aLeft: Integer; const aTop: Integer) : Boolean
///  [line: 662, column: 16, file: System.Types.Graphics]
function TRect$ContainsPos$1(Self$27, aLeft, aTop) {
   return aLeft >= Self$27.Left$3 && aLeft <= Self$27.Right$1 && aTop >= Self$27.Top$3 && aTop <= Self$27.Bottom$1;
}
/// function TRect.Create(const aLeft: Integer; const aTop: Integer; const aRight: Integer; const aBottom: Integer) : TRect
///  [line: 415, column: 22, file: System.Types.Graphics]
function Create$102(aLeft$1, aTop$1, aRight, aBottom) {
   var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
   Result.Left$3 = aLeft$1;
   Result.Top$3 = aTop$1;
   Result.Right$1 = aRight;
   Result.Bottom$1 = aBottom;
   return Result
}
/// function TRect.Empty(var Self: TRect) : Boolean
///  [line: 512, column: 16, file: System.Types.Graphics]
function TRect$Empty$2(Self$28) {
   return Self$28.Left$3 == Self$28.Right$1 && Self$28.Top$3 == Self$28.Bottom$1;
}
/// function TRect.Height(var Self: TRect) : Integer
///  [line: 493, column: 16, file: System.Types.Graphics]
function TRect$Height$5(Self$29) {
   return Self$29.Bottom$1-Self$29.Top$3;
}
/// function TRect.Width(var Self: TRect) : Integer
///  [line: 488, column: 16, file: System.Types.Graphics]
function TRect$Width$6(Self$30) {
   return Self$30.Right$1-Self$30.Left$3;
}
/// TPointF = record
///  [line: 63, column: 3, file: System.Types.Graphics]
function Copy$TPointF(s,d) {
   d.X=s.X;
   d.Y=s.Y;
   return d;
}
function Clone$TPointF($) {
   return {
      X:$.X,
      Y:$.Y
   }
}
/// TPoint = record
///  [line: 25, column: 3, file: System.Types.Graphics]
function Copy$TPoint(s,d) {
   d.X$1=s.X$1;
   d.Y$1=s.Y$1;
   return d;
}
function Clone$TPoint($) {
   return {
      X$1:$.X$1,
      Y$1:$.Y$1
   }
}
/// function TPoint.Create(const aCol: Integer; const aRow: Integer) : TPoint
///  [line: 182, column: 23, file: System.Types.Graphics]
function Create$105(aCol, aRow) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = aCol;
   Result.Y$1 = aRow;
   return Result
}
/// TExposure enumeration
///  [line: 23, column: 3, file: System.Types.Graphics]
var TExposure = [ "esVisible", "esPartly", "esNone" ];
function OffsetPoint(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$392.X$1+b$2.X$1;
   Result.Y$1 = a$392.Y$1+b$2.Y$1;
   return Result
};
function OffsetPoint$1(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$392.X$1+b$2;
   Result.Y$1 = a$392.Y$1+b$2;
   return Result
};
function OffsetPoint$2(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X+b$2.X;
   Result.Y = a$392.Y+b$2.Y;
   return Result
};
function OffsetPoint$3(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X+b$2;
   Result.Y = a$392.Y+b$2;
   return Result
};
function OffsetPoint$4(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X+b$2;
   Result.Y = a$392.Y+b$2;
   return Result
};
function MinusPoint(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$392.X$1-b$2.X$1;
   Result.Y$1 = a$392.Y$1-b$2.Y$1;
   return Result
};
function MinusPoint$1(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = a$392.X$1-b$2;
   Result.Y$1 = a$392.Y$1-b$2;
   return Result
};
function MinusPoint$2(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X-b$2.X;
   Result.Y = a$392.Y-b$2.Y;
   return Result
};
function MinusPoint$3(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X-b$2;
   Result.Y = a$392.Y-b$2;
   return Result
};
function MinusPoint$4(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X-b$2;
   Result.Y = a$392.Y-b$2;
   return Result
};
function ExpandPoint(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = Math.round(a$392.X$1 * b$2.X$1);
   Result.Y$1 = Math.round(a$392.Y$1 * b$2.Y$1);
   return Result
};
function ExpandPoint$1(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = Math.round(a$392.X$1 * b$2);
   Result.Y$1 = Math.round(a$392.Y$1 * b$2);
   return Result
};
function ExpandPoint$2(a$392, b$2) {
   var Result = {X$1:0,Y$1:0};
   Result.X$1 = Math.round(a$392.X$1 * b$2);
   Result.Y$1 = Math.round(a$392.Y$1 * b$2);
   return Result
};
function ExpandPoint$3(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X * b$2.X;
   Result.Y = a$392.Y * b$2.Y;
   return Result
};
function ExpandPoint$4(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X * b$2;
   Result.Y = a$392.Y * b$2;
   return Result
};
function ExpandPoint$5(a$392, b$2) {
   var Result = {X:0,Y:0};
   Result.X = a$392.X * b$2;
   Result.Y = a$392.Y * b$2;
   return Result
};
/// TW3CustomCSSAnimation = class (TObject)
///  [line: 58, column: 3, file: SmartCL.Effects]
var TW3CustomCSSAnimation = {
   $ClassName:"TW3CustomCSSAnimation",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnAnimationEnds = null;
      $.OnAnimationBegins = null;
      $.FDuration = 0;
      $.FEasingMode = 6;
      $.FIdent = $.FInnerName = "";
      $.FInnerHandle = undefined;
      $.FIterations = 1;
      $.FState = 0;
      $.FTarget = null;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 104, column: 38, file: SmartCL.Effects]
   ,a$104:function(Self) {
      var Result = false;
      Result = (Self.FState!=0);
      return Result
   }
   /// procedure TW3CustomCSSAnimation.CBBegins()
   ///  [line: 1611, column: 33, file: SmartCL.Effects]
   ,CBBegins:function(Self) {
      if (Self.OnAnimationBegins) {
         Self.OnAnimationBegins(Self);
      }
   }
   /// procedure TW3CustomCSSAnimation.CBEnds(const EventObject: Variant)
   ///  [line: 1617, column: 33, file: SmartCL.Effects]
   ,CBEnds:function(Self, EventObject$2) {
      if (Self !== null) {
         if (EventObject$2.target == Self.FInnerHandle) {
            if (TW3CustomCSSAnimation.a$104(Self)) {
               try {
                  EventObject$2.stopPropagation();
                  TW3CustomCSSAnimation.FinalizeTransition$(Self);
                  if (Self.OnAnimationEnds) {
                     Self.OnAnimationEnds(Self);
                  }
               } catch ($e) {
                  var e$1 = $W($e);
                  /* null */
               }
            } else {
               EventObject$2.stopPropagation();
            }
         }
      }
   }
   /// constructor TW3CustomCSSAnimation.Create()
   ///  [line: 1489, column: 35, file: SmartCL.Effects]
   ,Create$134:function(Self) {
      TObject.Create(Self);
      Self.FIterations = 1;
      Self.FDuration = DefaultDuration;
      Self.FEasingMode = DefaultTiming;
      Self.FIdent = TW3Identifiers.GenerateUniqueAnimationName(TW3Identifiers);
      return Self
   }
   /// destructor TW3CustomCSSAnimation.Destroy()
   ///  [line: 1498, column: 34, file: SmartCL.Effects]
   ,Destroy:function(Self) {
      if (TW3CustomCSSAnimation.a$104(Self) && (Self.FTarget!==null)) {
         try {
            TW3CustomCSSAnimation.FinalizeTransition$(Self);
         } catch ($e) {
            var e$1 = $W($e);
            /* null */
         }
      }
      TObject.Destroy(Self);
   }
   /// procedure TW3CustomCSSAnimation.Execute(const Control: TW3TagObj)
   ///  [line: 1748, column: 33, file: SmartCL.Effects]
   ,Execute$1:function(Self, Control$2) {
      if (TW3CustomCSSAnimation.a$104(Self)) {
         throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.Execute", TObject.ClassName(Self.ClassType), "Transition is already running error"]);
      } else {
         if (Control$2 !== null) {
            Self.FTarget = Control$2;
            TW3CustomCSSAnimation.SetupTransition$(Self);
         } else {
            throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.Execute", TObject.ClassName(Self.ClassType), "target control was nil error"]);
         }
      }
   }
   /// procedure TW3CustomCSSAnimation.ExecuteEx(const Control: TW3TagObj; const BeginHandler: TFxEffectBeginsEvent; const EndHandler: TFxEffectEndsEvent)
   ///  [line: 1766, column: 33, file: SmartCL.Effects]
   ,ExecuteEx:function(Self, Control$2, BeginHandler, EndHandler) {
      if (TW3CustomCSSAnimation.a$104(Self)) {
         throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.ExecuteEx", TObject.ClassName(Self.ClassType), "Transition is already running error"]);
      } else {
         if (Control$2 !== null) {
            Self.FTarget = Control$2;
            Self.OnAnimationBegins = BeginHandler;
            Self.OnAnimationEnds = EndHandler;
            TW3CustomCSSAnimation.SetupTransition$(Self);
         } else {
            throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.ExecuteEx", TObject.ClassName(Self.ClassType), "target control was nil error"]);
         }
      }
   }
   /// procedure TW3CustomCSSAnimation.FinalizeTransition()
   ///  [line: 1717, column: 33, file: SmartCL.Effects]
   ,FinalizeTransition:function(Self) {
      TW3DOMEventAPI.UnRegisterEvent(Self.FInnerHandle,Self.FInnerName,$Event1(Self,TW3CustomCSSAnimation.CBEnds),0);
      if ($Is(BrowserAPI(),TW3FirefoxBrowserAPI)) {
         Self.FTarget.FHandle$4.style["animation-iteration-count"] = "initial";
      } else {
         Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationIterationCount")] = "initial";
      }
      Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationTimingFunction")] = "initial";
      Self.FTarget.FHandle$4.style.removeProperty(TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Animation"));
      Self.FTarget.FHandle$4.style.removeProperty(TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationFillMode"));
      Self.FTarget.FHandle$4.style.removeProperty(TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationTimingFunction"));
      Self.FTarget.FHandle$4.style.removeProperty(TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationIterationCount"));
      Self.FTarget.FHandle$4.style.removeProperty("animation-iteration-count");
      Self.FState = 0;
   }
   /// procedure TW3CustomCSSAnimation.SetDuration(const NewDuration: Float)
   ///  [line: 1530, column: 33, file: SmartCL.Effects]
   ,SetDuration:function(Self, NewDuration) {
      if (TW3CustomCSSAnimation.a$104(Self)) {
         throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.SetDuration", TObject.ClassName(Self.ClassType), "Duration cannot be altered while active error"]);
      } else {
         Self.FDuration = NewDuration;
      }
   }
   /// procedure TW3CustomCSSAnimation.SetEasing(const NewEasing: TW3CSSEffectEasingMode)
   ///  [line: 1512, column: 33, file: SmartCL.Effects]
   ,SetEasing:function(Self, NewEasing) {
      if (TW3CustomCSSAnimation.a$104(Self)) {
         throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.SetEasing", TObject.ClassName(Self.ClassType), "Easing cannot be changed while active"]);
      } else {
         Self.FEasingMode = NewEasing;
      }
   }
   /// procedure TW3CustomCSSAnimation.SetIterations(const NewIterations: Integer)
   ///  [line: 1521, column: 33, file: SmartCL.Effects]
   ,SetIterations:function(Self, NewIterations) {
      if (TW3CustomCSSAnimation.a$104(Self)) {
         throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3CustomCSSAnimation.SetIterations", TObject.ClassName(Self.ClassType), "Iterations cannot be changed while active"]);
      } else {
         Self.FIterations = NewIterations;
      }
   }
   /// procedure TW3CustomCSSAnimation.SetupTransition()
   ///  [line: 1656, column: 33, file: SmartCL.Effects]
   ,SetupTransition:function(Self) {
      var LTimes = "";
      Self.FState = 1;
      if (Self.FIterations >= 0) {
         LTimes = Self.FIterations.toString();
      } else {
         LTimes = "infinite";
      }
      if ($Is(BrowserAPI(),TW3FirefoxBrowserAPI)) {
         Self.FTarget.FHandle$4.style["animation-iteration-count"] = LTimes;
         Self.FInnerName = "animationend";
      } else {
         Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationIterationCount")] = LTimes;
         Self.FInnerName = TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd");
      }
      Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationTimingFunction")] = cW3AnimationTiming[Self.FEasingMode];
      Self.FTarget.FHandle$4.style["animation-play-state"] = "running";
      Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"animation-play-state")] = "running";
      Self.FInnerHandle = Self.FTarget.FHandle$4;
      TW3DOMEventAPI.RegisterEvent(Self.FInnerHandle,Self.FInnerName,$Event1(Self,TW3CustomCSSAnimation.CBEnds),0);
      TW3CustomCSSAnimation.CBBegins(Self);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$134$:function($){return $.ClassType.Create$134($)}
   ,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)}
   ,SetupTransition$:function($){return $.ClassType.SetupTransition($)}
};
/// TW3NamedCSSAnimation = class (TW3CustomCSSAnimation)
///  [line: 116, column: 3, file: SmartCL.Effects]
var TW3NamedCSSAnimation = {
   $ClassName:"TW3NamedCSSAnimation",$Parent:TW3CustomCSSAnimation
   ,$Init:function ($) {
      TW3CustomCSSAnimation.$Init($);
      $.FName$2 = "";
   }
   /// procedure TW3NamedCSSAnimation.SetName(NewName: String)
   ///  [line: 1404, column: 32, file: SmartCL.Effects]
   ,SetName$3:function(Self, NewName) {
      if (TW3CustomCSSAnimation.a$104(Self)) {
         throw EW3Exception.CreateFmt($New(EW3EffectException),$R[0],["TW3NamedCSSAnimation.SetName", TObject.ClassName(Self.ClassType), "Name cannot be altered while active"]);
      } else {
         Self.FName$2 = Trim$_String_(NewName);
      }
   }
   /// procedure TW3NamedCSSAnimation.SetupTransition()
   ///  [line: 1413, column: 32, file: SmartCL.Effects]
   ,SetupTransition:function(Self) {
      TW3CustomCSSAnimation.SetupTransition(Self);
      Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"animation-fill-mode")] = "both";
      Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"animation")] = Self.FName$2 + " " + Self.FDuration.toString() + "s linear";
   }
   /// procedure TW3NamedCSSAnimation.FinalizeTransition()
   ///  [line: 1420, column: 32, file: SmartCL.Effects]
   ,FinalizeTransition:function(Self) {
      TW3CustomCSSAnimation.FinalizeTransition(Self);
      if (Self.FTarget !== null) {
         Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"animation-fill-mode")] = "initial";
         Self.FTarget.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"animation")] = "initial";
      }
   }
   ,Destroy:TW3CustomCSSAnimation.Destroy
   ,Create$134:TW3CustomCSSAnimation.Create$134
   ,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)}
   ,SetupTransition$:function($){return $.ClassType.SetupTransition($)}
};
/// TW3CSSTransitionEffect = class (TW3CustomCSSAnimation)
///  [line: 140, column: 3, file: SmartCL.Effects]
var TW3CSSTransitionEffect = {
   $ClassName:"TW3CSSTransitionEffect",$Parent:TW3CustomCSSAnimation
   ,$Init:function ($) {
      TW3CustomCSSAnimation.$Init($);
      $.Sticky = $.Alternate = $.FStyleSetup = false;
      $.FAnimationCmd = "";
      $.FStyleDOM = undefined;
   }
   /// constructor TW3CSSTransitionEffect.Create()
   ///  [line: 1216, column: 36, file: SmartCL.Effects]
   ,Create$134:function(Self) {
      TW3CustomCSSAnimation.Create$134(Self);
      Self.Sticky = false;
      return Self
   }
   /// destructor TW3CSSTransitionEffect.Destroy()
   ///  [line: 1222, column: 35, file: SmartCL.Effects]
   ,Destroy:function(Self) {
      TW3CSSTransitionEffect.InvalidateKeyFrames(Self);
      TW3CustomCSSAnimation.Destroy(Self);
   }
   /// procedure TW3CSSTransitionEffect.FinalizeTransition()
   ///  [line: 1283, column: 34, file: SmartCL.Effects]
   ,FinalizeTransition:function(Self) {
      var style$8;
      style$8 = Self.FTarget.FHandle$4.style;
      style$8["animation"] = "none";
      style$8["animation-fill-mode"] = "";
      if (!(Self.Sticky)) {
         style$8.removeProperty("animation");
         style$8.removeProperty("animation-fill-mode");
         Self.FAnimationCmd = "";
      }
      TW3CustomCSSAnimation.FinalizeTransition(Self);
   }
   /// procedure TW3CSSTransitionEffect.GetParentPadding(var PadLeft: Integer; var PadTop: Integer)
   ///  [line: 1228, column: 34, file: SmartCL.Effects]
   ,GetParentPadding:function(Self, PadLeft$1, PadTop) {
      var CSHandle;
      if ($Is(Self.FTarget,TW3MovableControl) && $As(Self.FTarget,TW3MovableControl).FPositionMode == 24) {
         CSHandle = TW3CustomBrowserAPI.GetComputedStylesFor(TW3CustomBrowserAPI,TW3TagContainer.a$53($As(Self.FTarget,TW3MovableControl)).FHandle$4);
         if (CSHandle) {
            PadLeft$1.v = w3_getPropertyAsInt(CSHandle,"paddingLeft");
            PadTop.v = w3_getPropertyAsInt(CSHandle,"paddingTop");
         }
      }
   }
   /// procedure TW3CSSTransitionEffect.InvalidateKeyFrames()
   ///  [line: 1256, column: 34, file: SmartCL.Effects]
   ,InvalidateKeyFrames:function(Self) {
      if (Self.FStyleSetup) {
         Self.FStyleDOM.parentNode.removeChild(Self.FStyleDOM);
         Self.FStyleDOM = null;
         Self.FStyleSetup = false;
      }
   }
   /// function TW3CSSTransitionEffect.KeyFramesName() : String
   ///  [line: 1298, column: 33, file: SmartCL.Effects]
   ,KeyFramesName:function(Self) {
      return Self.FIdent;
   }
   /// procedure TW3CSSTransitionEffect.SetupKeyFrames()
   ///  [line: 1239, column: 34, file: SmartCL.Effects]
   ,SetupKeyFrames:function(Self) {
      var document$2,
         css = "";
      Self.FStyleSetup = true;
      document$2 = document;
      Self.FStyleDOM = document$2.createElement("style");
      Self.FStyleDOM.type = "text\/css";
      css = "keyframes " + TW3CSSTransitionEffect.KeyFramesName(Self) + " {" + TW3CSSTransitionEffect.KeyFramesCSS$(Self) + "}";
      Self.FStyleDOM.appendChild(document$2.createTextNode("@" + TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"") + css));
      Self.FStyleDOM.appendChild(document$2.createTextNode("@" + css));
      document$2.getElementsByTagName("head")[0].appendChild(Self.FStyleDOM);
   }
   /// procedure TW3CSSTransitionEffect.SetupTransition()
   ///  [line: 1266, column: 34, file: SmartCL.Effects]
   ,SetupTransition:function(Self) {
      var style$8;
      TW3CustomCSSAnimation.SetupTransition(Self);
      if (!(Self.FStyleSetup)) {
         TW3CSSTransitionEffect.SetupKeyFrames(Self);
      }
      style$8 = Self.FTarget.FHandle$4.style;
      Self.FAnimationCmd = TW3CSSTransitionEffect.KeyFramesName(Self) + " " + Self.FDuration.toString() + "s " + cW3AnimationTiming[Self.FEasingMode];
      if (Self.Alternate) {
         Self.FAnimationCmd += " alternate";
      }
      style$8["animation"] = Self.FAnimationCmd;
      style$8["animation-fill-mode"] = "both";
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$134$:function($){return $.ClassType.Create$134($)}
   ,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)}
   ,SetupTransition$:function($){return $.ClassType.SetupTransition($)}
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectZoomOut = class (TW3CSSTransitionEffect)
///  [line: 176, column: 4, file: SmartCL.Effects]
var TW3CssEffectZoomOut = {
   $ClassName:"TW3CssEffectZoomOut",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
   }
   /// function TW3CssEffectZoomOut.KeyFramesCSS() : String
   ///  [line: 1378, column: 30, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      var Result = "";
      Result = "0% {\r\n   $1: scale(1.0);\r\n   $2: 50% 50%;\r\n}\r\n50% {\r\n   opacity: 0.3;\r\n   $3: scale(0.5);\r\n}\r\n100% {\r\n   opacity: 0.0;\r\n   $5: scale(0);\r\n}";
      Result = Result.replace(/\$1/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$2/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));
      Result = Result.replace(/\$3/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$4/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      return Result
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectZoomIn = class (TW3CSSTransitionEffect)
///  [line: 171, column: 4, file: SmartCL.Effects]
var TW3CssEffectZoomIn = {
   $ClassName:"TW3CssEffectZoomIn",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
   }
   /// function TW3CssEffectZoomIn.KeyFramesCSS() : String
   ///  [line: 1352, column: 29, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      var Result = "";
      Result = "0% {\r\n   opacity: 0.0;\r\n   $1: scale(0);\r\n}\r\n50% {\r\n   opacity: 0.3;\r\n   $2: scale(0.5);\r\n}\r\n100% {\r\n   $3: scale(1.0);\r\n   $4: 50% 50%;\r\n}";
      Result = Result.replace(/\$1/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$2/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$3/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$4/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));
      return Result
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectWarpOut = class (TW3CSSTransitionEffect)
///  [line: 166, column: 4, file: SmartCL.Effects]
var TW3CssEffectWarpOut = {
   $ClassName:"TW3CssEffectWarpOut",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
   }
   /// function TW3CssEffectWarpOut.KeyFramesCSS() : String
   ///  [line: 1330, column: 30, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      var Result = "";
      Result = "0% {\r\n   opacity: 1.0;\r\n   $1: scale(1);\r\n}\r\n100% {\r\n   opacity: 0;\r\n   $2: scale(5);\r\n   $3: 50% 50%;\r\n}";
      Result = Result.replace(/\$1/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$2/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$3/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));
      return Result
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectWarpIn = class (TW3CSSTransitionEffect)
///  [line: 161, column: 4, file: SmartCL.Effects]
var TW3CssEffectWarpIn = {
   $ClassName:"TW3CssEffectWarpIn",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
   }
   /// function TW3CssEffectWarpIn.KeyFramesCSS() : String
   ///  [line: 1307, column: 29, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      var Result = "";
      Result = "0% {\r\n   opacity: 0;\r\n   $1: scale(5);\r\n   $2: 50% 50%;\r\n}\r\n100% {\r\n   opacity: 1.0;\r\n   $3: scale(1);\r\n}";
      Result = Result.replace(/\$1/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      Result = Result.replace(/\$2/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));
      Result = Result.replace(/\$3/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
      return Result
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CSSEffectState enumeration
///  [line: 46, column: 3, file: SmartCL.Effects]
var TW3CSSEffectState = [ "esIdle", "esRunning", "esPaused" ];
/// TW3CssEffectSize = class (TW3CSSTransitionEffect)
///  [line: 222, column: 3, file: SmartCL.Effects]
var TW3CssEffectSize = {
   $ClassName:"TW3CssEffectSize",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
      $.ToTop = $.ToLeft = $.ToHeight = $.ToWidth = $.FromHeight = $.FromLeft = $.FromTop = $.FromWidth = 0;
   }
   /// function TW3CssEffectSize.KeyFramesCSS() : String
   ///  [line: 1184, column: 27, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      var Result = "";
      var PadX = { v : 0 },
         PadY = { v : 0 },
         MargW = 0,
         MargH = 0,
         TaHandle;
      if (Self.FTarget.FPositionMode == 24) {
         TW3CSSTransitionEffect.GetParentPadding(Self,PadX,PadY);
         TaHandle = Self.FTarget.FHandle$4;
         MargW = w3_GetStyleAsInt(TaHandle,"margin-left")+w3_GetStyleAsInt(TaHandle,"margin-right");
         MargH = w3_GetStyleAsInt(TaHandle,"margin-top")+w3_GetStyleAsInt(TaHandle,"margin-bottom");
      }
      Result = ("from {\r\n  left: "+(Self.FromLeft+PadX.v).toString()+"px;\r\n  top:  "+(Self.FromTop+PadY.v).toString()+"px;\r\n  width: "+(Self.FromWidth-MargW).toString()+"px;\r\n  height: "+(Self.FromHeight-MargH).toString()+"px;\r\n} to {\r\n  left: "+(Self.ToLeft+PadX.v).toString()+"px;\r\n  top:  "+(Self.ToTop+PadY.v).toString()+"px;\r\n  width: "+(Self.ToWidth-MargW).toString()+"px;\r\n  height: "+(Self.ToHeight-MargH).toString()+"px;\r\n}");
      return Result
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectScale = class (TW3CSSTransitionEffect)
///  [line: 236, column: 3, file: SmartCL.Effects]
var TW3CssEffectScale = {
   $ClassName:"TW3CssEffectScale",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
      $.FFrom = undefined;
      $.FTo = undefined;
   }
   /// function TW3CssEffectScale.KeyFramesCSS() : String
   ///  [line: 1174, column: 28, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% { transform: scale(" + (Number(Self.FFrom)).toString() + "); }" + "100% { transform: scale(" + (Number(Self.FTo)).toString() + "); }";
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectMove = class (TW3CSSTransitionEffect)
///  [line: 181, column: 4, file: SmartCL.Effects]
var TW3CssEffectMove = {
   $ClassName:"TW3CssEffectMove",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
      $.FFromX = $.FFromY = $.FToX = $.FToY = 0;
   }
   /// function TW3CssEffectMove.KeyFramesCSS() : String
   ///  [line: 1142, column: 27, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      var Result = "";
      var PadX = { v : 0 },
         PadY = { v : 0 };
      TW3CSSTransitionEffect.GetParentPadding(Self,PadX,PadY);
      Result = ("from {\r\n  left: "+(Self.FFromX+PadX.v).toString()+"px;\r\n  top:  "+(Self.FFromY+PadY.v).toString()+"px;\r\n} to {\r\n  left: "+(Self.FToX+PadX.v).toString()+"px;\r\n  top: "+(Self.FToY+PadY.v).toString()+"px;\r\n}");
      return Result
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CssEffectFade = class (TW3CSSTransitionEffect)
///  [line: 195, column: 3, file: SmartCL.Effects]
var TW3CssEffectFade = {
   $ClassName:"TW3CssEffectFade",$Parent:TW3CSSTransitionEffect
   ,$Init:function ($) {
      TW3CSSTransitionEffect.$Init($);
      $.FFrom$1 = $.FTo$1 = 0;
   }
   /// function TW3CssEffectFade.KeyFramesCSS() : String
   ///  [line: 1161, column: 27, file: SmartCL.Effects]
   ,KeyFramesCSS:function(Self) {
      return "0% { opacity: " + Self.FFrom$1.toString() + "; }" + "100% { opacity: " + Self.FTo$1.toString() + "; }";
   }
   ,Destroy:TW3CSSTransitionEffect.Destroy
   ,Create$134:TW3CSSTransitionEffect.Create$134
   ,FinalizeTransition:TW3CSSTransitionEffect.FinalizeTransition
   ,SetupTransition:TW3CSSTransitionEffect.SetupTransition
   ,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}
};
/// TW3CSSEffectEasingMode enumeration
///  [line: 36, column: 3, file: SmartCL.Effects]
var TW3CSSEffectEasingMode = [ "atInherit", "atInitial", "atEase", "atEaseIn", "atEaseOut", "atEaseInOut", "atLinear" ];
/// EW3EffectException = class (EW3Exception)
///  [line: 31, column: 3, file: SmartCL.Effects]
var EW3EffectException = {
   $ClassName:"EW3EffectException",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3TagStyle = class (TW3OwnedObject)
///  [line: 26, column: 3, file: SmartCL.Css.Classes]
var TW3TagStyle = {
   $ClassName:"TW3TagStyle",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FCache$1 = [];
      $.FHandle$11 = undefined;
      $.FOldData = "";
   }
   /// function TW3TagStyle.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 88, column: 22, file: SmartCL.Css.Classes]
   ,AcceptOwner:function(Self, CandidateObject) {
      return CandidateObject !== null && $Is(CandidateObject,TW3CustomControl);
   }
   /// function TW3TagStyle.Add(CssClassName: String) : Integer
   ///  [line: 262, column: 22, file: SmartCL.Css.Classes]
   ,Add$2:function(Self, CssClassName) {
      var Result = 0;
      var LIndex = 0;
      if (Self.FHandle$11) {
         CssClassName = Trim$_String_(CssClassName);
         if (CssClassName.length > 0) {
            if (TW3TagStyle.RequiresParse(Self)) {
               TW3TagStyle.TagToCache(Self);
            }
            LIndex = TW3TagStyle.IndexOf$2(Self,CssClassName);
            if (LIndex < 0) {
               Self.FCache$1.push(CssClassName);
               TW3TagStyle.AddClassToControl(Self.ClassType,Self.FHandle$11,CssClassName);
               Self.FOldData = Self.FCache$1.join(" ");
               Result = Self.FCache$1.length-1;
            } else {
               Result = LIndex;
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.Add", TObject.ClassName(Self.ClassType), "invalid style-name error"]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.Add", TObject.ClassName(Self.ClassType), "invalid owner handle error"]);
      }
      return Result
   }
   /// procedure TW3TagStyle.AddClassToControl(const Handle: TControlHandle; CssClassName: String)
   ///  [line: 106, column: 29, file: SmartCL.Css.Classes]
   ,AddClassToControl:function(Self, Handle$17, CssClassName) {
      var _qr = ((Handle$17).className.match(new RegExp("(\\s|^)"+CssClassName+"(\\s|$)"))) ? true : false;
    if (_qr === false)
      (Handle$17).className += (" " + CssClassName);
   }
   /// function TW3TagStyle.Contains(const CssClassName: String) : Boolean
   ///  [line: 193, column: 22, file: SmartCL.Css.Classes]
   ,Contains$2:function(Self, CssClassName) {
      var Result = false;
      if (TW3TagStyle.RequiresParse(Self)) {
         TW3TagStyle.TagToCache(Self);
      }
      Result = TW3TagStyle.IndexOf$2(Self,CssClassName) >= 0;
      return Result
   }
   /// function TW3TagStyle.ControlContainsClass(const Handle: TControlHandle; CssClassName: String) : Boolean
   ///  [line: 115, column: 28, file: SmartCL.Css.Classes]
   ,ControlContainsClass:function(Self, Handle$17, CssClassName) {
      var Result = false;
      Result = ((Handle$17).className.match(new RegExp("(\\s|^)" + CssClassName +"(\\s|$)"))) ? true : false;
      return Result
   }
   /// constructor TW3TagStyle.Create(AOwner: TObject)
   ///  [line: 76, column: 25, file: SmartCL.Css.Classes]
   ,Create$11:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FHandle$11 = $As(AOwner,TW3CustomControl).FHandle$4;
      return Self
   }
   /// destructor TW3TagStyle.Destroy()
   ///  [line: 82, column: 24, file: SmartCL.Css.Classes]
   ,Destroy:function(Self) {
      Self.FCache$1.length=0;
      TObject.Destroy(Self);
   }
   /// function TW3TagStyle.GetCurrentStyleText() : String
   ///  [line: 139, column: 22, file: SmartCL.Css.Classes]
   ,GetCurrentStyleText:function(Self) {
      var Result = "";
      if (Self.FHandle$11) {
         Result = TVariant.AsString(Self.FHandle$11.getAttribute("class"));
      }
      return Result
   }
   /// function TW3TagStyle.IndexOf(CssClassName: String) : Integer
   ///  [line: 200, column: 22, file: SmartCL.Css.Classes]
   ,IndexOf$2:function(Self, CssClassName) {
      var Result = 0;
      var x$39 = 0;
      Result = -1;
      if (Self.FHandle$11) {
         CssClassName = (Trim$_String_(CssClassName)).toLocaleLowerCase();
         if (CssClassName.length > 0) {
            if (TW3TagStyle.RequiresParse(Self)) {
               TW3TagStyle.TagToCache(Self);
            }
            var $temp42;
            for(x$39=0,$temp42=Self.FCache$1.length;x$39<$temp42;x$39++) {
               if ((Self.FCache$1[x$39]).toLocaleLowerCase() == CssClassName) {
                  Result = x$39;
                  break;
               }
            }
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagStyle),$R[0],["TW3TagStyle.IndexOf", TObject.ClassName(Self.ClassType), "invalid owner handle error"]);
      }
      return Result
   }
   /// function TW3TagStyle.RemoveByName(CssClassName: String) : String
   ///  [line: 329, column: 22, file: SmartCL.Css.Classes]
   ,RemoveByName:function(Self, CssClassName) {
      var Result = "";
      var LIndex = 0;
      if (Self.FHandle$11) {
         CssClassName = Trim$_String_(CssClassName);
         if (CssClassName.length > 0) {
            LIndex = TW3TagStyle.IndexOf$2(Self,CssClassName);
            if (LIndex >= 0) {
               Self.FCache$1.splice(LIndex,1)
               ;
               TW3TagStyle.RemoveClassFromControl(Self.ClassType,Self.FHandle$11,CssClassName);
               Self.FOldData = Self.FCache$1.join(" ");
               Result = CssClassName;
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.RemoveByName", TObject.ClassName(Self.ClassType), "style-class was empty error"]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.RemoveByName", TObject.ClassName(Self.ClassType), "invalid owner handle error"]);
      }
      return Result
   }
   /// procedure TW3TagStyle.RemoveClassFromControl(const Handle: TControlHandle; CssClassName: String)
   ///  [line: 122, column: 29, file: SmartCL.Css.Classes]
   ,RemoveClassFromControl:function(Self, Handle$17, CssClassName) {
      var reg$1 = undefined;
      reg$1 = new RegExp("(\\s|^)" + CssClassName + "(\\s|$)");
    (Handle$17).className = (Handle$17).className.replace(reg$1," ").replace('  ',' ').trim();
   }
   /// function TW3TagStyle.RequiresParse() : Boolean
   ///  [line: 145, column: 22, file: SmartCL.Css.Classes]
   ,RequiresParse:function(Self) {
      return TW3TagStyle.GetCurrentStyleText(Self) != Self.FOldData;
   }
   /// procedure TW3TagStyle.TagToCache()
   ///  [line: 174, column: 23, file: SmartCL.Css.Classes]
   ,TagToCache:function(Self) {
      Self.FCache$1.length=0;
      Self.FOldData = "";
      if (Self.FHandle$11) {
         Self.FOldData = TW3TagStyle.GetCurrentStyleText(Self);
         Self.FCache$1 = Self.FOldData.split(" ");
         TStringArrayHelper$Pack$1(Self.FCache$1);
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagStyle),$R[0],["TW3TagStyle.TagToCache", TObject.ClassName(Self.ClassType), "invalid owner handle error"]);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3TagStyle.$Intf={
   IW3OwnedObjectAccess:[TW3TagStyle.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// EW3TagStyle = class (EW3Exception)
///  [line: 22, column: 3, file: SmartCL.Css.Classes]
var EW3TagStyle = {
   $ClassName:"EW3TagStyle",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3StyleSheet = class (TObject)
///  [line: 12, column: 3, file: SmartCL.Css.Stylesheet]
var TW3StyleSheet = {
   $ClassName:"TW3StyleSheet",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$13 = undefined;
   }
   /// procedure TW3StyleSheet.Append(const CSSFileText: String)
   ///  [line: 888, column: 25, file: SmartCL.Css.Stylesheet]
   ,Append$2:function(Self, CSSFileText) {
      var Current$2;
      if (Self.FHandle$13) {
         Current$2 = Self.FHandle$13.innerHTML;
         Current$2 += "\r";
         Current$2 += CSSFileText;
         Self.FHandle$13.innerHTML = Current$2;
      }
   }
   /// constructor TW3StyleSheet.Create(const StyleSheet: THandle)
   ///  [line: 714, column: 27, file: SmartCL.Css.Stylesheet]
   ,Create$140:function(Self, StyleSheet$1) {
      TObject.Create(Self);
      Self.FHandle$13 = StyleSheet$1;
      return Self
   }
   /// constructor TW3StyleSheet.Create()
   ///  [line: 720, column: 27, file: SmartCL.Css.Stylesheet]
   ,Create$139:function(Self) {
      TObject.Create(Self);
      Self.FHandle$13 = document.createElement("style");
      Self.FHandle$13.type = "text\/css";
      if ($Is(BrowserAPI(),TW3WebkitBrowserAPI)) {
         if ((!Self.FHandle$13.styleSheet)) {
            Self.FHandle$13.appendChild(document.createTextNode(""));
         }
      }
      window.document.head.appendChild(Self.FHandle$13);
      return Self
   }
   /// destructor TW3StyleSheet.Destroy()
   ///  [line: 740, column: 26, file: SmartCL.Css.Stylesheet]
   ,Destroy:function(Self) {
      if (Self.FHandle$13) {
         window.document.head.removeChild(Self.FHandle$13);
      }
      Self.FHandle$13 = null;
      TObject.Destroy(Self);
   }
   /// function TW3StyleSheet.GlobalStyleSheet() : TW3StyleSheet
   ///  [line: 798, column: 30, file: SmartCL.Css.Stylesheet]
   ,GlobalStyleSheet:function(Self) {
      var Result = null;
      if (FGlobalSheet === null) {
         FGlobalSheet = TW3StyleSheet.Create$139($New(TW3StyleSheet));
      }
      Result = FGlobalSheet;
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
function SetupTextBehaviorStyles() {
   var st = "";
   if (__LabelStyles !== null) {
      return;
   }
   st = ".lbxenableBreak  { white-space: normal; }\r\n      .lbxdisableBreak { white-space: nowrap; }\r\n      .lbxcontent {\r\n        display: flex;\r\n        position: absolute;\r\n        box-sizing: border-box;\r\n        font-family: inherit;\r\n        font-size: inherit;\r\n        color: inherit;\r\n        overflow: visible;\r\n        margin: 1px !important;\r\n        padding: 1px !important;\r\n      }\r\n\r\n      .lbxcontent_ellipsis { width: 100%; text-overflow: ellipsis; }\r\n      .lbxcontent_v_top    { top: 0%; transform: translate(0%, 0%); }\r\n      .lbxcontent_v_center { top: 50%; -BrowserAPI-transform: translate(0%, -50%); transform: translate(0%, -50%);}\r\n      .lbxcontent_v_bottom { top: 100%; -BrowserAPI-transform: translate(0%, -100%); transform: translate(0%, -100%);}\r\n      .lbxcontent_h_left   { justify-content: flex-start; }\r\n      .lbxcontent_h_center { width: 100%; text-align: center; justify-content: center; }\r\n      .lbxcontent_h_right  { width: 100%; text-align: right; justify-content: flex-end; }";
   __LabelStyles = TW3StyleSheet.Create$139($New(TW3StyleSheet));
   __LabelStyles.FHandle$13.innerHTML = st.replace(/\-BrowserAPI\-transform/g,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));
};
/// TW3RGBA = record
///  [line: 175, column: 3, file: System.Colors]
function Copy$TW3RGBA(s,d) {
   d.A$2=s.A$2;
   d.B$1=s.B$1;
   d.G$1=s.G$1;
   d.R$1=s.R$1;
   return d;
}
function Clone$TW3RGBA($) {
   return {
      A$2:$.A$2,
      B$1:$.B$1,
      G$1:$.G$1,
      R$1:$.R$1
   }
}
function StrToColor(aColorStr) {
   aColorStr = { v : aColorStr };
   var Result = {v:0};
   try {
      var mTemp = "",
         xpos = 0,
         r$2 = 0,
         g = 0,
         b$1 = 0;
      aColorStr.v = Trim$_String_(aColorStr.v);
      if (!aColorStr.v.length) {
         return Result.v;
      }
      if ((aColorStr.v).toLocaleLowerCase() == "transparent") {
         Result.v = 536870911;
         return Result.v;
      }
      if (aColorStr.v.charAt(0) == "#" || aColorStr.v.charAt(0) == "$") {
         Result.v = parseInt("0x" + Trim$_String_Integer_Integer_(aColorStr.v,1,0),16);
         return Result.v;
      }
      if (aColorStr.v.substr(0,2) == "0x") {
         Result.v = parseInt(aColorStr.v,16);
         return Result.v;
      }
      if ((aColorStr.v.substr(0,4)).toLowerCase() == "rgb(") {
         aColorStr.v = Trim$_String_Integer_Integer_(aColorStr.v,4,0);
         try {
            xpos = (aColorStr.v.indexOf(",")+1);
            if (xpos > 1) {
               mTemp = Trim$_String_(aColorStr.v.substr(0,(xpos-1)));
               Delete(aColorStr,1,xpos);
               if (mTemp.charAt(0) == "$") {
                  mTemp = "0x" + Trim$_String_Integer_Integer_(mTemp,1,0);
               }
               r$2 = parseInt(mTemp,10);
            }
            xpos = (aColorStr.v.indexOf(",")+1);
            if (xpos > 1) {
               mTemp = Trim$_String_(aColorStr.v.substr(0,(xpos-1)));
               Delete(aColorStr,1,xpos);
               if (mTemp.charAt(0) == "$") {
                  mTemp = "0x" + Trim$_String_Integer_Integer_(mTemp,1,0);
               }
               g = parseInt(mTemp,10);
            }
            xpos = (aColorStr.v.indexOf(")")+1);
            if (xpos > 1) {
               mTemp = Trim$_String_(aColorStr.v.substr(0,(xpos-1)));
               if (mTemp.charAt(0) == "$") {
                  mTemp = "0x" + Trim$_String_Integer_Integer_(mTemp,1,0);
               }
               b$1 = parseInt(mTemp,10);
            }
            Result.v = (r$2*65536)+(g*256)+b$1;
         } catch ($e) {
            var e$1 = $W($e);
            return Result.v;
         }
      }
   } finally {return Result.v}
};
function RGBToColor(Red, Green, Blue) {
   return (Red*65536)+(Green*256)+Blue;
};
function ColorToWebStr(Color$8, Alpha$1) {
   var Result = "";
   var R$5 = 0,
      G$5 = 0,
      B$5 = 0;
   R$5 = ClampInt((Color$8>>>16)&255,0,255);
   G$5 = ClampInt((Color$8>>>8)&255,0,255);
   B$5 = ClampInt(Color$8&255,0,255);
   if (ClampInt(Alpha$1,0,255) == 255) {
      Result = "#" + __ByteToHexLUT[R$5] + __ByteToHexLUT[G$5] + __ByteToHexLUT[B$5];
   } else {
      Result = "rgba(" + __StrByteLUT[R$5] + "," + __StrByteLUT[G$5] + "," + __StrByteLUT[B$5] + "," + __StrByteLUT[$Div(ClampInt(Alpha$1,0,255),255)] + ")";
   }
   return Result
};
function ColorToWebStr$1(r$3, g$1, b$2, Alpha$1) {
   var Result = "";
   if (ClampInt(Alpha$1,0,255) == 255) {
      Result = "#" + __ByteToHexLUT[r$3] + __ByteToHexLUT[g$1] + __ByteToHexLUT[b$2];
   } else {
      Result = "rgba(" + __StrByteLUT[r$3] + "," + __StrByteLUT[g$1] + "," + __StrByteLUT[b$2] + "," + __StrByteLUT[ClampInt(Alpha$1,0,255)] + ")";
   }
   return Result
};
function ColorToStr(Color$8) {
   var Result = "";
   var rgb = 0;
   rgb = (((Color$8>>>16)&255)|(Color$8&65280))|((Color$8&255)<<16);
   Result = "0x" + IntToHex(rgb,6);
   return Result
};
/// TJSONObject = class (TObject)
///  [line: 39, column: 3, file: System.JSON]
var TJSONObject = {
   $ClassName:"TJSONObject",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FInstance = undefined;
      $.FOptions$3 = [0];
   }
   /// function TJSONObject.AddOrSet(const PropertyName: String; const Data: TJSInstanceArray) : TJSONObject
   ///  [line: 428, column: 22, file: System.JSON]
   ,AddOrSet$2:function(Self, PropertyName, Data$8) {
      var Result = null;
      Result = Self;
      if (TJSONObject.Exists(Self,PropertyName)) {
         if ($SetIn(Self.FOptions$3,3,0,4)) {
            Self.FInstance[PropertyName] = Data$8;
         } else {
            throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to set value[%s], instance does not allow alteration",[PropertyName]);
         }
      } else {
         if ($SetIn(Self.FOptions$3,1,0,4)) {
            Self.FInstance[PropertyName] = Data$8;
         } else {
            throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to add value [%s], instance does not allow new properties",[PropertyName]);
         }
      }
      return Result
   }
   /// function TJSONObject.AddOrSet(const PropertyName: String; const Data: Variant) : TJSONObject
   ///  [line: 409, column: 22, file: System.JSON]
   ,AddOrSet:function(Self, PropertyName, Data$8) {
      var Result = null;
      Result = Self;
      if (TJSONObject.Exists(Self,PropertyName)) {
         if ($SetIn(Self.FOptions$3,3,0,4)) {
            Self.FInstance[PropertyName] = Data$8;
         } else {
            throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to set value[%s], instance does not allow alteration",[PropertyName]);
         }
      } else {
         if ($SetIn(Self.FOptions$3,1,0,4)) {
            Self.FInstance[PropertyName] = Data$8;
         } else {
            throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to add value [%s], instance does not allow new properties",[PropertyName]);
         }
      }
      return Result
   }
   /// constructor TJSONObject.Create(const Instance: TJsInstance; const Options: TJSONObjectOptions; Clone: Boolean)
   ///  [line: 182, column: 25, file: System.JSON]
   ,Create$115:function(Self, Instance$3, Options$3, Clone$3) {
      TObject.Create(Self);
      Self.FOptions$3 = Options$3.slice(0);
      if (TW3VariantHelper$Valid$4(Instance$3)) {
         if (TW3VariantHelper$IsObject(Instance$3)) {
            if (Clone$3) {
               Self.FInstance = TVariant.CreateObject();
               TVariant.ForEachProperty(Instance$3,function (Name$13, Data$8) {
                  var Result = 1;
                  TJSONObject.AddOrSet(Self,Name$13,Data$8);
                  Result = 1;
                  return Result
               });
            } else {
               Self.FInstance = Instance$3;
            }
         } else {
            throw Exception.Create($New(EJSONObject),"Failed to clone instance, reference is not an object");
         }
      } else {
         if ($SetIn(Self.FOptions$3,0,0,4)) {
            Self.FInstance = TVariant.CreateObject();
         } else {
            throw Exception.Create($New(EJSONObject),"Instance was nil, provided options does not allow initialization error");
         }
      }
      return Self
   }
   /// constructor TJSONObject.Create(const Instance: TJsInstance; const Options: TJSONObjectOptions)
   ///  [line: 158, column: 25, file: System.JSON]
   ,Create$114:function(Self, Instance$3, Options$3) {
      TObject.Create(Self);
      Self.FOptions$3 = Options$3.slice(0);
      if (TW3VariantHelper$Valid$4(Instance$3) && TW3VariantHelper$IsObject(Instance$3)) {
         Self.FInstance = Instance$3;
      } else {
         if ($SetIn(Self.FOptions$3,0,0,4)) {
            Self.FInstance = TVariant.CreateObject();
         } else {
            throw Exception.Create($New(EJSONObject),"Instance was nil, provided options does not allow initialization error");
         }
      }
      return Self
   }
   /// constructor TJSONObject.Create(const Instance: TJsInstance)
   ///  [line: 138, column: 25, file: System.JSON]
   ,Create$113:function(Self, Instance$3) {
      TObject.Create(Self);
      Self.FOptions$3 = [15];
      if (TW3VariantHelper$Valid$4(Instance$3)) {
         if (TW3VariantHelper$IsObject(Instance$3)) {
            Self.FInstance = Instance$3;
         } else {
            throw Exception.Create($New(EJSONObject),"Failed to inspect instance, reference is not an object");
         }
      } else {
         Self.FInstance = TVariant.CreateObject();
      }
      return Self
   }
   /// constructor TJSONObject.Create()
   ///  [line: 131, column: 25, file: System.JSON]
   ,Create$112:function(Self) {
      TObject.Create(Self);
      Self.FOptions$3 = [15];
      Self.FInstance = TVariant.CreateObject();
      return Self
   }
   /// destructor TJSONObject.Destroy()
   ,Destroy$16:function(Self) {
      Self.FInstance = null;
      TObject.Destroy(Self);
   }
   /// function TJSONObject.Exists(const PropertyName: String) : Boolean
   ///  [line: 456, column: 22, file: System.JSON]
   ,Exists:function(Self, PropertyName) {
      return $VarToBool(Object.hasOwnProperty.call(Self.FInstance,PropertyName));
   }
   /// function TJSONObject.ForEach(const Callback: TTJSONObjectEnumProc) : TJSONObject
   ///  [line: 277, column: 22, file: System.JSON]
   ,ForEach$4:function(Self, Callback$1) {
      var Result = null;
      var LData = { v : undefined },
         NameList = [],
         a$412 = 0,
         xName = "";
      Result = Self;
      if (Callback$1) {
         NameList = TJSONObject.Keys(Self);
         var $temp43;
         for(a$412=0,$temp43=NameList.length;a$412<$temp43;a$412++) {
            xName = NameList[a$412];
            TJSONObject.Read$1(Self,xName,LData);
            if (Callback$1(xName,LData.v) == 1) {
               TJSONObject.Write$1(Self,xName,LData.v);
            } else {
               break;
            }
         }
      }
      return Result
   }
   /// procedure TJSONObject.FromJSON(const Text: String)
   ///  [line: 306, column: 23, file: System.JSON]
   ,FromJSON:function(Self, Text$10) {
      Self.FInstance = JSON.parse(Text$10);
   }
   /// function TJSONObject.GetPropertyCount() : Integer
   ///  [line: 269, column: 22, file: System.JSON]
   ,GetPropertyCount:function(Self) {
      var Result = 0;
      var LRef;
      LRef = Self.FInstance;
      Result = Object.keys(LRef).length;
      return Result
   }
   /// function TJSONObject.Keys() : TStrArray
   ///  [line: 335, column: 22, file: System.JSON]
   ,Keys:function(Self) {
      return TVariant.Properties(Self.FInstance);
   }
   /// function TJSONObject.Read(const PropertyName: String; var Data: Variant) : TJSONObject
   ///  [line: 385, column: 22, file: System.JSON]
   ,Read$1:function(Self, PropertyName, Data$8) {
      var Result = null;
      Result = Self;
      if (TJSONObject.Exists(Self,PropertyName)) {
         Data$8.v = Self.FInstance[PropertyName];
      } else {
         throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to read value, property [%s] not found error",[PropertyName]);
      }
      return Result
   }
   /// function TJSONObject.ToJSON() : String
   ///  [line: 301, column: 22, file: System.JSON]
   ,ToJSON:function(Self) {
      return JSON.stringify(Self.FInstance);
   }
   /// function TJSONObject.Write(const PropertyName: String; const Data: Variant) : TJSONObject
   ///  [line: 395, column: 22, file: System.JSON]
   ,Write$1:function(Self, PropertyName, Data$8) {
      var Result = null;
      Result = Self;
      if (TJSONObject.Exists(Self,PropertyName)) {
         if ($SetIn(Self.FOptions$3,3,0,4)) {
            Self.FInstance[PropertyName] = Data$8;
         } else {
            throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to set value[%s], instance does not allow alteration",[PropertyName]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to write value, property [%s] not found error",[PropertyName]);
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// EJSONObject = class (EW3Exception)
///  [line: 34, column: 3, file: System.JSON]
var EJSONObject = {
   $ClassName:"EJSONObject",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3CustomReader = class (TObject)
///  [line: 38, column: 3, file: System.Reader]
var TW3CustomReader = {
   $ClassName:"TW3CustomReader",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAccess$2 = null;
      $.FOffset$2 = $.FTotalSize$1 = 0;
      $.FOptions$5 = [0];
   }
   /// constructor TW3CustomReader.Create(const Access: IBinaryTransport)
   ///  [line: 104, column: 29, file: System.Reader]
   ,Create$118:function(Self, Access) {
      TObject.Create(Self);
      Self.FAccess$2 = Access;
      Self.FOffset$2 = Self.FAccess$2[0]();
      Self.FTotalSize$1 = Self.FAccess$2[1]();
      Self.FOptions$5 = [1];
      return Self
   }
   /// function TW3CustomReader.GetReadOffset() : Integer
   ///  [line: 125, column: 26, file: System.Reader]
   ,GetReadOffset:function(Self) {
      var Result = 0;
      if ($SetIn(Self.FOptions$5,0,0,1)) {
         Result = Self.FOffset$2;
      } else {
         Result = Self.FAccess$2[0]();
      }
      return Result
   }
   /// function TW3CustomReader.GetTotalSize() : Integer
   ///  [line: 118, column: 26, file: System.Reader]
   ,GetTotalSize$2:function(Self) {
      var Result = 0;
      if ($SetIn(Self.FOptions$5,0,0,1)) {
         Result = Self.FTotalSize$1;
      } else {
         Result = Self.FAccess$2[1]();
      }
      return Result
   }
   /// function TW3CustomReader.QueryBreachOfBoundary(const NumberOfBytes: Integer) : Boolean
   ///  [line: 132, column: 26, file: System.Reader]
   ,QueryBreachOfBoundary$1:function(Self, NumberOfBytes) {
      return TW3CustomReader.GetTotalSize$2(Self)-TW3CustomReader.GetReadOffset(Self) < NumberOfBytes;
   }
   /// function TW3CustomReader.Read(const BytesToRead: Integer) : TByteArray
   ///  [line: 137, column: 26, file: System.Reader]
   ,Read$2:function(Self, BytesToRead) {
      var Result = [];
      if (BytesToRead > 0) {
         Result = Self.FAccess$2[2](TW3CustomReader.GetReadOffset(Self),BytesToRead);
         if ($SetIn(Self.FOptions$5,0,0,1)) {
            (Self.FOffset$2+= Result.length);
         }
      } else {
         throw EW3Exception.Create$18($New(EW3ReadError),"TW3CustomReader.Read",Self,("Invalid read length ("+BytesToRead.toString()+")"));
      }
      return Result
   }
   /// function TW3CustomReader.ReadInteger() : Integer
   ///  [line: 267, column: 26, file: System.Reader]
   ,ReadInteger$1:function(Self) {
      var Result = 0;
      var LBytesToRead = 0,
         Data$8 = [];
      LBytesToRead = TDatatype.SizeOfType(TDatatype,7);
      if (TW3CustomReader.QueryBreachOfBoundary$1(Self,LBytesToRead)) {
         throw EW3Exception.Create$18($New(EW3ReadError),"TW3CustomReader.ReadInteger",Self,Format($R[10],[LBytesToRead]));
      } else {
         Data$8 = TW3CustomReader.Read$2(Self,LBytesToRead);
         Result = TDatatype.BytesToInt32(TDatatype,Data$8);
      }
      return Result
   }
   /// function TW3CustomReader.ReadStr(const BytesToRead: Integer) : String
   ///  [line: 279, column: 26, file: System.Reader]
   ,ReadStr:function(Self, BytesToRead) {
      var Result = "";
      var LData = [];
      if (TW3CustomReader.QueryBreachOfBoundary$1(Self,BytesToRead)) {
         throw EW3Exception.Create$18($New(EW3ReadError),"TW3CustomReader.ReadStr",Self,Format($R[10],[BytesToRead]));
      } else {
         if (BytesToRead > 0) {
            LData = TW3CustomReader.Read$2(Self,BytesToRead);
            Result = TDatatype.BytesToString(TDatatype,LData);
         }
      }
      return Result
   }
   /// function TW3CustomReader.ReadString() : String
   ///  [line: 297, column: 26, file: System.Reader]
   ,ReadString$2:function(Self) {
      var Result = "";
      var LSignature = 0,
         LLength = 0;
      LSignature = TW3CustomReader.ReadInteger$1(Self);
      if (LSignature == 3131756270) {
         LLength = TW3CustomReader.ReadInteger$1(Self);
         if (LLength > 0) {
            Result = TW3CustomReader.ReadStr(Self,LLength);
         }
      } else {
         throw EW3Exception.Create$18($New(EW3ReadError),"TW3CustomReader.ReadString",Self,Format($R[11],["string"]));
      }
      return Result
   }
   /// procedure TW3CustomReader.SetUpdateOption(const NewUpdateMode: TW3ReaderOption)
   ///  [line: 113, column: 27, file: System.Reader]
   ,SetUpdateOption:function(Self, NewUpdateMode) {
      Self.FOptions$5 = NewUpdateMode.slice(0);
   }
   ,Destroy:TObject.Destroy
};
/// TStreamReader = class (TW3CustomReader)
///  [line: 78, column: 3, file: System.Reader]
var TStreamReader = {
   $ClassName:"TStreamReader",$Parent:TW3CustomReader
   ,$Init:function ($) {
      TW3CustomReader.$Init($);
   }
   /// constructor TStreamReader.Create(const Stream: TStream)
   ///  [line: 91, column: 27, file: System.Reader]
   ,Create$119:function(Self, Stream$1) {
      TW3CustomReader.Create$118(Self,$AsIntf(Stream$1,"IBinaryTransport"));
      TW3CustomReader.SetUpdateOption(Self,[0]);
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TReader = class (TW3CustomReader)
///  [line: 74, column: 3, file: System.Reader]
var TReader = {
   $ClassName:"TReader",$Parent:TW3CustomReader
   ,$Init:function ($) {
      TW3CustomReader.$Init($);
   }
   ,Destroy:TObject.Destroy
};
/// EW3ReadError = class (EW3Exception)
///  [line: 34, column: 3, file: System.Reader]
var EW3ReadError = {
   $ClassName:"EW3ReadError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3CustomWriter = class (TObject)
///  [line: 39, column: 3, file: System.Writer]
var TW3CustomWriter = {
   $ClassName:"TW3CustomWriter",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAccess$1 = null;
      $.FOffset$1 = $.FTotalSize = 0;
      $.FOptions$4 = [0];
   }
   /// constructor TW3CustomWriter.Create(const Access: IBinaryTransport)
   ///  [line: 103, column: 29, file: System.Writer]
   ,Create$116:function(Self, Access) {
      TObject.Create(Self);
      Self.FAccess$1 = Access;
      Self.FOffset$1 = Self.FAccess$1[0]();
      Self.FTotalSize = Self.FAccess$1[1]();
      Self.FOptions$4 = [3];
      return Self
   }
   /// function TW3CustomWriter.GetOffset() : Integer
   ///  [line: 126, column: 26, file: System.Writer]
   ,GetOffset:function(Self) {
      var Result = 0;
      if ($SetIn(Self.FOptions$4,0,0,2)) {
         Result = Self.FOffset$1;
      } else {
         Result = Self.FAccess$1[0]();
      }
      return Result
   }
   /// function TW3CustomWriter.GetTotalFree() : Integer
   ///  [line: 154, column: 26, file: System.Writer]
   ,GetTotalFree:function(Self) {
      return Self.FAccess$1[1]()-TW3CustomWriter.GetOffset(Self);
   }
   /// function TW3CustomWriter.GetTotalSize() : Integer
   ///  [line: 117, column: 26, file: System.Writer]
   ,GetTotalSize$1:function(Self) {
      var Result = 0;
      if ($SetIn(Self.FOptions$4,0,0,2)) {
         Result = 2147483647;
      } else {
         Result = Self.FAccess$1[1]();
      }
      return Result
   }
   /// function TW3CustomWriter.QueryBreachOfBoundary(const BytesToFit: Integer) : Boolean
   ///  [line: 134, column: 26, file: System.Writer]
   ,QueryBreachOfBoundary:function(Self, BytesToFit) {
      var Result = false;
      if (BytesToFit >= 1) {
         if ($SetIn(Self.FOptions$4,1,0,2)) {
            Result = false;
         } else {
            Result = TW3CustomWriter.GetTotalFree(Self) < BytesToFit;
         }
      }
      return Result
   }
   /// procedure TW3CustomWriter.SetAccessOptions(const NewOptions: TW3WriterOptions)
   ///  [line: 112, column: 27, file: System.Writer]
   ,SetAccessOptions:function(Self, NewOptions) {
      Self.FOptions$4 = NewOptions.slice(0);
   }
   /// function TW3CustomWriter.Write(Data: TByteArray) : Integer
   ///  [line: 159, column: 26, file: System.Writer]
   ,Write$2:function(Self, Data$8) {
      var Result = 0;
      var LBytesToWrite = 0,
         LBytesLeft = 0,
         LBytesMissing = 0;
      LBytesToWrite = Data$8.length;
      if (LBytesToWrite > 0) {
         if ($SetIn(Self.FOptions$4,1,0,2)) {
            Self.FAccess$1[3](TW3CustomWriter.GetOffset(Self),Data$8);
            if ($SetIn(Self.FOptions$4,0,0,2)) {
               (Self.FOffset$1+= Data$8.length);
            }
         } else {
            if (TW3CustomWriter.QueryBreachOfBoundary(Self,LBytesToWrite)) {
               LBytesLeft = TW3CustomWriter.GetTotalSize$1(Self)-TW3CustomWriter.GetOffset(Self);
               LBytesMissing = Math.abs(LBytesLeft-LBytesToWrite);
               (LBytesToWrite-= LBytesMissing);
               $ArraySetLenC(Data$8,LBytesToWrite,function (){return 0});
            }
            if (LBytesToWrite > 1) {
               Self.FAccess$1[3](TW3CustomWriter.GetOffset(Self),Data$8);
               if ($SetIn(Self.FOptions$4,0,0,2)) {
                  (Self.FOffset$1+= Data$8.length);
               }
            } else {
               throw EW3Exception.Create$18($New(EW3WriteError),"TW3CustomWriter.Write",Self,Format($R[12],[Data$8.length]));
            }
         }
         Result = Data$8.length;
      } else {
         throw EW3Exception.Create$18($New(EW3WriteError),"TW3CustomWriter.Write",Self,Format($R[14],[LBytesToWrite]));
      }
      return Result
   }
   /// procedure TW3CustomWriter.WriteInteger(const Value: Integer)
   ///  [line: 314, column: 27, file: System.Writer]
   ,WriteInteger:function(Self, Value$5) {
      var LBytesToWrite = 0;
      LBytesToWrite = TDatatype.SizeOfType(TDatatype,7);
      if (TW3CustomWriter.QueryBreachOfBoundary(Self,LBytesToWrite)) {
         throw EW3Exception.Create$18($New(EW3WriteError),"TW3CustomWriter.WriteInteger",Self,Format($R[12],[LBytesToWrite]));
      } else {
         TW3CustomWriter.Write$2(Self,TDatatype.Int32ToBytes(TDatatype,Value$5));
      }
   }
   /// procedure TW3CustomWriter.WriteString(const Value: String)
   ///  [line: 346, column: 27, file: System.Writer]
   ,WriteString$1:function(Self, Value$5) {
      var LBytes = [],
         LTotal = 0;
      (LTotal+= TDatatype.SizeOfType(TDatatype,7));
      (LTotal+= TDatatype.SizeOfType(TDatatype,7));
      LBytes = TDatatype.StringToBytes(TDatatype,Value$5);
      (LTotal+= LBytes.length);
      if (TW3CustomWriter.QueryBreachOfBoundary(Self,LTotal)) {
         throw EW3Exception.Create$18($New(EW3WriteError),"TW3CustomWriter.WriteString",Self,Format($R[12],[LTotal]));
      } else {
         try {
            TW3CustomWriter.WriteInteger(Self,3131756270);
            TW3CustomWriter.WriteInteger(Self,LBytes.length);
            if (LBytes.length > 0) {
               TW3CustomWriter.Write$2(Self,LBytes);
            }
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.Create$18($New(EW3WriteError),"TW3CustomWriter.WriteString",Self,e$1.FMessage);
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// TWriter = class (TW3CustomWriter)
///  [line: 77, column: 3, file: System.Writer]
var TWriter = {
   $ClassName:"TWriter",$Parent:TW3CustomWriter
   ,$Init:function ($) {
      TW3CustomWriter.$Init($);
   }
   ,Destroy:TObject.Destroy
};
/// TStreamWriter = class (TW3CustomWriter)
///  [line: 80, column: 3, file: System.Writer]
var TStreamWriter = {
   $ClassName:"TStreamWriter",$Parent:TW3CustomWriter
   ,$Init:function ($) {
      TW3CustomWriter.$Init($);
   }
   /// constructor TStreamWriter.Create(const Stream: TStream)
   ///  [line: 93, column: 27, file: System.Writer]
   ,Create$117:function(Self, Stream$1) {
      TW3CustomWriter.Create$116(Self,$AsIntf(Stream$1,"IBinaryTransport"));
      TW3CustomWriter.SetAccessOptions(Self,[2]);
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// EW3WriteError = class (EW3Exception)
///  [line: 31, column: 3, file: System.Writer]
var EW3WriteError = {
   $ClassName:"EW3WriteError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3ZOrderFilterResult enumeration
///  [line: 288, column: 3, file: SmartCL.Components]
var TW3ZOrderFilterResult = [ "zfInclude", "zfExclude" ];
/// TW3TextShadow = class (TW3OwnedObject)
///  [line: 730, column: 3, file: SmartCL.Components]
var TW3TextShadow = {
   $ClassName:"TW3TextShadow",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3TextShadow.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3TagPositionMode enumeration
///  [line: 297, column: 3, file: SmartCL.Components]
var TW3TagPositionMode = { 22:"pmRelative", 23:"pmAbsolute", 24:"pmSmart" };
/// TW3TagDisplayMode enumeration
///  [line: 303, column: 3, file: SmartCL.Components]
var TW3TagDisplayMode = [ "dmInlineBlock", "dmBlock", "dmFlex", "dmTable", "dmTableCaption", "dmTableCell", "dmTableRow", "dmTableColumn", "dmRunIn", "dmListItem" ];
/// TW3StackingOrderList = record
///  [line: 278, column: 3, file: SmartCL.Components]
function Copy$TW3StackingOrderList(s,d) {
   d.olTags=s.olTags;
   d.olZIndex=s.olZIndex;
   return d;
}
function Clone$TW3StackingOrderList($) {
   return {
      olTags:$.olTags,
      olZIndex:$.olZIndex
   }
}
/// procedure TW3StackingOrderList.MoveToFirst(var Self: TW3StackingOrderList; const Handle: THandle)
///  [line: 1877, column: 32, file: SmartCL.Components]
function TW3StackingOrderList$MoveToFirst(Self$31, Handle$17) {
   var i$5 = 0;
   i$5 = Self$31.olTags.indexOf(Handle$17);
   if (i$5 >= 0) {
      Self$31.olTags.splice(i$5,1)
      ;
      Self$31.olTags.splice(0,0,Handle$17);
   }
}
/// procedure TW3StackingOrderList.MoveToLast(var Self: TW3StackingOrderList; const Handle: THandle)
///  [line: 1886, column: 32, file: SmartCL.Components]
function TW3StackingOrderList$MoveToLast(Self$32, Handle$18) {
   var i$6 = 0;
   i$6 = Self$32.olTags.indexOf(Handle$18);
   if (i$6 >= 0) {
      Self$32.olTags.splice(i$6,1)
      ;
      Self$32.olTags.push(Handle$18);
   }
}
/// procedure TW3StackingOrderList.Remap(var Self: TW3StackingOrderList)
///  [line: 1895, column: 32, file: SmartCL.Components]
function TW3StackingOrderList$Remap(Self$33) {
   var x$39 = 0;
   if (Self$33.olZIndex.length > 0) {
      var $temp44;
      for(x$39=0,$temp44=Self$33.olZIndex.length;x$39<$temp44;x$39++) {
         w3_SetStyle(Self$33.olTags[x$39],"z-index",x$39);
      }
   }
}
/// procedure TW3StackingOrderList.Sort(var Self: TW3StackingOrderList; const HighestFirst: Boolean)
///  [line: 1907, column: 32, file: SmartCL.Components]
function TW3StackingOrderList$Sort$1(Self$34, HighestFirst) {
   var mCount = 0,
      mAltered = false,
      x$40 = 0,
      mAltered$1 = false,
      x$41 = 0;
   mCount = Self$34.olZIndex.length;
   if (mCount > 1) {
      if (HighestFirst) {
         mAltered = false;
         do {
            mAltered = false;
            var $temp45;
            for(x$40=1,$temp45=mCount;x$40<$temp45;x$40++) {
               if (Self$34.olZIndex[x$40] > Self$34.olZIndex[x$40-1]) {
                  $ArraySwap(Self$34.olZIndex,(x$40-1),x$40);
                  $ArraySwap(Self$34.olTags,(x$40-1),x$40);
                  mAltered = true;
               }
            }
         } while (!(!(mAltered)));
      } else {
         mAltered$1 = false;
         do {
            mAltered$1 = false;
            var $temp46;
            for(x$41=1,$temp46=mCount;x$41<$temp46;x$41++) {
               if (Self$34.olZIndex[x$41] < Self$34.olZIndex[x$41-1]) {
                  $ArraySwap(Self$34.olZIndex,(x$41-1),x$41);
                  $ArraySwap(Self$34.olTags,(x$41-1),x$41);
                  mAltered$1 = true;
               }
            }
         } while (!(!(mAltered$1)));
      }
   }
}
/// TW3ScrollInfo = class (TW3OwnedObject)
///  [line: 855, column: 3, file: SmartCL.Components]
var TW3ScrollInfo = {
   $ClassName:"TW3ScrollInfo",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FHandle$9 = undefined;
   }
   /// constructor TW3ScrollInfo.Create(const AOwner: TW3TagObj)
   ///  [line: 3520, column: 27, file: SmartCL.Components]
   ,Create$122:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FHandle$9 = AOwner.FHandle$4;
      return Self
   }
   /// function TW3ScrollInfo.GetScrollHeight() : Integer
   ///  [line: 3563, column: 24, file: SmartCL.Components]
   ,GetScrollHeight:function(Self) {
      var Result = 0;
      if (TControlHandleHelper$Valid$3(Self.FHandle$9)) {
         Result = $VarToInt(Self.FHandle$9.scrollHeight,"");
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ScrollInfo.GetScrollHeight",Self,"invalid owner handle error");
      }
      return Result
   }
   /// function TW3ScrollInfo.GetScrollLeft() : Integer
   ///  [line: 3572, column: 24, file: SmartCL.Components]
   ,GetScrollLeft:function(Self) {
      var Result = 0;
      if (TControlHandleHelper$Valid$3(Self.FHandle$9)) {
         Result = $VarToInt(Self.FHandle$9.scrollLeft,"");
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ScrollInfo.GetScrollLeft",Self,"invalid owner handle error");
      }
      return Result
   }
   /// function TW3ScrollInfo.GetScrollTop() : Integer
   ///  [line: 3581, column: 24, file: SmartCL.Components]
   ,GetScrollTop:function(Self) {
      var Result = 0;
      if (TControlHandleHelper$Valid$3(Self.FHandle$9)) {
         Result = $VarToInt(Self.FHandle$9.scrollTop,"");
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ScrollInfo.GetScrollTop",Self,"invalid owner handle error");
      }
      return Result
   }
   /// function TW3ScrollInfo.GetScrollWidth() : Integer
   ///  [line: 3554, column: 24, file: SmartCL.Components]
   ,GetScrollWidth:function(Self) {
      var Result = 0;
      if (TControlHandleHelper$Valid$3(Self.FHandle$9)) {
         Result = $VarToInt(Self.FHandle$9.scrollWidth,"");
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ScrollInfo.GetScrollWidth",Self,"invalid owner handle error");
      }
      return Result
   }
   /// procedure TW3ScrollInfo.ScrollTo(const NewLeft: Integer; const NewTop: Integer)
   ///  [line: 3590, column: 25, file: SmartCL.Components]
   ,ScrollTo:function(Self, NewLeft, NewTop) {
      if (TControlHandleHelper$Valid$3(Self.FHandle$9)) {
         Self.FHandle$9.scrollLeft = NewLeft;
         Self.FHandle$9.scrollTop = NewTop;
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ScrollInfo.ScrollTo",Self,"invalid owner handle error");
      }
   }
   /// procedure TW3ScrollInfo.ScrollX(const NewLeft: Integer)
   ///  [line: 3536, column: 25, file: SmartCL.Components]
   ,ScrollX:function(Self, NewLeft) {
      if (TControlHandleHelper$Valid$3(Self.FHandle$9)) {
         Self.FHandle$9.scrollLeft = NewLeft;
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ScrollInfo.ScrollX",Self,"invalid owner handle error");
      }
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3ScrollInfo.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3GraphicControl = class (TW3CustomControl)
///  [line: 1333, column: 3, file: SmartCL.Components]
var TW3GraphicControl = {
   $ClassName:"TW3GraphicControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FCanvas = $.FContext$2 = $.FOnPaint = null;
   }
   /// procedure TW3GraphicControl.FinalizeObject()
   ///  [line: 4990, column: 29, file: SmartCL.Components]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FCanvas);
      TObject.Free(Self.FContext$2);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3GraphicControl.InitializeObject()
   ///  [line: 4983, column: 29, file: SmartCL.Components]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FContext$2 = TW3ControlGraphicContext.Create$95($New(TW3ControlGraphicContext),Self.FHandle$4);
      Self.FCanvas = TW3Canvas.Create$98($New(TW3Canvas),Self.FContext$2);
   }
   /// procedure TW3GraphicControl.Invalidate()
   ///  [line: 5048, column: 29, file: SmartCL.Components]
   ,Invalidate:function(Self) {
      if (Self.FHandle$4) {
         TW3GraphicControl.Refresh(Self);
      }
   }
   /// function TW3GraphicControl.MakeElementTagObj() : THandle
   ///  [line: 5027, column: 28, file: SmartCL.Components]
   ,MakeElementTagObj:function(Self) {
      var Result = undefined;
      Result = document.createElement("canvas");
      return Result
   }
   /// procedure TW3GraphicControl.Paint()
   ///  [line: 5034, column: 29, file: SmartCL.Components]
   ,Paint:function(Self) {
      if (Self.FOnPaint) {
         Self.FOnPaint(Self,Self.FCanvas);
      }
   }
   /// procedure TW3GraphicControl.Refresh()
   ///  [line: 5055, column: 29, file: SmartCL.Components]
   ,Refresh:function(Self) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(TW3TagObj.a$52(Self))) {
            if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3GraphicControl.Paint$(Self);
            }
         }
      }
   }
   /// procedure TW3GraphicControl.Resize()
   ///  [line: 5040, column: 29, file: SmartCL.Components]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      w3_setAttrib(Self.FHandle$4,"width",w3_GetStyle(Self.FHandle$4,"width"));
      w3_setAttrib(Self.FHandle$4,"height",w3_GetStyle(Self.FHandle$4,"height"));
   }
   /// procedure TW3GraphicControl.SetHeight(const NewHeight: Integer)
   ///  [line: 5016, column: 29, file: SmartCL.Components]
   ,SetHeight:function(Self, NewHeight) {
      TW3MovableControl.SetHeight(Self,NewHeight);
      if (Self.FHandle$4) {
         if (NewHeight != TW3MovableControl.GetHeight$(Self)) {
            w3_setAttrib(Self.FHandle$4,"height",TInteger.ToPxStr(NewHeight));
         }
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3GraphicControl.SetHeight",Self,"invalid control handle error");
      }
   }
   /// procedure TW3GraphicControl.SetWidth(const NewWidth: Integer)
   ///  [line: 5005, column: 29, file: SmartCL.Components]
   ,SetWidth:function(Self, NewWidth) {
      TW3MovableControl.SetWidth(Self,NewWidth);
      if (Self.FHandle$4) {
         if (NewWidth != TW3MovableControl.GetWidth$(Self)) {
            w3_setAttrib(Self.FHandle$4,"width",TInteger.ToPxStr(NewWidth));
         }
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3GraphicControl.SetWidth",Self,"invalid control handle error");
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate$:function($){return $.ClassType.Invalidate($)}
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType, arguments)}
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,Paint$:function($){return $.ClassType.Paint($)}
};
TW3GraphicControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ControlTracker = class (TObject)
///  [line: 1397, column: 3, file: SmartCL.Components]
var TW3ControlTracker = {
   $ClassName:"TW3ControlTracker",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TW3ControlTracker.ConstructionReadyExecute(const Instance: TW3TagContainer; const OnReady: TProcedureRef)
   ///  [line: 1831, column: 35, file: SmartCL.Components]
   ,ConstructionReadyExecute:function(Self, Instance$3, OnReady$3) {
      if (!TW3ControlTracker.GetConstructionCount(Self,Instance$3)) {
         OnReady$3();
      } else {
         TW3Dispatch.Execute(TW3Dispatch,function () {
            TW3ControlTracker.ConstructionReadyExecute(Self,Instance$3,OnReady$3);
         },30);
      }
   }
   /// function TW3ControlTracker.GetConstructionCount(const Instance: TW3TagContainer) : Integer
   ///  [line: 1823, column: 34, file: SmartCL.Components]
   ,GetConstructionCount:function(Self, Instance$3) {
      var Result = 0;
      var Id$2 = "";
      Id$2 = Trim$_String_(Instance$3.FTagId);
      if (FIntfBuildTable !== null && TW3CustomDictionary.Contains(FIntfBuildTable,Id$2)) {
         Result = TW3IntDictionary.a$91(FIntfBuildTable,Id$2);
      } else {
         Result = 0;
      }
      return Result
   }
   /// function TW3ControlTracker.GetControlByHandle(const ThisHandle: THandle) : TW3TagObj
   ///  [line: 1724, column: 34, file: SmartCL.Components]
   ,GetControlByHandle:function(Self, ThisHandle) {
      var Result = null;
      var LGenKey;
      if (FLUT === null) {
         FLUT = TW3CustomDictionary.Create$126($New(TW3ObjDictionary));
      }
      if (FOLUT === null) {
         FOLUT = TW3CustomDictionary.Create$126($New(TW3ObjDictionary));
      }
      if (ThisHandle) {
         LGenKey = ThisHandle.getAttribute("data-okey");
         if (LGenKey) {
            if (TW3CustomDictionary.Contains(FOLUT,String(LGenKey))) {
               Result = $As(TW3ObjDictionary.a$89(FOLUT,String(LGenKey)),TW3TagObj);
            }
         }
      }
      return Result
   }
   /// function TW3ControlTracker.GetDOMFocus() : THandle
   ///  [line: 1740, column: 34, file: SmartCL.Components]
   ,GetDOMFocus:function(Self) {
      var Result = undefined;
      var focused = document.activeElement;
    if (!focused || focused == document.body)
        focused = null;
    else if (document.querySelector)
        focused = document.querySelector(":focus");
    Result = focused;
      return Result
   }
   /// procedure TW3ControlTracker.RegisterControl(const Instance: TW3TagObj)
   ///  [line: 1665, column: 35, file: SmartCL.Components]
   ,RegisterControl:function(Self, Instance$3) {
      var LId = "",
         LGenKey = "";
      if (Instance$3 !== null) {
         LId = Trim$_String_(Instance$3.FTagId);
         if (LId.length > 0) {
            if (FLUT === null) {
               FLUT = TW3CustomDictionary.Create$126($New(TW3ObjDictionary));
            }
            if (FOLUT === null) {
               FOLUT = TW3CustomDictionary.Create$126($New(TW3ObjDictionary));
            }
            TW3ObjDictionary.a$88(FLUT,LId,Instance$3);
            LGenKey = TW3Identifiers.GenerateUniqueObjectId(TW3Identifiers);
            Instance$3.FHandle$4.setAttribute("data-okey",LGenKey);
            TW3ObjDictionary.a$88(FOLUT,LGenKey,Instance$3);
         }
      }
   }
   /// procedure TW3ControlTracker.RegisterObjectReady(const Instance: TW3TagContainer)
   ///  [line: 1804, column: 35, file: SmartCL.Components]
   ,RegisterObjectReady:function(Self, Instance$3) {
      var CtrlInstance = null,
         Id$2 = "",
         i$7 = 0;
      if (FIntfBuildTable === null) {
         return;
      }
      CtrlInstance = Instance$3;
      while (CtrlInstance !== null) {
         Id$2 = Trim$_String_(CtrlInstance.FTagId);
         if (Id$2 != "") {
            if (TW3CustomDictionary.Contains(FIntfBuildTable,Id$2)) {
               i$7 = TW3IntDictionary.a$91(FIntfBuildTable,Id$2);
               if (i$7 > 1) {
                  TW3IntDictionary.a$90(FIntfBuildTable,Id$2,i$7-1);
               } else {
                  TW3CustomDictionary.Delete$2(FIntfBuildTable,Id$2);
               }
            }
         }
         CtrlInstance = TW3TagContainer.a$53(CtrlInstance);
      }
   }
   /// procedure TW3ControlTracker.RegisterUnderConstruction(const Instance: TW3TagContainer)
   ///  [line: 1783, column: 35, file: SmartCL.Components]
   ,RegisterUnderConstruction:function(Self, Instance$3) {
      var Handled = [],
         AddFlag = false,
         CtrlInstance = null,
         Id$2 = "";
      if (FIntfBuildTable === null) {
         FIntfBuildTable = TW3CustomDictionary.Create$126($New(TW3IntDictionary));
      }
      CtrlInstance = Instance$3;
      while (CtrlInstance !== null) {
         Id$2 = Trim$_String_(CtrlInstance.FTagId);
         if (Id$2 != "") {
            if (TW3CustomDictionary.Contains(FIntfBuildTable,Id$2)) {
               TW3IntDictionary.a$90(FIntfBuildTable,Id$2,TW3IntDictionary.a$91(FIntfBuildTable,Id$2)+1);
            } else {
               TW3IntDictionary.a$90(FIntfBuildTable,Id$2,1);
            }
            Handled.push(CtrlInstance);
            if ($SetIn(CtrlInstance.FComponentState,1,0,11)) {
               AddFlag = true;
            }
         }
         CtrlInstance = TW3TagContainer.a$53(CtrlInstance);
      }
      if (AddFlag) {
         $SetInc(Instance$3.FComponentState,1,0,11);
      }
   }
   /// procedure TW3ControlTracker.SetFocusedControl(const NewItem: TW3TagObj)
   ///  [line: 1762, column: 35, file: SmartCL.Components]
   ,SetFocusedControl:function(Self, NewItem) {
      FFocused = NewItem;
   }
   /// procedure TW3ControlTracker.UnRegisterControl(const Instance: TW3TagObj)
   ///  [line: 1692, column: 35, file: SmartCL.Components]
   ,UnRegisterControl:function(Self, Instance$3) {
      var LId = "",
         LGenKey;
      if (Instance$3 !== null) {
         LId = Trim$_String_(Instance$3.FTagId);
         if (LId.length > 0) {
            if (FLUT === null) {
               FLUT = TW3CustomDictionary.Create$126($New(TW3ObjDictionary));
            }
            if (FOLUT === null) {
               FOLUT = TW3CustomDictionary.Create$126($New(TW3ObjDictionary));
            }
            if (TW3CustomDictionary.Contains(FLUT,LId)) {
               if (FFocused === Instance$3) {
                  FFocused = null;
               }
               TW3CustomDictionary.Delete$2(FLUT,LId);
            }
            LGenKey = Instance$3.FHandle$4.getAttribute("data-okey");
            if (TW3CustomDictionary.Contains(FOLUT,String(LGenKey))) {
               TW3CustomDictionary.Delete$2(FOLUT,String(LGenKey));
               Instance$3.FHandle$4.removeAttribute("data-okey");
            }
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3ControlSizeInfo = record
///  [line: 265, column: 3, file: SmartCL.Components]
function Copy$TW3ControlSizeInfo(s,d) {
   return d;
}
function Clone$TW3ControlSizeInfo($) {
   return {

   }
}
/// TW3CustomFont = class (TObject)
///  [line: 29, column: 3, file: System.Fonts]
var TW3CustomFont = {
   $ClassName:"TW3CustomFont",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnChanged = null;
   }
   ,Destroy:TObject.Destroy
   ,GetColor$1$:function($){return $.ClassType.GetColor$1($)}
   ,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}
   ,GetName$:function($){return $.ClassType.GetName($)}
   ,GetSize$4$:function($){return $.ClassType.GetSize$4($)}
   ,GetStyle$:function($){return $.ClassType.GetStyle($)}
   ,GetWeight$:function($){return $.ClassType.GetWeight($)}
   ,SetColor$2$:function($){return $.ClassType.SetColor$2.apply($.ClassType, arguments)}
   ,SetName$:function($){return $.ClassType.SetName.apply($.ClassType, arguments)}
   ,SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType, arguments)}
   ,SetStyle$:function($){return $.ClassType.SetStyle.apply($.ClassType, arguments)}
   ,SetWeight$:function($){return $.ClassType.SetWeight.apply($.ClassType, arguments)}
};
/// TW3DOMFont = class (TW3CustomFont)
///  [line: 27, column: 3, file: SmartCL.Fonts]
var TW3DOMFont = {
   $ClassName:"TW3DOMFont",$Parent:TW3CustomFont
   ,$Init:function ($) {
      TW3CustomFont.$Init($);
      $.FHandle$8 = undefined;
      $.FStyle$1 = [0];
   }
   /// constructor TW3DOMFont.Create(const ControlHandle: TControlHandle)
   ///  [line: 64, column: 24, file: SmartCL.Fonts]
   ,Create$121:function(Self, ControlHandle) {
      TObject.Create(Self);
      Self.FHandle$8 = ControlHandle;
      return Self
   }
   /// function TW3DOMFont.GetColor() : TColor
   ///  [line: 237, column: 21, file: SmartCL.Fonts]
   ,GetColor$1:function(Self) {
      var Result = {v:0};
      try {
         var LHandle;
         LHandle = TW3CustomFont.GetHandle$4$(Self);
         if (LHandle) {
            Result.v = StrToColor(w3_GetStyleAsStr(LHandle,"color"));
         } else {
            throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetColor", TObject.ClassName(Self.ClassType), $R[20]]);
         }
      } finally {return Result.v}
   }
   /// function TW3DOMFont.GetHandle() : THandle
   ///  [line: 174, column: 21, file: SmartCL.Fonts]
   ,GetHandle$4:function(Self) {
      return Self.FHandle$8;
   }
   /// function TW3DOMFont.GetName() : String
   ///  [line: 189, column: 21, file: SmartCL.Fonts]
   ,GetName:function(Self) {
      var Result = "";
      var mHandle = undefined;
      mHandle = TW3CustomFont.GetHandle$4$(Self);
      if (mHandle) {
         Result = w3_GetStyleAsStr(mHandle,"font-family");
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetName", TObject.ClassName(Self.ClassType), $R[20]]);
      }
      return Result
   }
   /// function TW3DOMFont.GetSize() : Integer
   ///  [line: 214, column: 21, file: SmartCL.Fonts]
   ,GetSize$4:function(Self) {
      var Result = 0;
      var LHandle;
      LHandle = TW3CustomFont.GetHandle$4$(Self);
      if (LHandle) {
         Result = w3_GetStyleAsInt(LHandle,"font-size");
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetSize", TObject.ClassName(Self.ClassType), $R[20]]);
      }
      return Result
   }
   /// function TW3DOMFont.GetStyle() : TW3FontStyle
   ///  [line: 70, column: 22, file: SmartCL.Fonts]
   ,GetStyle:function(Self) {
      return Self.FStyle$1.slice(0);
   }
   /// function TW3DOMFont.GetWeight() : String
   ///  [line: 261, column: 21, file: SmartCL.Fonts]
   ,GetWeight:function(Self) {
      var Result = "";
      var LHandle;
      LHandle = TW3CustomFont.GetHandle$4$(Self);
      if (LHandle) {
         Result = w3_GetStyleAsStr(LHandle,"font-weight");
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetWeight", TObject.ClassName(Self.ClassType), $R[20]]);
      }
      return Result
   }
   /// procedure TW3DOMFont.SetColor(aNewColor: TColor)
   ///  [line: 248, column: 22, file: SmartCL.Fonts]
   ,SetColor$2:function(Self, aNewColor) {
      var LHandle;
      LHandle = TW3CustomFont.GetHandle$4$(Self);
      if (LHandle) {
         LHandle.style["color"] = ColorToWebStr(aNewColor,255);
         if (Self.OnChanged) {
            Self.OnChanged(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetColor", TObject.ClassName(Self.ClassType), $R[20]]);
      }
   }
   /// procedure TW3DOMFont.SetName(aNewName: String)
   ///  [line: 201, column: 22, file: SmartCL.Fonts]
   ,SetName:function(Self, aNewName) {
      var LHandle;
      LHandle = TW3CustomFont.GetHandle$4$(Self);
      if (LHandle) {
         LHandle.style["font-family"] = aNewName;
         if (Self.OnChanged) {
            Self.OnChanged(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetName", TObject.ClassName(Self.ClassType), $R[20]]);
      }
   }
   /// procedure TW3DOMFont.SetSize(aNewSize: Integer)
   ///  [line: 224, column: 22, file: SmartCL.Fonts]
   ,SetSize$6:function(Self, aNewSize) {
      var LHandle;
      LHandle = TW3CustomFont.GetHandle$4$(Self);
      if (LHandle) {
         LHandle.style["font-size"] = TInteger.ToPxStr(aNewSize);
         if (Self.OnChanged) {
            Self.OnChanged(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetSize", TObject.ClassName(Self.ClassType), $R[20]]);
      }
   }
   /// procedure TW3DOMFont.SetStyle(const NewStyle: TW3FontStyle)
   ///  [line: 101, column: 22, file: SmartCL.Fonts]
   ,SetStyle:function(Self, NewStyle) {
      var LChange = 0;
      if ($SetIn(NewStyle,22,0,26)) {
         if (!($SetIn(Self.FStyle$1,22,0,26))) {
            $SetInc(Self.FStyle$1,22,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle$1,22,0,26)) {
         $SetExc(Self.FStyle$1,22,0,26);
         ++LChange;
      }
      if ($SetIn(NewStyle,24,0,26)) {
         if (!($SetIn(Self.FStyle$1,24,0,26))) {
            $SetInc(Self.FStyle$1,24,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle$1,24,0,26)) {
         $SetExc(Self.FStyle$1,24,0,26);
         ++LChange;
      }
      if ($SetIn(NewStyle,23,0,26)) {
         if (!($SetIn(Self.FStyle$1,23,0,26))) {
            $SetInc(Self.FStyle$1,23,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle$1,23,0,26)) {
         $SetExc(Self.FStyle$1,23,0,26);
         ++LChange;
      }
      if ($SetIn(NewStyle,25,0,26)) {
         if (!($SetIn(Self.FStyle$1,25,0,26))) {
            $SetInc(Self.FStyle$1,25,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle$1,25,0,26)) {
         $SetExc(Self.FStyle$1,25,0,26);
         ++LChange;
      }
      if (LChange > 0) {
         if (Self.OnChanged) {
            Self.OnChanged(Self);
         }
      }
   }
   /// procedure TW3DOMFont.SetWeight(aNewWeight: String)
   ///  [line: 272, column: 22, file: SmartCL.Fonts]
   ,SetWeight:function(Self, aNewWeight) {
      var LHandle;
      LHandle = TW3CustomFont.GetHandle$4$(Self);
      if (LHandle) {
         LHandle.style["font-weight"] = aNewWeight;
         if (Self.OnChanged) {
            Self.OnChanged(Self);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetWeight", TObject.ClassName(Self.ClassType), $R[20]]);
      }
   }
   ,Destroy:TObject.Destroy
   ,GetColor$1$:function($){return $.ClassType.GetColor$1($)}
   ,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}
   ,GetName$:function($){return $.ClassType.GetName($)}
   ,GetSize$4$:function($){return $.ClassType.GetSize$4($)}
   ,GetStyle$:function($){return $.ClassType.GetStyle($)}
   ,GetWeight$:function($){return $.ClassType.GetWeight($)}
   ,SetColor$2$:function($){return $.ClassType.SetColor$2.apply($.ClassType, arguments)}
   ,SetName$:function($){return $.ClassType.SetName.apply($.ClassType, arguments)}
   ,SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType, arguments)}
   ,SetStyle$:function($){return $.ClassType.SetStyle.apply($.ClassType, arguments)}
   ,SetWeight$:function($){return $.ClassType.SetWeight.apply($.ClassType, arguments)}
};
/// TW3ControlFont = class (TW3DOMFont)
///  [line: 685, column: 3, file: SmartCL.Components]
var TW3ControlFont = {
   $ClassName:"TW3ControlFont",$Parent:TW3DOMFont
   ,$Init:function ($) {
      TW3DOMFont.$Init($);
      $.FAuto = false;
      $.FOwner$3 = null;
   }
   /// constructor TW3ControlFont.Create(const AOwner: TW3MovableControl)
   ///  [line: 3492, column: 28, file: SmartCL.Components]
   ,Create$123:function(Self, AOwner) {
      TW3DOMFont.Create$121(Self,AOwner.FHandle$4);
      if (AOwner) {
         Self.FOwner$3 = AOwner;
      } else {
         throw EW3Exception.Create$18($New(EW3TagObj),"TW3ControlFont.Create",Self,"Owner was nil error");
      }
      return Self
   }
   /// function TW3ControlFont.GetHandle() : THandle
   ///  [line: 3502, column: 25, file: SmartCL.Components]
   ,GetHandle$4:function(Self) {
      return Self.FOwner$3.FHandle$4;
   }
   /// procedure TW3ControlFont.SetAuto(const NewValue: Boolean)
   ///  [line: 3507, column: 26, file: SmartCL.Components]
   ,SetAuto:function(Self, NewValue) {
      if (NewValue != Self.FAuto) {
         Self.FAuto = NewValue;
         TW3MovableControl.Resize$(Self.FOwner$3);
      }
   }
   ,Destroy:TObject.Destroy
   ,GetColor$1:TW3DOMFont.GetColor$1
   ,GetHandle$4$:function($){return $.ClassType.GetHandle$4($)}
   ,GetName:TW3DOMFont.GetName
   ,GetSize$4:TW3DOMFont.GetSize$4
   ,GetStyle:TW3DOMFont.GetStyle
   ,GetWeight:TW3DOMFont.GetWeight
   ,SetColor$2:TW3DOMFont.SetColor$2
   ,SetName:TW3DOMFont.SetName
   ,SetSize$6:TW3DOMFont.SetSize$6
   ,SetStyle:TW3DOMFont.SetStyle
   ,SetWeight:TW3DOMFont.SetWeight
};
/// TW3ControlBackgroundSizeMode enumeration
///  [line: 698, column: 3, file: SmartCL.Components]
var TW3ControlBackgroundSizeMode = [ "smAuto", "smLength", "smPercent", "smCover", "smContain" ];
/// TW3ControlBackgroundSize = class (TW3OwnedObject)
///  [line: 708, column: 3, file: SmartCL.Components]
var TW3ControlBackgroundSize = {
   $ClassName:"TW3ControlBackgroundSize",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FHeight$1 = $.FWidth$1 = 0;
      $.FMode = 3;
   }
   /// function TW3ControlBackgroundSize.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 6193, column: 35, file: SmartCL.Components]
   ,AcceptOwner:function(Self, CandidateObject) {
      return (CandidateObject!==null) && $Is(CandidateObject,TW3ControlBackground);
   }
   /// procedure TW3ControlBackgroundSize.Apply()
   ///  [line: 6247, column: 36, file: SmartCL.Components]
   ,Apply:function(Self) {
      var LHandle;
      LHandle = TW3ControlBackgroundSize.GetOwnerHandle(Self);
      if (TControlHandleHelper$Valid$3(LHandle)) {
         switch (Self.FMode) {
            case 0 :
               LHandle.style["background-size"] = "auto auto";
               break;
            case 3 :
               LHandle.style["background-size"] = "cover";
               break;
            case 4 :
               LHandle.style["background-size"] = "contain";
               break;
            case 1 :
               LHandle.style["background-size"] = (Self.FWidth$1.toString()+"px "+Self.FHeight$1.toString()+"px");
               break;
            case 2 :
               Self.FWidth$1 = TInteger.EnsureRange(Self.FWidth$1,0,100);
               Self.FHeight$1 = TInteger.EnsureRange(Self.FHeight$1,0,100);
               LHandle.style["background-size"] = Self.FWidth$1.toString() + "% " + Self.FHeight$1.toString() + "%";
               break;
         }
      } else {
         throw EW3Exception.Create$18($New(EW3ControlBackgroundSize),"TW3ControlBackgroundSize.Apply",Self,"Invalid control handle error");
      }
   }
   /// function TW3ControlBackgroundSize.GetOwner() : TW3ControlBackground
   ///  [line: 6198, column: 35, file: SmartCL.Components]
   ,GetOwner$2:function(Self) {
      return $As(TW3OwnedObject.GetOwner(Self),TW3ControlBackground);
   }
   /// function TW3ControlBackgroundSize.GetOwnerHandle() : TControlHandle
   ///  [line: 6203, column: 35, file: SmartCL.Components]
   ,GetOwnerHandle:function(Self) {
      var Result = undefined;
      var LBack = null,
         LCtrl = null;
      LBack = TW3ControlBackgroundSize.GetOwner$2(Self);
      if (LBack !== null) {
         if (TW3ControlBackground.GetOwner$3(LBack) !== null) {
            LCtrl = TW3ControlBackground.GetOwner$3(LBack);
            if (LCtrl !== null) {
               Result = LCtrl.FHandle$4;
            } else {
               Result = null;
            }
         } else {
            Result = null;
         }
      } else {
         Result = null;
      }
      return Result
   }
   /// procedure TW3ControlBackgroundSize.SetHeight(NewHeight: Integer)
   ///  [line: 6281, column: 36, file: SmartCL.Components]
   ,SetHeight$2:function(Self, NewHeight) {
      if (NewHeight != Self.FHeight$1) {
         switch (Self.FMode) {
            case 2 :
               Self.FHeight$1 = TInteger.EnsureRange(NewHeight,0,100);
               break;
            default :
               Self.FHeight$1 = TInteger.EnsureRange(NewHeight,0,2147483647);
         }
         TW3ControlBackgroundSize.Apply(Self);
      }
   }
   /// procedure TW3ControlBackgroundSize.SetMode(const NewMode: TW3ControlBackgroundSizeMode)
   ///  [line: 6238, column: 36, file: SmartCL.Components]
   ,SetMode:function(Self, NewMode) {
      if (NewMode != Self.FMode) {
         Self.FMode = NewMode;
         TW3ControlBackgroundSize.Apply(Self);
      }
   }
   /// procedure TW3ControlBackgroundSize.SetWidth(NewWidth: Integer)
   ///  [line: 6269, column: 36, file: SmartCL.Components]
   ,SetWidth$2:function(Self, NewWidth) {
      if (NewWidth != Self.FWidth$1) {
         switch (Self.FMode) {
            case 2 :
               Self.FWidth$1 = TInteger.EnsureRange(NewWidth,0,100);
               break;
            default :
               Self.FWidth$1 = TInteger.EnsureRange(NewWidth,0,2147483647);
         }
         TW3ControlBackgroundSize.Apply(Self);
      }
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3ControlBackgroundSize.$Intf={
   IW3OwnedObjectAccess:[TW3ControlBackgroundSize.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ControlBackground = class (TW3OwnedObject)
///  [line: 780, column: 3, file: SmartCL.Components]
var TW3ControlBackground = {
   $ClassName:"TW3ControlBackground",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FSize$2 = null;
   }
   /// function TW3ControlBackground.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 2230, column: 31, file: SmartCL.Components]
   ,AcceptOwner:function(Self, CandidateObject) {
      return CandidateObject !== null && $Is(CandidateObject,TW3MovableControl);
   }
   /// constructor TW3ControlBackground.Create(const AOwner: TObject)
   ///  [line: 2140, column: 34, file: SmartCL.Components]
   ,Create$11:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FSize$2 = TW3OwnedObject.Create$11$($New(TW3ControlBackgroundSize),Self);
      return Self
   }
   /// destructor TW3ControlBackground.Destroy()
   ///  [line: 2146, column: 33, file: SmartCL.Components]
   ,Destroy:function(Self) {
      TObject.Free(Self.FSize$2);
      TObject.Destroy(Self);
   }
   /// procedure TW3ControlBackground.FromColor(const aValue: TColor)
   ///  [line: 2247, column: 32, file: SmartCL.Components]
   ,FromColor:function(Self, aValue) {
      var LHandle;
      LHandle = TW3ControlBackground.GetOwnerHandle$1(Self);
      if (aValue != 536870911) {
         LHandle.style.backgroundColor = ColorToWebStr(aValue,255);
      } else {
         LHandle.style.backgroundColor = "initial";
      }
   }
   /// function TW3ControlBackground.GetOwner() : TW3MovableControl
   ///  [line: 2219, column: 31, file: SmartCL.Components]
   ,GetOwner$3:function(Self) {
      return $As(TW3OwnedObject.GetOwner(Self),TW3MovableControl);
   }
   /// function TW3ControlBackground.GetOwnerHandle() : TControlHandle
   ///  [line: 2224, column: 31, file: SmartCL.Components]
   ,GetOwnerHandle$1:function(Self) {
      var Result = undefined;
      if (TW3ControlBackground.GetOwner$3(Self)) {
         Result = TW3ControlBackground.GetOwner$3(Self).FHandle$4;
      }
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3ControlBackground.$Intf={
   IW3OwnedObjectAccess:[TW3ControlBackground.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ContentSelectionMode enumeration
///  [line: 145, column: 3, file: SmartCL.Components]
var TW3ContentSelectionMode = [ "tsmNone", "tsmAuto", "tsmText", "tsmAll", "tsmElement" ];
/// TW3Constraints = class (TW3OwnedObject)
///  [line: 809, column: 3, file: SmartCL.Components]
var TW3Constraints = {
   $ClassName:"TW3Constraints",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.OnEnabledChanged = null;
      $.FEnabled = false;
      $.FHandle$10 = undefined;
      $.FMaxHeight = $.FMaxWidth = $.FMinHeight = $.FMinWidth = 0;
   }
   /// function TW3Constraints.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 2064, column: 25, file: SmartCL.Components]
   ,AcceptOwner:function(Self, CandidateObject) {
      return (CandidateObject!==null) && $Is(CandidateObject,TW3TagObj);
   }
   /// constructor TW3Constraints.Create(const AOwner: TW3MovableControl)
   ///  [line: 2005, column: 28, file: SmartCL.Components]
   ,Create$125:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FHandle$10 = AOwner.FHandle$4;
      return Self
   }
   /// function TW3Constraints.GetMaxHeight() : Integer
   ///  [line: 2093, column: 26, file: SmartCL.Components]
   ,GetMaxHeight:function(Self) {
      var Result = 0;
      if (Self.FEnabled) {
         Result = w3_GetStyleAsInt(Self.FHandle$10,"max-height");
      } else {
         Result = Self.FMaxHeight;
      }
      return Result
   }
   /// function TW3Constraints.GetMaxWidth() : Integer
   ///  [line: 2077, column: 26, file: SmartCL.Components]
   ,GetMaxWidth:function(Self) {
      var Result = 0;
      if (Self.FEnabled) {
         Result = w3_GetStyleAsInt(Self.FHandle$10,"max-width");
      } else {
         Result = Self.FMaxWidth;
      }
      return Result
   }
   /// function TW3Constraints.GetMinHeight() : Integer
   ///  [line: 2085, column: 25, file: SmartCL.Components]
   ,GetMinHeight:function(Self) {
      var Result = 0;
      if (Self.FEnabled) {
         Result = w3_GetStyleAsInt(Self.FHandle$10,"min-height");
      } else {
         Result = Self.FMinHeight;
      }
      return Result
   }
   /// function TW3Constraints.GetMinWidth() : Integer
   ///  [line: 2069, column: 25, file: SmartCL.Components]
   ,GetMinWidth:function(Self) {
      var Result = 0;
      if (Self.FEnabled) {
         Result = w3_GetStyleAsInt(Self.FHandle$10,"min-width");
      } else {
         Result = Self.FMinWidth;
      }
      return Result
   }
   /// procedure TW3Constraints.Reset()
   ///  [line: 2011, column: 26, file: SmartCL.Components]
   ,Reset$6:function(Self) {
      if (Self.FHandle$10) {
         Self.FHandle$10.style["min-width"] = "initial";
         Self.FHandle$10.style["max-width"] = "initial";
         Self.FHandle$10.style["min-height"] = "initial";
         Self.FHandle$10.style["max-height"] = "initial";
      }
   }
   /// procedure TW3Constraints.SetEnabled(const NewValue: Boolean)
   ///  [line: 2023, column: 26, file: SmartCL.Components]
   ,SetEnabled$2:function(Self, NewValue) {
      var temp$1 = 0;
      if (NewValue != Self.FEnabled) {
         if (Self.FEnabled) {
            temp$1 = Self.FMinWidth;
            if (temp$1 < 1) {
               Self.FHandle$10.style["min-width"] = "initial";
            } else {
               Self.FHandle$10.style["min-width"] = TInteger.ToPxStr(temp$1);
            }
            temp$1 = Self.FMaxWidth;
            if (temp$1 < 1) {
               Self.FHandle$10.style["max-width"] = "initial";
            } else {
               Self.FHandle$10.style["max-width"] = TInteger.ToPxStr(temp$1);
            }
            temp$1 = Self.FMinHeight;
            if (temp$1 < 1) {
               Self.FHandle$10.style["min-height"] = "initial";
            } else {
               Self.FHandle$10.style["min-height"] = TInteger.ToPxStr(temp$1);
            }
            temp$1 = Self.FMaxHeight;
            if (temp$1 < 1) {
               Self.FHandle$10.style["max-height"] = "initial";
            } else {
               Self.FHandle$10.style["max-height"] = TInteger.ToPxStr(temp$1);
            }
         } else {
            TW3Constraints.Reset$6(Self);
         }
         Self.FEnabled = NewValue;
         if (Self.OnEnabledChanged) {
            Self.OnEnabledChanged(Self);
         }
      }
   }
   /// procedure TW3Constraints.SetMaxHeight(const NewMaxHeight: Integer)
   ///  [line: 2109, column: 26, file: SmartCL.Components]
   ,SetMaxHeight:function(Self, NewMaxHeight) {
      if (Self.FEnabled) {
         Self.FHandle$10.style["max-height"] = TInteger.ToPxStr(NewMaxHeight);
      } else {
         Self.FMaxHeight = (NewMaxHeight < 0)?0:NewMaxHeight;
      }
   }
   /// procedure TW3Constraints.SetMaxWidth(const NewMaxWidth: Integer)
   ///  [line: 2125, column: 26, file: SmartCL.Components]
   ,SetMaxWidth:function(Self, NewMaxWidth) {
      if (Self.FEnabled) {
         Self.FHandle$10.style["max-width"] = TInteger.ToPxStr(NewMaxWidth);
      } else {
         Self.FMaxWidth = (NewMaxWidth < 0)?0:NewMaxWidth;
      }
   }
   /// procedure TW3Constraints.SetMinHeight(aValue: Integer)
   ///  [line: 2101, column: 26, file: SmartCL.Components]
   ,SetMinHeight:function(Self, aValue) {
      if (Self.FEnabled) {
         Self.FHandle$10.style["min-height"] = TInteger.ToPxStr(aValue);
      } else {
         Self.FMinHeight = (aValue < 0)?0:aValue;
      }
   }
   /// procedure TW3Constraints.SetMinWidth(aValue: Integer)
   ///  [line: 2117, column: 26, file: SmartCL.Components]
   ,SetMinWidth:function(Self, aValue) {
      if (Self.FEnabled) {
         Self.FHandle$10.style["min-width"] = TInteger.ToPxStr(aValue);
      } else {
         Self.FMinWidth = (aValue < 0)?0:aValue;
      }
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3Constraints.$Intf={
   IW3OwnedObjectAccess:[TW3Constraints.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BackgroundRepeat enumeration
///  [line: 757, column: 3, file: SmartCL.Components]
var TW3BackgroundRepeat = [ "brInitial", "brInherited", "brRepeat", "brRepeatX", "brRepeatY", "brNoRepeat" ];
/// TW3BackgroundPosition enumeration
///  [line: 766, column: 3, file: SmartCL.Components]
var TW3BackgroundPosition = [ "bsInitial", "bsInherited", "bsLeftTop", "bsLeftCenter", "bsLeftBottom", "bsRightTop", "bsRightCenter", "bsRightBottom", "bsCenterTop", "bsCenterBottom", "bsCenter" ];
/// TW3AnchorKind enumeration
///  [line: 850, column: 3, file: SmartCL.Components]
var TW3AnchorKind = [ "akTop", "akLeft", "akRight", "akBottom" ];
/// TW3Align enumeration
///  [line: 848, column: 3, file: SmartCL.Components]
var TW3Align = [ "alNone", "alTop", "alBottom", "alLeft", "alRight", "alClient" ];
/// TShiftStateEnum enumeration
///  [line: 135, column: 3, file: SmartCL.Components]
var TShiftStateEnum = [ "ssShift", "ssAlt", "ssCtrl", "ssMeta", "ssLeft", "ssRight", "ssMiddle" ];
/// TShiftState = class (TObject)
///  [line: 208, column: 3, file: SmartCL.Components]
var TShiftState = {
   $ClassName:"TShiftState",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FEvent$1 = $.FMouseEvent = null;
      $.FMouseButtons = 0;
   }
   /// function TShiftState.CheckShiftStateEnum(value: TShiftStateEnum) : Boolean
   ///  [line: 1951, column: 22, file: SmartCL.Components]
   ,CheckShiftStateEnum:function(Self, value$16) {
      var Result = false;
      if (Self.FEvent$1 === null) {
         Result = false;
      } else {
         switch (value$16) {
            case 0 :
               Result = Self.FEvent$1.shiftKey;
               break;
            case 1 :
               Result = Self.FEvent$1.altKey;
               break;
            case 2 :
               Result = Self.FEvent$1.ctrlKey;
               break;
            case 3 :
               Result = Self.FEvent$1.metaKey;
               break;
            case 4 :
               Result = ((Self.FMouseButtons&1)!=0);
               break;
            case 5 :
               Result = ((Self.FMouseButtons&4)!=0);
               break;
            case 6 :
               Result = ((Self.FMouseButtons&2)!=0);
               break;
         }
      }
      return Result
   }
   /// function TShiftState.Current() : TShiftState
   ///  [line: 1979, column: 28, file: SmartCL.Components]
   ,Current:function() {
      var Result = null;
      if (vCurrent === null) {
         vCurrent = TObject.Create($New(TShiftState));
      }
      Result = vCurrent;
      return Result
   }
   /// procedure TShiftState.SetKeyStateEvent(evt: JKeyStateEvent)
   ///  [line: 1967, column: 23, file: SmartCL.Components]
   ,SetKeyStateEvent:function(Self, evt) {
      Self.FEvent$1 = evt;
      Self.FMouseEvent = null;
   }
   /// procedure TShiftState.SetMouseEvent(evt: JMouseEvent)
   ///  [line: 1973, column: 23, file: SmartCL.Components]
   ,SetMouseEvent:function(Self, evt) {
      Self.FEvent$1 = evt;
      Self.FMouseEvent = evt;
   }
   ,Destroy:TObject.Destroy
};
/// TMovementDirection enumeration
///  [line: 258, column: 3, file: SmartCL.Components]
var TMovementDirection = [ "mdVertical", "mdHorizontal", "mdAll", "mdNone" ];
/// TMouseButton enumeration
///  [line: 129, column: 3, file: SmartCL.Components]
var TMouseButton = [ "mbLeft", "mbMiddle", "mbRight" ];
/// TCustomAppContainer = class (TW3TagContainer)
///  [line: 650, column: 3, file: SmartCL.Components]
var TCustomAppContainer = {
   $ClassName:"TCustomAppContainer",$Parent:TW3TagContainer
   ,$Init:function ($) {
      TW3TagContainer.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject:TW3TagContainer.FinalizeObject
   ,InitializeObject:TW3CustomComponent.InitializeObject
   ,AfterUpdate:TW3TagObj.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3TagObj.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3TagContainer.Showing
   ,StyleTagObject:TW3TagObj.StyleTagObject
   ,UnHookEvents:TW3TagObj.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
};
TCustomAppContainer.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TDocumentBody = class (TCustomAppContainer)
///  [line: 658, column: 3, file: SmartCL.Components]
var TDocumentBody = {
   $ClassName:"TDocumentBody",$Parent:TCustomAppContainer
   ,$Init:function ($) {
      TCustomAppContainer.$Init($);
   }
   /// function TDocumentBody.makeElementTagId() : String
   ///  [line: 3414, column: 24, file: SmartCL.Components]
   ,MakeElementTagId:function(Self) {
      return "";
   }
   /// function TDocumentBody.makeElementTagObj() : THandle
   ///  [line: 3431, column: 24, file: SmartCL.Components]
   ,MakeElementTagObj:function(Self) {
      return document.body;
   }
   /// procedure TDocumentBody.StyleTagObject()
   ///  [line: 3409, column: 25, file: SmartCL.Components]
   ,StyleTagObject:function(Self) {
      /* null */
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject:TW3TagContainer.FinalizeObject
   ,InitializeObject:TW3CustomComponent.InitializeObject
   ,AfterUpdate:TW3TagObj.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3TagObj.HookEvents
   ,MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)}
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3TagContainer.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3TagObj.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
};
TDocumentBody.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TContectPopupResult enumeration
///  [line: 254, column: 3, file: SmartCL.Components]
var TContectPopupResult = [ "cpPass", "cpBlock", "cpAllow" ];
/// EW3TagObj = class (EW3Exception)
///  [line: 108, column: 3, file: SmartCL.Components]
var EW3TagObj = {
   $ClassName:"EW3TagObj",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3TagContainer = class (EW3Exception)
///  [line: 109, column: 3, file: SmartCL.Components]
var EW3TagContainer = {
   $ClassName:"EW3TagContainer",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3CustomControl = class (EW3Exception)
///  [line: 111, column: 3, file: SmartCL.Components]
var EW3CustomControl = {
   $ClassName:"EW3CustomControl",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3ControlBackgroundSize = class (EW3Exception)
///  [line: 706, column: 3, file: SmartCL.Components]
var EW3ControlBackgroundSize = {
   $ClassName:"EW3ControlBackgroundSize",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3FontStyleTypes enumeration
///  [line: 20, column: 3, file: System.Fonts]
var TW3FontStyleTypes = { 22:"fsBold", 23:"fsItalic", 24:"fsUnderline", 25:"fsStrikeThrough" };
/// EW3FontError = class (EW3Exception)
///  [line: 18, column: 3, file: System.Fonts]
var EW3FontError = {
   $ClassName:"EW3FontError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3CustomDictionary = class (TObject)
///  [line: 23, column: 3, file: System.Dictionaries]
var TW3CustomDictionary = {
   $ClassName:"TW3CustomDictionary",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FLUT$1 = undefined;
   }
   /// procedure TW3CustomDictionary.Clear()
   ///  [line: 105, column: 31, file: System.Dictionaries]
   ,Clear$4:function(Self) {
      Self.FLUT$1 = TVariant.CreateObject();
   }
   /// function TW3CustomDictionary.Contains(const ItemKey: String) : Boolean
   ///  [line: 168, column: 30, file: System.Dictionaries]
   ,Contains:function(Self, ItemKey) {
      var Result = false;
      if (ItemKey.length > 0) {
         Result = $VarToBool(Self.FLUT$1.hasOwnProperty(ItemKey));
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.Contains", TObject.ClassName(Self.ClassType), $R[49]]);
      }
      return Result
   }
   /// constructor TW3CustomDictionary.Create()
   ///  [line: 92, column: 33, file: System.Dictionaries]
   ,Create$126:function(Self) {
      TObject.Create(Self);
      Self.FLUT$1 = TVariant.CreateObject();
      return Self
   }
   /// procedure TW3CustomDictionary.Delete(const ItemKey: String)
   ///  [line: 233, column: 31, file: System.Dictionaries]
   ,Delete$2:function(Self, ItemKey) {
      if (ItemKey.length > 0) {
         try {
            delete (Self.FLUT$1[ItemKey]);
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.Delete", TObject.ClassName(Self.ClassType), e$1.FMessage]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.Delete", TObject.ClassName(Self.ClassType), $R[49]]);
      }
   }
   /// destructor TW3CustomDictionary.Destroy()
   ///  [line: 98, column: 32, file: System.Dictionaries]
   ,Destroy:function(Self) {
      TW3CustomDictionary.Clear$4(Self);
      Self.FLUT$1 = undefined;
      TObject.Destroy(Self);
   }
   /// function TW3CustomDictionary.GetItem(const ItemKey: String) : Variant
   ///  [line: 201, column: 30, file: System.Dictionaries]
   ,GetItem$12:function(Self, ItemKey) {
      var Result = undefined;
      if (ItemKey.length > 0) {
         try {
            Result = Self.FLUT$1[ItemKey];
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.GetItem", TObject.ClassName(Self.ClassType), e$1.FMessage]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.GetItem", TObject.ClassName(Self.ClassType), $R[49]]);
      }
      return Result
   }
   /// procedure TW3CustomDictionary.SetItem(const ItemKey: String; const KeyValue: Variant)
   ///  [line: 217, column: 31, file: System.Dictionaries]
   ,SetItem$3:function(Self, ItemKey, KeyValue) {
      if (ItemKey.length > 0) {
         try {
            Self.FLUT$1[ItemKey] = KeyValue;
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.SetItem", TObject.ClassName(Self.ClassType), e$1.FMessage]);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.SetItem", TObject.ClassName(Self.ClassType), $R[49]]);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TW3VarDictionary = class (TW3CustomDictionary)
///  [line: 67, column: 3, file: System.Dictionaries]
var TW3VarDictionary = {
   $ClassName:"TW3VarDictionary",$Parent:TW3CustomDictionary
   ,$Init:function ($) {
      TW3CustomDictionary.$Init($);
   }
   ,Destroy:TW3CustomDictionary.Destroy
};
/// TW3ObjDictionary = class (TW3CustomDictionary)
///  [line: 46, column: 3, file: System.Dictionaries]
var TW3ObjDictionary = {
   $ClassName:"TW3ObjDictionary",$Parent:TW3CustomDictionary
   ,$Init:function ($) {
      TW3CustomDictionary.$Init($);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 49, column: 13, file: System.Dictionaries]
   ,a$89:function(Self, ItemKey) {
      var Result = null;
      Result = TVariant.AsObject(TW3CustomDictionary.GetItem$12(Self,ItemKey));
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 50, column: 13, file: System.Dictionaries]
   ,a$88:function(Self, ItemKey, Value$5) {
      TW3CustomDictionary.SetItem$3(Self,ItemKey,Value$5);
   }
   ,Destroy:TW3CustomDictionary.Destroy
};
/// TW3IntDictionary = class (TW3CustomDictionary)
///  [line: 60, column: 3, file: System.Dictionaries]
var TW3IntDictionary = {
   $ClassName:"TW3IntDictionary",$Parent:TW3CustomDictionary
   ,$Init:function ($) {
      TW3CustomDictionary.$Init($);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 63, column: 12, file: System.Dictionaries]
   ,a$91:function(Self, ItemKey) {
      var Result = 0;
      Result = TVariant.AsInteger(TW3CustomDictionary.GetItem$12(Self,ItemKey));
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 64, column: 13, file: System.Dictionaries]
   ,a$90:function(Self, ItemKey, Value$5) {
      TW3CustomDictionary.SetItem$3(Self,ItemKey,Value$5);
   }
   ,Destroy:TW3CustomDictionary.Destroy
};
function W3FontDetector() {
   var Result = null;
   if (_FontDetect === null) {
      _FontDetect = TW3FontDetector.Create$120($New(TW3FontDetector));
   }
   Result = _FontDetect;
   return Result
};
/// TW3TextMetric = record
///  [line: 27, column: 3, file: SmartCL.Fonts.Detector]
function Copy$TW3TextMetric(s,d) {
   d.tmWidth=s.tmWidth;
   d.tmHeight=s.tmHeight;
   return d;
}
function Clone$TW3TextMetric($) {
   return {
      tmWidth:$.tmWidth,
      tmHeight:$.tmHeight
   }
}
/// function TW3TextMetric.Empty(var Self: TW3TextMetric) : Boolean
///  [line: 100, column: 24, file: SmartCL.Fonts.Detector]
function TW3TextMetric$Empty$3(Self$35) {
   return Self$35.tmWidth < 1 && Self$35.tmHeight < 1;
}
/// TW3FontInfo = record
///  [line: 40, column: 3, file: SmartCL.Fonts.Detector]
function Copy$TW3FontInfo(s,d) {
   d.fiName=s.fiName;
   d.fiSize=s.fiSize;
   return d;
}
function Clone$TW3FontInfo($) {
   return {
      fiName:$.fiName,
      fiSize:$.fiSize
   }
}
/// TW3FontDetector = class (TObject)
///  [line: 53, column: 3, file: SmartCL.Fonts.Detector]
var TW3FontDetector = {
   $ClassName:"TW3FontDetector",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FBaseFonts = [];
      $.FdefaultHeight = $.FdefaultWidth = undefined;
      $.Fh = undefined;
      $.Fs = undefined;
      $.FtestSize = "72px";
      $.FTestString = "mmmmmmmmmmllij";
   }
   /// constructor TW3FontDetector.Create()
   ///  [line: 128, column: 29, file: SmartCL.Fonts.Detector]
   ,Create$120:function(Self) {
      var x$42 = 0;
      TObject.Create(Self);
      Self.FBaseFonts.push("arial");
      Self.FBaseFonts.push("verdana");
      Self.FBaseFonts.push("helvetica");
      Self.FBaseFonts.push("times new roman");
      Self.FBaseFonts.push("courier new");
      Self.FBaseFonts.push("ubuntu");
      Self.FBaseFonts.push("monospace");
      Self.FBaseFonts.push("sans-serif");
      Self.FBaseFonts.push("serif");
      Self.Fh = document.body;
      Self.Fs = document.createElement("span");
      Self.Fs.style.fontSize = Self.FtestSize;
      Self.Fs.innerHTML = Self.FTestString;
      Self.FdefaultWidth = TVariant.CreateObject();
      Self.FdefaultHeight = TVariant.CreateObject();
      if (Self.FBaseFonts.length > 0) {
         var $temp47;
         for(x$42=0,$temp47=Self.FBaseFonts.length;x$42<$temp47;x$42++) {
            Self.Fs.style.fontFamily = Self.FBaseFonts[x$42];
            Self.Fh.appendChild(Self.Fs);
            Self.FdefaultWidth[Self.FBaseFonts[x$42]] = Self.Fs.offsetWidth;
            Self.FdefaultHeight[Self.FBaseFonts[x$42]] = Self.Fs.offsetHeight;
            Self.Fh.removeChild(Self.Fs);
         }
      }
      return Self
   }
   /// function TW3FontDetector.Detect(const FontName: String) : Boolean
   ///  [line: 207, column: 26, file: SmartCL.Fonts.Detector]
   ,Detect:function(Self, FontName) {
      var Result = false;
      var LFontName = "",
         x$42 = 0;
      LFontName = Trim$_String_(FontName);
      if (LFontName.length > 0) {
         Self.Fh.appendChild(Self.Fs);
         var $temp48;
         for(x$42=0,$temp48=Self.FBaseFonts.length;x$42<$temp48;x$42++) {
            Self.Fs.style.fontFamily = LFontName + "," + Self.FBaseFonts[x$42];
            Result = Self.Fs.offsetWidth != Self.FdefaultWidth[Self.FBaseFonts[x$42]] && Self.Fs.offsetHeight != Self.FdefaultHeight[Self.FBaseFonts[x$42]];
            if (Result) {
               break;
            }
         }
         Self.Fh.removeChild(Self.Fs);
         if (!(Result)) {
            Result = Self.FBaseFonts.indexOf(FontName) >= 0;
         }
      }
      return Result
   }
   /// function TW3FontDetector.GetFontInfo(const Handle: TControlHandle) : TW3FontInfo
   ///  [line: 166, column: 26, file: SmartCL.Fonts.Detector]
   ,GetFontInfo$2:function(Self, Handle$19) {
      var Result = {fiName:"",fiSize:0};
      var LFound$1 = false,
         LName = "",
         LSize = 0,
         LData = [],
         x$42 = 0;
      Result.fiSize = -1;
      if (Handle$19) {
         LFound$1 = false;
         LName = w3_GetStyleAsStr(Handle$19,"font-family");
         LSize = w3_GetStyleAsInt(Handle$19,"font-size");
         if (LName.length > 0) {
            LData = LName.split(",");
            if (LData.length > 0) {
               var $temp49;
               for(x$42=0,$temp49=LData.length;x$42<$temp49;x$42++) {
                  LData[x$42]=(Trim$_String_(LData[x$42])).toLocaleLowerCase();
                  if (TW3FontDetector.Detect(Self,LData[x$42])) {
                     Result.fiName = LData[x$42];
                     Result.fiSize = LSize;
                     LFound$1 = true;
                     break;
                  }
               }
            }
            if (!(LFound$1)) {
               Result.fiName = "verdana";
               if (Result.fiSize < 1) {
                  Result.fiSize = 10;
               }
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.MeasureText(const FontInfo: TW3FontInfo; const FixedWidth: Integer; const Text: String) : TW3TextMetric
   ///  [line: 327, column: 26, file: SmartCL.Fonts.Detector]
   ,MeasureText$5:function(Self, FontInfo, FixedWidth, Text$10) {
      var Result = {tmWidth:0,tmHeight:0};
      Result = TW3FontDetector.MeasureText$4(Self,FontInfo.fiName,FontInfo.fiSize,FixedWidth,Text$10);
      return Result
   }
   /// function TW3FontDetector.MeasureText(const FontName: String; const FontSize: Integer; const FixedWidth: Integer; const Text: String) : TW3TextMetric
   ///  [line: 282, column: 26, file: SmartCL.Fonts.Detector]
   ,MeasureText$4:function(Self, FontName, FontSize, FixedWidth, Text$10) {
      var Result = {tmWidth:0,tmHeight:0};
      var LElement = undefined,
         LText = "";
      if (TW3FontDetector.Detect(Self,FontName)) {
         LText = Trim$_String_(Text$10);
         if (LText.length > 0) {
            LElement = document.createElement("p");
            if (LElement) {
               try {
                  LElement.style["font-family"] = FontName;
                  LElement.style["font-size"] = TInteger.ToPxStr(FontSize);
                  LElement.style["white-space"] = "nowrap";
                  LElement.style["display"] = "inline-block";
                  LElement.style["overflow"] = "scroll";
                  LElement.style["margin"] = "0px";
                  LElement.style["padding"] = "0px";
                  LElement.style["border-style"] = "none";
                  LElement.style["border-width"] = "0px";
                  LElement.style["width"] = TInteger.ToPxStr(FixedWidth);
                  LElement.style["max-width"] = TInteger.ToPxStr(FixedWidth);
                  LElement.innerHTML = Text$10;
                  Self.Fh.appendChild(LElement);
                  LElement.style["width"] = "1px";
                  LElement.style["height"] = "1px";
                  Result.tmWidth = $VarToInt(LElement.scrollWidth,"");
                  Result.tmHeight = $VarToInt(LElement.scrollHeight,"");
               } finally {
                  Self.Fh.removeChild(LElement);
               }
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.MeasureText(const FontName: String; const FontSize: Integer; const Text: String) : TW3TextMetric
   ///  [line: 236, column: 26, file: SmartCL.Fonts.Detector]
   ,MeasureText$3:function(Self, FontName, FontSize, Text$10) {
      var Result = {tmWidth:0,tmHeight:0};
      var mElement = undefined;
      if (TW3FontDetector.Detect(Self,FontName)) {
         if (Text$10.length > 0) {
            mElement = document.createElement("p");
            if (mElement) {
               mElement.style["font-family"] = FontName;
               mElement.style["font-size"] = TInteger.ToPxStr(FontSize);
               mElement.style["white-space"] = "nowrap";
               mElement.style["display"] = "inline-block";
               mElement.style["overflow"] = "scroll";
               mElement.style["margin"] = "0px";
               mElement.style["padding"] = "0px";
               mElement.style["border-style"] = "none";
               mElement.style["border-width"] = "0px";
               mElement.style.width = "1px";
               mElement.style.height = "1px";
               mElement.innerHTML = Text$10.replace(new RegExp(StrRegExp(" "), "g"),"_");
               Self.Fh.appendChild(mElement);
               Result.tmWidth = $VarToInt(mElement.scrollWidth,"");
               Result.tmHeight = $VarToInt(mElement.scrollHeight,"");
               Self.Fh.removeChild(mElement);
            }
         }
      }
      return Result
   }
   /// function TW3FontDetector.MeasureText(const FontInfo: TW3FontInfo; const Text: String) : TW3TextMetric
   ///  [line: 333, column: 26, file: SmartCL.Fonts.Detector]
   ,MeasureText$2:function(Self, FontInfo, Text$10) {
      var Result = {tmWidth:0,tmHeight:0};
      Result = TW3FontDetector.MeasureText$3(Self,FontInfo.fiName,FontInfo.fiSize,Text$10);
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TW3TextMetrics = record
///  [line: 141, column: 3, file: SmartCL.Graphics]
function Copy$TW3TextMetrics(s,d) {
   return d;
}
function Clone$TW3TextMetrics($) {
   return {

   }
}
/// TW3ImageData = class (TObject)
///  [line: 202, column: 3, file: SmartCL.Graphics]
var TW3ImageData = {
   $ClassName:"TW3ImageData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$5 = null;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 232, column: 35, file: SmartCL.Graphics]
   ,a$64:function(Self) {
      var Result = 0;
      Result = Self.FHandle$5.height;
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 231, column: 34, file: SmartCL.Graphics]
   ,a$63:function(Self) {
      var Result = 0;
      Result = Self.FHandle$5.width;
      return Result
   }
   /// procedure TW3ImageData.FromImageData(const ImageData: JImageData)
   ///  [line: 751, column: 24, file: SmartCL.Graphics]
   ,FromImageData:function(Self, ImageData) {
      if (ImageData !== null) {
         Self.FHandle$5 = ImageData;
      } else {
         throw EW3Exception.CreateFmt($New(EW3ImageData),$R[48],["TW3ImageData.FromImageData", "reference was nil"]);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3CustomGraphicContext = class (TObject)
///  [line: 53, column: 3, file: SmartCL.Graphics]
var TW3CustomGraphicContext = {
   $ClassName:"TW3CustomGraphicContext",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// procedure TW3CustomGraphicContext.Allocate(const aWidth: Integer; const aHeight: Integer)
   ///  [line: 1069, column: 35, file: SmartCL.Graphics]
   ,Allocate$2:function(Self, aWidth, aHeight) {
      if (TW3CustomGraphicContext.GetOwnsReference$(Self)) {
         if (THandleHelper$Valid$5(TW3CustomGraphicContext.GetDC$(Self))) {
            TW3CustomGraphicContext.Release$3(Self);
         }
         TW3CustomGraphicContext.SetSize$3$(Self,aWidth,aHeight);
      } else {
         throw Exception.Create($New(Exception),"Cannot modify current graphics context");
      }
   }
   /// procedure TW3CustomGraphicContext.Release()
   ///  [line: 1081, column: 35, file: SmartCL.Graphics]
   ,Release$3:function(Self) {
      if (TW3CustomGraphicContext.GetOwnsReference$(Self)) {
         if (THandleHelper$Valid$5(TW3CustomGraphicContext.GetDC$(Self))) {
            TW3CustomGraphicContext.ReleaseDC$(Self);
         }
      } else {
         throw Exception.Create($New(Exception),"Cannot modify current graphics context");
      }
   }
   ,Destroy:TObject.Destroy
   ,GetDC$:function($){return $.ClassType.GetDC($)}
   // IGNORED: TW3CustomGraphicContext.GetHandle
   // IGNORED: TW3CustomGraphicContext.GetHeight
   ,GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)}
   // IGNORED: TW3CustomGraphicContext.GetWidth
   ,ReleaseDC$:function($){return $.ClassType.ReleaseDC($)}
   ,SetSize$3$:function($){return $.ClassType.SetSize$3.apply($.ClassType, arguments)}
};
/// TW3GraphicContext = class (TW3CustomGraphicContext)
///  [line: 120, column: 3, file: SmartCL.Graphics]
var TW3GraphicContext = {
   $ClassName:"TW3GraphicContext",$Parent:TW3CustomGraphicContext
   ,$Init:function ($) {
      TW3CustomGraphicContext.$Init($);
      $.FObjId = "";
      $.FObjRef = undefined;
      $.FOwner$2 = undefined;
   }
   /// constructor TW3GraphicContext.Create(const AOwner: THandle)
   ///  [line: 1109, column: 31, file: SmartCL.Graphics]
   ,Create$94:function(Self, AOwner) {
      TObject.Create(Self);
      Self.FObjRef = w3_CreateHtmlElement("canvas");
      Self.FObjId = TW3Identifiers.GenerateUniqueObjectId(TW3Identifiers);
      Self.FObjRef.id = Self.FObjId;
      Self.FOwner$2 = AOwner;
      if (Self.FOwner$2) {
         w3_SetElementParentByRef(Self.FObjRef,Self.FOwner$2);
      }
      return Self
   }
   /// destructor TW3GraphicContext.Destroy()
   ///  [line: 1128, column: 30, file: SmartCL.Graphics]
   ,Destroy:function(Self) {
      if (THandleHelper$Valid$5(Self.FOwner$2)) {
         w3_RemoveElementByRef(Self.FObjRef,Self.FOwner$2);
      }
      Self.FOwner$2 = null;
      Self.FObjRef = null;
      TObject.Destroy(Self);
   }
   /// function TW3GraphicContext.GetDC() : THandle
   ///  [line: 1150, column: 28, file: SmartCL.Graphics]
   ,GetDC:function(Self) {
      var Result = undefined;
      if (Self.FObjRef) {
         Result = Self.FObjRef.getContext("2d");
      } else {
         Result = null;
      }
      return Result
   }
   // IGNORED: TW3GraphicContext.GetHandle
   // IGNORED: TW3GraphicContext.GetHeight
   /// function TW3GraphicContext.GetOwnsReference() : Boolean
   ///  [line: 1145, column: 28, file: SmartCL.Graphics]
   ,GetOwnsReference:function(Self) {
      return true;
   }
   // IGNORED: TW3GraphicContext.GetWidth
   /// procedure TW3GraphicContext.ReleaseDC()
   ///  [line: 1179, column: 29, file: SmartCL.Graphics]
   ,ReleaseDC:function(Self) {
      if (Self.FObjRef) {
         Self.FObjRef.width = 0;
         Self.FObjRef.height = 0;
      }
   }
   /// procedure TW3GraphicContext.SetSize(const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 1158, column: 29, file: SmartCL.Graphics]
   ,SetSize$3:function(Self, NewWidth, NewHeight) {
      if (Self.FObjRef) {
         Self.FObjRef.width = NewWidth;
         Self.FObjRef.height = NewHeight;
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,GetDC$:function($){return $.ClassType.GetDC($)}
   // IGNORED: TW3GraphicContext.GetHandle
   // IGNORED: TW3GraphicContext.GetHeight
   ,GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)}
   // IGNORED: TW3GraphicContext.GetWidth
   ,ReleaseDC$:function($){return $.ClassType.ReleaseDC($)}
   ,SetSize$3$:function($){return $.ClassType.SetSize$3.apply($.ClassType, arguments)}
};
/// TW3ControlGraphicContext = class (TW3CustomGraphicContext)
///  [line: 79, column: 3, file: SmartCL.Graphics]
var TW3ControlGraphicContext = {
   $ClassName:"TW3ControlGraphicContext",$Parent:TW3CustomGraphicContext
   ,$Init:function ($) {
      TW3CustomGraphicContext.$Init($);
      $.FCtrlTag = undefined;
   }
   /// constructor TW3ControlGraphicContext.Create(const aControlHandle: THandle)
   ///  [line: 1021, column: 38, file: SmartCL.Graphics]
   ,Create$95:function(Self, aControlHandle) {
      TObject.Create(Self);
      if (aControlHandle) {
         Self.FCtrlTag = aControlHandle;
      } else {
         throw Exception.Create($New(Exception),"Control handle is invalid error");
      }
      return Self
   }
   /// function TW3ControlGraphicContext.GetDC() : THandle
   ///  [line: 1030, column: 35, file: SmartCL.Graphics]
   ,GetDC:function(Self) {
      return Self.FCtrlTag.getContext("2d");
   }
   // IGNORED: TW3ControlGraphicContext.GetHandle
   // IGNORED: TW3ControlGraphicContext.GetHeight
   /// function TW3ControlGraphicContext.GetOwnsReference() : Boolean
   ///  [line: 1050, column: 35, file: SmartCL.Graphics]
   ,GetOwnsReference:function(Self) {
      return false;
   }
   // IGNORED: TW3ControlGraphicContext.GetWidth
   /// procedure TW3ControlGraphicContext.ReleaseDC()
   ///  [line: 1060, column: 36, file: SmartCL.Graphics]
   ,ReleaseDC:function(Self) {
      /* null */
   }
   /// procedure TW3ControlGraphicContext.SetSize(const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 1055, column: 36, file: SmartCL.Graphics]
   ,SetSize$3:function(Self, NewWidth, NewHeight) {
      /* null */
   }
   ,Destroy:TObject.Destroy
   ,GetDC$:function($){return $.ClassType.GetDC($)}
   // IGNORED: TW3ControlGraphicContext.GetHandle
   // IGNORED: TW3ControlGraphicContext.GetHeight
   ,GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)}
   // IGNORED: TW3ControlGraphicContext.GetWidth
   ,ReleaseDC$:function($){return $.ClassType.ReleaseDC($)}
   ,SetSize$3$:function($){return $.ClassType.SetSize$3.apply($.ClassType, arguments)}
};
/// TW3CanvasPattern = class (TObject)
///  [line: 187, column: 3, file: SmartCL.Graphics]
var TW3CanvasPattern = {
   $ClassName:"TW3CanvasPattern",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
};
/// TW3CanvasGradient = class (TObject)
///  [line: 173, column: 3, file: SmartCL.Graphics]
var TW3CanvasGradient = {
   $ClassName:"TW3CanvasGradient",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$7 = undefined;
   }
   /// constructor TW3CanvasGradient.Create(const aHandle: THandle)
   ///  [line: 896, column: 31, file: SmartCL.Graphics]
   ,Create$96:function(Self, aHandle) {
      TObject.Create(Self);
      Self.FHandle$7 = aHandle;
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3CanvasFont = class (TW3CustomFont)
///  [line: 145, column: 3, file: SmartCL.Graphics]
var TW3CanvasFont = {
   $ClassName:"TW3CanvasFont",$Parent:TW3CustomFont
   ,$Init:function ($) {
      TW3CustomFont.$Init($);
      $.FColor$1 = 0;
      $.FName = $.FWeight = "";
      $.FParent = null;
      $.FSize$1 = 0;
      $.FStyle = [0];
   }
   /// constructor TW3CanvasFont.Create(const Canvas: TW3Canvas)
   ///  [line: 515, column: 27, file: SmartCL.Graphics]
   ,Create$97:function(Self, Canvas$1) {
      TObject.Create(Self);
      Self.FParent = Canvas$1;
      if (Self.FParent) {
         TW3CanvasFont.ReadFontInfo(Self);
      } else {
         throw Exception.Create($New(EW3Exception),"Canvas was NIL or unassigned error");
      }
      return Self
   }
   /// function TW3CanvasFont.GetColor() : TColor
   ///  [line: 655, column: 24, file: SmartCL.Graphics]
   ,GetColor$1:function(Self) {
      return Self.FColor$1;
   }
   // IGNORED: TW3CanvasFont.GetHandle
   /// function TW3CanvasFont.GetName() : String
   ///  [line: 666, column: 24, file: SmartCL.Graphics]
   ,GetName:function(Self) {
      return Self.FName;
   }
   /// function TW3CanvasFont.GetSize() : Integer
   ///  [line: 671, column: 24, file: SmartCL.Graphics]
   ,GetSize$4:function(Self) {
      return Self.FSize$1;
   }
   /// function TW3CanvasFont.GetStyle() : TW3FontStyle
   ///  [line: 525, column: 24, file: SmartCL.Graphics]
   ,GetStyle:function(Self) {
      return Self.FStyle.slice(0);
   }
   /// function TW3CanvasFont.GetWeight() : String
   ///  [line: 676, column: 24, file: SmartCL.Graphics]
   ,GetWeight:function(Self) {
      return Self.FWeight;
   }
   /// procedure TW3CanvasFont.ReadFontInfo()
   ///  [line: 604, column: 25, file: SmartCL.Graphics]
   ,ReadFontInfo:function(Self) {
      var LItems = [],
         a$413 = 0,
         LItem$3 = "",
         LCItem = "",
         LItem$4 = "",
         LCItem$1 = "";
      LItems = TString.Explode(TString,TW3Canvas.GetFontStyle(Self.FParent)," ");
      var $temp50;
      for(a$413=0,$temp50=LItems.length;a$413<$temp50;a$413++) {
         LItem$3 = LItems[a$413];
         LCItem = (LItem$3).toLocaleLowerCase();
         if (((LCItem=="bold")||(LCItem=="normal")||(LCItem=="bolder")||(LCItem=="lighter"))) {
            Self.FWeight = LCItem;
            if (LCItem == "bold") {
               $SetInc(Self.FStyle,22,0,26);
            }
            continue;
         }
         if (LCItem == "italic") {
            $SetInc(Self.FStyle,23,0,26);
            continue;
         }
         if (LCItem.substr(-2,2)=="px") {
            Self.FSize$1 = TInteger.FromPxStr(LItem$3);
            continue;
         }
         if (TW3FontDetector.Detect(W3FontDetector(),LItem$3)) {
            Self.FName = LItem$3;
         }
      }
      LItem$4 = TW3Canvas.GetFillStyle(Self.FParent);
      LCItem$1 = (LItem$4).toLocaleLowerCase();
      if ((LCItem$1.charAt(0)=="#") || (LCItem$1.substr(0,3)=="rgb")) {
         Self.FColor$1 = StrToColor(LItem$4);
      }
   }
   /// procedure TW3CanvasFont.SetColor(aNewColor: TColor)
   ///  [line: 681, column: 25, file: SmartCL.Graphics]
   ,SetColor$2:function(Self, aNewColor) {
      Self.FColor$1 = aNewColor;
      TW3CanvasFont.WriteFontInfo(Self);
   }
   /// procedure TW3CanvasFont.SetName(aNewName: String)
   ///  [line: 687, column: 25, file: SmartCL.Graphics]
   ,SetName:function(Self, aNewName) {
      Self.FName = aNewName;
      TW3CanvasFont.WriteFontInfo(Self);
   }
   /// procedure TW3CanvasFont.SetSize(aNewSize: Integer)
   ///  [line: 693, column: 25, file: SmartCL.Graphics]
   ,SetSize$6:function(Self, aNewSize) {
      Self.FSize$1 = aNewSize;
      TW3CanvasFont.WriteFontInfo(Self);
   }
   /// procedure TW3CanvasFont.SetStyle(const NewStyle: TW3FontStyle)
   ///  [line: 530, column: 25, file: SmartCL.Graphics]
   ,SetStyle:function(Self, NewStyle) {
      var LChange = 0;
      LChange = 0;
      if ($SetIn(NewStyle,22,0,26)) {
         if (!($SetIn(Self.FStyle,22,0,26))) {
            $SetInc(Self.FStyle,22,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle,22,0,26)) {
         $SetExc(Self.FStyle,22,0,26);
         ++LChange;
      }
      if ($SetIn(NewStyle,24,0,26)) {
         if (!($SetIn(Self.FStyle,24,0,26))) {
            $SetInc(Self.FStyle,24,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle,24,0,26)) {
         $SetExc(Self.FStyle,24,0,26);
         ++LChange;
      }
      if ($SetIn(NewStyle,23,0,26)) {
         if (!($SetIn(Self.FStyle,23,0,26))) {
            $SetInc(Self.FStyle,23,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle,23,0,26)) {
         $SetExc(Self.FStyle,23,0,26);
         ++LChange;
      }
      if ($SetIn(NewStyle,25,0,26)) {
         if (!($SetIn(Self.FStyle,25,0,26))) {
            $SetInc(Self.FStyle,25,0,26);
            ++LChange;
         }
      } else if ($SetIn(Self.FStyle,25,0,26)) {
         $SetExc(Self.FStyle,25,0,26);
         ++LChange;
      }
      if (LChange > 0) {
         TW3CanvasFont.WriteFontInfo(Self);
         if (Self.OnChanged) {
            Self.OnChanged(Self);
         }
      }
   }
   /// procedure TW3CanvasFont.SetWeight(aNewWeight: String)
   ///  [line: 699, column: 25, file: SmartCL.Graphics]
   ,SetWeight:function(Self, aNewWeight) {
      Self.FWeight = aNewWeight;
      TW3CanvasFont.WriteFontInfo(Self);
   }
   /// procedure TW3CanvasFont.WriteFontInfo()
   ///  [line: 640, column: 25, file: SmartCL.Graphics]
   ,WriteFontInfo:function(Self) {
      var fnt = "";
      fnt = TInteger.ToPxStr(Self.FSize$1) + " " + Self.FName;
      if ($SetIn(Self.FStyle,22,0,26) || Self.FWeight == "bold") {
         fnt = "bold " + fnt;
      }
      if ($SetIn(Self.FStyle,23,0,26)) {
         fnt = "italic " + fnt;
      }
      if (!(((Self.FWeight=="")||(Self.FWeight=="bold")||(Self.FWeight=="italic")))) {
         fnt = Self.FWeight + " " + fnt;
      }
      TW3Canvas.SetFontStyle(Self.FParent,fnt);
      if (Self.FColor$1) {
         TW3Canvas.SetFillStyle(Self.FParent,ColorToWebStr(Self.FColor$1,255));
      }
   }
   ,Destroy:TObject.Destroy
   ,GetColor$1$:function($){return $.ClassType.GetColor$1($)}
   // IGNORED: TW3CanvasFont.GetHandle
   ,GetName$:function($){return $.ClassType.GetName($)}
   ,GetSize$4$:function($){return $.ClassType.GetSize$4($)}
   ,GetStyle$:function($){return $.ClassType.GetStyle($)}
   ,GetWeight$:function($){return $.ClassType.GetWeight($)}
   ,SetColor$2$:function($){return $.ClassType.SetColor$2.apply($.ClassType, arguments)}
   ,SetName$:function($){return $.ClassType.SetName.apply($.ClassType, arguments)}
   ,SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType, arguments)}
   ,SetStyle$:function($){return $.ClassType.SetStyle.apply($.ClassType, arguments)}
   ,SetWeight$:function($){return $.ClassType.SetWeight.apply($.ClassType, arguments)}
};
/// TW3Canvas = class (TObject)
///  [line: 244, column: 3, file: SmartCL.Graphics]
var TW3Canvas = {
   $ClassName:"TW3Canvas",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FContext = $.FDC = null;
   }
   /// constructor TW3Canvas.Create(Context: TW3CustomGraphicContext)
   ///  [line: 1192, column: 23, file: SmartCL.Graphics]
   ,Create$98:function(Self, Context$3) {
      TObject.Create(Self);
      Self.FContext = Context$3;
      if (Self.FContext !== null) {
         Self.FDC = TW3CustomGraphicContext.GetDC$(Self.FContext);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Canvas),"%s failed to create canvas, invalid graphics context error",["TW3Canvas.Create"]);
      }
      return Self
   }
   /// procedure TW3Canvas.DrawImageF(imageHandle: THandle; x: Float; y: Float)
   ///  [line: 1495, column: 21, file: SmartCL.Graphics]
   ,DrawImageF:function(Self, imageHandle, x$42, y$32) {
      Self.FDC.drawImage(imageHandle,x$42,y$32);
   }
   /// procedure TW3Canvas.FillRectF(aLeft: Float; aTop: Float; aWidth: Float; aHeight: Float)
   ///  [line: 1372, column: 21, file: SmartCL.Graphics]
   ,FillRectF$2:function(Self, aLeft$2, aTop$2, aWidth, aHeight) {
      Self.FDC.fillRect(aLeft$2,aTop$2,aWidth,aHeight);
   }
   /// function TW3Canvas.GetFillStyle() : String
   ///  [line: 1880, column: 20, file: SmartCL.Graphics]
   ,GetFillStyle:function(Self) {
      return String(Self.FDC.fillStyle);
   }
   /// function TW3Canvas.GetFontStyle() : String
   ///  [line: 1776, column: 20, file: SmartCL.Graphics]
   ,GetFontStyle:function(Self) {
      return Self.FDC.font;
   }
   /// function TW3Canvas.GetGlobalAlpha() : Float
   ///  [line: 1738, column: 20, file: SmartCL.Graphics]
   ,GetGlobalAlpha:function(Self) {
      return Self.FDC.globalAlpha;
   }
   /// procedure TW3Canvas.PutImageData(const ImageData: TW3ImageData; const x: Float; const y: Float; const dx: Float; const dy: Float; const dw: Float; const dh: Float)
   ///  [line: 1669, column: 21, file: SmartCL.Graphics]
   ,PutImageData$1:function(Self, ImageData, x$42, y$32, dx$3, dy$3, dw, dh) {
      if (ImageData !== null) {
         Self.FDC.putImageData(ImageData.FHandle$5,x$42,y$32,dx$3,dy$3,dw,dh);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Canvas),"%s failed, imagedata was nil error",["TW3Canvas.PutImageData"]);
      }
   }
   /// procedure TW3Canvas.PutImageData(const ImageData: TW3ImageData; const x: Float; const y: Float)
   ///  [line: 1661, column: 21, file: SmartCL.Graphics]
   ,PutImageData:function(Self, ImageData, x$42, y$32) {
      if (ImageData !== null) {
         Self.FDC.putImageData(ImageData.FHandle$5,x$42,y$32);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Canvas),"%s failed, imagedata was nil error",["TW3Canvas.PutImageData"]);
      }
   }
   /// procedure TW3Canvas.SetFillStyle(aValue: String)
   ///  [line: 1885, column: 21, file: SmartCL.Graphics]
   ,SetFillStyle:function(Self, aValue) {
      Self.FDC.fillStyle = aValue;
   }
   /// procedure TW3Canvas.SetFontStyle(const NewFontStyle: String)
   ///  [line: 1781, column: 21, file: SmartCL.Graphics]
   ,SetFontStyle:function(Self, NewFontStyle) {
      Self.FDC.font = NewFontStyle;
   }
   /// procedure TW3Canvas.SetGlobalAlpha(aValue: Float)
   ///  [line: 1743, column: 21, file: SmartCL.Graphics]
   ,SetGlobalAlpha:function(Self, aValue) {
      Self.FDC.globalAlpha = aValue;
   }
   /// function TW3Canvas.ToDataURL(aMimeType: String) : String
   ///  [line: 1627, column: 20, file: SmartCL.Graphics]
   ,ToDataURL:function(Self, aMimeType) {
      return Self.FDC.canvas.toDataURL(aMimeType);
   }
   /// function TW3Canvas.ToImageData() : TW3ImageData
   ///  [line: 1632, column: 20, file: SmartCL.Graphics]
   ,ToImageData:function(Self) {
      var Result = null;
      var wd = 0,
         hd = 0,
         mTemp$1 = null;
      wd = Self.FDC.canvas.width;
      hd = Self.FDC.canvas.height;
      mTemp$1 = Self.FDC.getImageData(0,0,wd,hd);
      Result = TObject.Create($New(TW3ImageData));
      TW3ImageData.FromImageData(Result,mTemp$1);
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// EW3ImageData = class (EW3Exception)
///  [line: 201, column: 3, file: SmartCL.Graphics]
var EW3ImageData = {
   $ClassName:"EW3ImageData",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3Canvas = class (EW3Exception)
///  [line: 243, column: 3, file: SmartCL.Graphics]
var EW3Canvas = {
   $ClassName:"EW3Canvas",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3TouchList = class (TObject)
///  [line: 29, column: 3, file: SmartCL.Touch]
var TW3TouchList = {
   $ClassName:"TW3TouchList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FObjects = null;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 35, column: 60, file: SmartCL.Touch]
   ,a$95:function(Self, Index$6) {
      var Result = null;
      Result = Self.FObjects[Index$6];
      return Result
   }
   /// procedure TW3TouchList.Clear()
   ///  [line: 78, column: 24, file: SmartCL.Touch]
   ,Clear$5:function(Self) {
      Self.FObjects = null;
   }
   /// procedure TW3TouchList.Update(const Reference: JTouchList)
   ///  [line: 83, column: 24, file: SmartCL.Touch]
   ,Update:function(Self, Reference) {
      if (Reference) {
         Self.FObjects = Reference;
      } else {
         TW3TouchList.Clear$5(Self);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3TouchData = class (TObject)
///  [line: 42, column: 3, file: SmartCL.Touch]
var TW3TouchData = {
   $ClassName:"TW3TouchData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FChanged = $.FTouches = null;
   }
   /// procedure TW3TouchData.Clear()
   ///  [line: 96, column: 24, file: SmartCL.Touch]
   ,Clear$6:function(Self) {
      if (Self.FTouches !== null) {
         TW3TouchList.Clear$5(Self.FTouches);
      }
      if (Self.FChanged !== null) {
         TW3TouchList.Clear$5(Self.FChanged);
      }
   }
   /// function TW3TouchData.GetChanged() : TW3TouchList
   ///  [line: 135, column: 23, file: SmartCL.Touch]
   ,GetChanged:function(Self) {
      var Result = null;
      if (Self.FChanged === null) {
         Self.FChanged = TObject.Create($New(TW3TouchList));
      }
      Result = Self.FChanged;
      return Result
   }
   /// function TW3TouchData.GetTouches() : TW3TouchList
   ///  [line: 128, column: 23, file: SmartCL.Touch]
   ,GetTouches:function(Self) {
      var Result = null;
      if (Self.FTouches === null) {
         Self.FTouches = TObject.Create($New(TW3TouchList));
      }
      Result = Self.FTouches;
      return Result
   }
   /// procedure TW3TouchData.Update(const EventObject: JTouchEvent)
   ///  [line: 105, column: 24, file: SmartCL.Touch]
   ,Update$1:function(Self, EventObject$2) {
      var LProxy = null;
      if (EventObject$2 !== null) {
         LProxy = TW3TouchData.GetTouches(Self);
         TW3TouchList.Update(LProxy,EventObject$2.touches);
         LProxy = TW3TouchData.GetChanged(Self);
         TW3TouchList.Update(LProxy,EventObject$2.changedTouches);
      } else {
         TW3TouchData.Clear$6(Self);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3GestureData = class (TObject)
///  [line: 59, column: 3, file: SmartCL.Touch]
var TW3GestureData = {
   $ClassName:"TW3GestureData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FRotation = $.FScale = 0;
   }
   /// procedure TW3GestureData.Consume(refObj: THandle)
   ///  [line: 146, column: 26, file: SmartCL.Touch]
   ,Consume:function(Self, refObj) {
      Self.FRotation = Number(refObj.rotation);
      Self.FScale = Number(refObj.scale);
   }
   /// procedure TW3GestureData.Update()
   ///  [line: 153, column: 26, file: SmartCL.Touch]
   ,Update$3:function(Self) {
      TW3GestureData.Consume(Self,event);
   }
   ,Destroy:TObject.Destroy
};
/// TStringList = class (TObject)
///  [line: 25, column: 3, file: System.Lists]
var TStringList = {
   $ClassName:"TStringList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FData = [];
   }
   /// function TStringList.GetCount() : Integer
   ///  [line: 251, column: 22, file: System.Lists]
   ,GetCount:function(Self) {
      return Self.FData.length;
   }
   /// function TStringList.GetItem(index: Integer) : String
   ///  [line: 256, column: 22, file: System.Lists]
   ,GetItem$13:function(Self, index$1) {
      return Self.FData[index$1];
   }
   /// function TStringList.GetText() : String
   ///  [line: 239, column: 22, file: System.Lists]
   ,GetText:function(Self) {
      return Self.FData.join("\r") + "\r";
   }
   /// procedure TStringList.SetItem(index: Integer; Value: String)
   ///  [line: 261, column: 23, file: System.Lists]
   ,SetItem$4:function(Self, index$1, Value$5) {
      Self.FData[index$1]=Value$5;
   }
   /// procedure TStringList.SetText(value: String)
   ///  [line: 205, column: 23, file: System.Lists]
   ,SetText:function(Self, value$16) {
      value$16 = { v : value$16 };
      var xpos$1 = 0,
         mTemp$1 = "";
      value$16.v = value$16.v.replace(new RegExp(StrRegExp("\r\n"), "g"),"\r");
      value$16.v = value$16.v.replace(new RegExp(StrRegExp("\n"), "g"),"\r");
      Self.FData.length=0;
      xpos$1 = (value$16.v.indexOf("\r")+1);
      if (xpos$1 > 0) {
         do {
            xpos$1 = (value$16.v.indexOf("\r")+1);
            if (xpos$1 > 0) {
               mTemp$1 = value$16.v.substr(0,(xpos$1-1));
               Delete(value$16,1,xpos$1);
               if (value$16.v.length > 0) {
                  if (value$16.v.charAt(0) == "\n") {
                     Delete(value$16,1,1);
                  }
               }
               Self.FData.push(mTemp$1);
            }
         } while (!(xpos$1 < 1));
         if (value$16.v.length > 0) {
            Self.FData.push(value$16.v);
         }
      } else {
         Self.FData.push(value$16.v);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TObjectList = class (TObject)
///  [line: 60, column: 3, file: System.Lists]
var TObjectList = {
   $ClassName:"TObjectList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FData$1 = [];
      $.FOnAdded$1 = null;
      $.FOnClear$1 = null;
      $.FOnDeleted$1 = null;
   }
   /// function TObjectList.Add(Value: TObject) : Integer
   ///  [line: 145, column: 22, file: System.Lists]
   ,Add$1:function(Self, Value$5) {
      var Result = 0;
      Result = Self.FData$1.length;
      Self.FData$1.push(Value$5);
      if (Self.FOnAdded$1) {
         Self.FOnAdded$1(Self);
      }
      return Result
   }
   /// procedure TObjectList.Clear()
   ///  [line: 123, column: 23, file: System.Lists]
   ,Clear$8:function(Self) {
      Self.FData$1.length=0;
      if (Self.FOnClear$1) {
         Self.FOnClear$1(Self);
      }
   }
   /// constructor TObjectList.Create()
   ///  [line: 95, column: 25, file: System.Lists]
   ,Create$127:function(Self) {
      TObject.Create(Self);
      return Self
   }
   /// destructor TObjectList.Destroy()
   ///  [line: 100, column: 24, file: System.Lists]
   ,Destroy:function(Self) {
      Self.FData$1.length=0;
      TObject.Destroy(Self);
   }
   /// function TObjectList.GetCount() : Integer
   ///  [line: 130, column: 22, file: System.Lists]
   ,GetCount$1:function(Self) {
      return Self.FData$1.length;
   }
   /// function TObjectList.GetItem(index: Integer) : TObject
   ///  [line: 135, column: 22, file: System.Lists]
   ,GetItem$14:function(Self, index$1) {
      return Self.FData$1[index$1];
   }
   /// function TObjectList.IndexOf(Value: TObject) : Integer
   ///  [line: 113, column: 22, file: System.Lists]
   ,IndexOf$1:function(Self, Value$5) {
      return Self.FData$1.indexOf(Value$5);
   }
   /// procedure TObjectList.Insert(Index: Integer; Value: TObject)
   ///  [line: 153, column: 23, file: System.Lists]
   ,Insert$2:function(Self, Index$6, Value$5) {
      Self.FData$1.splice(Index$6,0,Value$5);
   }
   /// procedure TObjectList.Remove(Index: Integer)
   ///  [line: 106, column: 23, file: System.Lists]
   ,Remove$1:function(Self, Index$6) {
      Self.FData$1.splice(Index$6,1)
      ;
      if (Self.FOnDeleted$1) {
         Self.FOnDeleted$1(Self);
      }
   }
   /// procedure TObjectList.SetItem(index: Integer; value: TObject)
   ///  [line: 140, column: 23, file: System.Lists]
   ,SetItem$5:function(Self, index$1, value$16) {
      Self.FData$1[index$1]=value$16;
   }
   /// procedure TObjectList.Sort(CompareFunction: TObjectListSortCompare)
   ///  [line: 158, column: 23, file: System.Lists]
   ,Sort$4:function(Self, CompareFunction) {
      var a$414 = null,
         a$415 = null;
      Self.FData$1.sort(CompareFunction);
      ;
   }
   /// procedure TObjectList.Swap(aFirst: Integer; aSecond: Integer)
   ///  [line: 118, column: 23, file: System.Lists]
   ,Swap$1:function(Self, aFirst, aSecond) {
      $ArraySwap(Self.FData$1,aFirst,aSecond);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TW3Borders = class (TW3OwnedObject)
///  [line: 137, column: 3, file: SmartCL.Borders]
var TW3Borders = {
   $ClassName:"TW3Borders",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FBottom = $.FLeft = $.FRight = $.FTop = null;
   }
   /// function TW3Borders.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 482, column: 21, file: SmartCL.Borders]
   ,AcceptOwner:function(Self, CandidateObject) {
      return $Is(CandidateObject,TW3TagObj);
   }
   /// function TW3Borders.AdjustClientRect(const ThisRect: TRect) : TRect
   ///  [line: 538, column: 21, file: SmartCL.Borders]
   ,AdjustClientRect$1:function(Self, ThisRect) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      Copy$TRect(ThisRect,Result);
      Result.Left$3 += TW3Border.GetPadding(Self.FLeft);
      Result.Top$3 += TW3Border.GetPadding(Self.FTop);
      Result.Right$1 -= TW3Border.GetPadding(Self.FRight);
      Result.Bottom$1 -= TW3Border.GetPadding(Self.FBottom);
      return Result
   }
   /// constructor TW3Borders.Create(const AOwner: TObject)
   ///  [line: 464, column: 24, file: SmartCL.Borders]
   ,Create$11:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FLeft = TW3Border.Create$132($New(TW3Border),Self,0);
      Self.FTop = TW3Border.Create$132($New(TW3Border),Self,1);
      Self.FRight = TW3Border.Create$132($New(TW3Border),Self,2);
      Self.FBottom = TW3Border.Create$132($New(TW3Border),Self,3);
      return Self
   }
   /// destructor TW3Borders.Destroy()
   ///  [line: 473, column: 23, file: SmartCL.Borders]
   ,Destroy:function(Self) {
      TObject.Free(Self.FLeft);
      TObject.Free(Self.FTop);
      TObject.Free(Self.FRight);
      TObject.Free(Self.FBottom);
      TObject.Destroy(Self);
   }
   /// function TW3Borders.GetHSpace() : Integer
   ///  [line: 553, column: 21, file: SmartCL.Borders]
   ,GetHSpace:function(Self) {
      var Result = 0;
      (Result+= TW3Border.GetPadding(Self.FLeft));
      (Result+= TW3Border.GetPadding(Self.FRight));
      return Result
   }
   /// function TW3Borders.GetVSpace() : Integer
   ///  [line: 547, column: 21, file: SmartCL.Borders]
   ,GetVSpace:function(Self) {
      var Result = 0;
      (Result+= TW3Border.GetPadding(Self.FTop));
      (Result+= TW3Border.GetPadding(Self.FBottom));
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3Borders.$Intf={
   IW3OwnedObjectAccess:[TW3Borders.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BorderRadius = class (TW3OwnedObject)
///  [line: 96, column: 3, file: SmartCL.Borders]
var TW3BorderRadius = {
   $ClassName:"TW3BorderRadius",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.FBottom$1 = $.FTop$1 = null;
   }
   /// function TW3BorderRadius.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 320, column: 26, file: SmartCL.Borders]
   ,AcceptOwner:function(Self, CandidateObject) {
      return (CandidateObject!==null) && $Is(CandidateObject,TW3TagObj);
   }
   /// constructor TW3BorderRadius.Create(const AOwner: TObject)
   ///  [line: 306, column: 29, file: SmartCL.Borders]
   ,Create$11:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      Self.FTop$1 = TW3BorderEdgeRadius.Create$131($New(TW3BorderEdgeTopRadius),Self);
      Self.FBottom$1 = TW3BorderEdgeRadius.Create$131($New(TW3BorderEdgeBottomRadius),Self);
      return Self
   }
   /// destructor TW3BorderRadius.Destroy()
   ///  [line: 313, column: 28, file: SmartCL.Borders]
   ,Destroy:function(Self) {
      TObject.Free(Self.FTop$1);
      TObject.Free(Self.FBottom$1);
      TObject.Destroy(Self);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11$:function($){return $.ClassType.Create$11.apply($.ClassType, arguments)}
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3BorderRadius.$Intf={
   IW3OwnedObjectAccess:[TW3BorderRadius.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BorderEdgeRadius = class (TW3OwnedObject)
///  [line: 60, column: 3, file: SmartCL.Borders]
var TW3BorderEdgeRadius = {
   $ClassName:"TW3BorderEdgeRadius",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
   }
   /// constructor TW3BorderEdgeRadius.Create(const AOwner: TW3BorderRadius)
   ///  [line: 292, column: 33, file: SmartCL.Borders]
   ,Create$131:function(Self, AOwner) {
      TW3OwnedObject.Create$11(Self,AOwner);
      return Self
   }
   /// function TW3BorderEdgeRadius.GetOwner() : TW3BorderRadius
   ///  [line: 297, column: 30, file: SmartCL.Borders]
   ,GetOwner$4:function(Self) {
      return $As(TW3OwnedObject.GetOwner(Self),TW3BorderRadius);
   }
   ,Destroy:TObject.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   // IGNORED: TW3BorderEdgeRadius.GetLeft
   // IGNORED: TW3BorderEdgeRadius.GetRight
   // IGNORED: TW3BorderEdgeRadius.SetLeft
   // IGNORED: TW3BorderEdgeRadius.SetRight
};
TW3BorderEdgeRadius.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BorderEdgeTopRadius = class (TW3BorderEdgeRadius)
///  [line: 74, column: 3, file: SmartCL.Borders]
var TW3BorderEdgeTopRadius = {
   $ClassName:"TW3BorderEdgeTopRadius",$Parent:TW3BorderEdgeRadius
   ,$Init:function ($) {
      TW3BorderEdgeRadius.$Init($);
      $.FLeft$1 = $.FRight$1 = 0;
   }
   // IGNORED: TW3BorderEdgeTopRadius.GetLeft
   // IGNORED: TW3BorderEdgeTopRadius.GetRight
   // IGNORED: TW3BorderEdgeTopRadius.SetLeft
   // IGNORED: TW3BorderEdgeTopRadius.SetRight
   ,Destroy:TObject.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   // IGNORED: TW3BorderEdgeTopRadius.GetLeft
   // IGNORED: TW3BorderEdgeTopRadius.GetRight
   // IGNORED: TW3BorderEdgeTopRadius.SetLeft
   // IGNORED: TW3BorderEdgeTopRadius.SetRight
};
TW3BorderEdgeTopRadius.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BorderEdgeStyle enumeration
///  [line: 43, column: 3, file: SmartCL.Borders]
var TW3BorderEdgeStyle = [ "besNone", "besSolid", "besDotted", "besDouble", "besGroove", "besInset", "besOutset" ];
/// TW3BorderEdgeBottomRadius = class (TW3BorderEdgeRadius)
///  [line: 85, column: 3, file: SmartCL.Borders]
var TW3BorderEdgeBottomRadius = {
   $ClassName:"TW3BorderEdgeBottomRadius",$Parent:TW3BorderEdgeRadius
   ,$Init:function ($) {
      TW3BorderEdgeRadius.$Init($);
      $.FLeft$2 = $.FRight$2 = 0;
   }
   // IGNORED: TW3BorderEdgeBottomRadius.GetLeft
   // IGNORED: TW3BorderEdgeBottomRadius.GetRight
   // IGNORED: TW3BorderEdgeBottomRadius.SetLeft
   // IGNORED: TW3BorderEdgeBottomRadius.SetRight
   ,Destroy:TObject.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   // IGNORED: TW3BorderEdgeBottomRadius.GetLeft
   // IGNORED: TW3BorderEdgeBottomRadius.GetRight
   // IGNORED: TW3BorderEdgeBottomRadius.SetLeft
   // IGNORED: TW3BorderEdgeBottomRadius.SetRight
};
TW3BorderEdgeBottomRadius.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3BorderEdge enumeration
///  [line: 24, column: 3, file: SmartCL.Borders]
var TW3BorderEdge = [ "beLeft", "beTop", "beRight", "beBottom" ];
/// TW3Border = class (TObject)
///  [line: 109, column: 3, file: SmartCL.Borders]
var TW3Border = {
   $ClassName:"TW3Border",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FEdge = 0;
      $.FEdgeName = "";
      $.FOwner$4 = null;
   }
   /// constructor TW3Border.Create(AOwner: TW3Borders; AEdge: TW3BorderEdge)
   ///  [line: 330, column: 23, file: SmartCL.Borders]
   ,Create$132:function(Self, AOwner, AEdge) {
      TObject.Create(Self);
      Self.FOwner$4 = AOwner;
      Self.FEdge = Self.FEdge;
      Self.FEdgeName = _EdgeNameLUT[AEdge];
      return Self
   }
   /// function TW3Border.GetColor() : TColor
   ///  [line: 441, column: 20, file: SmartCL.Borders]
   ,GetColor$4:function(Self) {
      var Result = 0;
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      Result = StrToColor(String(LHandle.style["border-" + Self.FEdgeName + "-color"]));
      return Result
   }
   /// function TW3Border.GetMargin() : Integer
   ///  [line: 369, column: 20, file: SmartCL.Borders]
   ,GetMargin:function(Self) {
      var Result = 0;
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         Result = w3_GetStyleAsInt(LHandle,"margin-" + Self.FEdgeName);
      }
      return Result
   }
   /// function TW3Border.GetPadding() : Integer
   ///  [line: 349, column: 20, file: SmartCL.Borders]
   ,GetPadding:function(Self) {
      var Result = 0;
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         Result = w3_GetStyleAsInt(LHandle,"padding-" + Self.FEdgeName);
      }
      return Result
   }
   /// function TW3Border.GetStyle() : TW3BorderEdgeStyle
   ///  [line: 410, column: 20, file: SmartCL.Borders]
   ,GetStyle$3:function(Self) {
      var Result = 0;
      var LHandle,
         LValue = "";
      Result = 0;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (LHandle) {
         LValue = w3_GetStyleAsStr(LHandle,"border-" + Self.FEdgeName + "-style");
         {var $temp51 = (Trim$_String_(LValue)).toLocaleLowerCase();
            if ($temp51=="solid") {
               Result = 1;
            }
             else if ($temp51=="dotted") {
               Result = 2;
            }
             else if ($temp51=="double") {
               Result = 3;
            }
             else if ($temp51=="groove") {
               Result = 4;
            }
             else if ($temp51=="inset") {
               Result = 5;
            }
             else if ($temp51=="outset") {
               Result = 6;
            }
         }
      }
      return Result
   }
   /// function TW3Border.GetWidth() : Integer
   ///  [line: 389, column: 20, file: SmartCL.Borders]
   ,GetWidth$6:function(Self) {
      var Result = 0;
      var LHandle = undefined;
      Result = 0;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         Result = w3_GetStyleAsInt(LHandle,"border-" + Self.FEdgeName + "-width");
      }
      return Result
   }
   /// procedure TW3Border.SetColor(aValue: TColor)
   ///  [line: 449, column: 21, file: SmartCL.Borders]
   ,SetColor$8:function(Self, aValue) {
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         LHandle.style["border-" + Self.FEdgeName + "-color"] = ColorToWebStr(aValue,255);
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetColor", TObject.ClassName(Self.ClassType), $R[47]]);
      }
   }
   /// procedure TW3Border.SetMargin(const aValue: Integer)
   ///  [line: 378, column: 21, file: SmartCL.Borders]
   ,SetMargin$1:function(Self, aValue) {
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         LHandle.style["margin-" + Self.FEdgeName] = TInteger.ToPxStr(aValue);
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetMargin", TObject.ClassName(Self.ClassType), $R[47]]);
      }
   }
   /// procedure TW3Border.SetPadding(aValue: Integer)
   ///  [line: 358, column: 21, file: SmartCL.Borders]
   ,SetPadding$1:function(Self, aValue) {
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         LHandle.style["padding-" + Self.FEdgeName] = TInteger.ToPxStr(aValue);
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetPadding", TObject.ClassName(Self.ClassType), $R[47]]);
      }
   }
   /// procedure TW3Border.SetStyle(aValue: TW3BorderEdgeStyle)
   ///  [line: 430, column: 21, file: SmartCL.Borders]
   ,SetStyle$4:function(Self, aValue) {
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (TControlHandleHelper$Valid$3(LHandle)) {
         LHandle.style["border-" + Self.FEdgeName + "-style"] = _StyleNameLUT[aValue];
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetStyle", TObject.ClassName(Self.ClassType), $R[47]]);
      }
   }
   /// procedure TW3Border.SetWidth(aValue: Integer)
   ///  [line: 399, column: 21, file: SmartCL.Borders]
   ,SetWidth$3:function(Self, aValue) {
      var LHandle = undefined;
      LHandle = $As(TW3OwnedObject.GetOwner(Self.FOwner$4),TW3TagObj).FHandle$4;
      if (LHandle) {
         LHandle.style["border-" + Self.FEdgeName + "-width"] = TInteger.ToPxStr(aValue);
      } else {
         throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetWidth", TObject.ClassName(Self.ClassType), $R[47]]);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3ElementAttributes = class (TObject)
///  [line: 22, column: 3, file: SmartCL.Attributes]
var TW3ElementAttributes = {
   $ClassName:"TW3ElementAttributes",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$12 = undefined;
   }
   /// constructor TW3ElementAttributes.Create(const Control: TControlHandle)
   ///  [line: 63, column: 34, file: SmartCL.Attributes]
   ,Create$133:function(Self, Control$2) {
      TObject.Create(Self);
      if (!(TControlHandleHelper$Valid$3(Control$2))) {
         throw Exception.Create($New(EW3AttributeError),$R[41]);
      }
      Self.FHandle$12 = Control$2;
      return Self
   }
   /// function TW3ElementAttributes.Exists(const Attribute: String) : Boolean
   ///  [line: 87, column: 31, file: SmartCL.Attributes]
   ,Exists$1:function(Self, Attribute) {
      var Result = false;
      var LName = "";
      LName = (Trim$_String_(Attribute)).toLocaleLowerCase();
      if (LName.length > 0) {
         LName = $R[46] + LName;
         try {
            Result = $VarToBool(Self.FHandle$12.hasAttribute(LName));
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.CreateFmt($New(EW3AttributeError),$R[44],[e$1.FMessage]);
         }
      } else {
         throw Exception.Create($New(EW3AttributeError),"Failed to access attribute, identifier was empty");
      }
      return Result
   }
   /// function TW3ElementAttributes.Read(const Attribute: String) : Variant
   ///  [line: 105, column: 31, file: SmartCL.Attributes]
   ,Read$3:function(Self, Attribute) {
      var Result = undefined;
      var LName = "";
      LName = (Trim$_String_(Attribute)).toLocaleLowerCase();
      if (LName.length > 0) {
         LName = $R[46] + LName;
         if (Self.FHandle$12.hasAttribute(LName)) {
            try {
               Result = Self.FHandle$12.getAttribute(LName);
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.CreateFmt($New(EW3AttributeError),$R[42],[e$1.FMessage]);
            }
         } else {
            Result = null;
         }
      } else {
         throw Exception.Create($New(EW3AttributeError),"Failed to access attribute, identifier was empty");
      }
      return Result
   }
   /// procedure TW3ElementAttributes.Write(const Attribute: String; const Value: Variant)
   ///  [line: 146, column: 32, file: SmartCL.Attributes]
   ,Write$3:function(Self, Attribute, Value$5) {
      var LName = "";
      LName = (Trim$_String_(Attribute)).toLocaleLowerCase();
      if (LName.length > 0) {
         LName = $R[46] + LName;
         try {
            Self.FHandle$12.setAttribute(LName,Value$5);
         } catch ($e) {
            var e$1 = $W($e);
            throw EW3Exception.CreateFmt($New(EW3AttributeError),$R[43],[e$1.FMessage]);
         }
      } else {
         throw Exception.Create($New(EW3AttributeError),"Failed to access attribute, identifier was empty");
      }
   }
   ,Destroy:TObject.Destroy
};
/// EW3AttributeError = class (EW3Exception)
///  [line: 20, column: 3, file: SmartCL.Attributes]
var EW3AttributeError = {
   $ClassName:"EW3AttributeError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3EventManagerClickInfo = record
///  [line: 28, column: 3, file: SmartCL.EventManager]
function Copy$TW3EventManagerClickInfo(s,d) {
   d.Buttons=s.Buttons;
   d.ClickSent=s.ClickSent;
   d.DownCtrl=s.DownCtrl;
   d.DownTime=s.DownTime;
   d.EndX=s.EndX;
   d.EndY=s.EndY;
   d.Moved$1=s.Moved$1;
   d.PreventEvent=s.PreventEvent;
   d.StartX=s.StartX;
   d.StartY=s.StartY;
   d.UpCtrl=s.UpCtrl;
   d.UpTime=s.UpTime;
   return d;
}
function Clone$TW3EventManagerClickInfo($) {
   return {
      Buttons:$.Buttons,
      ClickSent:$.ClickSent,
      DownCtrl:$.DownCtrl,
      DownTime:$.DownTime,
      EndX:$.EndX,
      EndY:$.EndY,
      Moved$1:$.Moved$1,
      PreventEvent:$.PreventEvent,
      StartX:$.StartX,
      StartY:$.StartY,
      UpCtrl:$.UpCtrl,
      UpTime:$.UpTime
   }
}
/// TW3EventManager = class (TObject)
///  [line: 43, column: 3, file: SmartCL.EventManager]
var TW3EventManager = {
   $ClassName:"TW3EventManager",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.DetectedHandles = [];
      $.FCurrentClick = {Buttons:0,ClickSent:false,DownCtrl:null,DownTime:0,EndX:0,EndY:0,Moved$1:false,PreventEvent:null,StartX:0,StartY:0,UpCtrl:null,UpTime:0};
      $.FDetectedDirection = 0;
      $.FDirection = 0;
      $.FDocTouchStartX = $.FDocTouchStartY = $.FLastX = $.FLastY = $.FMoveTreshold = 0;
      $.FEnteredControl = $.FMouseCaptureControl = $.FMovementControl = null;
      $.FPrevClick = {Buttons:0,ClickSent:false,DownCtrl:null,DownTime:0,EndX:0,EndY:0,Moved$1:false,PreventEvent:null,StartX:0,StartY:0,UpCtrl:null,UpTime:0};
      $.FPreventMouseEvent = {Buttons:0,ClickSent:false,DownCtrl:null,DownTime:0,EndX:0,EndY:0,Moved$1:false,PreventEvent:null,StartX:0,StartY:0,UpCtrl:null,UpTime:0};
   }
   /// procedure TW3EventManager.AllowDefaultAction()
   ///  [line: 761, column: 27, file: SmartCL.EventManager]
   ,AllowDefaultAction:function(Self) {
      Self.FCurrentClick.ClickSent = false;
   }
   /// procedure TW3EventManager.BindInteractionEvents(const Container: THandle)
   ///  [line: 113, column: 27, file: SmartCL.EventManager]
   ,BindInteractionEvents:function(Self, Container$2) {
      var ts = null,
         tm = null;
      ts = $Event1(Self,TW3EventManager.DocTouchStart);
      tm = $Event1(Self,TW3EventManager.DocTouchMove);
      document.addEventListener("touchstart", ts, {passive: false});
    document.addEventListener("touchmove", tm, {passive: false});
      Container$2.addEventListener("touchstart",$Event1(Self,TW3EventManager.TouchBegins));
      Container$2.addEventListener("touchmove",$Event1(Self,TW3EventManager.TouchMove));
      Container$2.addEventListener("touchend",$Event1(Self,TW3EventManager.TouchEnds));
      Container$2.addEventListener("mousedown",$Event1(Self,TW3EventManager.MouseDown$1));
      Container$2.addEventListener("mousemove",$Event1(Self,TW3EventManager.MouseMove$1));
      Container$2.addEventListener("mouseup",$Event1(Self,TW3EventManager.MouseUp$1));
      Container$2.addEventListener("mousewheel",$Event1(Self,TW3EventManager.MouseWheel$1));
      Container$2.addEventListener("contextmenu",$Event1(Self,TW3EventManager.ContextMenu));
      try {
         Container$2.addEventListener("DOMMouseScroll",$Event1(Self,TW3EventManager.MouseWheel$1),false);
      } catch ($e) {
         /* null */
      }
      Self.FMoveTreshold = 10;
   }
   /// procedure TW3EventManager.CaptureMovement(Ctrl: TW3CustomControl; const MoveDirection: TMovementDirection)
   ///  [line: 543, column: 27, file: SmartCL.EventManager]
   ,CaptureMovement:function(Self, Ctrl, MoveDirection) {
      Self.FDetectedDirection = MoveDirection;
      while (Ctrl !== null) {
         if (Ctrl.FOnAllMovement) {
            Self.FMovementControl = Ctrl;
            Self.FDirection = 2;
            try {
               if (Ctrl.FOnBeginMovement) {
                  Ctrl.FOnBeginMovement(Ctrl);
               }
            } catch ($e) {
               /* null */
            }
            break;
         }
         {var $temp52 = MoveDirection;
            if ($temp52==1) {
               if (Ctrl.FOnHorizontalMovement) {
                  Self.FMovementControl = Ctrl;
                  Self.FDirection = 1;
                  try {
                     if (Ctrl.FOnBeginMovement) {
                        Ctrl.FOnBeginMovement(Ctrl);
                     }
                  } catch ($e) {
                     /* null */
                  }
                  break;
               }
            }
             else if ($temp52==0) {
               if (Ctrl.FOnVerticalMovement) {
                  Self.FMovementControl = Ctrl;
                  Self.FDirection = 0;
                  try {
                     if (Ctrl.FOnBeginMovement) {
                        Ctrl.FOnBeginMovement(Ctrl);
                     }
                  } catch ($e) {
                     /* null */
                  }
                  break;
               }
            }
         }
         if (TW3TagContainer.a$53(Ctrl) !== null && $Is(TW3TagContainer.a$53(Ctrl),TW3CustomControl)) {
            Ctrl = $As(TW3TagContainer.a$53(Ctrl),TW3CustomControl);
         } else {
            break;
         }
      }
   }
   /// function TW3EventManager.CheckPrevent(const Ctrl: TW3CustomControl; const x: Integer; const y: Integer) : Boolean
   ///  [line: 661, column: 26, file: SmartCL.EventManager]
   ,CheckPrevent:function(Self, Ctrl, x$42, y$32) {
      return Ctrl === Self.FPreventMouseEvent.DownCtrl && Math.abs(x$42-Self.FPreventMouseEvent.StartX) < 10 && Math.abs(y$32-Self.FPreventMouseEvent.StartY) < 10 && GetMilliseconds()-Self.FPreventMouseEvent.DownTime <= 700;
   }
   /// procedure TW3EventManager.ContextMenu(eventObj: JMouseEvent)
   ///  [line: 769, column: 27, file: SmartCL.EventManager]
   ,ContextMenu:function(Self, eventObj) {
      var LTarget = undefined,
         Tag$1 = null;
      LTarget = eventObj.target;
      while (LTarget) {
         Tag$1 = TW3ControlTracker.GetControlByHandle(TW3ControlTracker,LTarget);
         if (Tag$1 !== null && $Is(Tag$1,TW3CustomControl)) {
            if (!($As(Tag$1,TW3CustomControl).AllowContextMenu)) {
               eventObj.preventDefault();
            }
            return;
         } else {
            LTarget = LTarget.parentElement;
         }
      }
      eventObj.preventDefault();
   }
   /// procedure TW3EventManager.DocTouchMove(eventObj: JTouchEvent)
   ///  [line: 794, column: 27, file: SmartCL.EventManager]
   ,DocTouchMove:function(Self, eventObj) {
      var x$42 = { v : 0 },
         y$32 = { v : 0 },
         dx$3 = 0,
         dy$3 = 0,
         Tag$1 = null,
         cc = null,
         LTarget = undefined;
      if (!(TW3EventManager.GetTouchCoordinates(Self,eventObj,x$42,y$32))) {
         eventObj.preventDefault();
         return;
      }
      dx$3 = Self.FDocTouchStartX-x$42.v;
      dy$3 = Self.FDocTouchStartY-y$32.v;
      LTarget = eventObj.target;
      while (LTarget) {
         Tag$1 = TW3ControlTracker.GetControlByHandle(TW3ControlTracker,LTarget);
         if (Tag$1 !== null) {
            break;
         }
         LTarget = LTarget.parentElement;
      }
      if (Tag$1 !== null && $Is(Tag$1,TW3CustomControl)) {
         cc = $As(Tag$1,TW3CustomControl);
         while (cc !== null) {
            if (TW3CustomControl.GetNativeScrolling(cc)) {
               if (cc.FHandle$4.style["-webkit-overflow-scrolling"] == "touch") {
                  if (TW3EventManager.PreventTouchScroll(Self,cc,dx$3,dy$3)) {
                     eventObj.preventDefault();
                  } else {
                     return;
                  }
               } else {
                  return;
               }
            }
            if (TW3TagContainer.a$53(cc) !== null && $Is(TW3TagContainer.a$53(cc),TW3CustomControl)) {
               cc = $As(TW3TagContainer.a$53(cc),TW3CustomControl);
            } else {
               cc = null;
            }
         }
      }
      eventObj.preventDefault();
   }
   /// procedure TW3EventManager.DocTouchStart(eventObj: JTouchEvent)
   ///  [line: 786, column: 27, file: SmartCL.EventManager]
   ,DocTouchStart:function(Self, eventObj) {
      var x$42 = { v : 0 },
         y$32 = { v : 0 };
      TW3EventManager.GetTouchCoordinates(Self,eventObj,x$42,y$32);
      Self.FDocTouchStartX = x$42.v;
      Self.FDocTouchStartY = y$32.v;
   }
   /// procedure TW3EventManager.EndClick(const Ctrl: TW3CustomControl; const x: Integer; const y: Integer)
   ///  [line: 637, column: 27, file: SmartCL.EventManager]
   ,EndClick:function(Self, Ctrl, x$42, y$32) {
      Self.FCurrentClick.EndX = x$42;
      Self.FCurrentClick.EndY = y$32;
      Self.FCurrentClick.UpTime = GetMilliseconds();
      Self.FCurrentClick.UpCtrl = Ctrl;
   }
   /// procedure TW3EventManager.Entered(Ctrl: TW3CustomControl; EventObj: JMouseEvent)
   ///  [line: 140, column: 27, file: SmartCL.EventManager]
   ,Entered:function(Self, Ctrl, EventObj) {
      if (Ctrl !== Self.FEnteredControl) {
         try {
            if (Self.FEnteredControl !== null && (Self.FEnteredControl.FOnMouseExit!==null)) {
               TW3CustomControl.Dispatch$(Self.FEnteredControl,9,EventObj);
            }
         } catch ($e) {
            /* null */
         }
         Self.FEnteredControl = Ctrl;
         if (Self.FEnteredControl !== null && (Self.FEnteredControl.FOnMouseEnter!==null)) {
            TW3CustomControl.Dispatch$(Self.FEnteredControl,8,EventObj);
         }
      }
   }
   /// function TW3EventManager.FindControlAtPoint(x: Integer; y: Integer) : TW3CustomControl
   ///  [line: 160, column: 26, file: SmartCL.EventManager]
   ,FindControlAtPoint:function(Self, x$42, y$32) {
      var Result = null;
      var LPos = {X$1:0,Y$1:0},
         LTarget,
         Tag$1 = null;
      Self.DetectedHandles.length=0;
      Result = Self.FMouseCaptureControl;
      if (Result === null) {
         LPos = Create$105(x$42,y$32);
         LTarget = document.elementFromPoint(x$42,y$32);
         while (LTarget) {
            Self.DetectedHandles.push(LTarget);
            Tag$1 = TW3ControlTracker.GetControlByHandle(TW3ControlTracker,LTarget);
            if (Tag$1 !== null && $Is(Tag$1,TW3CustomControl)) {
               Result = $As(Tag$1,TW3CustomControl);
               while (Result !== null && TW3CustomControl.GetTransparentEvents(Result) && TW3TagContainer.a$53(Result) !== null && $Is(TW3TagContainer.a$53(Result),TW3CustomControl)) {
                  Result = $As(TW3TagContainer.a$53(Result),TW3CustomControl);
               }
               return Result;
            } else {
               LTarget = LTarget.parentElement;
            }
         }
      }
      return Result
   }
   /// function TW3EventManager.GetTouchCoordinates(eventObj: JTouchEvent; var x: Integer; var y: Integer) : Boolean
   ///  [line: 344, column: 26, file: SmartCL.EventManager]
   ,GetTouchCoordinates:function(Self, eventObj, x$42, y$32) {
      var Result = false;
      var e$1;
      e$1 = eventObj;
      if (e$1.targetTouches && e$1.targetTouches.length > 0) {
         x$42.v = $VarToInt(e$1.targetTouches[0].pageX,"");
         y$32.v = $VarToInt(e$1.targetTouches[0].pageY,"");
         Result = true;
      }
      return Result
   }
   /// procedure TW3EventManager.HandleMoveEnd()
   ///  [line: 526, column: 27, file: SmartCL.EventManager]
   ,HandleMoveEnd:function(Self) {
      if (Self.FMovementControl !== null) {
         try {
            if (Self.FMovementControl.FOnEndMovement) {
               Self.FMovementControl.FOnEndMovement(Self.FMovementControl);
            }
         } catch ($e) {
            /* null */
         }
         Self.FMovementControl = null;
      }
   }
   /// procedure TW3EventManager.HandleMovement(const Ctrl: TW3CustomControl; const x: Integer; const y: Integer)
   ///  [line: 475, column: 27, file: SmartCL.EventManager]
   ,HandleMovement:function(Self, Ctrl, x$42, y$32) {
      var dx$3 = 0,
         dy$3 = 0;
      if (Self.FMouseCaptureControl === null || Self.FMouseCaptureControl === Ctrl) {
         dx$3 = x$42-Self.FCurrentClick.StartX;
         dy$3 = y$32-Self.FCurrentClick.StartY;
         if (Self.FMovementControl !== null && (Self.FMovementControl === Self.FMouseCaptureControl || Self.FMouseCaptureControl === null)) {
            if ((!(Self.FCurrentClick.Moved$1)) && (Math.abs(dx$3) > Self.FMoveTreshold || Math.abs(dy$3) > Self.FMoveTreshold)) {
               Self.FCurrentClick.Moved$1 = true;
            }
            if ((1<<Self.FDirection&6)!=0) {
               dx$3 = x$42-Self.FLastX;
            } else {
               dx$3 = 0;
            }
            if ((1<<Self.FDirection&5)!=0) {
               dy$3 = y$32-Self.FLastY;
            } else {
               dy$3 = 0;
            }
            try {
               if ((Self.FMovementControl.FOnHorizontalMovement!==null) && ((1<<Self.FDirection&6)!=0)) {
                  Self.FMovementControl.FOnHorizontalMovement(Self,dx$3,0);
               }
               if ((Self.FMovementControl.FOnVerticalMovement!==null) && ((1<<Self.FDirection&5)!=0)) {
                  Self.FMovementControl.FOnVerticalMovement(Self,0,dy$3);
               }
               if ((Self.FMovementControl.FOnAllMovement!==null) && ((1<<Self.FDirection&7)!=0)) {
                  Self.FMovementControl.FOnAllMovement(Self,dx$3,dy$3);
               }
            } catch ($e) {
               /* null */
            }
         } else {
            if (Math.abs(dx$3) > Self.FMoveTreshold || Math.abs(dy$3) > Self.FMoveTreshold) {
               if (!(Self.FCurrentClick.Moved$1)) {
                  Self.FCurrentClick.Moved$1 = true;
                  if (Self.FDirection == 3) {
                     if (Math.abs(dx$3) > Math.abs(dy$3)) {
                        TW3EventManager.CaptureMovement(Self,Ctrl,1);
                     } else {
                        TW3EventManager.CaptureMovement(Self,Ctrl,0);
                     }
                  }
               }
            }
         }
      }
   }
   /// procedure TW3EventManager.HandleTouchEvent(const Ctrl: TW3CustomControl; eventObj: JTouchEvent)
   ///  [line: 645, column: 27, file: SmartCL.EventManager]
   ,HandleTouchEvent:function(Self, Ctrl, eventObj) {
      if (Ctrl.TouchPreventDefault) {
         eventObj.stopPropagation();
         eventObj.preventDefault();
      }
   }
   /// procedure TW3EventManager.MouseDown(eventObj: JMouseEvent)
   ///  [line: 200, column: 27, file: SmartCL.EventManager]
   ,MouseDown$1:function(Self, eventObj) {
      var e$1,
         x$42,
         y$32,
         Ctrl = null;
      e$1 = eventObj;
      x$42 = e$1.clientX;
      y$32 = e$1.clientY;
      Ctrl = TW3EventManager.FindControlAtPoint(Self,$VarToInt(x$42,""),$VarToInt(y$32,""));
      if (Ctrl !== null) {
         if (TW3EventManager.CheckPrevent(Self,Ctrl,$VarToInt(x$42,""),$VarToInt(y$32,""))) {
            eventObj.stopPropagation();
            return;
         }
         TW3EventManager.StartClick(Self,Ctrl,$VarToInt(x$42,""),$VarToInt(y$32,""),$VarToInt(e$1.buttons,""));
         if (Ctrl.FOnMouseDown) {
            eventObj.stopPropagation();
            TW3CustomControl.Dispatch$(Ctrl,1,eventObj);
         }
         TW3EventManager.Entered(Self,Ctrl,eventObj);
         Self.FLastX = $VarToInt(x$42,"");
         Self.FLastY = $VarToInt(y$32,"");
         if (Self.FMouseCaptureControl !== Ctrl) {
            Self.FDirection = 3;
         }
      }
   }
   /// procedure TW3EventManager.MouseMove(eventObj: JMouseEvent)
   ///  [line: 231, column: 27, file: SmartCL.EventManager]
   ,MouseMove$1:function(Self, eventObj) {
      var e$1,
         x$42,
         y$32,
         Ctrl = null;
      e$1 = eventObj;
      if (Self.FCurrentClick.DownTime > 0 && (Self.FCurrentClick.UpTime==0) && Self.FCurrentClick.Buttons != e$1.buttons) {
         TW3EventManager.MouseUp$1(Self,eventObj);
         return;
      }
      x$42 = e$1.clientX;
      y$32 = e$1.clientY;
      Ctrl = TW3EventManager.FindControlAtPoint(Self,$VarToInt(x$42,""),$VarToInt(y$32,""));
      if (Ctrl !== null) {
         if (TW3EventManager.CheckPrevent(Self,Ctrl,$VarToInt(x$42,""),$VarToInt(y$32,""))) {
            eventObj.stopPropagation();
            return;
         }
         if (Ctrl.FOnMouseMove) {
            eventObj.stopPropagation();
            TW3CustomControl.Dispatch$(Ctrl,2,eventObj);
         }
         if (Self.FCurrentClick.DownTime > 0 && (Self.FCurrentClick.UpTime==0) && Self.FCurrentClick.Buttons == 1) {
            TW3EventManager.HandleMovement(Self,Ctrl,$VarToInt(x$42,""),$VarToInt(y$32,""));
         } else {
            TW3EventManager.Entered(Self,Ctrl,eventObj);
         }
      }
      Self.FLastX = $VarToInt(x$42,"");
      Self.FLastY = $VarToInt(y$32,"");
   }
   /// procedure TW3EventManager.MouseUp(eventObj: JMouseEvent)
   ///  [line: 274, column: 27, file: SmartCL.EventManager]
   ,MouseUp$1:function(Self, eventObj) {
      var e$1,
         x$42,
         y$32,
         Ctrl = null;
      e$1 = eventObj;
      x$42 = e$1.clientX;
      y$32 = e$1.clientY;
      Ctrl = TW3EventManager.FindControlAtPoint(Self,$VarToInt(x$42,""),$VarToInt(y$32,""));
      if (Ctrl !== null) {
         if (TW3EventManager.CheckPrevent(Self,Ctrl,$VarToInt(x$42,""),$VarToInt(y$32,""))) {
            eventObj.stopPropagation();
            return;
         }
         TW3EventManager.EndClick(Self,Ctrl,$VarToInt(x$42,""),$VarToInt(y$32,""));
         if (Ctrl.FOnMouseUp) {
            eventObj.stopPropagation();
            TW3CustomControl.Dispatch$(Ctrl,3,eventObj);
         }
         TW3EventManager.SendClickOrDoubleClick(Self);
         TW3EventManager.Entered(Self,Ctrl,eventObj);
      }
      TW3EventManager.HandleMoveEnd(Self);
   }
   /// procedure TW3EventManager.MouseWheel(eventObj: JMouseWheelEvent)
   ///  [line: 301, column: 27, file: SmartCL.EventManager]
   ,MouseWheel$1:function(Self, eventObj) {
      var WheelDelta = 0,
         Handled = { v : false },
         e$1,
         x$42,
         y$32,
         Ctrl = null,
         sr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         MousePos = {X$1:0,Y$1:0},
         shiftState = null;
      e$1 = eventObj;
      if (e$1.detail) {
         WheelDelta = $VarToInt((e$1.detail * -40),"");
      } else {
         WheelDelta = $VarToInt(e$1.wheelDelta,"");
      }
      x$42 = e$1.clientX;
      y$32 = e$1.clientY;
      Ctrl = TW3EventManager.FindControlAtPoint(Self,$VarToInt(x$42,""),$VarToInt(y$32,""));
      while (Ctrl !== null) {
         if (Ctrl.FOnMouseWheel) {
            try {
               sr = TW3MovableControl.ScreenRect(Ctrl);
               MousePos = Create$105(sr.Left$3,sr.Top$3);
               shiftState = TShiftState.Current();
               TShiftState.SetMouseEvent(shiftState,eventObj);
               Ctrl.FOnMouseWheel(Ctrl,shiftState,WheelDelta,MousePos,Handled);
               if (Handled.v) {
                  eventObj.preventDefault();
                  eventObj.stopPropagation();
                  return;
               }
            } catch ($e) {
               /* null */
            }
         }
         if (TW3TagContainer.a$53(Ctrl) !== null && $Is(TW3TagContainer.a$53(Ctrl),TW3CustomControl)) {
            Ctrl = $As(TW3TagContainer.a$53(Ctrl),TW3CustomControl);
         } else {
            Ctrl = null;
         }
      }
   }
   /// procedure TW3EventManager.PreventMouseEvents(const Ctrl: TW3CustomControl; const x: Integer; const y: Integer)
   ///  [line: 653, column: 27, file: SmartCL.EventManager]
   ,PreventMouseEvents:function(Self, Ctrl, x$42, y$32) {
      Self.FPreventMouseEvent.DownCtrl = Ctrl;
      Self.FPreventMouseEvent.StartX = x$42;
      Self.FPreventMouseEvent.StartY = y$32;
      Self.FPreventMouseEvent.DownTime = GetMilliseconds();
   }
   /// procedure TW3EventManager.PreventOnClick()
   ///  [line: 756, column: 27, file: SmartCL.EventManager]
   ,PreventOnClick:function(Self) {
      Self.FCurrentClick.ClickSent = true;
   }
   /// function TW3EventManager.PreventTouchScroll(const Ctrl: TW3CustomControl; const dx: Integer; const dy: Integer) : Boolean
   ///  [line: 832, column: 26, file: SmartCL.EventManager]
   ,PreventTouchScroll:function(Self, Ctrl, dx$3, dy$3) {
      var Result = false;
      var MaxScroll = 0;
      MaxScroll = TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(Ctrl))-TW3MovableControl.GetHeight$(Ctrl);
      if ((TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Ctrl))==0) && dy$3 < 0) {
         Result = true;
      } else if (MaxScroll < 0 || TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(Ctrl)) >= MaxScroll && dy$3 > 0) {
         Result = true;
      }
      return Result
   }
   /// procedure TW3EventManager.ReleaseCapture(const Target: TW3CustomControl)
   ///  [line: 613, column: 27, file: SmartCL.EventManager]
   ,ReleaseCapture$1:function(Self, Target$1) {
      Self.FMouseCaptureControl = null;
   }
   /// procedure TW3EventManager.SendClickOrDoubleClick()
   ///  [line: 669, column: 27, file: SmartCL.EventManager]
   ,SendClickOrDoubleClick:function(Self) {
      var SameCtrl = false;
      function SendDblClick() {
         Self.FCurrentClick.UpCtrl.FOnDblClick(Self.FCurrentClick.UpCtrl);
      };
      try {
         if (Self.FCurrentClick.Buttons >= 2 || Self.FCurrentClick.Moved$1 || Self.FCurrentClick.DownCtrl !== Self.FCurrentClick.UpCtrl) {
            return;
         }
         if (Self.FCurrentClick.UpCtrl.FOnDblClick) {
            SameCtrl = Self.FCurrentClick.UpCtrl === Self.FPrevClick.UpCtrl && Self.FCurrentClick.DownCtrl === Self.FPrevClick.DownCtrl;
            if (SameCtrl && (Self.FCurrentClick.DownTime!=0) && Self.FCurrentClick.UpTime-Self.FPrevClick.DownTime <= 400 && Math.abs(Self.FCurrentClick.StartX-Self.FPrevClick.StartX) < 10 && Math.abs(Self.FCurrentClick.StartY-Self.FPrevClick.StartY) < 10 && Math.abs(Self.FCurrentClick.EndX-Self.FPrevClick.EndX) < 10 && Math.abs(Self.FCurrentClick.EndY-Self.FPrevClick.EndY) < 10) {
               Self.FCurrentClick.ClickSent = true;
               if (Self.FCurrentClick.PreventEvent !== null) {
                  Self.FCurrentClick.PreventEvent.preventDefault();
                  TW3Dispatch.Execute(TW3Dispatch,SendDblClick,0);
               } else {
                  SendDblClick();
               }
            } else if (Self.FCurrentClick.UpCtrl.FOnClick) {
               TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3EventManager.SendDelayedClick),450);
            }
         } else {
            if ((Self.FCurrentClick.UpCtrl.FOnClick!==null) && (!(Self.FCurrentClick.ClickSent))) {
               if (Self.FCurrentClick.PreventEvent !== null && Self.FCurrentClick.UpCtrl.TouchPreventDefault) {
                  Self.FCurrentClick.PreventEvent.preventDefault();
                  TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3EventManager.SendDelayedClick),0);
               } else {
                  Self.FCurrentClick.ClickSent = true;
                  TW3CustomControl.Dispatch$(Self.FCurrentClick.UpCtrl,7,null);
               }
            }
         }
      } catch ($e) {
         /* null */
      }
   }
   /// procedure TW3EventManager.SendDelayedClick()
   ///  [line: 741, column: 27, file: SmartCL.EventManager]
   ,SendDelayedClick:function(Self) {
      if ((!(Self.FCurrentClick.ClickSent)) && (!(Self.FCurrentClick.Moved$1)) && GetMilliseconds()-Self.FCurrentClick.UpTime < 600) {
         Self.FCurrentClick.ClickSent = true;
         try {
            if (Self.FCurrentClick.PreventEvent !== null) {
               Self.FCurrentClick.PreventEvent.preventDefault();
            }
            TW3CustomControl.Dispatch$(Self.FCurrentClick.UpCtrl,7,null);
         } catch ($e) {
            /* null */
         }
      }
   }
   /// procedure TW3EventManager.SetCapture(const Target: TW3CustomControl)
   ///  [line: 603, column: 27, file: SmartCL.EventManager]
   ,SetCapture$1:function(Self, Target$1) {
      Self.FMouseCaptureControl = Target$1;
      if (Target$1.FOnAllMovement) {
         TW3EventManager.CaptureMovement(Self,Target$1,2);
      }
   }
   /// procedure TW3EventManager.StartClick(const Ctrl: TW3CustomControl; const x: Integer; const y: Integer; const Buttons: Integer)
   ///  [line: 621, column: 27, file: SmartCL.EventManager]
   ,StartClick:function(Self, Ctrl, x$42, y$32, Buttons$1) {
      Copy$TW3EventManagerClickInfo(Self.FCurrentClick,Self.FPrevClick);
      Self.FCurrentClick.StartX = x$42;
      Self.FCurrentClick.StartY = y$32;
      Self.FCurrentClick.Buttons = Buttons$1;
      Self.FCurrentClick.DownTime = GetMilliseconds();
      Self.FCurrentClick.DownCtrl = Ctrl;
      Self.FCurrentClick.UpTime = 0;
      Self.FCurrentClick.UpCtrl = null;
      Self.FCurrentClick.ClickSent = false;
      Self.FCurrentClick.Moved$1 = false;
      Self.FCurrentClick.PreventEvent = null;
   }
   /// procedure TW3EventManager.TouchBegins(eventObj: JTouchEvent)
   ///  [line: 357, column: 27, file: SmartCL.EventManager]
   ,TouchBegins:function(Self, eventObj) {
      var x$42 = { v : 0 },
         y$32 = { v : 0 },
         e$1,
         Ctrl = null,
         ShiftState = null,
         cx$3 = 0,
         cy$3 = 0;
      e$1 = eventObj;
      if (TW3EventManager.GetTouchCoordinates(Self,eventObj,x$42,y$32)) {
         Ctrl = TW3EventManager.FindControlAtPoint(Self,x$42.v,y$32.v);
         if (Ctrl !== null) {
            TW3EventManager.PreventMouseEvents(Self,Ctrl,x$42.v,y$32.v);
            if (Ctrl.FOnTouchBegins) {
               TW3EventManager.HandleTouchEvent(Self,Ctrl,eventObj);
               TW3CustomControl.Dispatch$(Ctrl,4,eventObj);
            } else if (Ctrl.SimulateMouseEvents && (Ctrl.FOnMouseDown!==null)) {
               try {
                  ShiftState = TShiftState.Current();
                  cx$3 = x$42.v-TW3MovableControl.ScreenRect(Ctrl).Left$3;
                  cy$3 = y$32.v-TW3MovableControl.ScreenRect(Ctrl).Top$3;
                  Ctrl.FOnMouseDown(Ctrl,0,ShiftState,cx$3,cy$3);
               } catch ($e) {
                  /* null */
               }
            }
            TW3EventManager.StartClick(Self,Ctrl,x$42.v,y$32.v,1);
            Self.FLastX = x$42.v;
            Self.FLastY = y$32.v;
            if (Self.FMouseCaptureControl !== Ctrl) {
               Self.FDirection = 3;
            }
         }
      }
   }
   /// procedure TW3EventManager.TouchEnds(eventObj: JTouchEvent)
   ///  [line: 432, column: 27, file: SmartCL.EventManager]
   ,TouchEnds:function(Self, eventObj) {
      var x$42 = { v : 0 },
         y$32 = { v : 0 },
         e$1,
         Ctrl = null,
         ShiftState = null,
         cx$3 = 0,
         cy$3 = 0;
      e$1 = eventObj;
      if (!(TW3EventManager.GetTouchCoordinates(Self,eventObj,x$42,y$32))) {
         x$42.v = Self.FLastX;
         y$32.v = Self.FLastY;
      }
      Ctrl = TW3EventManager.FindControlAtPoint(Self,x$42.v,y$32.v);
      if (Ctrl !== null) {
         TW3EventManager.PreventMouseEvents(Self,Ctrl,x$42.v,y$32.v);
         TW3EventManager.EndClick(Self,Ctrl,x$42.v,y$32.v);
         if (Ctrl.FOnTouchEnds) {
            TW3EventManager.HandleTouchEvent(Self,Ctrl,eventObj);
            TW3CustomControl.Dispatch$(Ctrl,6,eventObj);
         } else if (Ctrl.SimulateMouseEvents && (Ctrl.FOnMouseUp!==null)) {
            try {
               ShiftState = TShiftState.Current();
               cx$3 = x$42.v-TW3MovableControl.ScreenRect(Ctrl).Left$3;
               cy$3 = y$32.v-TW3MovableControl.ScreenRect(Ctrl).Top$3;
               Ctrl.FOnMouseUp(Ctrl,0,ShiftState,cx$3,cy$3);
            } catch ($e) {
               /* null */
            }
         }
         Self.FCurrentClick.PreventEvent = eventObj;
         TW3EventManager.SendClickOrDoubleClick(Self);
      }
      TW3EventManager.HandleMoveEnd(Self);
   }
   /// procedure TW3EventManager.TouchMove(eventObj: JTouchEvent)
   ///  [line: 394, column: 27, file: SmartCL.EventManager]
   ,TouchMove:function(Self, eventObj) {
      var x$42 = { v : 0 },
         y$32 = { v : 0 },
         e$1,
         Ctrl = null,
         ShiftState = null,
         cx$3 = 0,
         cy$3 = 0;
      e$1 = eventObj;
      if (TW3EventManager.GetTouchCoordinates(Self,eventObj,x$42,y$32)) {
         Ctrl = TW3EventManager.FindControlAtPoint(Self,x$42.v,y$32.v);
         if (Ctrl !== null) {
            TW3EventManager.PreventMouseEvents(Self,Ctrl,x$42.v,y$32.v);
            if (Ctrl.FOnTouchMoves) {
               TW3EventManager.HandleTouchEvent(Self,Ctrl,eventObj);
               TW3CustomControl.Dispatch$(Ctrl,5,eventObj);
            } else if (Ctrl.SimulateMouseEvents && (Ctrl.FOnMouseMove!==null)) {
               try {
                  ShiftState = TShiftState.Current();
                  cx$3 = x$42.v-TW3MovableControl.ScreenRect(Ctrl).Left$3;
                  cy$3 = y$32.v-TW3MovableControl.ScreenRect(Ctrl).Top$3;
                  Ctrl.FOnMouseMove(Ctrl,ShiftState,cx$3,cy$3);
               } catch ($e) {
                  /* null */
               }
            }
            TW3EventManager.HandleMovement(Self,Ctrl,x$42.v,y$32.v);
            if ((!(Ctrl.TouchPreventDefault)) && TW3EventManager.PreventTouchScroll(Self,Ctrl,Self.FCurrentClick.StartX-x$42.v,Self.FCurrentClick.StartY-y$32.v)) {
               eventObj.preventDefault();
            }
         }
         Self.FLastX = x$42.v;
         Self.FLastY = y$32.v;
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3FlexControl = class (TW3CustomControl)
///  [line: 68, column: 3, file: SmartCL.Flexbox]
var TW3FlexControl = {
   $ClassName:"TW3FlexControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3FlexControl.CreationFlags() : TW3CreationFlags
   ///  [line: 372, column: 25, file: SmartCL.Flexbox]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = [60];
      return Result
   }
   /// function TW3FlexControl.GetOrder() : Integer
   ///  [line: 357, column: 25, file: SmartCL.Flexbox]
   ,GetOrder:function(Self) {
      return w3_GetStyleAsInt(Self.FHandle$4,"order");
   }
   /// procedure TW3FlexControl.MoveTo(const NewLeft: Integer; const NewTop: Integer)
   ///  [line: 391, column: 26, file: SmartCL.Flexbox]
   ,MoveTo:function(Self, NewLeft, NewTop) {
      /* null */
   }
   /// procedure TW3FlexControl.SetBounds(const NewBounds: TRect)
   ///  [line: 399, column: 26, file: SmartCL.Flexbox]
   ,SetBounds$1:function(Self, NewBounds) {
      /* null */
   }
   /// procedure TW3FlexControl.SetBounds(const NewLeft: Integer; const NewTop: Integer; const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 395, column: 26, file: SmartCL.Flexbox]
   ,SetBounds:function(Self, NewLeft, NewTop, NewWidth, NewHeight) {
      /* null */
   }
   /// procedure TW3FlexControl.SetLeft(const NewLeft: Integer)
   ///  [line: 383, column: 26, file: SmartCL.Flexbox]
   ,SetLeft:function(Self, NewLeft) {
      /* null */
   }
   /// procedure TW3FlexControl.SetOrder(const NewOrder: Integer)
   ///  [line: 362, column: 26, file: SmartCL.Flexbox]
   ,SetOrder:function(Self, NewOrder) {
      if (TW3TagContainer.a$53(Self) !== null) {
         if (!($SetIn(TW3TagContainer.a$53(Self).FComponentState,10,0,11))) {
            Self.FHandle$4.style["order"] = NewOrder;
         }
      }
   }
   /// procedure TW3FlexControl.SetStretch(const NewValue: Boolean)
   ///  [line: 346, column: 26, file: SmartCL.Flexbox]
   ,SetStretch:function(Self, NewValue) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewValue) {
            w3_SetStyle(Self.FHandle$4,"flex",TBoolean.Binary(NewValue));
         } else {
            Self.FHandle$4.style.removeProperty("flex");
         }
      }
   }
   /// procedure TW3FlexControl.SetTop(const NewTop: Integer)
   ///  [line: 387, column: 26, file: SmartCL.Flexbox]
   ,SetTop:function(Self, NewTop) {
      /* null */
   }
   /// procedure TW3FlexControl.StyleTagObject()
   ///  [line: 328, column: 26, file: SmartCL.Flexbox]
   ,StyleTagObject:function(Self) {
      var BgColor = 0;
      TW3MovableControl.StyleTagObject(Self);
      TW3TagObj.SetDisplayMode(Self,1);
      TW3TagObj.SetPositionMode(Self,22);
      BgColor = RGBToColor(RandomInt(255),RandomInt(255),RandomInt(255));
      TW3ControlBackground.FromColor(TW3MovableControl.GetBackGround(Self),BgColor);
      Self.FHandle$4.style["order"] = 1;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo$:function($){return $.ClassType.MoveTo.apply($.ClassType, arguments)}
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1$:function($){return $.ClassType.SetBounds$1.apply($.ClassType, arguments)}
   ,SetBounds$:function($){return $.ClassType.SetBounds.apply($.ClassType, arguments)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft$:function($){return $.ClassType.SetLeft.apply($.ClassType, arguments)}
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop$:function($){return $.ClassType.SetTop.apply($.ClassType, arguments)}
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3FlexControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogControl = class (TW3FlexControl)
///  [line: 98, column: 3, file: SmartCL.Dialogs]
var TW3DialogControl = {
   $ClassName:"TW3DialogControl",$Parent:TW3FlexControl
   ,$Init:function ($) {
      TW3FlexControl.$Init($);
      $.FGroupIndex = -1;
   }
   /// function TW3DialogControl.GetContainer(var Container: TW3DialogButtonPanel) : Boolean
   ///  [line: 552, column: 27, file: SmartCL.Dialogs]
   ,GetContainer:function(Self, Container$2) {
      var Result = false;
      Container$2.v = null;
      if (TW3TagContainer.a$53(Self) !== null) {
         if ($Is(TW3TagContainer.a$53(Self),TW3DialogButtonPanel)) {
            Container$2.v = $As(TW3TagContainer.a$53(Self),TW3DialogButtonPanel);
            Result = true;
         }
      }
      return Result
   }
   /// function TW3DialogControl.GetDialogControlHost(var Handler: IW3DialogElementContainer) : Boolean
   ///  [line: 577, column: 27, file: SmartCL.Dialogs]
   ,GetDialogControlHost:function(Self, Handler) {
      var Result = false;
      var Container$2 = { v : null };
      Handler.v = null;
      if (TW3DialogControl.GetContainer(Self,Container$2)) {
         try {
            Handler.v = $AsIntf(Container$2.v,"IW3DialogElementContainer");
            Result = Handler.v!==null;
         } catch ($e) {
            /* null */
         }
      }
      return Result
   }
   /// function TW3DialogControl.GetDownStateControl(var Handler: IW3DownStateControl) : Boolean
   ///  [line: 565, column: 27, file: SmartCL.Dialogs]
   ,GetDownStateControl:function(Self, Handler) {
      var Result = false;
      Handler.v = null;
      try {
         Handler.v = $AsIntf(Self,"IW3DownStateControl");
         Result = Handler.v!==null;
      } catch ($e) {
         /* null */
      }
      return Result
   }
   /// procedure TW3DialogControl.InternalSetGroupIndex(const NewIndex: Integer)
   ///  [line: 527, column: 28, file: SmartCL.Dialogs]
   ,InternalSetGroupIndex:function(Self, NewIndex) {
      Self.FGroupIndex = NewIndex;
   }
   /// procedure TW3DialogControl.SetGroupIndex(const NewIndex: Integer)
   ///  [line: 532, column: 28, file: SmartCL.Dialogs]
   ,SetGroupIndex:function(Self, NewIndex) {
      var Handler = { v : null };
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if (TW3DialogControl.GetDownStateControl(Self,Handler)) {
               TW3DialogControl.InternalSetGroupIndex(Self,TInteger.EnsureRange(NewIndex,0,32767));
            } else {
               throw EW3Exception.CreateFmt($New(EW3DialogControl),"Method \"%s\" failed: Control doesnt implement IW3DownStateControl, cannot include in group error",["TW3DialogControl.SetGroupIndex"]);
            }
         } else {
            TW3DialogControl.InternalSetGroupIndex(Self,TInteger.EnsureRange(NewIndex,0,32767));
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3FlexControl.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3FlexControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3FlexControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3FlexControl.SetBounds$1
   ,SetBounds:TW3FlexControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3FlexControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3FlexControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogSeparator = class (TW3DialogControl)
///  [line: 115, column: 3, file: SmartCL.Dialogs]
var TW3DialogSeparator = {
   $ClassName:"TW3DialogSeparator",$Parent:TW3DialogControl
   ,$Init:function ($) {
      TW3DialogControl.$Init($);
   }
   /// procedure TW3DialogSeparator.StyleTagObject()
   ///  [line: 974, column: 30, file: SmartCL.Dialogs]
   ,StyleTagObject:function(Self) {
      TW3FlexControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,16);
      TW3CustomControl.SetBorderType(Self,12);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3FlexControl.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3FlexControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3FlexControl.SetBounds$1
   ,SetBounds:TW3FlexControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3FlexControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3FlexControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogSeparator.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogResult enumeration
///  [line: 64, column: 3, file: SmartCL.Dialogs]
var TW3DialogResult = [ "roYes", "roNo", "roOK", "roCancel" ];
/// TW3DialogOption enumeration
///  [line: 54, column: 3, file: SmartCL.Dialogs]
var TW3DialogOption = [ "aoYes", "aoNo", "aoYesNo", "aoOK", "aoCancel", "aoOKCancel", "aoYesNoCancel" ];
/// TW3DialogManager = class (TW3OwnedObject)
///  [line: 228, column: 3, file: SmartCL.Dialogs]
var TW3DialogManager = {
   $ClassName:"TW3DialogManager",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.OnDialogClosedByForce = null;
      $.FDialogStack = [];
   }
   /// procedure TW3DialogManager.Clear()
   ///  [line: 359, column: 28, file: SmartCL.Dialogs]
   ,Clear$11:function(Self) {
      if (Self.FDialogStack.length > 0) {
         try {
            while (Self.FDialogStack.length > 0) {
               try {
                  TW3DialogManager.CloseCurrent(Self);
               } catch ($e) {
                  /* null */
               }
            }
         } finally {
            Self.FDialogStack.length=0;
         }
      }
   }
   /// procedure TW3DialogManager.CloseCurrent()
   ///  [line: 322, column: 28, file: SmartCL.Dialogs]
   ,CloseCurrent:function(Self) {
      var LDialog = null,
         LBlockBox = null;
      if (Self.FDialogStack.length > 0) {
         LDialog = TW3DialogManager.GetCurrentDialog(Self);
         if (LDialog !== null) {
            if (TW3TagContainer.a$53(LDialog) !== null) {
               if ($Is(TW3TagContainer.a$53(LDialog),TW3BlockBox)) {
                  LBlockBox = $As(TW3TagContainer.a$53(LDialog),TW3BlockBox);
                  TW3DialogManager.PopDialog(Self);
                  if (Self.OnDialogClosedByForce) {
                     Self.OnDialogClosedByForce(Self,LDialog);
                  }
                  TObject.Free(LDialog);
                  LDialog = null;
                  TObject.Free(LBlockBox);
                  LBlockBox = null;
               } else {
                  throw Exception.Create($New(EW3Exception),"Failed to close dialog, parent is not of correct type error");
               }
            } else {
               throw Exception.Create($New(EW3Exception),"Failed to close dialog, parent was nil error");
            }
         } else {
            throw Exception.Create($New(EW3Exception),"Failed to close dialog, no dialog is active error");
         }
      } else {
         throw Exception.Create($New(EW3Exception),"Failed to close dialog, no dialog is active error");
      }
   }
   /// constructor TW3DialogManager.Create(const Application: TW3CustomApplication)
   ///  [line: 286, column: 30, file: SmartCL.Dialogs]
   ,Create$141:function(Self, Application$1) {
      TW3OwnedObject.Create$11(Self,Application$1);
      return Self
   }
   /// destructor TW3DialogManager.Destroy()
   ///  [line: 291, column: 30, file: SmartCL.Dialogs]
   ,Destroy:function(Self) {
      if (Self.FDialogStack.length > 0) {
         TW3DialogManager.Clear$11(Self);
      }
      TObject.Destroy(Self);
   }
   /// function TW3DialogManager.GetCurrentDialog() : TW3Dialog
   ///  [line: 298, column: 27, file: SmartCL.Dialogs]
   ,GetCurrentDialog:function(Self) {
      var Result = null;
      if (Self.FDialogStack.length > 0) {
         Result = $Peek(Self.FDialogStack,"");
      }
      return Result
   }
   /// function TW3DialogManager.PopDialog() : TW3Dialog
   ///  [line: 393, column: 27, file: SmartCL.Dialogs]
   ,PopDialog:function(Self) {
      var Result = null;
      if (Self.FDialogStack.length > 0) {
         Result = Self.FDialogStack.pop();
      }
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
};
TW3DialogManager.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3HeaderControl = class (TW3CustomControl)
///  [line: 48, column: 3, file: SmartCL.Controls.Header]
var TW3HeaderControl = {
   $ClassName:"TW3HeaderControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FBackBtn = $.FNextBtn = $.FTitle = null;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 67, column: 59, file: SmartCL.Controls.Header]
   ,a$136:function(Self, Value$5) {
      TW3HeaderTitle.SetCaption$4(Self.FTitle,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 67, column: 36, file: SmartCL.Controls.Header]
   ,a$135:function(Self) {
      var Result = "";
      Result = TW3HeaderTitle.GetCaption$2(Self.FTitle);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 66, column: 62, file: SmartCL.Controls.Header]
   ,a$133:function(Self, Value$5) {
      TW3ToolButton.SetCaption$5(Self.FNextBtn,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 66, column: 37, file: SmartCL.Controls.Header]
   ,a$132:function(Self) {
      var Result = "";
      Result = TW3ToolButton.GetCaption$3(Self.FNextBtn);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 65, column: 62, file: SmartCL.Controls.Header]
   ,a$130:function(Self, Value$5) {
      TW3ToolButton.SetCaption$5(Self.FBackBtn,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 65, column: 37, file: SmartCL.Controls.Header]
   ,a$129:function(Self) {
      var Result = "";
      Result = TW3ToolButton.GetCaption$3(Self.FBackBtn);
      return Result
   }
   /// function TW3HeaderControl.CreationFlags() : TW3CreationFlags
   ///  [line: 165, column: 27, file: SmartCL.Controls.Header]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,6,0,8);
      return Result
   }
   /// procedure TW3HeaderControl.FinalizeObject()
   ///  [line: 174, column: 28, file: SmartCL.Controls.Header]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FTitle);
      TObject.Free(Self.FBackBtn);
      TObject.Free(Self.FNextBtn);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3HeaderControl.InitializeObject()
   ///  [line: 147, column: 28, file: SmartCL.Controls.Header]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3TagObj.SetDisplayMode(Self,2);
      Self.FBackBtn = TW3TagContainer.Create$81$($New(TW3HeaderButton),Self);
      TW3ToolButton.SetCaption$5(Self.FBackBtn,"Back");
      TW3MovableControl.SetSize$2$(Self.FBackBtn,84,34);
      Self.FTitle = TW3TagContainer.Create$81$($New(TW3HeaderTitle),Self);
      Self.FNextBtn = TW3TagContainer.Create$81$($New(TW3HeaderButton),Self);
      TW3ToolButton.SetCaption$5(Self.FNextBtn,"Next");
      TW3MovableControl.SetSize$2$(Self.FNextBtn,84,34);
   }
   /// procedure TW3HeaderControl.StyleTagObject()
   ///  [line: 182, column: 28, file: SmartCL.Controls.Header]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,14);
      TW3CustomControl.SetBorderType(Self,9);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3HeaderControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogHeader = class (TW3HeaderControl)
///  [line: 189, column: 3, file: SmartCL.Dialogs]
var TW3DialogHeader = {
   $ClassName:"TW3DialogHeader",$Parent:TW3HeaderControl
   ,$Init:function ($) {
      TW3HeaderControl.$Init($);
   }
   /// procedure TW3DialogHeader.StyleTagObject()
   ///  [line: 622, column: 27, file: SmartCL.Dialogs]
   ,StyleTagObject:function(Self) {
      TW3HeaderControl.StyleTagObject(Self);
      TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,Self.FHandle$4,"TW3HeaderControl");
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3HeaderControl.FinalizeObject
   ,InitializeObject:TW3HeaderControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3HeaderControl.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogHeader.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3GlyphContainer = class (TW3CustomControl)
///  [line: 33, column: 3, file: SmartCL.GlyphContainer]
var TW3GlyphContainer = {
   $ClassName:"TW3GlyphContainer",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnLoad = null;
      $.FAwesome = $.FAwesomeId = "";
      $.FColor$4 = 0;
      $.FGlyphType = 0;
      $.FImage = null;
   }
   /// procedure TW3GlyphContainer.FinalizeObject()
   ///  [line: 75, column: 29, file: SmartCL.GlyphContainer]
   ,FinalizeObject:function(Self) {
      if (Self.FImage !== null) {
         TObject.Free(Self.FImage);
         Self.FImage = null;
      }
      TW3TagObj.a$48(Self,"");
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3GlyphContainer.HandleImageReady(Sender: TObject)
   ///  [line: 86, column: 29, file: SmartCL.GlyphContainer]
   ,HandleImageReady:function(Self, Sender) {
      if (Self.OnLoad) {
         Self.OnLoad(Sender);
      }
   }
   /// procedure TW3GlyphContainer.InitializeObject()
   ///  [line: 66, column: 29, file: SmartCL.GlyphContainer]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FColor$4 = 11119017;
      Self.FGlyphType = 1;
      Self.FAwesome = "fa-bars";
      Self.FImage = null;
   }
   /// procedure TW3GlyphContainer.ObjectReady()
   ///  [line: 102, column: 29, file: SmartCL.GlyphContainer]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3GlyphContainer.SetFAGlyph(Self,Self.FAwesome);
   }
   /// procedure TW3GlyphContainer.Resize()
   ///  [line: 108, column: 29, file: SmartCL.GlyphContainer]
   ,Resize:function(Self) {
      var FWrapper = null,
         LBounds = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         wd = 0,
         hd = 0,
         dx$3 = 0,
         dy$3 = 0;
      TW3MovableControl.Resize(Self);
      if ($SetIn(Self.FComponentState,4,0,11)) {
         LBounds = TW3MovableControl.ClientRect$(Self);
         switch (Self.FGlyphType) {
            case 0 :
               if (Self.FImage !== null) {
                  TW3Image.SetFit(Self.FImage,2);
                  TW3MovableControl.SetBounds$1$(Self.FImage,LBounds);
               }
               break;
            case 1 :
               Self.FAwesomeId = Trim$_String_(Self.FAwesomeId);
               if (Self.FAwesomeId.length > 0) {
                  if (TControlHandleHelper$Valid$3(TW3HtmlElement.QuerySelector(TW3HtmlElement,Self.FAwesomeId))) {
                     FWrapper = TW3HtmlElement.Create$142($New(TW3HtmlElement),Self.FAwesomeId);
                     wd = (TW3HtmlElement.a$230(FWrapper) > 0)?TW3HtmlElement.a$230(FWrapper):TW3HtmlElement.a$250(FWrapper);
                     hd = (TW3HtmlElement.a$232(FWrapper) > 0)?TW3HtmlElement.a$232(FWrapper):TW3HtmlElement.a$252(FWrapper);
                     if (wd > 0 && hd > 0) {
                        dx$3 = ($Div(TRect$Width$6(LBounds),2))-($Div(wd,2));
                        dy$3 = ($Div(TRect$Height$5(LBounds),2))-($Div(hd,2));
                        TW3HtmlElement.MoveTo$3(FWrapper,dx$3,dy$3);
                     }
                     TObject.Free(FWrapper);
                  }
               }
               break;
         }
      }
   }
   /// procedure TW3GlyphContainer.SetAwesome(const NewAwesome: String)
   ///  [line: 229, column: 29, file: SmartCL.GlyphContainer]
   ,SetAwesome:function(Self, NewAwesome) {
      if (NewAwesome != Self.FAwesome) {
         Self.FAwesome = NewAwesome;
         if (Self.FGlyphType == 1) {
            TW3GlyphContainer.SetFAGlyph(Self,Self.FAwesome);
         }
      }
   }
   /// procedure TW3GlyphContainer.SetFAGlyph(AwesomeStyle: String)
   ///  [line: 173, column: 29, file: SmartCL.GlyphContainer]
   ,SetFAGlyph:function(Self, AwesomeStyle) {
      var Template = "",
         GlyphColor$1 = "";
      AwesomeStyle = Trim$_String_(AwesomeStyle);
      if (AwesomeStyle.length > 0) {
         Self.FAwesomeId = TW3Identifiers.GenerateUniqueObjectId(TW3Identifiers);
         Template = "<i id=\"%s\" style=\"%s\" class=\"fa %s\" aria-hidden=\"true\"><\/i>";
         GlyphColor$1 = ColorToWebStr(Self.FColor$4,255);
         Template = Format(Template,[Self.FAwesomeId, "position: absolute; color: " + GlyphColor$1 + ";", Self.FAwesome]);
         TW3TagObj.a$48(Self,Template);
         TW3MovableControl.Invalidate$(Self);
      } else {
         Self.FAwesomeId = "";
         TW3TagObj.a$48(Self,"");
         TW3MovableControl.Invalidate$(Self);
      }
   }
   /// procedure TW3GlyphContainer.SetGlyphType(const NewKind: TW3GlyphType)
   ///  [line: 200, column: 29, file: SmartCL.GlyphContainer]
   ,SetGlyphType:function(Self, NewKind) {
      if (NewKind != Self.FGlyphType) {
         Self.FGlyphType = NewKind;
         switch (NewKind) {
            case 1 :
               if (Self.FImage !== null) {
                  TObject.Free(Self.FImage);
                  Self.FImage = null;
               }
               if (Self.FAwesome.length > 0) {
                  TW3GlyphContainer.SetFAGlyph(Self,Self.FAwesome);
               }
               break;
            case 0 :
               Self.FAwesomeId = "";
               TW3TagObj.a$48(Self,"");
               Self.FImage = TW3TagContainer.Create$81$($New(TW3Image),Self);
               TW3Image.SetOnLoad(Self.FImage,$Event1(Self,TW3GlyphContainer.HandleImageReady));
               break;
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3GlyphContainer.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogGlyph = class (TW3GlyphContainer)
///  [line: 194, column: 3, file: SmartCL.Dialogs]
var TW3DialogGlyph = {
   $ClassName:"TW3DialogGlyph",$Parent:TW3GlyphContainer
   ,$Init:function ($) {
      TW3GlyphContainer.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3GlyphContainer.FinalizeObject
   ,InitializeObject:TW3GlyphContainer.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3GlyphContainer.ObjectReady
   ,Resize:TW3GlyphContainer.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogGlyph.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogCommonButton = class (TW3DialogControl)
///  [line: 121, column: 3, file: SmartCL.Dialogs]
var TW3DialogCommonButton = {
   $ClassName:"TW3DialogCommonButton",$Parent:TW3DialogControl
   ,$Init:function ($) {
      TW3DialogControl.$Init($);
      $.FCaption$1 = "";
   }
   /// procedure TW3DialogCommonButton.CBClick(EventObj: JEvent)
   ///  [line: 1007, column: 33, file: SmartCL.Dialogs]
   ,CBClick:function(Self, EventObj) {
      var Handler = { v : null };
      if (TW3DialogControl.GetDialogControlHost(Self,Handler)) {
         Handler.v[2](Self);
      }
      TW3CustomControl.CBClick(Self,EventObj);
   }
   /// procedure TW3DialogCommonButton.InitializeObject()
   ///  [line: 987, column: 33, file: SmartCL.Dialogs]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3DialogControl.InternalSetGroupIndex(Self,0);
   }
   /// procedure TW3DialogCommonButton.InternalSetCaption(const NewCaption: String)
   ///  [line: 1017, column: 33, file: SmartCL.Dialogs]
   ,InternalSetCaption:function(Self, NewCaption) {
      TW3TagObj.BeginUpdate(Self);
      Self.FCaption$1 = NewCaption;
      TW3TagObj.a$48(Self,NewCaption);
      TW3TagObj.EndUpdate(Self);
   }
   /// function TW3DialogCommonButton.MakeElementTagObj() : TControlHandle
   ///  [line: 993, column: 32, file: SmartCL.Dialogs]
   ,MakeElementTagObj:function(Self) {
      return w3_CreateHtmlElement("button");
   }
   /// procedure TW3DialogCommonButton.SetCaption(const NewCaption: String)
   ///  [line: 1025, column: 33, file: SmartCL.Dialogs]
   ,SetCaption$1:function(Self, NewCaption) {
      var Temp$1 = "";
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Temp$1 = Trim$_String_(NewCaption);
         if (Temp$1 != Self.FCaption$1) {
            TW3DialogCommonButton.InternalSetCaption(Self,Temp$1);
         }
      }
   }
   /// procedure TW3DialogCommonButton.StyleTagObject()
   ///  [line: 998, column: 33, file: SmartCL.Dialogs]
   ,StyleTagObject:function(Self) {
      TW3FlexControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,10);
      TW3CustomControl.SetBorderType(Self,5);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3FlexControl.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3FlexControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3FlexControl.SetBounds$1
   ,SetBounds:TW3FlexControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3FlexControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3FlexControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogCommonButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3FlexContainer = class (TW3CustomControl)
///  [line: 104, column: 3, file: SmartCL.Flexbox]
var TW3FlexContainer = {
   $ClassName:"TW3FlexContainer",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FFlexAlignContent = 1;
      $.FFlexAlignItems = 0;
      $.FOrder = 0;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 134, column: 35, file: SmartCL.Flexbox]
   ,a$139:function(Self) {
      var Result = 0;
      Result = TW3TagContainer.GetChildCount(Self);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 133, column: 20, file: SmartCL.Flexbox]
   ,a$138:function(Self, index$1) {
      var Result = null;
      Result = $As(TW3TagContainer.GetChildObject(Self,index$1),TW3FlexControl);
      return Result
   }
   /// procedure TW3FlexContainer.ChildAdded(const NewChild: TW3TagContainer)
   ///  [line: 313, column: 28, file: SmartCL.Flexbox]
   ,ChildAdded:function(Self, NewChild) {
      if ($Is(NewChild,TW3FlexControl)) {
         ++Self.FOrder;
         TW3FlexControl.SetOrder($As(NewChild,TW3FlexControl),Self.FOrder);
      } else {
         throw Exception.Create($New(EW3Exception),"Only TW3FlexControl based elements can be hosted by this control");
      }
   }
   /// procedure TW3FlexContainer.Clear()
   ///  [line: 198, column: 28, file: SmartCL.Flexbox]
   ,Clear$12:function(Self) {
      var items$2 = [],
         x$42 = 0;
      TW3TagObj.BeginUpdate(Self);
      try {
         items$2 = TW3TagContainer.GetChildren(Self);
         var $temp53;
         for(x$42=0,$temp53=items$2.length;x$42<$temp53;x$42++) {
            TObject.Free(items$2[x$42]);
         }
      } finally {
         Self.FOrder = 0;
         TW3TagObj.EndUpdate(Self);
      }
   }
   /// procedure TW3FlexContainer.SetFlexAlignContent(const NewAlign: TW3FlexAlignContent)
   ///  [line: 286, column: 28, file: SmartCL.Flexbox]
   ,SetFlexAlignContent:function(Self, NewAlign) {
      var token = "",
         value$16 = "";
      if (NewAlign != Self.FFlexAlignContent) {
         Self.FFlexAlignContent = NewAlign;
         token = TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"justify-content");
         value$16 = AlignContentLUT[NewAlign];
         Self.FHandle$4.style[token] = value$16;
         Self.FHandle$4.style["justify-content"] = value$16;
      }
   }
   /// procedure TW3FlexContainer.SetFlexAlignItems(const NewAlign: TW3FlexAlignItems)
   ///  [line: 259, column: 28, file: SmartCL.Flexbox]
   ,SetFlexAlignItems:function(Self, NewAlign) {
      var token = "",
         value$16 = "";
      if (NewAlign != Self.FFlexAlignItems) {
         Self.FFlexAlignItems = NewAlign;
         token = TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"align-items");
         value$16 = AlignItemsLUT[NewAlign];
         Self.FHandle$4.style[token] = value$16;
         Self.FHandle$4.style["align-items"] = value$16;
      }
   }
   /// procedure TW3FlexContainer.StyleTagObject()
   ///  [line: 183, column: 28, file: SmartCL.Flexbox]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3TagObj.SetDisplayMode(Self,2);
      Self.FHandle$4.style["justify-content"] = "flex-start";
      Self.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"justify-content")] = "flex-start";
      Self.FHandle$4.style["flex-direction"] = "row";
      Self.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"flex-direction")] = "row";
      Self.FHandle$4.style["flex-wrap"] = "nowrap";
      Self.FHandle$4.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"flex-wrap")] = "nowrap";
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded$:function($){return $.ClassType.ChildAdded.apply($.ClassType, arguments)}
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3FlexContainer.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogButtonPanel = class (TW3FlexContainer)
///  [line: 155, column: 3, file: SmartCL.Dialogs]
var TW3DialogButtonPanel = {
   $ClassName:"TW3DialogButtonPanel",$Parent:TW3FlexContainer
   ,$Init:function ($) {
      TW3FlexContainer.$Init($);
      $.OnControlDown = null;
      $.OnControlClicked = null;
      $.UseDefaultSizes = false;
      $.FButtonSize = 89;
      $.FSeperatorSize = 32;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 174, column: 22, file: SmartCL.Dialogs]
   ,a$140:function(Self, index$1) {
      var Result = null;
      Result = $As(TW3FlexContainer.a$138(Self,index$1),TW3DialogButton);
      return Result
   }
   /// procedure TW3DialogButtonPanel.ChildAdded(const NewChild: TW3TagContainer)
   ///  [line: 669, column: 32, file: SmartCL.Dialogs]
   ,ChildAdded:function(Self, NewChild) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($Is(NewChild,TW3DialogControl)) {
            if (Self.UseDefaultSizes) {
               if ($Is(NewChild,TW3DialogButton)) {
                  if (Self.FButtonSize > 0) {
                     TW3MovableControl.SetWidth$($As(NewChild,TW3DialogButton),Self.FButtonSize);
                  }
               } else if ($Is(NewChild,TW3DialogSeparator)) {
                  if (Self.FSeperatorSize > 0) {
                     TW3MovableControl.SetWidth$($As(NewChild,TW3DialogSeparator),Self.FSeperatorSize);
                  }
               }
            }
            if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3MovableControl.Invalidate$(Self);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3DialogContainer),"Method %s failed, only TW3DialogControl based controls can be hosted by %s",["TW3DialogButtonPanel.ChildAdded", TObject.ClassName(Self.ClassType)]);
         }
      }
      TW3FlexContainer.ChildAdded(Self,NewChild);
   }
   /// procedure TW3DialogButtonPanel.ChildElementClicked(const Child: TW3DialogControl)
   ///  [line: 831, column: 32, file: SmartCL.Dialogs]
   ,ChildElementClicked:function(Self, Child$1) {
      if (Self.OnControlClicked) {
         Self.OnControlClicked(Self,Child$1);
      }
   }
   /// procedure TW3DialogButtonPanel.ChildElementDown(const Child: TW3DialogControl)
   ///  [line: 825, column: 32, file: SmartCL.Dialogs]
   ,ChildElementDown:function(Self, Child$1) {
      if (Self.OnControlDown) {
         Self.OnControlDown(Self,Child$1);
      }
   }
   /// procedure TW3DialogButtonPanel.ChildRemoved(const OldChild: TW3TagContainer)
   ///  [line: 705, column: 32, file: SmartCL.Dialogs]
   ,ChildRemoved:function(Self, OldChild) {
      var GroupIndex$2 = 0,
         button$3 = null,
         Others = [],
         index$1 = 0,
         NextButton$1 = null,
         LAccess = { v : null };
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($Is(OldChild,TW3DialogControl)) {
            GroupIndex$2 = $As(OldChild,TW3DialogControl).FGroupIndex;
            if (GroupIndex$2 > 0) {
               if ($Is(OldChild,TW3DialogButton)) {
                  button$3 = $As(OldChild,TW3DialogButton);
                  if (button$3.FDown) {
                     if (!(button$3.AllowAllUp)) {
                        Others = TW3DialogButtonPanel.GetGroupMembers(Self,GroupIndex$2);
                        if (Others.length > 0) {
                           index$1 = Others.indexOf(button$3);
                           if (!index$1) {
                              NextButton$1 = Others[1];
                           } else if (index$1 == (Others.length-1)) {
                              NextButton$1 = Others[(Others.length-1)-1];
                           } else {
                              NextButton$1 = Others[index$1+1];
                           }
                           if (NextButton$1 !== null) {
                              try {
                                 if (TW3DialogControl.GetDownStateControl(NextButton$1,LAccess)) {
                                    LAccess.v[1](true);
                                 }
                              } catch ($e) {
                                 /* null */
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
      TW3TagContainer.ChildRemoved(Self,OldChild);
   }
   /// procedure TW3DialogButtonPanel.ClearSelectedInGroup(const GroupIndex: Integer)
   ///  [line: 801, column: 32, file: SmartCL.Dialogs]
   ,ClearSelectedInGroup:function(Self, GroupIndex$2) {
      var Access = { v : null },
         Children$1 = [],
         a$416 = 0,
         obj = null,
         item$7 = null;
      Children$1 = TW3TagContainer.GetChildren(Self);
      var $temp54;
      for(a$416=0,$temp54=Children$1.length;a$416<$temp54;a$416++) {
         obj = Children$1[a$416];
         if ($Is(obj,TW3DialogControl)) {
            item$7 = $As(obj,TW3DialogControl);
            if (item$7.FGroupIndex == GroupIndex$2) {
               if (TW3DialogControl.GetDownStateControl(item$7,Access)) {
                  if (Access.v[0]()) {
                     Access.v[1](false);
                  }
               }
            }
         }
      }
   }
   /// function TW3DialogButtonPanel.GetGroupMembers(const GroupIndex: Integer) : TW3DialogControlList
   ///  [line: 772, column: 31, file: SmartCL.Dialogs]
   ,GetGroupMembers:function(Self, GroupIndex$2) {
      var Result = [];
      var x$42 = 0,
         obj = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         var $temp55;
         for(x$42=0,$temp55=TW3FlexContainer.a$139(Self);x$42<$temp55;x$42++) {
            obj = TW3DialogButtonPanel.a$140(Self,x$42);
            if (obj.FGroupIndex == GroupIndex$2) {
               if (Result.indexOf(obj) < 0) {
                  Result.push(obj);
               }
            }
         }
      }
      return Result
   }
   /// procedure TW3DialogButtonPanel.SetDefaultButtonSize(const NewSize: Integer)
   ///  [line: 655, column: 32, file: SmartCL.Dialogs]
   ,SetDefaultButtonSize:function(Self, NewSize) {
      var Temp$1 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Temp$1 = TInteger.EnsureRange(NewSize,0,32767);
         if (Temp$1 != Self.FButtonSize) {
            TW3TagObj.BeginUpdate(Self);
            Self.FButtonSize = Temp$1;
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3DialogButtonPanel.SetDefaultSeperatorSize(const NewSize: Integer)
   ///  [line: 641, column: 32, file: SmartCL.Dialogs]
   ,SetDefaultSeperatorSize:function(Self, NewSize) {
      var Temp$1 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Temp$1 = TInteger.EnsureRange(NewSize,0,32767);
         if (Temp$1 != Self.FSeperatorSize) {
            TW3TagObj.BeginUpdate(Self);
            Self.FSeperatorSize = Temp$1;
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3DialogButtonPanel.StyleTagObject()
   ///  [line: 632, column: 32, file: SmartCL.Dialogs]
   ,StyleTagObject:function(Self) {
      TW3FlexContainer.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,14);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded$:function($){return $.ClassType.ChildAdded.apply($.ClassType, arguments)}
   ,ChildRemoved$:function($){return $.ClassType.ChildRemoved.apply($.ClassType, arguments)}
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogButtonPanel.$Intf={
   IW3DialogElementContainer:[TW3DialogButtonPanel.ClearSelectedInGroup,TW3DialogButtonPanel.ChildElementDown,TW3DialogButtonPanel.ChildElementClicked]
   ,IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DialogButton = class (TW3DialogCommonButton)
///  [line: 139, column: 3, file: SmartCL.Dialogs]
var TW3DialogButton = {
   $ClassName:"TW3DialogButton",$Parent:TW3DialogCommonButton
   ,$Init:function ($) {
      TW3DialogCommonButton.$Init($);
      $.AllowAllUp = $.FDown = false;
   }
   /// procedure TW3DialogButton.CBClick(EventObj: JEvent)
   ///  [line: 1039, column: 27, file: SmartCL.Dialogs]
   ,CBClick:function(Self, EventObj) {
      var LState = false;
      if (Self.FGroupIndex > 0) {
         LState = TW3DialogButton.GetDownState(Self);
         if (LState) {
            return;
         } else {
            TW3DialogButton.SetDownState(Self,!(LState));
         }
      }
      TW3DialogCommonButton.CBClick(Self,EventObj);
   }
   /// function TW3DialogButton.GetDownState() : Boolean
   ///  [line: 1053, column: 26, file: SmartCL.Dialogs]
   ,GetDownState:function(Self) {
      return Self.FDown;
   }
   /// procedure TW3DialogButton.SetDownState(const NewDownState: Boolean)
   ///  [line: 1058, column: 27, file: SmartCL.Dialogs]
   ,SetDownState:function(Self, NewDownState) {
      var Handler = { v : null };
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewDownState != Self.FDown) {
            if (Self.FGroupIndex > 0) {
               if (Self.FDown) {
                  if (Self.AllowAllUp) {
                     Self.FDown = false;
                  }
               } else if (TW3DialogControl.GetDialogControlHost(Self,Handler)) {
                  Handler.v[0](Self.FGroupIndex);
               }
            }
            if (Self.FDown) {
               TW3CustomControl.SetBackgroundType(Self,15);
               TW3CustomControl.SetBorderType(Self,10);
               Self.FDown = false;
            } else {
               TW3CustomControl.SetBackgroundType(Self,11);
               TW3CustomControl.SetBorderType(Self,6);
               Self.FDown = true;
            }
            if (TW3DialogControl.GetDialogControlHost(Self,Handler)) {
               Handler.v[1](Self);
            }
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3DialogCommonButton.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3FlexControl.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3DialogCommonButton.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3DialogCommonButton.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3FlexControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3FlexControl.SetBounds$1
   ,SetBounds:TW3FlexControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3FlexControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3FlexControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3DialogButton.$Intf={
   IW3DownStateControl:[TW3DialogButton.GetDownState,TW3DialogButton.SetDownState]
   ,IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Dialog = class (TW3CustomControl)
///  [line: 199, column: 3, file: SmartCL.Dialogs]
var TW3Dialog = {
   $ClassName:"TW3Dialog",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnOptionSelected = null;
      $.FButtonRow = $.FGlyph = $.Fheader = $.FText$1 = null;
      $.FOptions$6 = 0;
   }
   /// function TW3Dialog.AddButton(Caption: String; ResultValue: TW3DialogResult) : TW3DialogButton
   ///  [line: 914, column: 20, file: SmartCL.Dialogs]
   ,AddButton:function(Self, Caption$11, ResultValue) {
      var Result = null;
      Result = TW3TagContainer.Create$81$($New(TW3DialogButton),Self.FButtonRow);
      Result.TagValue = ResultValue;
      TW3DialogCommonButton.SetCaption$1(Result,Caption$11);
      TW3FlexControl.SetStretch(Result,true);
      TW3CustomControl._setMouseClick(Result,function (Sender) {
         if (Self.OnOptionSelected) {
            Self.OnOptionSelected(Self,Result.TagValue);
         }
      });
      return Result
   }
   /// procedure TW3Dialog.FinalizeObject()
   ///  [line: 867, column: 21, file: SmartCL.Dialogs]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FButtonRow);
      TObject.Free(Self.Fheader);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3Dialog.InitializeObject()
   ///  [line: 841, column: 21, file: SmartCL.Dialogs]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.Fheader = TW3TagContainer.Create$81$($New(TW3DialogHeader),Self);
      TW3MovableControl.SetVisible(Self.Fheader.FBackBtn,false);
      TW3MovableControl.SetVisible(Self.Fheader.FNextBtn,false);
      Self.FButtonRow = TW3TagContainer.Create$81$($New(TW3DialogButtonPanel),Self);
      TW3FlexContainer.SetFlexAlignContent(Self.FButtonRow,4);
      TW3FlexContainer.SetFlexAlignItems(Self.FButtonRow,1);
      Self.FGlyph = TW3TagContainer.Create$81$($New(TW3DialogGlyph),Self);
      TW3GlyphContainer.SetGlyphType(Self.FGlyph,1);
      TW3GlyphContainer.SetAwesome(Self.FGlyph,"fa-5x fa-exclamation-triangle");
      Self.FText$1 = TW3TagContainer.Create$81$($New(TW3Label),Self);
      TW3Label.SetVAlign(Self.FText$1,1);
      TW3Label.SetHAlign$(Self.FText$1,1);
      TW3Label.SetWordWrap$(Self.FText$1,true);
      TW3CustomFont.SetColor$2$(TW3CustomControl.a$62(Self.FText$1),16777215);
      TW3Label.SetCaption$2$(Self.FText$1,"<u><b>Dear Customer<\/b><\/u><br><br>\r\n  You are about to delete the internet.<br>\r\n  Are you sure you wish to destroy civilization?");
   }
   /// procedure TW3Dialog.Resize()
   ///  [line: 936, column: 21, file: SmartCL.Dialogs]
   ,Resize:function(Self) {
      var LBounds = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         hd = 0,
         wd = 0,
         dy$3 = 0,
         dx$3 = 0;
      TW3MovableControl.Resize(Self);
      if (Self.FButtonRow !== null) {
         if (Self.Fheader !== null) {
            if (Self.FGlyph !== null) {
               LBounds = TW3MovableControl.ClientRect$(Self);
               hd = TRect$Height$5(LBounds);
               wd = LBounds.Bottom$1-TW3MovableControl.GetHeight$(Self.FButtonRow);
               TW3MovableControl.SetBounds$(Self.FButtonRow,LBounds.Left$3,wd,TRect$Width$6(LBounds),TW3MovableControl.GetHeight$(Self.FButtonRow));
               (hd-= TW3MovableControl.GetHeight$(Self.FButtonRow));
               TW3MovableControl.SetBounds$(Self.Fheader,LBounds.Left$3,LBounds.Top$3,TRect$Width$6(LBounds),TW3MovableControl.GetHeight$(Self.Fheader));
               (hd-= TW3MovableControl.GetHeight$(Self.Fheader));
               dy$3 = LBounds.Top$3+TW3MovableControl.GetHeight$(Self.Fheader)+4;
               (hd-= 8);
               TW3MovableControl.SetBounds$(Self.FGlyph,LBounds.Left$3+4,dy$3,88,hd);
               dx$3 = LBounds.Left$3+TW3MovableControl.GetWidth$(Self.FGlyph)+8;
               TW3MovableControl.SetBounds$(Self.FText$1,dx$3,dy$3,TRect$Width$6(LBounds)-dx$3-4,hd);
            }
         }
      }
   }
   /// procedure TW3Dialog.SetOptions(const NewOptions: TW3DialogOption)
   ///  [line: 874, column: 21, file: SmartCL.Dialogs]
   ,SetOptions:function(Self, NewOptions) {
      TW3FlexContainer.Clear$12(Self.FButtonRow);
      switch (NewOptions) {
         case 0 :
            TW3Dialog.AddButton(Self,"Yes",0);
            break;
         case 1 :
            TW3Dialog.AddButton(Self,"No",1);
            break;
         case 2 :
            TW3Dialog.AddButton(Self,"Yes",0);
            TW3Dialog.AddButton(Self,"No",1);
            break;
         case 4 :
            TW3Dialog.AddButton(Self,"Cancel",2);
            break;
         case 3 :
            TW3Dialog.AddButton(Self,"OK",2);
            break;
         case 5 :
            TW3Dialog.AddButton(Self,"OK",2);
            TW3Dialog.AddButton(Self,"Cancel",3);
            break;
         case 6 :
            TW3Dialog.AddButton(Self,"Yes",0);
            TW3Dialog.AddButton(Self,"No",1);
            TW3Dialog.AddButton(Self,"Cancel",3);
            break;
      }
   }
   /// procedure TW3Dialog.StyleTagObject()
   ///  [line: 927, column: 21, file: SmartCL.Dialogs]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,1);
      TW3CustomControl.SetBorderType(Self,12);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Dialog.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// EW3DialogControl = class (EW3Exception)
///  [line: 43, column: 3, file: SmartCL.Dialogs]
var EW3DialogControl = {
   $ClassName:"EW3DialogControl",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// EW3DialogContainer = class (EW3Exception)
///  [line: 42, column: 3, file: SmartCL.Dialogs]
var EW3DialogContainer = {
   $ClassName:"EW3DialogContainer",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3ThemeFontSize enumeration
///  [line: 86, column: 3, file: SmartCL.Theme]
var TW3ThemeFontSize = [ "tfsSmall", "tfsNormal", "tfsMedium", "tfsLarge" ];
/// TW3ThemeFontInfo = record
///  [line: 93, column: 3, file: SmartCL.Theme]
function Copy$TW3ThemeFontInfo(s,d) {
   return d;
}
function Clone$TW3ThemeFontInfo($) {
   return {

   }
}
/// TW3ThemeBorder enumeration
///  [line: 48, column: 3, file: SmartCL.Theme]
var TW3ThemeBorder = [ "btNone", "btFlatBorder", "btControlBorder", "btContainerBorder", "btButtonBorder", "btDialogButtonBorder", "btDecorativeBorder", "btEditBorder", "btListBorder", "btToolContainerBorder", "btToolButtonBorder", "btToolControlBorder", "btToolControlFlatBorder", "btListMenuBorder", "btLightBorderTop", "btLightBorderBottom", "btLightBorderLeft", "btLightBorderRight", "btLightBorderHoriz", "btLightBorderVert" ];
/// TW3ThemeBackground enumeration
///  [line: 26, column: 3, file: SmartCL.Theme]
var TW3ThemeBackground = [ "bsNone", "bsDisplayBackground", "bsControlBackground", "bsContainerBackground", "bsListBackground", "bsListItemBackground", "bsDecorativeListItemBackground", "bsListItemSelectedBackground", "bsEditBackground", "bsButtonBackground", "bsDialogButtonBackground", "bsDecorativeBackground", "bsDecorativeInvertBackground", "bsDecorativeDarkBackground", "bsToolContainerBackground", "bsToolButtonBackground", "bsToolControlBackground", "bsTransparentBackground", "bsErrorBackground" ];
/// TW3Theme = class (TObject)
///  [line: 100, column: 3, file: SmartCL.Theme]
var TW3Theme = {
   $ClassName:"TW3Theme",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TW3Theme.GetClassNameForBackgroundType(const BackgroundType: TW3ThemeBackground) : String
   ///  [line: 320, column: 25, file: SmartCL.Theme]
   ,GetClassNameForBackgroundType:function(BackgroundType$1) {
      return _BGTypeToName[BackgroundType$1];
   }
   /// function TW3Theme.GetClassNameForBorderType(const BorderType: TW3ThemeBorder) : String
   ///  [line: 325, column: 25, file: SmartCL.Theme]
   ,GetClassNameForBorderType:function(BorderType$1) {
      return _BRTypeToName[BorderType$1];
   }
   ,Destroy:TObject.Destroy
};
function SetupThemeLookupTables() {
   BackgroundNameLUT = TW3CustomDictionary.Create$126($New(TW3IntDictionary));
   BorderNameLUT = TW3CustomDictionary.Create$126($New(TW3IntDictionary));
   TW3IntDictionary.a$90(BackgroundNameLUT,"none",0);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3DisplayBackground",1);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ControlBackground",2);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ContainerBackground",3);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ListBackground",4);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ListItemBackground",5);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3DecorativeListItemBackground",6);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ListItemSelectedBackground",7);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ErrorBackground",18);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3EditBackground",8);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ButtonBackground",9);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3DialogButtonBackground",10);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3DecorativeBackground",11);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3DecorativeBackgroundInvert",12);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3DecorativeDarkBackground",13);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ToolContainerBackground",14);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ToolButtonBackground",15);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3ToolControlBackground",16);
   TW3IntDictionary.a$90(BackgroundNameLUT,"TW3TransparentBackground",17);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3FlatBorder",1);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ControlBorder",2);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ContainerBorder",3);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ButtonBorder",4);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3DialogButtonBorder",5);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3DecorativeBorder",6);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3EditBorder",7);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ListBorder",8);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ToolContainerBorder",9);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ToolButtonBorder",10);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ToolControlBorder",11);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ToolFlatBorder",12);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3ListMenuBorder",13);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3LightBorderTop",14);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3LightBorderBottom",15);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3LightBorderLeft",16);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3LightBorderRight",17);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3LightBorderHoriz",18);
   TW3IntDictionary.a$90(BorderNameLUT,"TW3LightBorderVert",19);
};
/// TW3FlexWrap enumeration
///  [line: 57, column: 3, file: SmartCL.Flexbox]
var TW3FlexWrap = [ "fwNoWrap", "fwWrap" ];
/// TW3FlexDirection enumeration
///  [line: 49, column: 3, file: SmartCL.Flexbox]
var TW3FlexDirection = [ "fdRow", "fdColumn" ];
/// TW3FlexAlignItems enumeration
///  [line: 39, column: 3, file: SmartCL.Flexbox]
var TW3FlexAlignItems = [ "faiNone", "faiStretch", "faiCenter", "faiFlexStart", "faiFlexEnd", "faiBaseline" ];
/// TW3FlexAlignContent enumeration
///  [line: 30, column: 3, file: SmartCL.Flexbox]
var TW3FlexAlignContent = [ "facNone", "facLeft", "facCenter", "facRight", "facSpaceBetween", "facSpaceAround" ];
/// TW3SystemEventHandler = class (TW3OwnedObject)
///  [line: 39, column: 3, file: System.Events]
var TW3SystemEventHandler = {
   $ClassName:"TW3SystemEventHandler",$Parent:TW3OwnedObject
   ,$Init:function ($) {
      TW3OwnedObject.$Init($);
      $.OnEvent = null;
      $.FAttached = false;
      $.FEventName = "";
   }
   /// procedure TW3SystemEventHandler.Attach(NameOfEvent: String)
   ///  [line: 78, column: 33, file: System.Events]
   ,Attach:function(Self, NameOfEvent) {
      if (Self.FAttached) {
         TW3SystemEventHandler.Detach(Self);
      }
      NameOfEvent = Trim$_String_(NameOfEvent);
      if (NameOfEvent.length > 0) {
         Self.FEventName = NameOfEvent;
         try {
            TW3SystemEventHandler.DoAttach$(Self);
         } catch ($e) {
            var e$1 = $W($e);
            Self.FEventName = "";
            throw EW3Exception.CreateFmt($New(EW3SystemEventError),"Failed to detach event, system threw exception %s with message [%s] error",[TObject.ClassName(e$1.ClassType), e$1.FMessage]);
         }
      } else {
         throw Exception.Create($New(Exception),"Failed to attach event, invalid event-name error");
      }
   }
   /// destructor TW3SystemEventHandler.Destroy()
   ///  [line: 65, column: 34, file: System.Events]
   ,Destroy:function(Self) {
      if (Self.FAttached) {
         try {
            TW3SystemEventHandler.Detach(Self);
         } catch ($e) {
            var e$1 = $W($e);
            /* null */
         }
      }
      TObject.Destroy(Self);
   }
   /// procedure TW3SystemEventHandler.Detach()
   ///  [line: 108, column: 33, file: System.Events]
   ,Detach:function(Self) {
      if (Self.FAttached) {
         try {
            try {
               TW3SystemEventHandler.DoDetach$(Self);
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.CreateFmt($New(EW3SystemEventError),"Failed to detach event, system threw exception %s with message [%s] error",[TObject.ClassName(e$1.ClassType), e$1.FMessage]);
            }
         } finally {
            Self.FEventName = "";
         }
      } else {
         throw Exception.Create($New(EW3SystemEventError),"Failed to detach event, not attached error");
      }
   }
   // IGNORED: TW3SystemEventHandler.DoHandleEvent
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3OwnedObject.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,DoAttach$:function($){return $.ClassType.DoAttach($)}
   ,DoDetach$:function($){return $.ClassType.DoDetach($)}
   // IGNORED: TW3SystemEventHandler.DoHandleEvent
};
TW3SystemEventHandler.$Intf={
   IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// EW3SystemEventError = class (EW3Exception)
///  [line: 37, column: 3, file: System.Events]
var EW3SystemEventError = {
   $ClassName:"EW3SystemEventError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3GlyphType enumeration
///  [line: 28, column: 3, file: SmartCL.GlyphContainer]
var TW3GlyphType = [ "lgtPicture", "lgtFontAwesome" ];
/// TW3HtmlElement = class (TObject)
///  [line: 266, column: 3, file: SmartCL.ControlWrapper]
var TW3HtmlElement = {
   $ClassName:"TW3HtmlElement",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHandle$14 = undefined;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 333, column: 21, file: SmartCL.ControlWrapper]
   ,a$253:function(Self, Value$5) {
      Self.FHandle$14.scrollHeight = TW3HtmlElement.IntToPixels(Self,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 332, column: 21, file: SmartCL.ControlWrapper]
   ,a$252:function(Self) {
      var Result = 0;
      Result = TW3HtmlElement.ValueToInt(Self,Self.FHandle$14.scrollHeight);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 329, column: 21, file: SmartCL.ControlWrapper]
   ,a$251:function(Self, Value$5) {
      Self.FHandle$14.scrollWidth = TW3HtmlElement.IntToPixels(Self,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 328, column: 21, file: SmartCL.ControlWrapper]
   ,a$250:function(Self) {
      var Result = 0;
      Result = TW3HtmlElement.ValueToInt(Self,Self.FHandle$14.scrollWidth);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 291, column: 21, file: SmartCL.ControlWrapper]
   ,a$233:function(Self, Value$5) {
      Self.FHandle$14.height = TW3HtmlElement.IntToPixels(Self,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 290, column: 20, file: SmartCL.ControlWrapper]
   ,a$232:function(Self) {
      var Result = 0;
      Result = TW3HtmlElement.ValueToInt(Self,Self.FHandle$14.height);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 287, column: 21, file: SmartCL.ControlWrapper]
   ,a$231:function(Self, Value$5) {
      Self.FHandle$14.width = TW3HtmlElement.IntToPixels(Self,Value$5);
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 286, column: 20, file: SmartCL.ControlWrapper]
   ,a$230:function(Self) {
      var Result = 0;
      Result = TW3HtmlElement.ValueToInt(Self,Self.FHandle$14.width);
      return Result
   }
   /// constructor TW3HtmlElement.Create(TagHandle: TControlHandle)
   ///  [line: 423, column: 28, file: SmartCL.ControlWrapper]
   ,Create$144:function(Self, TagHandle) {
      TObject.Create(Self);
      Self.FHandle$14 = TagHandle;
      return Self
   }
   /// constructor TW3HtmlElement.Create(Parent: TControlHandle; TagId: String)
   ///  [line: 429, column: 28, file: SmartCL.ControlWrapper]
   ,Create$143:function(Self, Parent$4, TagId$2) {
      TObject.Create(Self);
      Self.FHandle$14 = TControlHandleHelper$GetChildById(Parent$4,TagId$2);
      return Self
   }
   /// constructor TW3HtmlElement.Create(TagId: String)
   ///  [line: 415, column: 28, file: SmartCL.ControlWrapper]
   ,Create$142:function(Self, TagId$2) {
      TObject.Create(Self);
      Self.FHandle$14 = document.body.querySelector("#" + Trim$_String_(TagId$2));
      if (!(TControlHandleHelper$Valid$3(Self.FHandle$14))) {
         throw EW3Exception.CreateFmt($New(EW3Exception),"Failed to locate selector [%s] error",[TagId$2]);
      }
      return Self
   }
   /// function TW3HtmlElement.IntToPixels(const Value: Integer) : String
   ///  [line: 462, column: 25, file: SmartCL.ControlWrapper]
   ,IntToPixels:function(Self, Value$5) {
      return Value$5.toString() + "px";
   }
   /// procedure TW3HtmlElement.MoveTo(const NewLeft: Integer; const NewTop: Integer)
   ///  [line: 488, column: 26, file: SmartCL.ControlWrapper]
   ,MoveTo$3:function(Self, NewLeft, NewTop) {
      Self.FHandle$14.style["left"] = TW3HtmlElement.IntToPixels(Self,NewLeft);
      Self.FHandle$14.style["top"] = TW3HtmlElement.IntToPixels(Self,NewTop);
   }
   /// function TW3HtmlElement.QuerySelector(const Id: String) : TControlHandle
   ///  [line: 527, column: 31, file: SmartCL.ControlWrapper]
   ,QuerySelector:function(Self, Id$2) {
      return document.body.querySelector("#" + Trim$_String_(Id$2));
   }
   /// function TW3HtmlElement.ValueToInt(const Value: Variant) : Integer
   ///  [line: 467, column: 25, file: SmartCL.ControlWrapper]
   ,ValueToInt:function(Self, Value$5) {
      var Result = 0;
      if (Value$5)
    {
      if (typeof(Value$5) === "number") {
        Result = Value$5
      } else {
        if (typeof(Value$5) === "string")
        {
          Value$5 = parseInt(Value$5);
          if (!isNaN(Value$5))
            Result = Value$5;
        }
      }
    } else {
      Result = 0;
    }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TW3ImageFittingStyle enumeration
///  [line: 34, column: 3, file: SmartCL.Controls.Image]
var TW3ImageFittingStyle = [ "fsNone", "fsFill", "fsContain", "fsCover", "fsScaleDown" ];
/// TW3Image = class (TW3CustomControl)
///  [line: 42, column: 3, file: SmartCL.Controls.Image]
var TW3Image = {
   $ClassName:"TW3Image",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FCallbacks = [];
      $.FOnLoad = null;
   }
   /// procedure TW3Image.CBOnLoad()
   ///  [line: 311, column: 20, file: SmartCL.Controls.Image]
   ,CBOnLoad:function(Self) {
      var x$42 = 0;
      if (Self.FCallbacks.length > 0) {
         try {
            var $temp56;
            for(x$42=0,$temp56=Self.FCallbacks.length;x$42<$temp56;x$42++) {
               try {
                  Self.FCallbacks[x$42](true);
               } catch ($e) {
                  /* null */
               }
            }
         } finally {
            Self.FCallbacks.length=0;
         }
      }
      if (Self.FOnLoad) {
         Self.FOnLoad(Self);
      }
   }
   /// function TW3Image.GetComplete() : Boolean
   ///  [line: 422, column: 19, file: SmartCL.Controls.Image]
   ,GetComplete:function(Self) {
      var Result = false;
      if (Self.FHandle$4) {
         if (Self.FHandle$4.complete) {
            Result = $VarToBool(Self.FHandle$4.complete);
         }
      }
      return Result
   }
   /// function TW3Image.GetCrossOrigin() : String
   ///  [line: 564, column: 19, file: SmartCL.Controls.Image]
   ,GetCrossOrigin:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = TVariant.AsString(Self.FHandle$4.crossOrigin);
      }
      return Result
   }
   /// function TW3Image.GetDraggable() : Boolean
   ///  [line: 333, column: 19, file: SmartCL.Controls.Image]
   ,GetDraggable:function(Self) {
      var Result = false;
      if (Self.FHandle$4) {
         Result = TVariant.AsBool(Self.FHandle$4.draggable);
      } else {
         Result = false;
      }
      return Result
   }
   /// function TW3Image.GetEnabled() : Boolean
   ///  [line: 447, column: 19, file: SmartCL.Controls.Image]
   ,GetEnabled$1:function(Self) {
      return true;
   }
   /// function TW3Image.GetFit() : TW3ImageFittingStyle
   ///  [line: 381, column: 19, file: SmartCL.Controls.Image]
   ,GetFit:function(Self) {
      var Result = 0;
      var LValue = undefined;
      Result = 0;
      if (TControlHandleHelper$Valid$3(Self.FHandle$4)) {
         LValue = Self.FHandle$4.style["object-fit"];
         if (TW3VariantHelper$Valid$4(LValue)) {
            if (TVariant.IsString(LValue)) {
               {var $temp57 = (String(LValue)).toLocaleLowerCase();
                  if ($temp57=="none") {
                     return Result;
                  }
                   else if ($temp57=="") {
                     return Result;
                  }
                   else if ($temp57=="fill") {
                     Result = 1;
                  }
                   else if ($temp57=="contain") {
                     Result = 2;
                  }
                   else if ($temp57=="cover") {
                     Result = 3;
                  }
                   else if ($temp57=="scale-down") {
                     Result = 4;
                  }
               }
            }
         }
      }
      return Result
   }
   /// function TW3Image.GetHeight() : Integer
   ///  [line: 482, column: 19, file: SmartCL.Controls.Image]
   ,GetHeight:function(Self) {
      var Result = 0;
      Result = TW3MovableControl.GetHeight(Self);
      if (!Result) {
         if (Self.FHandle$4) {
            Result = $VarToInt(Self.FHandle$4.height,"");
         }
      }
      return Result
   }
   /// function TW3Image.GetPixelheight() : Integer
   ///  [line: 460, column: 20, file: SmartCL.Controls.Image]
   ,GetPixelheight:function(Self) {
      var Result = 0;
      if (TW3Image.GetReady(Self)) {
         Result = $VarToInt(Self.FHandle$4.naturalHeight,"");
      }
      return Result
   }
   /// function TW3Image.GetPixelWidth() : Integer
   ///  [line: 454, column: 19, file: SmartCL.Controls.Image]
   ,GetPixelWidth:function(Self) {
      var Result = 0;
      if (TW3Image.GetReady(Self)) {
         Result = $VarToInt(Self.FHandle$4.naturalWidth,"");
      }
      return Result
   }
   /// function TW3Image.GetReady() : Boolean
   ///  [line: 431, column: 19, file: SmartCL.Controls.Image]
   ,GetReady:function(Self) {
      var Result = false;
      if (Self.FHandle$4) {
         Result = TW3Image.GetComplete(Self) && Self.FHandle$4.naturalWidth > 0 && Self.FHandle$4.naturalHeight > 0;
      }
      return Result
   }
   /// function TW3Image.GetRefPolicy() : String
   ///  [line: 552, column: 20, file: SmartCL.Controls.Image]
   ,GetRefPolicy:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = TVariant.AsString(Self.FHandle$4.referrerpolicy);
      }
      return Result
   }
   /// function TW3Image.GetSrc() : String
   ///  [line: 441, column: 19, file: SmartCL.Controls.Image]
   ,GetSrc:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = String(Self.FHandle$4.src);
      }
      return Result
   }
   /// function TW3Image.GetWidth() : Integer
   ///  [line: 466, column: 19, file: SmartCL.Controls.Image]
   ,GetWidth:function(Self) {
      var Result = 0;
      Result = TW3MovableControl.GetWidth(Self);
      if (Result < 1) {
         if (Self.FHandle$4) {
            Result = $VarToInt(Self.FHandle$4.width,"");
         }
      }
      return Result
   }
   /// procedure TW3Image.InitializeObject()
   ///  [line: 305, column: 20, file: SmartCL.Controls.Image]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FHandle$4.onload = $Event0(Self,TW3Image.CBOnLoad);
   }
   /// function TW3Image.makeElementTagObj() : THandle
   ///  [line: 376, column: 19, file: SmartCL.Controls.Image]
   ,MakeElementTagObj:function(Self) {
      return w3_CreateHtmlElement("img");
   }
   /// procedure TW3Image.SetCrossOrigin(NewOrigin: String)
   ///  [line: 570, column: 20, file: SmartCL.Controls.Image]
   ,SetCrossOrigin:function(Self, NewOrigin) {
      if (Self.FHandle$4) {
         Self.FHandle$4.crossOrigin = NewOrigin;
      }
   }
   /// procedure TW3Image.SetDraggable(const NewValue: Boolean)
   ///  [line: 341, column: 20, file: SmartCL.Controls.Image]
   ,SetDraggable:function(Self, NewValue) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHandle$4) {
            Self.FHandle$4.draggable = NewValue;
         }
      }
   }
   /// procedure TW3Image.SetFit(const Value: TW3ImageFittingStyle)
   ///  [line: 405, column: 20, file: SmartCL.Controls.Image]
   ,SetFit:function(Self, Value$5) {
      var LData = "";
      if (TControlHandleHelper$Valid$3(Self.FHandle$4)) {
         LData = "none";
         switch (Value$5) {
            case 1 :
               LData = "fill";
               break;
            case 2 :
               LData = "contain";
               break;
            case 3 :
               LData = "cover";
               break;
            case 4 :
               LData = "scale-down";
               break;
         }
         Self.FHandle$4.style["object-fit"] = LData;
      }
   }
   /// procedure TW3Image.SetOnLoad(aValue: TNotifyEvent)
   ///  [line: 364, column: 20, file: SmartCL.Controls.Image]
   ,SetOnLoad:function(Self, aValue) {
      Self.FOnLoad = aValue;
   }
   /// procedure TW3Image.SetRefPolicy(NewPolicy: String)
   ///  [line: 558, column: 20, file: SmartCL.Controls.Image]
   ,SetRefPolicy:function(Self, NewPolicy) {
      if (Self.FHandle$4) {
         Self.FHandle$4.referrerpolicy = NewPolicy;
      }
   }
   /// procedure TW3Image.SetSrc(Value: String)
   ///  [line: 576, column: 20, file: SmartCL.Controls.Image]
   ,SetSrc:function(Self, Value$5) {
      if (Value$5 != TW3Image.GetSrc(Self)) {
         w3_setAttrib(Self.FHandle$4,"src",Value$5);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight$:function($){return $.ClassType.GetHeight($)}
   ,GetWidth$:function($){return $.ClassType.GetWidth($)}
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1$:function($){return $.ClassType.GetEnabled$1($)}
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Image.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TBinaryData = class (TAllocation)
///  [line: 126, column: 3, file: System.Memory.Buffer]
var TBinaryData = {
   $ClassName:"TBinaryData",$Parent:TAllocation
   ,$Init:function ($) {
      TAllocation.$Init($);
      $.FDataView = null;
   }
   /// procedure TBinaryData.AppendBuffer(const Raw: TMemoryHandle)
   ///  [line: 950, column: 23, file: System.Memory.Buffer]
   ,AppendBuffer:function(Self, Raw) {
      var mOffset = 0;
      if (Raw) {
         if (Raw.length > 0) {
            mOffset = TAllocation.GetSize$3(Self);
            TAllocation.Grow(Self,Raw.length);
            TBinaryData.Write$6(Self,mOffset,Raw);
         }
      } else {
         throw Exception.Create($New(EBinaryData),"Append failed, invalid source handle error");
      }
   }
   /// procedure TBinaryData.AppendBytes(const Bytes: TByteArray)
   ///  [line: 1019, column: 23, file: System.Memory.Buffer]
   ,AppendBytes:function(Self, Bytes$3) {
      var mLen = 0,
         mOffset = 0;
      mLen = Bytes$3.length;
      if (mLen > 0) {
         mOffset = TAllocation.GetSize$3(Self);
         TAllocation.Grow(Self,mLen);
         TAllocation.GetHandle(Self).set(Bytes$3,mOffset);
      }
   }
   /// procedure TBinaryData.AppendFloat32(const Value: float32)
   ///  [line: 931, column: 23, file: System.Memory.Buffer]
   ,AppendFloat32:function(Self, Value$5) {
      var mOffset = 0;
      mOffset = TAllocation.GetSize$3(Self);
      TAllocation.Grow(Self,TDatatype.SizeOfType(TDatatype,8));
      TBinaryData.WriteFloat32(Self,mOffset,Value$5);
   }
   /// procedure TBinaryData.AppendFloat64(const Value: float64)
   ///  [line: 940, column: 23, file: System.Memory.Buffer]
   ,AppendFloat64:function(Self, Value$5) {
      var mOffset = 0;
      mOffset = TAllocation.GetSize$3(Self);
      TAllocation.Grow(Self,TDatatype.SizeOfType(TDatatype,9));
      TBinaryData.WriteFloat64(Self,mOffset,Value$5);
   }
   /// procedure TBinaryData.AppendMemory(const Buffer: TBinaryData; const ReleaseBufferOnExit: Boolean)
   ///  [line: 967, column: 23, file: System.Memory.Buffer]
   ,AppendMemory:function(Self, Buffer$3, ReleaseBufferOnExit) {
      var mOffset = 0;
      if (Buffer$3 !== null) {
         try {
            if (TAllocation.GetSize$3(Buffer$3) > 0) {
               mOffset = TAllocation.GetSize$3(Self);
               TAllocation.Grow(Self,TAllocation.GetSize$3(Buffer$3));
               TBinaryData.Write$5(Self,mOffset,Buffer$3);
            }
         } finally {
            if (ReleaseBufferOnExit) {
               TObject.Free(Buffer$3);
            }
         }
      } else {
         throw Exception.Create($New(EBinaryData),"Append failed, Invalid source buffer error");
      }
   }
   /// procedure TBinaryData.AppendStr(const Text: String)
   ///  [line: 990, column: 23, file: System.Memory.Buffer]
   ,AppendStr:function(Self, Text$10) {
      var mLen = 0,
         x$42 = 0,
         mOffset = 0,
         LTemp = [];
      mLen = Text$10.length;
      if (mLen > 0) {
         mOffset = TAllocation.GetSize$3(Self);
         LTemp = TString.EncodeUTF8(TString,Text$10);
         TAllocation.Grow(Self,LTemp.length);
         var $temp58;
         for(x$42=0,$temp58=LTemp.length;x$42<$temp58;x$42++) {
            Self.FDataView.setInt8(mOffset,LTemp[x$42]);
            ++mOffset;
            console.log( LTemp[x$42] );
         }
      }
   }
   /// function TBinaryData.Clone() : TBinaryData
   ///  [line: 897, column: 22, file: System.Memory.Buffer]
   ,Clone$1:function(Self) {
      return TBinaryData.Create$145($New(TBinaryData),TBinaryData.ToTypedArray(Self));
   }
   /// procedure TBinaryData.CopyFrom(const Buffer: TBinaryData; const Offset: Integer; const ByteLen: Integer)
   ///  [line: 902, column: 23, file: System.Memory.Buffer]
   ,CopyFrom$2:function(Self, Buffer$3, Offset$5, ByteLen) {
      if (Buffer$3 !== null) {
         TBinaryData.CopyFromMemory(Self,TAllocation.GetHandle(Buffer$3),Offset$5,ByteLen);
      } else {
         throw Exception.Create($New(EBinaryData),"CopyFrom failed, source instance was NIL error");
      }
   }
   /// procedure TBinaryData.CopyFromMemory(const Raw: TMemoryHandle; Offset: Integer; ByteLen: Integer)
   ///  [line: 913, column: 23, file: System.Memory.Buffer]
   ,CopyFromMemory:function(Self, Raw, Offset$5, ByteLen) {
      if (TMemoryHandleHelper$Valid$7(Raw)) {
         if (TBinaryData.OffsetInRange(Self,Offset$5)) {
            if (ByteLen > 0) {
               TMarshal.Move$1(TMarshal,Raw,0,TAllocation.GetHandle(Self),Offset$5,ByteLen);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EBinaryData),"Cut memory failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
         }
      } else {
         throw Exception.Create($New(EBinaryData),"CopyFrom failed, invalid source handle error");
      }
   }
   /// constructor TBinaryData.Create(aHandle: TMemoryHandle)
   ///  [line: 239, column: 25, file: System.Memory.Buffer]
   ,Create$145:function(Self, aHandle) {
      var LSignature;
      TAllocation.Create$78(Self);
      if (TMemoryHandleHelper$Defined(aHandle) && TMemoryHandleHelper$Valid$7(aHandle)) {
         if (aHandle.toString) {
            LSignature = aHandle.toString();
            if (SameText(String(LSignature),"[object Uint8Array]") || SameText(String(LSignature),"[object Uint8ClampedArray]")) {
               TAllocation.Allocate$1(Self,$VarToInt(aHandle.length,""));
               TMarshal.Move$1(TMarshal,aHandle,0,TAllocation.GetHandle(Self),0,$VarToInt(aHandle.length,""));
            } else {
               throw Exception.Create($New(EBinaryData),"Invalid buffer type, expected handle of type Uint8[clamped]Array");
            }
         } else {
            throw Exception.Create($New(EBinaryData),"Invalid buffer type, expected handle of type Uint8[clamped]Array");
         }
      }
      return Self
   }
   /// function TBinaryData.CutBinaryData(Offset: Integer; ByteLen: Integer) : TBinaryData
   ///  [line: 878, column: 22, file: System.Memory.Buffer]
   ,CutBinaryData:function(Self, Offset$5, ByteLen) {
      var Result = null;
      var mNewBuffer = undefined;
      if (ByteLen > 0) {
         if (TBinaryData.OffsetInRange(Self,Offset$5)) {
            mNewBuffer = TAllocation.GetHandle(Self).subarray(Offset$5,Offset$5+ByteLen-1);
            Result = TBinaryData.Create$145($New(TBinaryData),mNewBuffer);
         } else {
            throw EW3Exception.CreateFmt($New(EBinaryData),"Cut memory failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
         }
      } else {
         Result = TBinaryData.Create$145($New(TBinaryData),null);
      }
      return Result
   }
   /// function TBinaryData.CutStream(const Offset: Integer; const ByteLen: Integer) : TStream
   ///  [line: 851, column: 22, file: System.Memory.Buffer]
   ,CutStream:function(Self, Offset$5, ByteLen) {
      return TBinaryData.ToStream(TBinaryData.CutBinaryData(Self,Offset$5,ByteLen));
   }
   /// function TBinaryData.CutTypedArray(Offset: Integer; ByteLen: Integer) : TMemoryHandle
   ///  [line: 857, column: 22, file: System.Memory.Buffer]
   ,CutTypedArray:function(Self, Offset$5, ByteLen) {
      var Result = undefined;
      var mTemp$1 = null;
      Result = null;
      if (ByteLen > 0) {
         if (TBinaryData.OffsetInRange(Self,Offset$5)) {
            if (TAllocation.GetSize$3(Self)-Offset$5 > 0) {
               mTemp$1 = Self.FDataView.buffer.slice(Offset$5,Offset$5+ByteLen);
               Result = new Uint8ClampedArray(mTemp$1);
            }
         }
      }
      return Result
   }
   /// procedure TBinaryData.FromBase64(FileData: String)
   ///  [line: 467, column: 23, file: System.Memory.Buffer]
   ,FromBase64:function(Self, FileData) {
      var mRaw$2 = "",
         x$42 = 0;
      TAllocation.Release$2(Self);
      if (FileData.length > 0) {
         mRaw$2 = atob(FileData);
         if (mRaw$2.length > 0) {
            TAllocation.Allocate$1(Self,mRaw$2.length);
            var $temp59;
            for(x$42=0,$temp59=mRaw$2.length;x$42<$temp59;x$42++) {
               TBinaryData.SetByte(Self,x$42,TDatatype.CharToByte(TDatatype,mRaw$2.charAt(x$42-1)));
            }
         }
      }
   }
   /// function TBinaryData.GetBit(const bitIndex: Integer) : Boolean
   ///  [line: 320, column: 22, file: System.Memory.Buffer]
   ,GetBit$1:function(Self, bitIndex) {
      var Result = false;
      var mOffset = 0;
      mOffset = bitIndex>>>3;
      if (TBinaryData.OffsetInRange(Self,mOffset)) {
         Result = TBitAccess.Get(TBitAccess,bitIndex % 8,TBinaryData.GetByte(Self,mOffset));
      }
      return Result
   }
   /// function TBinaryData.GetBitCount() : Integer
   ///  [line: 277, column: 22, file: System.Memory.Buffer]
   ,GetBitCount:function(Self) {
      return TAllocation.GetSize$3(Self)<<3;
   }
   /// function TBinaryData.GetByte(const Index: Integer) : Byte
   ///  [line: 539, column: 22, file: System.Memory.Buffer]
   ,GetByte:function(Self, Index$6) {
      var Result = 0;
      if (TAllocation.GetHandle(Self)) {
         if (TBinaryData.OffsetInRange(Self,Index$6)) {
            Result = Self.FDataView.getUint8(Index$6);
         } else {
            throw EW3Exception.CreateFmt($New(EBinaryData),"invalid byte index, expected %d..%d, not %d",[0, TAllocation.GetHandle(Self).length-1, Index$6]);
         }
      }
      return Result
   }
   /// procedure TBinaryData.HandleAllocated()
   ///  [line: 267, column: 23, file: System.Memory.Buffer]
   ,HandleAllocated:function(Self) {
      var LRef = undefined;
      LRef = TAllocation.GetBufferHandle(Self);
      (Self.FDataView) = new DataView(LRef);
   }
   /// procedure TBinaryData.HandleReleased()
   ///  [line: 282, column: 23, file: System.Memory.Buffer]
   ,HandleReleased:function(Self) {
      Self.FDataView = null;
   }
   /// function TBinaryData.OffsetInRange(Offset: Integer) : Boolean
   ///  [line: 656, column: 22, file: System.Memory.Buffer]
   ,OffsetInRange:function(Self, Offset$5) {
      var Result = false;
      var mSize = 0;
      mSize = TAllocation.GetSize$3(Self);
      if (mSize > 0) {
         Result = Offset$5 >= 0 && Offset$5 <= mSize;
      } else {
         Result = (Offset$5==0);
      }
      return Result
   }
   /// function TBinaryData.ReadBool(Offset: Integer) : Boolean
   ///  [line: 648, column: 22, file: System.Memory.Buffer]
   ,ReadBool:function(Self, Offset$5) {
      var Result = false;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         Result = Self.FDataView.getUint8(Offset$5) > 0;
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),$R[37],[Offset$5, 0, TAllocation.GetSize$3(Self)-1]);
      }
      return Result
   }
   /// function TBinaryData.ReadBytes(Offset: Integer; ByteLen: Integer) : TByteArray
   ///  [line: 630, column: 22, file: System.Memory.Buffer]
   ,ReadBytes:function(Self, Offset$5, ByteLen) {
      var Result = [];
      var x$42 = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+ByteLen <= TAllocation.GetSize$3(Self)) {
            var $temp60;
            for(x$42=0,$temp60=ByteLen;x$42<$temp60;x$42++) {
               Result.push(Self.FDataView.getUint8(Offset$5+x$42));
            }
         } else {
            throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error");
         }
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),$R[37],[Offset$5, 0, TAllocation.GetSize$3(Self)-1]);
      }
      return Result
   }
   /// function TBinaryData.ReadFloat32(Offset: Integer) : Float
   ///  [line: 577, column: 22, file: System.Memory.Buffer]
   ,ReadFloat32:function(Self, Offset$5) {
      var Result = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+TDatatype.SizeOfType(TDatatype,8) <= TAllocation.GetSize$3(Self)) {
            Result = Self.FDataView.getFloat32(Offset$5,a$42);
         } else {
            throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error");
         }
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),$R[37],[Offset$5, 0, TAllocation.GetSize$3(Self)-1]);
      }
      return Result
   }
   /// function TBinaryData.ReadFloat64(Offset: Integer) : Float
   ///  [line: 563, column: 22, file: System.Memory.Buffer]
   ,ReadFloat64:function(Self, Offset$5) {
      var Result = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+TDatatype.SizeOfType(TDatatype,9) <= TAllocation.GetSize$3(Self)) {
            Result = Self.FDataView.getFloat64(Offset$5,a$42);
         } else {
            throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error");
         }
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),$R[37],[Offset$5, 0, TAllocation.GetSize$3(Self)-1]);
      }
      return Result
   }
   /// function TBinaryData.ReadInt(Offset: Integer) : Integer
   ///  [line: 591, column: 22, file: System.Memory.Buffer]
   ,ReadInt:function(Self, Offset$5) {
      var Result = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+TDatatype.SizeOfType(TDatatype,7) <= TAllocation.GetSize$3(Self)) {
            Result = Self.FDataView.getUint32(Offset$5,a$42);
         } else {
            throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error");
         }
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),$R[37],[Offset$5, 0, TAllocation.GetSize$3(Self)-1]);
      }
      return Result
   }
   /// function TBinaryData.ReadStr(Offset: Integer; ByteLen: Integer) : String
   ///  [line: 605, column: 22, file: System.Memory.Buffer]
   ,ReadStr$1:function(Self, Offset$5, ByteLen) {
      var Result = "";
      var x$42 = 0,
         LFetch = [];
      Result = "";
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+ByteLen <= TAllocation.GetSize$3(Self)) {
            var $temp61;
            for(x$42=0,$temp61=ByteLen;x$42<$temp61;x$42++) {
               LFetch.push(TBinaryData.GetByte(Self,Offset$5+x$42));
            }
            Result = TString.DecodeUTF8(TString,LFetch);
         } else {
            throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error");
         }
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),$R[37],[Offset$5, 0, TAllocation.GetSize$3(Self)-1]);
      }
      return Result
   }
   /// procedure TBinaryData.SetBit(const bitIndex: Integer; const value: Boolean)
   ///  [line: 314, column: 23, file: System.Memory.Buffer]
   ,SetBit$1:function(Self, bitIndex, value$16) {
      TBinaryData.SetByte(Self,bitIndex>>>3,TBitAccess.Set$3(TBitAccess,bitIndex % 8,TBinaryData.GetByte(Self,bitIndex>>>3),value$16));
   }
   /// procedure TBinaryData.SetByte(const Index: Integer; const Value: Byte)
   ///  [line: 551, column: 23, file: System.Memory.Buffer]
   ,SetByte:function(Self, Index$6, Value$5) {
      if (TAllocation.GetHandle(Self)) {
         if (TBinaryData.OffsetInRange(Self,Index$6)) {
            Self.FDataView.setUint8(Index$6,Value$5);
         } else {
            throw EW3Exception.CreateFmt($New(EBinaryData),"Invalid byte index, expected %d..%d, not %d",[0, TAllocation.GetHandle(Self).length-1, Index$6]);
         }
      }
   }
   /// function TBinaryData.ToBase64() : String
   ///  [line: 496, column: 22, file: System.Memory.Buffer]
   ,ToBase64:function(Self) {
      var Result = "";
      var mText = "",
         mRef = undefined,
         CHUNK_SIZE = 32768,
         index$1 = 0,
         mLength = 0,
         slice$4 = undefined;
      if (TAllocation.GetHandle(Self)) {
         mRef = TAllocation.GetHandle(Self);
         mLength = (mRef).length;
      while (index$1 < mLength)
      {
        slice$4 = (mRef).subarray(index$1, Math.min(index$1 + CHUNK_SIZE, mLength));
        mText += String.fromCharCode.apply(null, slice$4);
        index$1 += CHUNK_SIZE;
      }
      Result = btoa(mText);
      }
      return Result
   }
   /// function TBinaryData.ToBytes() : TByteArray
   ///  [line: 395, column: 22, file: System.Memory.Buffer]
   ,ToBytes:function(Self) {
      var Result = [];
      var x$42 = 0;
      if (TAllocation.GetSize$3(Self) > 0) {
         var $temp62;
         for(x$42=0,$temp62=TAllocation.GetSize$3(Self);x$42<$temp62;x$42++) {
            Result.push(TBinaryData.GetByte(Self,x$42));
         }
      } else {
         Result = [];
      }
      return Result
   }
   /// function TBinaryData.ToHexDump(BytesPerRow: Integer; Options: TBufferHexDumpOptions) : String
   ///  [line: 327, column: 22, file: System.Memory.Buffer]
   ,ToHexDump:function(Self, BytesPerRow, Options$3) {
      var Result = "";
      var x$42 = 0,
         y$32 = 0,
         mCount$1 = 0,
         mPad = 0,
         mDump = [];
      if (TAllocation.GetHandle(Self)) {
         BytesPerRow = TInteger.EnsureRange(BytesPerRow,2,64);
         mCount$1 = 0;
         Result = "";
         var $temp63;
         for(x$42=0,$temp63=TAllocation.GetSize$3(Self);x$42<$temp63;x$42++) {
            mDump.push(TBinaryData.GetByte(Self,x$42));
            if ($SetIn(Options$3,0,0,2)) {
               Result += "$" + IntToHex2(TBinaryData.GetByte(Self,x$42));
            } else {
               Result += IntToHex2(TBinaryData.GetByte(Self,x$42));
            }
            ++mCount$1;
            if (mCount$1 >= BytesPerRow) {
               if (mDump.length > 0) {
                  Result += " ";
                  var $temp64;
                  for(y$32=0,$temp64=mDump.length;y$32<$temp64;y$32++) {
                     if (function(v$){return ((v$>="A" && v$<="Z")||(v$>="a" && v$<="z")||(v$>="0" && v$<="9")||(v$==",")||(v$==";")||(v$=="<")||(v$==">")||(v$=="{")||(v$=="}")||(v$=="[")||(v$=="]")||(v$=="-")||(v$=="_")||(v$=="#")||(v$=="$")||(v$=="%")||(v$=="&")||(v$=="\/")||(v$=="(")||(v$==")")||(v$=="!")||(v$=="§")||(v$=="^")||(v$==":")||(v$==",")||(v$=="?"))}(TDatatype.ByteToChar(TDatatype,mDump[y$32]))) {
                        Result += TDatatype.ByteToChar(TDatatype,mDump[y$32]);
                     } else {
                        Result += "_";
                     }
                  }
               }
               mDump.length=0;
               Result += "\r\n";
               mCount$1 = 0;
            } else {
               Result += " ";
            }
         }
         if ($SetIn(Options$3,1,0,2) && mCount$1 > 0) {
            mPad = BytesPerRow-mCount$1;
            var $temp65;
            for(x$42=1,$temp65=mPad;x$42<=$temp65;x$42++) {
               Result += "--";
               if ($SetIn(Options$3,0,0,2)) {
                  Result += "-";
               }
               ++mCount$1;
               if (mCount$1 >= BytesPerRow) {
                  Result += "\r\n";
                  mCount$1 = 0;
               } else {
                  Result += " ";
               }
            }
         }
      }
      return Result
   }
   /// function TBinaryData.ToStream() : TStream
   ///  [line: 432, column: 22, file: System.Memory.Buffer]
   ,ToStream:function(Self) {
      var Result = null;
      Result = TMemoryStream.Create$72($New(TMemoryStream));
      try {
         TStream.Write(Result,TBinaryData.ToBytes(Self));
         TStream.SetPosition$(Result,0);
      } catch ($e) {
         var e$1 = $W($e);
         TObject.Free(Result);
         Result = null;
         throw $e;
      }
      return Result
   }
   /// function TBinaryData.ToString() : String
   ///  [line: 521, column: 22, file: System.Memory.Buffer]
   ,ToString$10:function(Self) {
      var Result = "";
      var mRef = undefined,
         CHUNK_SIZE = 32768;
      if (TAllocation.GetHandle(Self)) {
         mRef = TAllocation.GetHandle(Self);
         var c = [];
    for (var i=0; i < (mRef).length; i += CHUNK_SIZE) {
      c.push(String.fromCharCode.apply(null, (mRef).subarray(i, i + CHUNK_SIZE)));
    }
    Result = c.join("");
      }
      return Result
   }
   /// function TBinaryData.ToTypedArray() : TMemoryHandle
   ///  [line: 448, column: 22, file: System.Memory.Buffer]
   ,ToTypedArray:function(Self) {
      var Result = undefined;
      var mLen = 0,
         mTemp$1 = null;
      Result = null;
      mLen = TAllocation.GetSize$3(Self);
      if (mLen > 0) {
         mTemp$1 = Self.FDataView.buffer.slice(0,mLen);
         Result = new Uint8ClampedArray(mTemp$1);
      }
      return Result
   }
   /// procedure TBinaryData.Write(const Offset: Integer; const Data: String)
   ///  [line: 740, column: 23, file: System.Memory.Buffer]
   ,Write$7:function(Self, Offset$5, Data$8) {
      var mGrowth = 0,
         x$42 = 0,
         LTemp = [];
      if (Data$8.length > 0) {
         if (TBinaryData.OffsetInRange(Self,Offset$5)) {
            LTemp = TString.EncodeUTF8(TString,Data$8);
            if (Offset$5+LTemp.length > TAllocation.GetSize$3(Self)-1) {
               mGrowth = Offset$5+LTemp.length-TAllocation.GetSize$3(Self);
            }
            if (mGrowth > 0) {
               TAllocation.Grow(Self,mGrowth);
            }
            var $temp66;
            for(x$42=0,$temp66=LTemp.length;x$42<$temp66;x$42++) {
               Self.FDataView.setUint8(Offset$5+x$42,LTemp[x$42]);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EBinaryData),"Write string failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
         }
      }
   }
   /// procedure TBinaryData.Write(const Offset: Integer; const Data: TMemoryHandle)
   ///  [line: 715, column: 23, file: System.Memory.Buffer]
   ,Write$6:function(Self, Offset$5, Data$8) {
      var mGrowth = 0;
      if (Data$8) {
         if (Data$8.length > 0) {
            if (TBinaryData.OffsetInRange(Self,Offset$5)) {
               if (Offset$5+Data$8.length > TAllocation.GetSize$3(Self)-1) {
                  mGrowth = Offset$5+Data$8.length-TAllocation.GetSize$3(Self);
               }
               if (mGrowth > 0) {
                  TAllocation.Grow(Self,mGrowth);
               }
               TMarshal.Move$1(TMarshal,Data$8,0,TAllocation.GetHandle(Self),Offset$5,$VarToInt(TAllocation.GetHandle(Self).length,""));
            } else {
               throw EW3Exception.CreateFmt($New(EBinaryData),"Write typed-handle failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
            }
         }
      } else {
         throw Exception.Create($New(EBinaryData),"Write failed, invalid source handle error");
      }
   }
   /// procedure TBinaryData.Write(const Offset: Integer; const Data: TBinaryData)
   ///  [line: 688, column: 23, file: System.Memory.Buffer]
   ,Write$5:function(Self, Offset$5, Data$8) {
      var mGrowth = 0;
      if (Data$8 !== null) {
         if (TAllocation.GetSize$3(Data$8) > 0) {
            if (TBinaryData.OffsetInRange(Self,Offset$5)) {
               if (Offset$5+TAllocation.GetSize$3(Data$8) > TAllocation.GetSize$3(Self)-1) {
                  mGrowth = Offset$5+TAllocation.GetSize$3(Data$8)-TAllocation.GetSize$3(Self);
               }
               if (mGrowth > 0) {
                  TAllocation.Grow(Self,mGrowth);
               }
               TMarshal.Move$1(TMarshal,TAllocation.GetHandle(Data$8),0,TAllocation.GetHandle(Self),0,TAllocation.GetSize$3(Data$8));
            } else {
               throw EW3Exception.CreateFmt($New(EBinaryData),"Write string failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
            }
         }
      } else {
         throw Exception.Create($New(EBinaryData),"Write failed, invalid source buffer [nil] error");
      }
   }
   /// procedure TBinaryData.Write(const Offset: Integer; const Data: TByteArray)
   ///  [line: 668, column: 23, file: System.Memory.Buffer]
   ,Write$4:function(Self, Offset$5, Data$8) {
      var mGrowth = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Data$8.length > 0) {
            if (Offset$5+Data$8.length > TAllocation.GetSize$3(Self)-1) {
               mGrowth = Offset$5+Data$8.length-TAllocation.GetSize$3(Self);
            }
            if (mGrowth > 0) {
               TAllocation.Grow(Self,mGrowth);
            }
            TAllocation.GetHandle(Self).set(Data$8,Offset$5);
         }
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),"Write bytearray failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
      }
   }
   /// procedure TBinaryData.WriteFloat32(const Offset: Integer; const Data: float32)
   ///  [line: 798, column: 23, file: System.Memory.Buffer]
   ,WriteFloat32:function(Self, Offset$5, Data$8) {
      var mGrowth = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+TDatatype.SizeOfType(TDatatype,8) > TAllocation.GetSize$3(Self)-1) {
            mGrowth = Offset$5+TDatatype.SizeOfType(TDatatype,8)-TAllocation.GetSize$3(Self);
         }
         if (mGrowth > 0) {
            TAllocation.Grow(Self,mGrowth);
         }
         Self.FDataView.setFloat32(Offset$5,Data$8,a$42);
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),"Write float failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
      }
   }
   /// procedure TBinaryData.WriteFloat64(const Offset: Integer; const Data: float64)
   ///  [line: 816, column: 23, file: System.Memory.Buffer]
   ,WriteFloat64:function(Self, Offset$5, Data$8) {
      var mGrowth = 0;
      if (TBinaryData.OffsetInRange(Self,Offset$5)) {
         if (Offset$5+TDatatype.SizeOfType(TDatatype,9) > TAllocation.GetSize$3(Self)-1) {
            mGrowth = Offset$5+TDatatype.SizeOfType(TDatatype,9)-TAllocation.GetSize$3(Self);
         }
         if (mGrowth > 0) {
            TAllocation.Grow(Self,mGrowth);
         }
         Self.FDataView.setFloat64(Offset$5,Number(Data$8),a$42);
      } else {
         throw EW3Exception.CreateFmt($New(EBinaryData),"Write float failed, invalid offset. Expected %d..%d not %d",[0, TAllocation.GetSize$3(Self)-1, Offset$5]);
      }
   }
   ,Destroy:TAllocation.Destroy
   ,HandleAllocated$:function($){return $.ClassType.HandleAllocated($)}
   ,HandleReleased$:function($){return $.ClassType.HandleReleased($)}
};
TBinaryData.$Intf={
   IBinaryDataWriteAccess:[TBinaryData.AppendBytes,TBinaryData.AppendStr,TBinaryData.AppendMemory,TBinaryData.AppendBuffer,TBinaryData.AppendFloat32,TBinaryData.AppendFloat64,TBinaryData.Write$4,TBinaryData.WriteFloat32,TBinaryData.WriteFloat64,TBinaryData.CopyFrom$2,TBinaryData.CopyFromMemory,TBinaryData.CutBinaryData,TBinaryData.CutStream,TBinaryData.CutTypedArray]
   ,IBinaryDataReadWriteAccess:[TBinaryData.ReadFloat32,TBinaryData.ReadFloat64,TBinaryData.ReadBool,TBinaryData.ReadInt,TBinaryData.ReadStr$1,TBinaryData.ReadBytes,TBinaryData.AppendBytes,TBinaryData.AppendStr,TBinaryData.AppendMemory,TBinaryData.AppendBuffer,TBinaryData.AppendFloat32,TBinaryData.AppendFloat64,TBinaryData.Write$4,TBinaryData.WriteFloat32,TBinaryData.WriteFloat64,TBinaryData.CopyFrom$2,TBinaryData.CopyFromMemory,TBinaryData.CutBinaryData,TBinaryData.CutStream,TBinaryData.CutTypedArray]
   ,IBinaryDataBitAccess:[TBinaryData.GetBitCount,TBinaryData.GetBit$1,TBinaryData.SetBit$1]
   ,IBinaryDataImport:[TBinaryData.FromBase64]
   ,IBinaryDataReadAccess:[TBinaryData.ReadFloat32,TBinaryData.ReadFloat64,TBinaryData.ReadBool,TBinaryData.ReadInt,TBinaryData.ReadStr$1,TBinaryData.ReadBytes]
   ,IBinaryDataExport:[TBinaryData.ToBase64,TBinaryData.ToString$10,TBinaryData.ToTypedArray,TBinaryData.ToBytes,TBinaryData.ToHexDump,TBinaryData.ToStream,TBinaryData.Clone$1]
   ,IBinaryTransport:[TAllocation.DataOffset$1,TAllocation.DataGetSize$1,TAllocation.DataRead$1,TAllocation.DataWrite$1]
   ,IAllocation:[TAllocation.GetHandle,TAllocation.GetTotalSize,TAllocation.GetSize$3,TAllocation.GetTransport,TAllocation.Allocate$1,TAllocation.Grow,TAllocation.Shrink,TAllocation.ReAllocate,TAllocation.Transport,TAllocation.Release$2]
}
/// EBinaryData = class (EW3Exception)
///  [line: 125, column: 3, file: System.Memory.Buffer]
var EBinaryData = {
   $ClassName:"EBinaryData",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TBitAccess = class (TObject)
///  [line: 20, column: 3, file: System.Types.Bits]
var TBitAccess = {
   $ClassName:"TBitAccess",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TBitAccess.Get(const index: Integer; const Value: Byte) : Boolean
   ///  [line: 114, column: 27, file: System.Types.Bits]
   ,Get:function(Self, index$1, Value$5) {
      var Result = false;
      var mMask = 0;
      if (index$1 >= 0 && index$1 < 8) {
         mMask = 1<<index$1;
         Result = ((Value$5&mMask)!=0);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),"Invalid bit index, expected 0..7 not %d",[index$1]);
      }
      return Result
   }
   /// function TBitAccess.Set(const Index: Integer; const Value: Byte; const Data: Boolean) : Byte
   ///  [line: 127, column: 27, file: System.Types.Bits]
   ,Set$3:function(Self, Index$6, Value$5, Data$8) {
      var Result = 0;
      var mSet = false,
         mMask = 0;
      Result = Value$5;
      if (Index$6 >= 0 && Index$6 < 8) {
         mMask = 1<<Index$6;
         mSet = ((Value$5&mMask)!=0);
         if (mSet != Data$8) {
            if (Data$8) {
               Result = Result|mMask;
            } else {
               Result = (Result&(~mMask));
            }
         }
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
var CNT_BitBuffer_ByteTable = [0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];
/// TW3LabelMemory = record
///  [line: 26, column: 3, file: SmartCL.Controls.Label]
function Copy$TW3LabelMemory(s,d) {
   d.Ellipsis=s.Ellipsis;
   d.WordWrap=s.WordWrap;
   d.HAlign=s.HAlign;
   d.VAlign=s.VAlign;
   d.width$28=s.width$28;
   d.height$23=s.height$23;
   return d;
}
function Clone$TW3LabelMemory($) {
   return {
      Ellipsis:$.Ellipsis,
      WordWrap:$.WordWrap,
      HAlign:$.HAlign,
      VAlign:$.VAlign,
      width$28:$.width$28,
      height$23:$.height$23
   }
}
/// TW3Label = class (TW3CustomControl)
///  [line: 35, column: 3, file: SmartCL.Controls.Label]
var TW3Label = {
   $ClassName:"TW3Label",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FAuto$1 = $.FEllipsis = $.FWrap$1 = false;
      $.FContent = undefined;
      $.FHAlign = 0;
      $.FMemory = {Ellipsis:false,WordWrap:false,HAlign:0,VAlign:0,width$28:0,height$23:0};
      $.FVAlign = 0;
   }
   /// procedure TW3Label.AdjustToAutoSize()
   ///  [line: 145, column: 20, file: SmartCL.Controls.Label]
   ,AdjustToAutoSize:function(Self) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Self.FHandle$4.style.width = TInteger.ToPxStr($VarToInt((Self.FContent.offsetWidth+TW3Borders.GetHSpace(TW3MovableControl.GetBorder(Self))),""));
         Self.FHandle$4.style.height = TInteger.ToPxStr($VarToInt((Self.FContent.offsetHeight+TW3Borders.GetVSpace(TW3MovableControl.GetBorder(Self))),""));
      }
   }
   /// function TW3Label.CreationFlags() : TW3CreationFlags
   ///  [line: 118, column: 19, file: SmartCL.Controls.Label]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetInc(Result,5,0,8);
      $SetExc(Result,7,0,8);
      return Result
   }
   /// procedure TW3Label.FinalizeObject()
   ///  [line: 110, column: 20, file: SmartCL.Controls.Label]
   ,FinalizeObject:function(Self) {
      Self.FContent.parentNode.removeChild(Self.FContent);
      Self.FContent = null;
      TW3CustomControl.FinalizeObject(Self);
   }
   /// function TW3Label.GetCaption() : String
   ///  [line: 251, column: 19, file: SmartCL.Controls.Label]
   ,GetCaption$1:function(Self) {
      var Result = "";
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FContent) {
            Result = String(Self.FContent.innerHTML);
         }
      }
      return Result
   }
   /// function TW3Label.GetWordWrap() : Boolean
   ///  [line: 276, column: 19, file: SmartCL.Controls.Label]
   ,GetWordWrap:function(Self) {
      var Result = false;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Result = Self.FWrap$1;
      }
      return Result
   }
   /// procedure TW3Label.InitializeObject()
   ///  [line: 87, column: 20, file: SmartCL.Controls.Label]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FContent = document.createElement("div");
      w3_setAttrib(Self.FContent,"class","lbxcontent");
      Self.FHandle$4.appendChild(Self.FContent);
      Self.FHAlign = 0;
      Self.FContent.classList.add("lbxcontent_h_left");
      Self.FVAlign = 1;
      Self.FContent.classList.add("lbxcontent_v_center");
      Self.FContent.classList.add("lbxdisableBreak");
   }
   /// procedure TW3Label.Resize()
   ///  [line: 173, column: 20, file: SmartCL.Controls.Label]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      if (Self.FAuto$1) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3Label.AdjustToAutoSize(Self);
         }
      }
   }
   /// procedure TW3Label.SetAuto(const NewAuto: Boolean)
   ///  [line: 183, column: 20, file: SmartCL.Controls.Label]
   ,SetAuto$1:function(Self, NewAuto) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewAuto != Self.FAuto$1) {
            if (NewAuto) {
               Self.FMemory.Ellipsis = Self.FEllipsis;
               Self.FMemory.WordWrap = TW3Label.GetWordWrap(Self);
               Self.FMemory.VAlign = Self.FVAlign;
               Self.FMemory.HAlign = Self.FHAlign;
               Self.FMemory.width$28 = TW3MovableControl.GetWidth$(Self);
               Self.FMemory.height$23 = TW3MovableControl.GetHeight$(Self);
               if (Self.FEllipsis) {
                  TW3Label.SetEllipsis(Self,false);
               }
               if (TW3Label.GetWordWrap(Self)) {
                  TW3Label.SetWordWrap$(Self,false);
               }
               if (Self.FVAlign) {
                  TW3Label.SetVAlign(Self,0);
               }
               if (Self.FHAlign) {
                  TW3Label.SetHAlign$(Self,0);
               }
               TW3Label.AdjustToAutoSize(Self);
            } else {
               Self.FAuto$1 = false;
               Self.FEllipsis = Self.FMemory.Ellipsis;
               TW3Label.SetWordWrap$(Self,Self.FMemory.WordWrap);
               Self.FVAlign = Self.FMemory.VAlign;
               Self.FHAlign = Self.FMemory.HAlign;
               TW3MovableControl.SetWidth$(Self,Self.FMemory.width$28);
               TW3MovableControl.SetHeight$(Self,Self.FMemory.height$23);
            }
            Self.FAuto$1 = NewAuto;
         }
      }
   }
   /// procedure TW3Label.SetCaption(const NewCaption: String)
   ///  [line: 260, column: 20, file: SmartCL.Controls.Label]
   ,SetCaption$2:function(Self, NewCaption) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FContent.innerHTML != NewCaption) {
            Self.FContent.innerHTML = NewCaption;
            if (Self.FAuto$1) {
               TW3Label.AdjustToAutoSize(Self);
            }
            if (Self.FOnChanged) {
               Self.FOnChanged(Self);
            }
         }
      }
   }
   /// procedure TW3Label.SetEllipsis(const NewEllipsis: Boolean)
   ///  [line: 233, column: 20, file: SmartCL.Controls.Label]
   ,SetEllipsis:function(Self, NewEllipsis) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            if (NewEllipsis != Self.FEllipsis) {
               if (NewEllipsis) {
                  Self.FContent.classList.add("lbxcontent_ellipsis");
               } else {
                  Self.FContent.classList.remove("lbxcontent_ellipsis");
               }
               Self.FEllipsis = NewEllipsis;
            }
         }
      }
   }
   /// procedure TW3Label.SetHAlign(const NewAlign: TTextAlign)
   ///  [line: 308, column: 20, file: SmartCL.Controls.Label]
   ,SetHAlign:function(Self, NewAlign) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            if (NewAlign != Self.FHAlign) {
               switch (Self.FHAlign) {
                  case 0 :
                     Self.FContent.classList.remove("lbxcontent_h_left");
                     break;
                  case 1 :
                     Self.FContent.classList.remove("lbxcontent_h_center");
                     break;
                  case 2 :
                     Self.FContent.classList.remove("lbxcontent_h_right");
                     break;
               }
               Self.FHAlign = NewAlign;
               switch (Self.FHAlign) {
                  case 0 :
                     Self.FContent.classList.add("lbxcontent_h_left");
                     break;
                  case 1 :
                     Self.FContent.classList.add("lbxcontent_h_center");
                     break;
                  case 2 :
                     Self.FContent.classList.add("lbxcontent_h_right");
                     break;
               }
            }
         }
      }
   }
   /// procedure TW3Label.SetHeight(const NewHeight: Integer)
   ///  [line: 164, column: 20, file: SmartCL.Controls.Label]
   ,SetHeight:function(Self, NewHeight) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            TW3MovableControl.SetHeight(Self,NewHeight);
         }
      }
   }
   /// procedure TW3Label.SetVAlign(const NewAlign: TTextVAlign)
   ///  [line: 337, column: 20, file: SmartCL.Controls.Label]
   ,SetVAlign:function(Self, NewAlign) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            if (NewAlign != Self.FVAlign) {
               switch (Self.FVAlign) {
                  case 0 :
                     Self.FContent.classList.remove("lbxcontent_v_top");
                     break;
                  case 1 :
                     Self.FContent.classList.remove("lbxcontent_v_center");
                     break;
                  case 2 :
                     Self.FContent.classList.remove("lbxcontent_v_bottom");
                     break;
               }
               Self.FVAlign = NewAlign;
               switch (Self.FVAlign) {
                  case 0 :
                     Self.FContent.classList.add("lbxcontent_v_top");
                     break;
                  case 1 :
                     Self.FContent.classList.add("lbxcontent_v_center");
                     break;
                  case 2 :
                     Self.FContent.classList.add("lbxcontent_v_bottom");
                     break;
               }
            }
         }
      }
   }
   /// procedure TW3Label.SetWidth(const NewWidth: Integer)
   ///  [line: 155, column: 20, file: SmartCL.Controls.Label]
   ,SetWidth:function(Self, NewWidth) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            TW3MovableControl.SetWidth(Self,NewWidth);
         }
      }
   }
   /// procedure TW3Label.SetWordWrap(const NewWrap: Boolean)
   ///  [line: 282, column: 20, file: SmartCL.Controls.Label]
   ,SetWordWrap:function(Self, NewWrap) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            if (NewWrap != Self.FWrap$1) {
               Self.FWrap$1 = NewWrap;
               if (NewWrap) {
                  Self.FContent.classList.remove("lbxdisableBreak");
                  Self.FContent.classList.add("lbxenableBreak");
               } else {
                  Self.FContent.classList.remove("lbxenableBreak");
                  Self.FContent.classList.add("lbxdisableBreak");
               }
            }
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType, arguments)}
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1$:function($){return $.ClassType.GetCaption$1($)}
   ,SetCaption$2$:function($){return $.ClassType.SetCaption$2.apply($.ClassType, arguments)}
   ,SetHAlign$:function($){return $.ClassType.SetHAlign.apply($.ClassType, arguments)}
   ,SetWordWrap$:function($){return $.ClassType.SetWordWrap.apply($.ClassType, arguments)}
};
TW3Label.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ToolbarElement = class (TW3CustomControl)
///  [line: 43, column: 3, file: SmartCL.Controls.ToolBar]
var TW3ToolbarElement = {
   $ClassName:"TW3ToolbarElement",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3ToolbarElement.AcceptOwner(const CandidateObject: TObject) : Boolean
   ///  [line: 170, column: 28, file: SmartCL.Controls.ToolBar]
   ,AcceptOwner:function(Self, CandidateObject) {
      return CandidateObject !== null && $Is(CandidateObject,TW3Toolbar);
   }
   /// procedure TW3ToolbarElement.CBClick(EventObj: JEvent)
   ///  [line: 182, column: 29, file: SmartCL.Controls.ToolBar]
   ,CBClick:function(Self, EventObj) {
      var Temp$1 = null;
      Temp$1 = TW3ToolbarElement.GetToolbar(Self);
      if (Temp$1 !== null) {
         if (TW3Toolbar.ChildElementAllowClick(Temp$1,Self)) {
            TW3CustomControl.CBClick(Self,EventObj);
            TW3Toolbar.ChildElementClicked$1(Temp$1,Self);
         }
      } else {
         TW3CustomControl.CBClick(Self,EventObj);
      }
   }
   /// function TW3ToolbarElement.GetToolbar() : TW3Toolbar
   ///  [line: 176, column: 28, file: SmartCL.Controls.ToolBar]
   ,GetToolbar:function(Self) {
      var Result = null;
      if (TW3TagContainer.a$53(Self) !== null) {
         Result = $As(TW3TagContainer.a$53(Self),TW3Toolbar);
      }
      return Result
   }
   /// procedure TW3ToolbarElement.InitializeObject()
   ///  [line: 154, column: 29, file: SmartCL.Controls.ToolBar]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3TagObj.SetPositionMode(Self,22);
      TW3TagObj.SetDisplayMode(Self,1);
   }
   /// procedure TW3ToolbarElement.SetBounds(const NewLeft: Integer; const NewTop: Integer; const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 208, column: 29, file: SmartCL.Controls.ToolBar]
   ,SetBounds:function(Self, NewLeft, NewTop, NewWidth, NewHeight) {
      TW3MovableControl.SetBounds(Self,NewLeft,NewTop,NewWidth,NewHeight);
      Self.FHandle$4.style["flex-basis"] = TInteger.ToPxStr(NewWidth);
   }
   /// procedure TW3ToolbarElement.SetSize(const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 202, column: 29, file: SmartCL.Controls.ToolBar]
   ,SetSize$2:function(Self, NewWidth, NewHeight) {
      TW3MovableControl.SetSize$2(Self,NewWidth,NewHeight);
      Self.FHandle$4.style["flex-basis"] = TInteger.ToPxStr(NewWidth);
   }
   /// procedure TW3ToolbarElement.SetWidth(const NewWidth: Integer)
   ///  [line: 196, column: 29, file: SmartCL.Controls.ToolBar]
   ,SetWidth:function(Self, NewWidth) {
      TW3MovableControl.SetWidth(Self,NewWidth);
      Self.FHandle$4.style["flex-basis"] = TInteger.ToPxStr(NewWidth);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType, arguments)}
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds$:function($){return $.ClassType.SetBounds.apply($.ClassType, arguments)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2$:function($){return $.ClassType.SetSize$2.apply($.ClassType, arguments)}
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ToolbarElement.$Intf={
   IW3OwnedObjectAccess:[TW3ToolbarElement.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
   ,IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
}
/// TW3ToolbarSeparator = class (TW3ToolbarElement)
///  [line: 61, column: 3, file: SmartCL.Controls.ToolBar]
var TW3ToolbarSeparator = {
   $ClassName:"TW3ToolbarSeparator",$Parent:TW3ToolbarElement
   ,$Init:function ($) {
      TW3ToolbarElement.$Init($);
   }
   /// procedure TW3ToolbarSeparator.StyleTagObject()
   ///  [line: 218, column: 31, file: SmartCL.Controls.ToolBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,0);
      TW3CustomControl.SetBorderType(Self,0);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3ToolbarElement.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3ToolbarElement.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3ToolbarElement.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3ToolbarElement.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3ToolbarElement.SetWidth
   ,CBClick:TW3ToolbarElement.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ToolbarSeparator.$Intf={
   IW3OwnedObjectAccess:[TW3ToolbarElement.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
   ,IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
}
/// TW3ToolbarJustification enumeration
///  [line: 38, column: 3, file: SmartCL.Controls.ToolBar]
var TW3ToolbarJustification = [ "tjPacked", "tjSpaceEvenly" ];
/// TW3ToolbarElementAlignment enumeration
///  [line: 33, column: 3, file: SmartCL.Controls.ToolBar]
var TW3ToolbarElementAlignment = [ "elAlignLeft", "elAlignRight" ];
/// TW3ToolbarButton = class (TW3ToolbarElement)
///  [line: 66, column: 3, file: SmartCL.Controls.ToolBar]
var TW3ToolbarButton = {
   $ClassName:"TW3ToolbarButton",$Parent:TW3ToolbarElement
   ,$Init:function ($) {
      TW3ToolbarElement.$Init($);
      $.GroupIndex = 0;
      $.AllowAllUp = $.FDown$1 = false;
      $.FCaption$2 = "";
      $.FGlyph$1 = null;
      $.FLayout = 0;
   }
   /// procedure TW3ToolbarButton.CBClick(EventObj: JEvent)
   ///  [line: 255, column: 28, file: SmartCL.Controls.ToolBar]
   ,CBClick:function(Self, EventObj) {
      var Temp$1 = null;
      Temp$1 = TW3ToolbarElement.GetToolbar(Self);
      if (Temp$1 !== null) {
         if (TW3Toolbar.ChildElementAllowClick(Temp$1,Self)) {
            TW3ToolbarElement.CBClick(Self,EventObj);
            if (Self.GroupIndex > 0) {
               if (Self.FDown$1) {
                  return;
               } else {
                  TW3ToolbarButton.SetDownState$1(Self,!(Self.FDown$1));
               }
            }
         }
      } else {
         TW3ToolbarElement.CBClick(Self,EventObj);
      }
   }
   /// procedure TW3ToolbarButton.FinalizeObject()
   ///  [line: 239, column: 28, file: SmartCL.Controls.ToolBar]
   ,FinalizeObject:function(Self) {
      TW3Image.SetOnLoad(Self.FGlyph$1,null);
      TObject.Free(Self.FGlyph$1);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3ToolbarButton.HandleGlyphReady(Sender: TObject)
   ///  [line: 422, column: 28, file: SmartCL.Controls.ToolBar]
   ,HandleGlyphReady:function(Self, Sender) {
      TW3ToolbarButton.InternalSetCaption$1(Self,Self.FCaption$2);
   }
   /// procedure TW3ToolbarButton.InitializeObject()
   ///  [line: 231, column: 28, file: SmartCL.Controls.ToolBar]
   ,InitializeObject:function(Self) {
      TW3ToolbarElement.InitializeObject(Self);
      Self.FGlyph$1 = TW3TagContainer.Create$81$($New(TW3Image),null);
      TW3Image.SetOnLoad(Self.FGlyph$1,$Event1(Self,TW3ToolbarButton.HandleGlyphReady));
      Self.FDown$1 = false;
   }
   /// procedure TW3ToolbarButton.InternalSetCaption(const NewCaption: String)
   ///  [line: 351, column: 28, file: SmartCL.Controls.ToolBar]
   ,InternalSetCaption$1:function(Self, NewCaption) {
      var Html = "",
         wd = 0,
         hd = 0;
      function MakeImgTag(src$10, w, h) {
         return "<img src=\"" + src$10 + "\" " + "width=" + TInteger.ToPxStr(w) + " " + "height=" + TInteger.ToPxStr(h) + ">";
      };
      Html = "";
      if (TW3Image.GetReady(Self.FGlyph$1)) {
         wd = TW3Image.GetPixelWidth(Self.FGlyph$1);
         hd = TW3Image.GetPixelheight(Self.FGlyph$1);
         Html = "<table class=\"TW3ToolButtonTable\">";
         switch (Self.FLayout) {
            case 0 :
               Html += "<tr>";
               Html += "<td>";
               Html += MakeImgTag(TW3Image.GetSrc(Self.FGlyph$1),wd,hd);
               Html += "<\/td>";
               Html += "<\/tr>";
               Html += "<tr>";
               Html += "<td><center>" + NewCaption + "<\/td>";
               Html += "<\/tr>";
               break;
            case 1 :
               Html += "<tr>";
               Html += "<td>";
               Html += MakeImgTag(TW3Image.GetSrc(Self.FGlyph$1),wd,hd);
               Html += "<\/td>";
               Html += "<td>";
               Html += "<center>" + NewCaption;
               Html += "<\/td>";
               Html += "<\/tr>";
               break;
            case 2 :
               Html += "<tr>";
               Html += "<td>";
               Html += "<center>" + NewCaption;
               Html += "<\/td>";
               Html += "<td>";
               Html += MakeImgTag(TW3Image.GetSrc(Self.FGlyph$1),wd,hd);
               Html += "<\/td>";
               Html += "<\/tr>";
               break;
            case 3 :
               Html += "<tr>";
               Html += "<td><center>" + NewCaption + "<\/td>";
               Html += "<\/tr>";
               Html += "<tr>";
               Html += "<td>";
               Html += MakeImgTag(TW3Image.GetSrc(Self.FGlyph$1),wd,hd);
               Html += "<\/td>";
               Html += "<\/tr>";
               break;
         }
         Html += "<\/table>";
      } else {
         Html = NewCaption;
      }
      TW3TagObj.a$48(Self,Html);
   }
   /// function TW3ToolbarButton.MakeElementTagObj() : THandle
   ///  [line: 323, column: 27, file: SmartCL.Controls.ToolBar]
   ,MakeElementTagObj:function(Self) {
      return w3_CreateHtmlElement("button");
   }
   /// procedure TW3ToolbarButton.SetCaption(NewCaption: String)
   ///  [line: 338, column: 28, file: SmartCL.Controls.ToolBar]
   ,SetCaption$3:function(Self, NewCaption) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         NewCaption = Trim$_String_(NewCaption);
         if (NewCaption != Self.FCaption$2) {
            Self.FCaption$2 = NewCaption;
            TW3ToolbarButton.InternalSetCaption$1(Self,NewCaption);
         }
      }
   }
   /// procedure TW3ToolbarButton.SetDownState(NewDownState: Boolean)
   ///  [line: 277, column: 28, file: SmartCL.Controls.ToolBar]
   ,SetDownState$1:function(Self, NewDownState) {
      var tb = null,
         LCancel = false;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewDownState != Self.FDown$1) {
            tb = TW3ToolbarElement.GetToolbar(Self);
            if (tb !== null) {
               LCancel = TW3Toolbar.ChildElementDown$1(tb,Self);
               if (LCancel) {
                  return;
               }
            }
            if (Self.GroupIndex > 0) {
               if (Self.FDown$1) {
                  if (Self.AllowAllUp) {
                     Self.FDown$1 = false;
                  }
               } else if (tb !== null) {
                  TW3Toolbar.ClearGroupSelected(tb,Self.GroupIndex);
               }
            }
            if (Self.FDown$1) {
               TW3CustomControl.SetBackgroundType(Self,15);
               TW3CustomControl.SetBorderType(Self,10);
               Self.FDown$1 = false;
            } else {
               TW3CustomControl.SetBackgroundType(Self,11);
               TW3CustomControl.SetBorderType(Self,6);
               Self.FDown$1 = true;
            }
         }
      }
   }
   /// procedure TW3ToolbarButton.SetLayout(const NewLayout: TW3GlyphLayout)
   ///  [line: 328, column: 28, file: SmartCL.Controls.ToolBar]
   ,SetLayout:function(Self, NewLayout) {
      if (NewLayout != Self.FLayout) {
         Self.FLayout = NewLayout;
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3ToolbarButton.InternalSetCaption$1(Self,Self.FCaption$2);
         }
      }
   }
   /// procedure TW3ToolbarButton.StyleTagObject()
   ///  [line: 246, column: 28, file: SmartCL.Controls.ToolBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,15);
      TW3CustomControl.SetBorderType(Self,10);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3ToolbarElement.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3ToolbarElement.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3ToolbarElement.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3ToolbarElement.SetWidth
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ToolbarButton.$Intf={
   IW3OwnedObjectAccess:[TW3ToolbarElement.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
   ,IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
}
/// TW3Toolbar = class (TW3CustomControl)
///  [line: 99, column: 3, file: SmartCL.Controls.ToolBar]
var TW3Toolbar = {
   $ClassName:"TW3Toolbar",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnElementAllowClick = null;
      $.OnElementDown = null;
      $.OnElementClicked = null;
      $.FAlignment = 0;
      $.FButtonHeight = 36;
      $.FButtonWidth = 89;
      $.FGCollection = [];
      $.FJustify = 0;
      $.FSeperatorSize$1 = 32;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 127, column: 23, file: SmartCL.Controls.ToolBar]
   ,a$284:function(Self, Index$6) {
      var Result = null;
      Result = $As(TW3TagContainer.GetChildObject(Self,Index$6),TW3ToolbarElement);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 125, column: 37, file: SmartCL.Controls.ToolBar]
   ,a$283:function(Self) {
      var Result = 0;
      Result = TW3TagContainer.GetChildCount(Self);
      return Result
   }
   /// procedure TW3Toolbar.ChildAdded(const NewChild: TW3TagContainer)
   ///  [line: 725, column: 22, file: SmartCL.Controls.ToolBar]
   ,ChildAdded:function(Self, NewChild) {
      var GCIndex = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($Is(NewChild,TW3ToolbarElement)) {
            GCIndex = Self.FGCollection.indexOf($As(NewChild,TW3ToolbarElement));
            if (GCIndex >= 0) {
               Self.FGCollection.splice(GCIndex,1)
               ;
            } else if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3MovableControl.Invalidate$(Self);
            }
         }
      }
      TW3TagContainer.ChildAdded(Self,NewChild);
   }
   /// function TW3Toolbar.ChildElementAllowClick(const Child: TW3ToolbarElement) : Boolean
   ///  [line: 485, column: 21, file: SmartCL.Controls.ToolBar]
   ,ChildElementAllowClick:function(Self, Child$1) {
      var Result = {v:false};
      try {
         Result.v = true;
         if (Self.OnElementAllowClick) {
            Self.OnElementAllowClick(Self,Child$1,Result);
         }
      } finally {return Result.v}
   }
   /// procedure TW3Toolbar.ChildElementClicked(const Child: TW3ToolbarElement)
   ///  [line: 500, column: 22, file: SmartCL.Controls.ToolBar]
   ,ChildElementClicked$1:function(Self, Child$1) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Child$1 !== null) {
            if (Self.OnElementClicked) {
               Self.OnElementClicked(Self,Child$1);
            }
         }
      }
   }
   /// function TW3Toolbar.ChildElementDown(const Child: TW3ToolbarElement) : Boolean
   ///  [line: 493, column: 21, file: SmartCL.Controls.ToolBar]
   ,ChildElementDown$1:function(Self, Child$1) {
      var Result = {v:false};
      try {
         Result.v = false;
         if (Self.OnElementDown) {
            Self.OnElementDown(Self,Child$1,Result);
         }
      } finally {return Result.v}
   }
   /// procedure TW3Toolbar.ChildRemoved(const OldChild: TW3TagContainer)
   ///  [line: 751, column: 22, file: SmartCL.Controls.ToolBar]
   ,ChildRemoved:function(Self, OldChild) {
      var GCIndex = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($Is(OldChild,TW3ToolbarElement)) {
            GCIndex = Self.FGCollection.indexOf($As(OldChild,TW3ToolbarElement));
            if (GCIndex >= 0) {
               Self.FGCollection.splice(GCIndex,1)
               ;
            } else if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3MovableControl.Invalidate$(Self);
            }
         }
      }
      TW3TagContainer.ChildRemoved(Self,OldChild);
   }
   /// procedure TW3Toolbar.ClearGroupSelected(const GroupIndex: Integer)
   ///  [line: 461, column: 22, file: SmartCL.Controls.ToolBar]
   ,ClearGroupSelected:function(Self, GroupIndex$2) {
      var i$7 = 0,
         LButton = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3TagObj.BeginUpdate(Self);
         try {
            var $temp67;
            for(i$7=0,$temp67=TW3Toolbar.a$283(Self);i$7<$temp67;i$7++) {
               if ($Is(TW3Toolbar.a$284(Self,i$7),TW3ToolbarButton)) {
                  LButton = $As(TW3Toolbar.a$284(Self,i$7),TW3ToolbarButton);
                  if (LButton.GroupIndex == GroupIndex$2) {
                     if (LButton.FDown$1) {
                        TW3ToolbarButton.SetDownState$1(LButton,false);
                     }
                  }
               }
            }
         } finally {
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// function TW3Toolbar.CreationFlags() : TW3CreationFlags
   ///  [line: 450, column: 21, file: SmartCL.Controls.ToolBar]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetInc(Result,1,0,8);
      $SetInc(Result,2,0,8);
      $SetInc(Result,3,0,8);
      $SetInc(Result,5,0,8);
      $SetExc(Result,4,0,8);
      return Result
   }
   /// procedure TW3Toolbar.InitializeObject()
   ///  [line: 431, column: 22, file: SmartCL.Controls.ToolBar]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3TagObj.SetDisplayMode(Self,2);
      Self.FButtonWidth = 100;
      Self.FButtonHeight = 30;
      Self.SimulateMouseEvents = true;
      Self.FTransparentEvents = true;
   }
   /// procedure TW3Toolbar.Resize()
   ///  [line: 622, column: 22, file: SmartCL.Controls.ToolBar]
   ,Resize:function(Self) {
      var x$42 = 0,
         LItem$3 = null;
      TW3MovableControl.Resize(Self);
      var $temp68;
      for(x$42=0,$temp68=TW3Toolbar.a$283(Self);x$42<$temp68;x$42++) {
         LItem$3 = TW3Toolbar.a$284(Self,x$42);
         if ($Is(LItem$3,TW3ToolbarSeparator)) {
            if (TW3MovableControl.GetWidth$(LItem$3) != Self.FSeperatorSize$1) {
               TW3MovableControl.SetWidth$(LItem$3,Self.FSeperatorSize$1);
            }
            if (w3_GetStyleAsStr(LItem$3.FHandle$4,"height") != "100%") {
               LItem$3.FHandle$4.style.height = "100%";
            }
         } else if ($Is(LItem$3,TW3ToolbarButton)) {
            if (TW3MovableControl.GetHeight$(LItem$3) != Self.FButtonHeight) {
               TW3MovableControl.SetSize$2$(LItem$3,Self.FButtonWidth,Self.FButtonHeight);
            }
         }
      }
   }
   /// procedure TW3Toolbar.SetAlignment(const NewAlignment: TW3ToolbarElementAlignment)
   ///  [line: 535, column: 22, file: SmartCL.Controls.ToolBar]
   ,SetAlignment:function(Self, NewAlignment) {
      var x$42 = 0,
         Item$3 = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewAlignment != Self.FAlignment) {
            TW3TagObj.BeginUpdate(Self);
            Self.FAlignment = NewAlignment;
            var $temp69;
            for(x$42=0,$temp69=TW3Toolbar.a$283(Self);x$42<$temp69;x$42++) {
               Item$3 = TW3Toolbar.a$284(Self,x$42);
               if ($Is(Item$3,TW3ToolbarButton)) {
                  switch (NewAlignment) {
                     case 0 :
                        if (TW3TagStyle.Contains$2(TW3CustomControl.GetTagStyle(Item$3),"TW3ToolElementAlignRight")) {
                           TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(Item$3),"TW3ToolElementAlignRight");
                        }
                        TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(Item$3),"TW3ToolElementAlignLeft");
                        break;
                     case 1 :
                        if (TW3TagStyle.Contains$2(TW3CustomControl.GetTagStyle(Item$3),"TW3ToolElementAlignLeft")) {
                           TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(Item$3),"TW3ToolElementAlignLeft");
                        }
                        TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(Item$3),"TW3ToolElementAlignRight");
                        break;
                  }
               }
            }
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3Toolbar.SetButtonHeight(const NewHeight: Integer)
   ///  [line: 605, column: 22, file: SmartCL.Controls.ToolBar]
   ,SetButtonHeight:function(Self, NewHeight) {
      var Temp$1 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Temp$1 = (NewHeight > 16)?NewHeight:16;
         if (Temp$1 != Self.FButtonHeight) {
            TW3TagObj.BeginUpdate(Self);
            Self.FButtonHeight = Temp$1;
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3Toolbar.SetButtonWidth(const NewWidth: Integer)
   ///  [line: 590, column: 22, file: SmartCL.Controls.ToolBar]
   ,SetButtonWidth:function(Self, NewWidth) {
      var Temp$1 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Temp$1 = (NewWidth > 16)?NewWidth:16;
         if (Temp$1 != Self.FButtonWidth) {
            TW3TagObj.BeginUpdate(Self);
            Self.FButtonWidth = Temp$1;
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3Toolbar.SetJustify(const NewJustify: TW3ToolbarJustification)
   ///  [line: 512, column: 22, file: SmartCL.Controls.ToolBar]
   ,SetJustify:function(Self, NewJustify) {
      var LData = "";
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewJustify != Self.FJustify) {
            TW3TagObj.BeginUpdate(Self);
            try {
               Self.FJustify = NewJustify;
               switch (NewJustify) {
                  case 0 :
                     LData = "flex-start";
                     break;
                  case 1 :
                     LData = "space-around";
                     break;
               }
               Self.FHandle$4.style["justify-content"] = LData;
            } finally {
               TW3TagObj.EndUpdate(Self);
            }
         }
      }
   }
   /// procedure TW3Toolbar.SetSeperatorSize(const NewSeperatorSize: Integer)
   ///  [line: 575, column: 22, file: SmartCL.Controls.ToolBar]
   ,SetSeperatorSize:function(Self, NewSeperatorSize) {
      var Temp$1 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Temp$1 = (NewSeperatorSize > 16)?NewSeperatorSize:16;
         if (Temp$1 != Self.FSeperatorSize$1) {
            TW3TagObj.BeginUpdate(Self);
            Self.FSeperatorSize$1 = Temp$1;
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         }
      }
   }
   /// procedure TW3Toolbar.StyleTagObject()
   ///  [line: 441, column: 22, file: SmartCL.Controls.ToolBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,14);
      TW3CustomControl.SetBorderType(Self,9);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded$:function($){return $.ClassType.ChildAdded.apply($.ClassType, arguments)}
   ,ChildRemoved$:function($){return $.ClassType.ChildRemoved.apply($.ClassType, arguments)}
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Toolbar.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3HeaderTitle = class (TW3CustomControl)
///  [line: 27, column: 3, file: SmartCL.Controls.Header]
var TW3HeaderTitle = {
   $ClassName:"TW3HeaderTitle",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3HeaderTitle.GetCaption() : String
   ///  [line: 131, column: 25, file: SmartCL.Controls.Header]
   ,GetCaption$2:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = TW3TagObj.a$47(Self);
      }
      return Result
   }
   /// procedure TW3HeaderTitle.SetCaption(const NewCaption: String)
   ///  [line: 137, column: 26, file: SmartCL.Controls.Header]
   ,SetCaption$4:function(Self, NewCaption) {
      if (Self.FHandle$4) {
         TW3TagObj.a$48(Self,NewCaption);
      }
   }
   /// procedure TW3HeaderTitle.InitializeObject()
   ///  [line: 114, column: 26, file: SmartCL.Controls.Header]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3TagObj.SetPositionMode(Self,22);
      TW3TagObj.SetDisplayMode(Self,1);
      TW3HeaderTitle.SetCaption$4(Self,"Header title");
   }
   /// function TW3HeaderTitle.CreationFlags() : TW3CreationFlags
   ///  [line: 122, column: 25, file: SmartCL.Controls.Header]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,6,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3HeaderTitle.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ToolButton = class (TW3CustomControl)
///  [line: 25, column: 3, file: SmartCL.Controls.ToolButton]
var TW3ToolButton = {
   $ClassName:"TW3ToolButton",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3ToolButton.GetCaption() : String
   ///  [line: 66, column: 24, file: SmartCL.Controls.ToolButton]
   ,GetCaption$3:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = String(Self.FHandle$4.innerHTML);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ToolButton.GetCaption", TObject.ClassName(Self.ClassType), "invalid handle error"]);
      }
      return Result
   }
   /// procedure TW3ToolButton.SetCaption(const NewCaption: String)
   ///  [line: 75, column: 25, file: SmartCL.Controls.ToolButton]
   ,SetCaption$5:function(Self, NewCaption) {
      if (Self.FHandle$4) {
         Self.FHandle$4.innerHTML = NewCaption;
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3ToolButton.SetCaption", TObject.ClassName(Self.ClassType), "invalid handle error"]);
      }
   }
   /// procedure TW3ToolButton.InitializeObject()
   ///  [line: 46, column: 25, file: SmartCL.Controls.ToolButton]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3MovableControl.SetSize$2$(Self,70,30);
   }
   /// function TW3ToolButton.MakeElementTagObj() : THandle
   ///  [line: 52, column: 24, file: SmartCL.Controls.ToolButton]
   ,MakeElementTagObj:function(Self) {
      return w3_CreateHtmlElement("button");
   }
   /// procedure TW3ToolButton.StyleTagObject()
   ///  [line: 57, column: 25, file: SmartCL.Controls.ToolButton]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,15);
      TW3CustomControl.SetBorderType(Self,10);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ToolButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3HeaderButton = class (TW3ToolButton)
///  [line: 38, column: 3, file: SmartCL.Controls.Header]
var TW3HeaderButton = {
   $ClassName:"TW3HeaderButton",$Parent:TW3ToolButton
   ,$Init:function ($) {
      TW3ToolButton.$Init($);
   }
   /// procedure TW3HeaderButton.SetWidth(const NewWidth: Integer)
   ///  [line: 92, column: 27, file: SmartCL.Controls.Header]
   ,SetWidth:function(Self, NewWidth) {
      TW3MovableControl.SetWidth(Self,NewWidth);
      Self.FHandle$4.style["flex-basis"] = TInteger.ToPxStr(NewWidth);
   }
   /// procedure TW3HeaderButton.SetSize(const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 98, column: 27, file: SmartCL.Controls.Header]
   ,SetSize$2:function(Self, NewWidth, NewHeight) {
      TW3MovableControl.SetSize$2(Self,NewWidth,NewHeight);
      Self.FHandle$4.style["flex-basis"] = TInteger.ToPxStr(NewWidth);
   }
   /// procedure TW3HeaderButton.SetBounds(const NewLeft: Integer; const NewTop: Integer; const NewWidth: Integer; const NewHeight: Integer)
   ///  [line: 104, column: 27, file: SmartCL.Controls.Header]
   ,SetBounds:function(Self, NewLeft, NewTop, NewWidth, NewHeight) {
      TW3MovableControl.SetBounds(Self,NewLeft,NewTop,NewWidth,NewHeight);
      Self.FHandle$4.style["flex-basis"] = TInteger.ToPxStr(NewWidth);
   }
   /// procedure TW3HeaderButton.InitializeObject()
   ///  [line: 76, column: 27, file: SmartCL.Controls.Header]
   ,InitializeObject:function(Self) {
      TW3ToolButton.InitializeObject(Self);
      TW3TagObj.SetPositionMode(Self,22);
      TW3TagObj.SetDisplayMode(Self,1);
   }
   /// function TW3HeaderButton.CreationFlags() : TW3CreationFlags
   ///  [line: 83, column: 26, file: SmartCL.Controls.Header]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,6,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3ToolButton.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3ToolButton.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds$:function($){return $.ClassType.SetBounds.apply($.ClassType, arguments)}
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2$:function($){return $.ClassType.SetSize$2.apply($.ClassType, arguments)}
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType, arguments)}
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3HeaderButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Button = class (TW3CustomControl)
///  [line: 27, column: 3, file: SmartCL.Controls.Button]
var TW3Button = {
   $ClassName:"TW3Button",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnKeyUp = null;
      $.FCaption$3 = "";
      $.FDown$2 = false;
      $.FPointerEvents = false;
   }
   /// procedure TW3Button.CBKeyUp(eventObj: JKeyboardEvent)
   ///  [line: 127, column: 21, file: SmartCL.Controls.Button]
   ,CBKeyUp:function(Self, eventObj) {
      TW3CustomControl.CBKeyDown(Self,eventObj);
      if (TW3CustomControl.GetEnabled$1$(Self)) {
         if ((eventObj.keyCode==13||eventObj.keyCode==32)) {
            TW3Dispatch.Execute(TW3Dispatch,function () {
               TW3CustomControl.CBClick$(Self,eventObj);
            },100);
         }
      }
   }
   /// procedure TW3Button.Dispatch(Kind: TW3EventManagerTypes; eventObj: JEvent)
   ///  [line: 113, column: 21, file: SmartCL.Controls.Button]
   ,Dispatch:function(Self, Kind, eventObj) {
      if (Self.FDown$2) {
         if ((1<<Kind&2266)!=0) {
            TW3EventManager.PreventOnClick(EventManager);
         } else {
            TW3CustomControl.Dispatch(Self,Kind,eventObj);
         }
      } else {
         TW3CustomControl.Dispatch(Self,Kind,eventObj);
      }
   }
   /// procedure TW3Button.InitializeObject()
   ///  [line: 69, column: 21, file: SmartCL.Controls.Button]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3CustomControl._setKeyUp(Self,function (Sender, KeyCode$2) {
         if (Self.OnKeyUp) {
            Self.OnKeyUp(Self,KeyCode$2);
         }
      });
   }
   /// procedure TW3Button.InternalSetCaption(const NewCaption: String)
   ///  [line: 180, column: 21, file: SmartCL.Controls.Button]
   ,InternalSetCaption$2:function(Self, NewCaption) {
      TW3TagObj.a$48(Self,NewCaption);
   }
   /// function TW3Button.MakeElementTagObj() : THandle
   ///  [line: 175, column: 20, file: SmartCL.Controls.Button]
   ,MakeElementTagObj:function(Self) {
      return w3_CreateHtmlElement("button");
   }
   /// procedure TW3Button.SetCaption(NewCaption: String)
   ///  [line: 185, column: 21, file: SmartCL.Controls.Button]
   ,SetCaption$6:function(Self, NewCaption) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         NewCaption = Trim$_String_(NewCaption);
         if (NewCaption != Self.FCaption$3) {
            Self.FCaption$3 = NewCaption;
            TW3Button.InternalSetCaption$2(Self,NewCaption);
         }
      }
   }
   /// procedure TW3Button.SetDownState(NewDownState: Boolean)
   ///  [line: 145, column: 21, file: SmartCL.Controls.Button]
   ,SetDownState$2:function(Self, NewDownState) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (NewDownState != Self.FDown$2) {
            if (Self.FDown$2) {
               TW3CustomControl.SetBackgroundType(Self,9);
               TW3CustomControl.SetBorderType(Self,4);
               Self.FDown$2 = false;
               if (!(Self.FPointerEvents)) {
                  Self.FHandle$4.style["pointer-events"] = "initial";
               }
            } else {
               TW3CustomControl.SetBackgroundType(Self,11);
               TW3CustomControl.SetBorderType(Self,6);
               Self.FDown$2 = true;
               if (!(Self.FPointerEvents)) {
                  Self.FHandle$4.style["pointer-events"] = "none";
               }
            }
         }
      }
   }
   /// procedure TW3Button.SetPointerEvents(const AllowEvents: Boolean)
   ///  [line: 93, column: 21, file: SmartCL.Controls.Button]
   ,SetPointerEvents:function(Self, AllowEvents) {
      if (AllowEvents != Self.FPointerEvents) {
         if (Self.FPointerEvents) {
            if (Self.FDown$2) {
               Self.FHandle$4.style["pointer-events"] = "none";
            }
         } else if (Self.FDown$2) {
            Self.FHandle$4.style["pointer-events"] = "initial";
         }
         Self.FPointerEvents = AllowEvents;
      }
   }
   /// procedure TW3Button.StyleTagObject()
   ///  [line: 84, column: 21, file: SmartCL.Controls.Button]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,9);
      TW3CustomControl.SetBorderType(Self,4);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp$:function($){return $.ClassType.CBKeyUp.apply($.ClassType, arguments)}
   ,Dispatch$:function($){return $.ClassType.Dispatch.apply($.ClassType, arguments)}
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,SetCaption$6$:function($){return $.ClassType.SetCaption$6.apply($.ClassType, arguments)}
};
TW3Button.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
function InitAnimationFrameShim() {
   vRequestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              window.msRequestAnimationFrame     ||
              function( callback ){
                return window.setTimeout(callback, 1000 / 60);
              };
    })();
    vCancelAnimFrame = (function(){
      return  window.cancelAnimationFrame       ||
              window.webkitCancelAnimationFrame ||
              window.mozCancelAnimationFrame    ||
              window.msCancelAnimationFrame     ||
              function( handle ){
                window.clearTimeout(handle);
              };
    })();
};
/// TW3CustomForm = class (TW3CustomControl)
///  [line: 20, column: 3, file: SmartCL.Forms]
var TW3CustomForm = {
   $ClassName:"TW3CustomForm",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FCaption = "";
      $.FInitialized$1 = false;
      $.FOnActivate = null;
      $.FOnDeactivate = null;
   }
   /// procedure TW3CustomForm.BuildForm()
   ///  [line: 182, column: 25, file: SmartCL.Forms]
   ,BuildForm:function(Self) {
      if (!(Self.FInitialized$1)) {
         TW3CustomForm.InitializeForm$(Self);
         TW3CustomControl.LayoutChildren(Self);
      }
   }
   /// constructor TW3CustomForm.Create(AOwner: TW3TagContainer)
   ///  [line: 64, column: 27, file: SmartCL.Forms]
   ,Create$81:function(Self, AOwner) {
      TW3TagContainer.Create$81(Self,AOwner);
      if (AOwner === Application().FDisplay.FView) {
         TApplicationFormsList.RegisterFormInstance$1(Forms$2(),$AsClass(TObject.ClassType(Self.ClassType),TW3CustomForm),Self);
      }
      return Self
   }
   /// destructor TW3CustomForm.Destroy()
   ///  [line: 71, column: 26, file: SmartCL.Forms]
   ,Destroy:function(Self) {
      TW3CustomApplication.UnRegisterFormInstance(Application(),Self);
      TApplicationFormsList.UnregisterFormInstance(Forms$2(),Self);
      TW3TagObj.Destroy(Self);
   }
   /// procedure TW3CustomForm.FormActivated()
   ///  [line: 208, column: 25, file: SmartCL.Forms]
   ,FormActivated:function(Self) {
      if (Self.FOnActivate) {
         Self.FOnActivate(Self);
      }
   }
   /// procedure TW3CustomForm.FormDeactivated()
   ///  [line: 213, column: 25, file: SmartCL.Forms]
   ,FormDeactivated:function(Self) {
      if (Self.FOnDeactivate) {
         Self.FOnDeactivate(Self);
      }
   }
   /// function TW3CustomForm.GetCaption() : String
   ///  [line: 177, column: 24, file: SmartCL.Forms]
   ,GetCaption:function(Self) {
      return Self.FCaption;
   }
   /// procedure TW3CustomForm.InitAsync(const OnReady: TProcedureRef)
   ///  [line: 218, column: 25, file: SmartCL.Forms]
   ,InitAsync:function(Self, OnReady$3) {
      if (Self.FInitialized$1 && (TW3ControlTracker.GetConstructionCount(TW3ControlTracker,Self)==0)) {
         OnReady$3();
         return;
      }
      TW3Dispatch.Execute(TW3Dispatch,function () {
         TW3OwnedObject.InitAsync$(Self,OnReady$3);
      },30);
   }
   /// procedure TW3CustomForm.InitializeForm()
   ///  [line: 167, column: 25, file: SmartCL.Forms]
   ,InitializeForm:function(Self) {
      Self.FInitialized$1 = true;
   }
   /// procedure TW3CustomForm.InitializeObject()
   ///  [line: 91, column: 25, file: SmartCL.Forms]
   ,InitializeObject:function(Self) {
      var FormInfo$1 = null,
         FormParent = null,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      function ClearAnchorGapFlags(Ctrl) {
         TW3TagContainer.ForEach$1(Ctrl,function (Child$1) {
            var Result = 160;
            var cc = null;
            if ($Is(Child$1,TW3CustomControl)) {
               cc = $As(Child$1,TW3CustomControl);
               ClearAnchorGapFlags(cc);
            }
            Result = 160;
            return Result
         });
         if ($SetIn(Ctrl.FComponentState,1,0,11)) {
            $SetExc(Ctrl.FComponentState,1,0,11);
            if ($SetIn(Ctrl.FComponentState,8,0,11)) {
               $SetExc(Ctrl.FComponentState,8,0,11);
            }
            if ($SetIn(Ctrl.FComponentState,9,0,11)) {
               $SetExc(Ctrl.FComponentState,9,0,11);
            }
         }
      };
      function ResizeAndAlign(Ctrl) {
         if ($SetIn(Ctrl.FComponentState,9,0,11)) {
            TW3MovableControl.AlignChildren(Ctrl);
         }
         if ($SetIn(Ctrl.FComponentState,8,0,11)) {
            TW3MovableControl.Resize$(Ctrl);
         }
         TW3TagContainer.ForEach$1(Ctrl,function (Child$1) {
            var Result = 160;
            var cc = null;
            if ($Is(Child$1,TW3CustomControl)) {
               cc = $As(Child$1,TW3CustomControl);
               ResizeAndAlign(cc);
            }
            Result = 160;
            return Result
         });
      };
      TW3CustomControl.InitializeObject(Self);
      Self.FTransparentEvents = false;
      FormInfo$1 = Forms$2().FAutoCreatingForm;
      if (FormInfo$1 === null || FormInfo$1.IsMainForm) {
         Self.FHandle$4.style.left = "0px";
         Self.FHandle$4.style.top = "0px";
      } else {
         Self.FHandle$4.style.left = "-10000px";
         Self.FHandle$4.style.top = "-10000px";
      }
      FormParent = $As(TW3TagContainer.a$53(Self),TW3CustomControl);
      if (FormParent !== null) {
         CRect = TW3MovableControl.ClientRect$(FormParent);
         Self.FHandle$4.style.width = TRect$Width$6(CRect).toString() + "px";
         Self.FHandle$4.style.height = TRect$Height$5(CRect).toString() + "px";
      }
      TW3TagObj.SetInitialTransformationStyles(Self);
      TW3Dispatch.Execute(TW3Dispatch,function () {
         TW3ControlTracker.ConstructionReadyExecute(TW3ControlTracker,Self,function () {
            ResizeAndAlign(Self);
            ClearAnchorGapFlags(Self);
            TW3CustomForm.BuildForm(Self);
         });
      },30);
   }
   /// procedure TW3CustomForm.SetCaption(const NewCaption: String)
   ///  [line: 172, column: 25, file: SmartCL.Forms]
   ,SetCaption:function(Self, NewCaption) {
      Self.FCaption = NewCaption;
   }
   /// procedure TW3CustomForm.StyleTagObject()
   ///  [line: 78, column: 25, file: SmartCL.Forms]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3MovableControl.SetStyleClass(Self,"TW3CustomForm");
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync$:function($){return $.ClassType.InitAsync.apply($.ClassType, arguments)}
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81$:function($){return $.ClassType.Create$81.apply($.ClassType, arguments)}
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,InitializeForm$:function($){return $.ClassType.InitializeForm($)}
};
TW3CustomForm.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Form = class (TW3CustomForm)
///  [line: 48, column: 3, file: SmartCL.Forms]
var TW3Form = {
   $ClassName:"TW3Form",$Parent:TW3CustomForm
   ,$Init:function ($) {
      TW3CustomForm.$Init($);
   }
   ,Destroy:TW3CustomForm.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3CustomForm.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomForm.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomForm.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3CustomForm.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,InitializeForm:TW3CustomForm.InitializeForm
};
TW3Form.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TFormThrottle = class (TW3Form)
///  [line: 26, column: 3, file: FormThrottle]
var TFormThrottle = {
   $ClassName:"TFormThrottle",$Parent:TW3Form
   ,$Init:function ($) {
      TW3Form.$Init($);
      $.W3TabControl1 = null;
   }
   /// procedure TFormThrottle.InitializeForm()
   ///  [line: 39, column: 25, file: FormThrottle]
   ,InitializeForm:function(Self) {
      TW3CustomForm.InitializeForm(Self);
   }
   /// procedure TFormThrottle.InitializeObject()
   ///  [line: 45, column: 25, file: FormThrottle]
   ,InitializeObject:function(Self) {
      TW3CustomForm.InitializeObject(Self);
      TW3ControlTracker.RegisterUnderConstruction(TW3ControlTracker,Self);
      $SetInc(Self.FComponentState,1,0,11);
      try {
         TW3CustomForm.SetCaption(Self,"W3Form");
         TW3TagContainer.SetComponentName(Self,"FormThrottle");
         Self.W3TabControl1 = TW3TagContainer.Create$81$($New(TW3TabControl),Self);
         TW3OwnedObject.InitAsync$(Self.W3TabControl1,function () {
            TW3MovableControl.SetAlign$(Self.W3TabControl1,5);
            TW3MovableControl.SetBounds$(Self.W3TabControl1,8,48,608,384);
            TW3TabControl.SetTabs(Self.W3TabControl1,["form:TTabMainForm", "form:TTabSettingsForm"]);
            TW3TagContainer.SetComponentName(Self.W3TabControl1,"W3TabControl1");
         });
      } finally {
         TW3ControlTracker.RegisterObjectReady(TW3ControlTracker,Self);
      }
   }
   /// procedure TFormThrottle.Resize()
   ///  [line: 51, column: 25, file: FormThrottle]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      InitializeStorage();
      TW3MovableControl.SetWidth$(Self.W3TabControl1,TW3MovableControl.ClientWidth(Self));
      TW3MovableControl.SetHeight$(Self.W3TabControl1,TW3MovableControl.ClientHeight(Self));
   }
   ,Destroy:TW3CustomForm.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3CustomForm.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomForm.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3CustomForm.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,InitializeForm$:function($){return $.ClassType.InitializeForm($)}
};
TFormThrottle.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3PreLoadBatch = record
///  [line: 63, column: 1, file: SmartCL.FileUtils]
function Copy$TW3PreLoadBatch(s,d) {
   return d;
}
function Clone$TW3PreLoadBatch($) {
   return {

   }
}
/// TW3HttpRequest = class (TObject)
///  [line: 72, column: 3, file: SmartCL.Net.Http]
var TW3HttpRequest = {
   $ClassName:"TW3HttpRequest",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnTimeout = null;
      $.OnError = null;
      $.OnLoad = null;
      $.OnReadyStateChange = null;
      $.OnDataReady = null;
      $.FheaderCache = $.FReqObj = null;
      $.FMethod = $.FURL = "";
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 113, column: 60, file: SmartCL.Net.Http]
   ,a$322:function(Self, Value$5) {
      Self.FReqObj.timeout = Value$5;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 113, column: 36, file: SmartCL.Net.Http]
   ,a$321:function(Self) {
      var Result = 0;
      Result = Self.FReqObj.timeout;
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 99, column: 39, file: SmartCL.Net.Http]
   ,a$316:function(Self) {
      var Result = "";
      Result = String(TW3HttpRequest.a$314(Self).responseXML);
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 98, column: 40, file: SmartCL.Net.Http]
   ,a$315:function(Self) {
      var Result = "";
      Result = Self.FReqObj.responseText;
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 95, column: 35, file: SmartCL.Net.Http]
   ,a$314:function(Self) {
      var Result = undefined;
      Result = Self.FReqObj;
      return Result
   }
   /// constructor TW3HttpRequest.Create()
   ///  [line: 127, column: 28, file: SmartCL.Net.Http]
   ,Create$171:function(Self) {
      TObject.Create(Self);
      Self.FReqObj = new XMLHttpRequest();
      Self.FReqObj.onreadystatechange = $Event0(Self,TW3HttpRequest.HandleReadyStateChange);
      Self.FReqObj.onerror = $Event0(Self,TW3HttpRequest.HandleOnError);
      Self.FReqObj.onload = $Event0(Self,TW3HttpRequest.HandleOnLoad);
      Self.FReqObj.ontimeout = $Event0(Self,TW3HttpRequest.HandleOnTimeout);
      Self.FheaderCache = THttpHeaders.Create$173($New(THttpHeaders));
      TW3HttpRequest.a$322(Self,10000);
      return Self
   }
   /// destructor TW3HttpRequest.Destroy()
   ///  [line: 140, column: 27, file: SmartCL.Net.Http]
   ,Destroy:function(Self) {
      if (Self.FReqObj) {
         Self.FReqObj.onreadystatechange = null;
         Self.FReqObj = null;
      }
      TObject.Free(Self.FheaderCache);
      TObject.Destroy(Self);
   }
   /// procedure TW3HttpRequest.Get(aURL: String)
   ///  [line: 201, column: 26, file: SmartCL.Net.Http]
   ,Get$1:function(Self, aURL) {
      TW3HttpRequest.Open$1(Self,"GET",aURL);
      TW3HttpRequest.WriteHeaderCache(Self);
      TW3HttpRequest.Send(Self);
   }
   /// procedure TW3HttpRequest.HandleOnError()
   ///  [line: 164, column: 26, file: SmartCL.Net.Http]
   ,HandleOnError:function(Self) {
      if (Self.OnError) {
         Self.OnError(Self);
      }
   }
   /// procedure TW3HttpRequest.HandleOnLoad()
   ///  [line: 170, column: 26, file: SmartCL.Net.Http]
   ,HandleOnLoad:function(Self) {
      if (Self.OnLoad) {
         Self.OnLoad(Self);
      }
   }
   /// procedure TW3HttpRequest.HandleOnTimeout()
   ///  [line: 176, column: 26, file: SmartCL.Net.Http]
   ,HandleOnTimeout:function(Self) {
      if (Self.OnTimeout) {
         Self.OnTimeout(Self);
      }
   }
   /// procedure TW3HttpRequest.HandleReadyStateChange()
   ///  [line: 154, column: 26, file: SmartCL.Net.Http]
   ,HandleReadyStateChange:function(Self) {
      if (Self.FReqObj.readyState == 4 && (Self.OnDataReady!==null)) {
         Self.OnDataReady(Self);
      }
      if (Self.OnReadyStateChange) {
         Self.OnReadyStateChange(Self);
      }
   }
   /// procedure TW3HttpRequest.Open(aMeth: String; aURL: String)
   ///  [line: 214, column: 26, file: SmartCL.Net.Http]
   ,Open$1:function(Self, aMeth, aURL) {
      Self.FMethod = aMeth;
      Self.FURL = aURL;
      Self.FReqObj.open(aMeth,aURL);
   }
   /// function TW3HttpRequest.ResponseAsBinaryData() : TBinaryData
   ///  [line: 242, column: 25, file: SmartCL.Net.Http]
   ,ResponseAsBinaryData:function(Self) {
      var Result = null;
      var mView = null,
         mRef = undefined,
         bytearray = [];
      Result = null;
      if (Self.FReqObj.readyState == 4 && Self.FReqObj.response) {
         mRef = Self.FReqObj.response;
         if (TVariant.IsString(mRef)) {
            Result = TBinaryData.Create$145($New(TBinaryData),null);
            TBinaryData.Write$7(Result,0,String(mRef));
         } else {
            mView = new Uint8Array(mRef);
            bytearray = TDatatype.TypedArrayToBytes(TDatatype,mView);
            Result = TAllocation.Create$78($New(TBinaryData));
            TBinaryData.AppendBytes(Result,bytearray);
         }
      }
      return Result
   }
   /// function TW3HttpRequest.ResponseAsStream() : TStream
   ///  [line: 233, column: 25, file: SmartCL.Net.Http]
   ,ResponseAsStream:function(Self) {
      var Result = null;
      var mTemp$1 = null;
      mTemp$1 = TW3HttpRequest.ResponseAsBinaryData(Self);
      if (mTemp$1 !== null) {
         Result = TBinaryData.ToStream(mTemp$1);
      }
      return Result
   }
   /// procedure TW3HttpRequest.Send()
   ///  [line: 221, column: 26, file: SmartCL.Net.Http]
   ,Send:function(Self) {
      TW3HttpRequest.WriteHeaderCache(Self);
      Self.FReqObj.send();
   }
   /// procedure TW3HttpRequest.WriteHeaderCache()
   ///  [line: 182, column: 26, file: SmartCL.Net.Http]
   ,WriteHeaderCache:function(Self) {
      var x$42 = 0,
         LName = "",
         LData = "";
      if (THttpHeaders.Count$13(Self.FheaderCache) > 0) {
         try {
            var $temp70;
            for(x$42=0,$temp70=THttpHeaders.Count$13(Self.FheaderCache);x$42<$temp70;x$42++) {
               LName = THttpHeaders.a$330(Self.FheaderCache,x$42);
               LData = THttpHeaders.a$331(Self.FheaderCache,x$42);
               Self.FReqObj.setRequestHeader(LName,LData);
            }
         } finally {
            THttpHeaders.Clear$19(Self.FheaderCache);
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// THttpHeaders = class (TObject)
///  [line: 39, column: 3, file: SmartCL.Net.Http]
var THttpHeaders = {
   $ClassName:"THttpHeaders",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FNames = [];
      $.FValues = [];
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 67, column: 74, file: SmartCL.Net.Http]
   ,a$332:function(Self, idx, Value$5) {
      Self.FValues[idx]=Value$5;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 67, column: 53, file: SmartCL.Net.Http]
   ,a$331:function(Self, idx) {
      var Result = "";
      Result = Self.FValues[idx];
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 65, column: 47, file: SmartCL.Net.Http]
   ,a$330:function(Self, idx) {
      var Result = "";
      Result = Self.FNames[idx];
      return Result
   }
   /// procedure THttpHeaders.Add(Header: String)
   ///  [line: 306, column: 24, file: SmartCL.Net.Http]
   ,Add$9:function(Self, Header$1) {
      var kv = [];
      kv = Header$1.split(":");
      if (kv.length > 0) {
         THttpHeaders.SetValue(Self,kv[0],(kv.length > 1)?kv[1]:"");
      }
   }
   /// procedure THttpHeaders.Assign(Headers: THttpHeaders)
   ///  [line: 319, column: 24, file: SmartCL.Net.Http]
   ,Assign$5:function(Self, Headers$1) {
      var i$7 = 0,
         name$29 = "";
      var $temp71;
      for(i$7=0,$temp71=THttpHeaders.Count$13(Headers$1);i$7<$temp71;i$7++) {
         name$29 = THttpHeaders.a$330(Headers$1,i$7);
         THttpHeaders.SetValue(Self,name$29,THttpHeaders.GetValue(Headers$1,name$29));
      }
   }
   /// procedure THttpHeaders.Assign(Headers: array of String)
   ///  [line: 313, column: 24, file: SmartCL.Net.Http]
   ,Assign$4:function(Self, Headers$1) {
      var a$417 = 0,
         header = "";
      var $temp72;
      for(a$417=0,$temp72=Headers$1.length;a$417<$temp72;a$417++) {
         header = Headers$1[a$417];
         THttpHeaders.Add$9(Self,header);
      }
   }
   /// procedure THttpHeaders.Clear()
   ///  [line: 295, column: 24, file: SmartCL.Net.Http]
   ,Clear$19:function(Self) {
      Self.FNames.length=0;
      Self.FValues.length=0;
   }
   /// function THttpHeaders.Count() : Integer
   ///  [line: 327, column: 23, file: SmartCL.Net.Http]
   ,Count$13:function(Self) {
      return Self.FNames.length;
   }
   /// constructor THttpHeaders.Create(headers: THttpHeaders)
   ///  [line: 289, column: 26, file: SmartCL.Net.Http]
   ,Create$174:function(Self, headers$1) {
      THttpHeaders.Create$173(Self);
      THttpHeaders.Assign$5(Self,headers$1);
      return Self
   }
   /// constructor THttpHeaders.Create()
   ///  [line: 278, column: 26, file: SmartCL.Net.Http]
   ,Create$173:function(Self) {
      TObject.Create(Self);
      return Self
   }
   /// constructor THttpHeaders.Create(headers: array of String)
   ///  [line: 283, column: 26, file: SmartCL.Net.Http]
   ,Create$172:function(Self, headers$1) {
      THttpHeaders.Create$173(Self);
      THttpHeaders.Assign$4(Self,headers$1);
      return Self
   }
   /// function THttpHeaders.GetValue(name: String) : String
   ///  [line: 345, column: 23, file: SmartCL.Net.Http]
   ,GetValue:function(Self, name$29) {
      var Result = "";
      var idx = 0;
      idx = THttpHeaders.IndexOf$5(Self,name$29);
      Result = (idx >= 0)?THttpHeaders.a$331(Self,idx):"";
      return Result
   }
   /// function THttpHeaders.IndexOf(Name: String) : Integer
   ///  [line: 351, column: 23, file: SmartCL.Net.Http]
   ,IndexOf$5:function(Self, Name$13) {
      var Result = 0;
      var ucName = "";
      ucName = (Name$13).toLocaleUpperCase();
      var $temp73;
      for(Result=0,$temp73=THttpHeaders.Count$13(Self);Result<$temp73;Result++) {
         if ((THttpHeaders.a$330(Self,Result)).toLocaleUpperCase() == ucName) {
            return Result;
         }
      }
      Result = -1;
      return Result
   }
   /// procedure THttpHeaders.SetValue(name: String; value: String)
   ///  [line: 360, column: 24, file: SmartCL.Net.Http]
   ,SetValue:function(Self, name$29, value$16) {
      var idx = 0;
      idx = THttpHeaders.IndexOf$5(Self,name$29);
      if (idx >= 0) {
         THttpHeaders.a$332(Self,idx,value$16);
      } else {
         Self.FNames.push(name$29);
         Self.FValues.push(value$16);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3CustomPanel = class (TW3CustomControl)
///  [line: 25, column: 3, file: SmartCL.Controls.Panel]
var TW3CustomPanel = {
   $ClassName:"TW3CustomPanel",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3CustomPanel.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Panel = class (TW3CustomPanel)
///  [line: 28, column: 3, file: SmartCL.Controls.Panel]
var TW3Panel = {
   $ClassName:"TW3Panel",$Parent:TW3CustomPanel
   ,$Init:function ($) {
      TW3CustomPanel.$Init($);
   }
   /// procedure TW3Panel.StyleTagObject()
   ///  [line: 42, column: 20, file: SmartCL.Controls.Panel]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,3);
      TW3CustomControl.SetBackgroundType(Self,3);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Panel.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3PaintBox = class (TW3GraphicControl)
///  [line: 17, column: 3, file: SmartCL.Controls.PaintBox]
var TW3PaintBox = {
   $ClassName:"TW3PaintBox",$Parent:TW3GraphicControl
   ,$Init:function ($) {
      TW3GraphicControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3GraphicControl.FinalizeObject
   ,InitializeObject:TW3GraphicControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3GraphicControl.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3GraphicControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3GraphicControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3GraphicControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3GraphicControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,Paint:TW3GraphicControl.Paint
};
TW3PaintBox.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3AnimationStartMode enumeration
///  [line: 21, column: 3, file: SmartCL.Animation]
var TW3AnimationStartMode = { 512:"asImmediate", 543:"asQueue" };
/// TW3AnimationConfig = class (TObject)
///  [line: 34, column: 3, file: SmartCL.Animation]
var TW3AnimationConfig = {
   $ClassName:"TW3AnimationConfig",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnCompleted = null;
      $.Loop = false;
      $.StartMode = 512;
   }
   /// constructor TW3AnimationConfig.Create()
   ///  [line: 204, column: 32, file: SmartCL.Animation]
   ,Create$187:function(Self) {
      TObject.Create(Self);
      Self.StartMode = 512;
      Self.OnCompleted = null;
      return Self
   }
   /// function TW3AnimationConfig.SetCompleted(const NewHandler: TW3AnimationCallback) : TW3AnimationConfig
   ///  [line: 217, column: 29, file: SmartCL.Animation]
   ,SetCompleted:function(Self, NewHandler) {
      var Result = null;
      Self.OnCompleted = NewHandler;
      Result = Self;
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TW3Animation = class (TObject)
///  [line: 47, column: 3, file: SmartCL.Animation]
var TW3Animation = {
   $ClassName:"TW3Animation",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnAnimationStopped = null;
      $.OnAnimationComplete = null;
      $.OnAnimationStep = null;
      $.FCallback = null;
      $.FCompleted = false;
      $.FConfig = $.FControl = $.FRepeater$1 = null;
      $.FTimeMs = 0;
      $.FTimeStart = 0;
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 74, column: 38, file: SmartCL.Animation]
   ,a$386:function(Self) {
      var Result = false;
      Result = Self.FRepeater$1.FActive;
      return Result
   }
   /// function TW3Animation.AnimationTimer(Sender: TW3CustomRepeater) : TW3RepeatResult
   ///  [line: 286, column: 23, file: SmartCL.Animation]
   ,AnimationTimer:function(Self, Sender) {
      var Result = 241;
      var progress = 0;
      Result = 241;
      progress = (Now()-Self.FTimeStart) * 86400000 / Self.FTimeMs;
      if (progress > 1) {
         progress = 1;
      }
      if (Self.OnAnimationStep) {
         Self.OnAnimationStep(progress);
      }
      if (progress == 1) {
         if ((Self.FConfig!==null) && Self.FConfig.Loop) {
            Self.FTimeStart = Now()-2.31481481481481E-7;
         } else {
            Self.FCompleted = true;
            Result = 242;
            if (Self.OnAnimationComplete) {
               Self.OnAnimationComplete(Self);
            }
            if (Self.FCallback) {
               Self.FCallback(Self);
            }
         }
      }
      return Result
   }
   /// constructor TW3Animation.Create(const Control: TW3CustomControl; const TimeInMs: Integer; const Config: TW3AnimationConfig; const AnimationStep: TW3AnimationStepEvent)
   ///  [line: 233, column: 26, file: SmartCL.Animation]
   ,Create$188:function(Self, Control$2, TimeInMs$1, Config$3, AnimationStep) {
      TObject.Create(Self);
      Self.OnAnimationStep = AnimationStep;
      Self.FControl = Control$2;
      Self.FTimeMs = TimeInMs$1;
      Self.FConfig = Config$3;
      Self.FRepeater$1 = TW3EventRepeater.Create$69($New(TW3EventRepeater));
      Self.FRepeater$1.OnRepeat = $Event1(Self,TW3Animation.AnimationTimer);
      TW3CustomRepeater.SetDelay$1(Self.FRepeater$1,20);
      return Self
   }
   /// destructor TW3Animation.Destroy()
   ///  [line: 250, column: 25, file: SmartCL.Animation]
   ,Destroy:function(Self) {
      TObject.Free(Self.FRepeater$1);
      Self.FRepeater$1 = null;
      TObject.Destroy(Self);
   }
   /// procedure TW3Animation.Initialize(var AnimationStep: TW3AnimationStepEvent)
   ///  [line: 315, column: 24, file: SmartCL.Animation]
   ,Initialize:function(Self, AnimationStep) {
      /* null */
   }
   /// function TW3Animation.Interpolate(vStart: Integer; vStop: Integer; progress: Float) : Integer
   ///  [line: 320, column: 29, file: SmartCL.Animation]
   ,Interpolate$1:function(Self, vStart, vStop, progress) {
      return Math.round(vStart+(vStop-vStart) * progress);
   }
   /// procedure TW3Animation.Start(const NotifyWhenFinished: TW3AnimationFinishedEvent)
   ///  [line: 257, column: 24, file: SmartCL.Animation]
   ,Start:function(Self, NotifyWhenFinished) {
      var AnimationStep = {v:null};
      if (NotifyWhenFinished) {
         Self.FCallback = NotifyWhenFinished;
      } else {
         Self.FCallback = null;
      }
      AnimationStep.v = Self.OnAnimationStep;
      TW3Animation.Initialize$(Self,AnimationStep);
      Self.OnAnimationStep = AnimationStep.v;
      Self.FTimeStart = Now();
      TW3CustomRepeater.SetActive(Self.FRepeater$1,true);
   }
   /// procedure TW3Animation.Stop()
   ///  [line: 276, column: 24, file: SmartCL.Animation]
   ,Stop$2:function(Self) {
      if (TW3Animation.a$386(Self)) {
         TW3CustomRepeater.SetActive(Self.FRepeater$1,false);
         if (Self.OnAnimationStopped) {
            Self.OnAnimationStopped(Self);
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Initialize$:function($){return $.ClassType.Initialize.apply($.ClassType, arguments)}
};
/// TControlAnimationList = class (TObject)
///  [line: 87, column: 3, file: SmartCL.Animation]
var TControlAnimationList = {
   $ClassName:"TControlAnimationList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FControl$1 = null;
      $.FItems$2 = [];
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 113, column: 64, file: SmartCL.Animation]
   ,a$390:function(Self, Index$6) {
      var Result = null;
      Result = Self.FItems$2[Index$6];
      return Result
   }
   /// procedure TControlAnimationList.Animate(TimeInMs: Integer; AnimateProc: TW3AnimationStepEvent; Config: TW3AnimationConfig = nil)
   ///  [line: 488, column: 33, file: SmartCL.Animation]
   ,Animate:function(Self, TimeInMs$1, AnimateProc, Config$3) {
      var LItem$3 = null;
      if ((Config$3!==null) && Config$3.StartMode == 512) {
         Self.FItems$2.length=0;
      }
      LItem$3 = TW3Animation.Create$188($New(TW3Animation),Self.FControl$1,TimeInMs$1,Config$3,AnimateProc);
      Self.FItems$2.push(LItem$3);
      if (Self.FItems$2.length > 0) {
         TW3Animation.Start(LItem$3,$Event1(Self,TControlAnimationList.MoveToNext));
      }
   }
   /// procedure TControlAnimationList.Clear()
   ///  [line: 471, column: 33, file: SmartCL.Animation]
   ,Clear$27:function(Self) {
      var a$418 = 0,
         Item$3 = null;
      if (Self.FItems$2.length > 0) {
         try {
            var a$419 = [];
            a$419 = Self.FItems$2;
            var $temp74;
            for(a$418=0,$temp74=a$419.length;a$418<$temp74;a$418++) {
               Item$3 = a$419[a$418];
               if (TW3Animation.a$386(Item$3)) {
                  TW3Animation.Stop$2(Item$3);
               }
               TObject.Free(Item$3);
            }
         } finally {
            Self.FItems$2.length=0;
         }
      }
   }
   /// constructor TControlAnimationList.Create(const Control: TW3CustomControl)
   ///  [line: 459, column: 35, file: SmartCL.Animation]
   ,Create$189:function(Self, Control$2) {
      TObject.Create(Self);
      Self.FControl$1 = Control$2;
      return Self
   }
   /// destructor TControlAnimationList.Destroy()
   ///  [line: 465, column: 34, file: SmartCL.Animation]
   ,Destroy:function(Self) {
      TControlAnimationList.Clear$27(Self);
      TObject.Destroy(Self);
   }
   /// function TControlAnimationList.IsActive() : Boolean
   ///  [line: 506, column: 32, file: SmartCL.Animation]
   ,IsActive:function(Self) {
      return Self.FItems$2.length > 0 && (!(TControlAnimationList.a$390(Self,0).FCompleted));
   }
   /// procedure TControlAnimationList.Move(TimeInMs: Integer; X: Integer; Y: Integer; config: TW3AnimationConfig = nil)
   ///  [line: 511, column: 33, file: SmartCL.Animation]
   ,Move$5:function(Self, TimeInMs$1, X$2, Y$2, config) {
      TControlAnimationList.PrepareAnimation(Self,TMoveAnimation.Create$192($New(TMoveAnimation),Self.FControl$1,TimeInMs$1,config,Create$105(X$2,Y$2)),config);
   }
   /// procedure TControlAnimationList.MoveToNext(const Animation: TW3Animation)
   ///  [line: 532, column: 33, file: SmartCL.Animation]
   ,MoveToNext:function(Self, Animation) {
      var Index$6 = 0,
         AnimItem = null;
      Index$6 = Self.FItems$2.indexOf(Animation);
      if (Index$6 >= 0) {
         Self.FItems$2.splice(Index$6,1)
         ;
      }
      if (Animation.FConfig) {
         if (Animation.FConfig.OnCompleted) {
            Animation.FConfig.OnCompleted();
         }
      }
      TW3Dispatch.Execute(TW3Dispatch,function () {
         TObject.Free(Animation);
      },0);
      if (Self.FItems$2.length > 0) {
         AnimItem = Self.FItems$2[0];
         if (!(TW3Animation.a$386(AnimItem))) {
            TW3Animation.Start(AnimItem,$Event1(Self,TControlAnimationList.MoveToNext));
         }
      }
   }
   /// procedure TControlAnimationList.PrepareAnimation(const Animation: TW3Animation; const Config: TW3AnimationConfig)
   ///  [line: 577, column: 33, file: SmartCL.Animation]
   ,PrepareAnimation:function(Self, Animation, Config$3) {
      var Index$6 = 0;
      if (Animation !== null) {
         Index$6 = Self.FItems$2.length;
         Self.FItems$2.push(Animation);
         if ((!(Config$3!==null)) || Config$3.StartMode == 512) {
            TW3Animation.Start(Self.FItems$2[Index$6],$Event1(Self,TControlAnimationList.MoveToNext));
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TControlAnimationList.PrepareAnimation", TObject.ClassName(Self.ClassType), "Animation instance was nil"]);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TAnimationManager = class (TObject)
///  [line: 117, column: 3, file: SmartCL.Animation]
var TAnimationManager = {
   $ClassName:"TAnimationManager",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TAnimationManager.HasAnimationList(const ThisControl: TW3CustomControl) : Boolean
   ///  [line: 634, column: 28, file: SmartCL.Animation]
   ,HasAnimationList:function(Self, ThisControl) {
      var Result = false;
      Result = (ThisControl).hasOwnProperty('AM_AL');
      return Result
   }
   /// function TAnimationManager.GetAnimationList(const ThisControl: TW3CustomControl) : TControlAnimationList
   ///  [line: 617, column: 28, file: SmartCL.Animation]
   ,GetAnimationList:function(Self, ThisControl) {
      var Result = null;
      if (TAnimationManager.HasAnimationList(Self,ThisControl)) {
         Result = (ThisControl).AM_AL;
      } else {
         Result = TControlAnimationList.Create$189($New(TControlAnimationList),ThisControl);
         (ThisControl).AM_AL = Result;
      }
      return Result
   }
   /// function TAnimationManager.NewConfig() : TW3AnimationConfig
   ///  [line: 612, column: 34, file: SmartCL.Animation]
   ,NewConfig:function(Self) {
      return TW3AnimationConfig.Create$187($New(TW3AnimationConfig));
   }
   ,Destroy:TObject.Destroy
};
function AnimationManager() {
   var Result = null;
   if (!GAnimationManager) {
      GAnimationManager = TObject.Create($New(TAnimationManager));
   }
   Result = GAnimationManager;
   return Result
};
/// TMoveAnimation = class (TW3Animation)
///  [line: 168, column: 3, file: SmartCL.Animation]
var TMoveAnimation = {
   $ClassName:"TMoveAnimation",$Parent:TW3Animation
   ,$Init:function ($) {
      TW3Animation.$Init($);
      $.FCachedIndex = 0;
      $.FRelativeMove = false;
      $.FToPoint = {X$1:0,Y$1:0};
   }
   /// constructor TMoveAnimation.Create(Control: TW3CustomControl; TimeInMs: Integer; Config: TW3AnimationConfig; Path: TW3AnimationPath)
   ///  [line: 356, column: 28, file: SmartCL.Animation]
   ,Create$194:function(Self, Control$2, TimeInMs$1, Config$3, Path$1) {
      var i$7 = 0,
         lengths = [],
         totalLen = 0;
      Self.FRelativeMove = false;
      $Assert(!(Odd$_Integer_(Path$1.length)),"Path must contain even number of elements","");
      $Assert(Path$1.length >= 4,"Path must contain at least four elements","");
      totalLen = 0;
      lengths.push(totalLen);
      var $temp75;
      for(i$7=0,$temp75=Path$1.length-4;i$7<=$temp75;i$7+=2) {
         totalLen += Math.sqrt((Math.pow(Path$1[i$7+2]-Path$1[i$7],2))+(Math.pow(Path$1[i$7+3]-Path$1[i$7+1],2)));
         lengths.push(totalLen);
      }
      TW3Animation.Create$188(Self,Control$2,TimeInMs$1,Config$3,function (Progress) {
         var x$42 = { v : 0 },
            y$32 = { v : 0 };
         TMoveAnimation.FindPathCoords(Self,Progress,Path$1,lengths,totalLen,x$42,y$32);
         TW3TagObj.BeginUpdate(Control$2);
         TW3MovableControl.SetLeft$(Control$2,x$42.v);
         TW3MovableControl.SetTop$(Control$2,y$32.v);
         TW3TagObj.EndUpdate(Control$2);
      });
      return Self
   }
   /// constructor TMoveAnimation.Create(Control: TW3CustomControl; TimeInMs: Integer; Config: TW3AnimationConfig; FromPoint: TPoint; ToPoint: TPoint)
   ///  [line: 334, column: 28, file: SmartCL.Animation]
   ,Create$193:function(Self, Control$2, TimeInMs$1, Config$3, FromPoint, ToPoint) {
      TW3Animation.Create$188(Self,Control$2,TimeInMs$1,Config$3,function (Progress) {
         TW3TagObj.BeginUpdate(Control$2);
         TW3MovableControl.SetLeft$(Control$2,TW3Animation.Interpolate$1(Self.ClassType,FromPoint.X$1,ToPoint.X$1,Progress));
         TW3MovableControl.SetTop$(Control$2,TW3Animation.Interpolate$1(Self.ClassType,FromPoint.Y$1,ToPoint.Y$1,Progress));
         TW3TagObj.EndUpdate(Control$2);
      });
      Self.FRelativeMove = false;
      return Self
   }
   /// constructor TMoveAnimation.Create(Control: TW3CustomControl; TimeInMs: Integer; Config: TW3AnimationConfig; ToPoint: TPoint)
   ///  [line: 348, column: 28, file: SmartCL.Animation]
   ,Create$192:function(Self, Control$2, TimeInMs$1, Config$3, ToPoint) {
      TW3Animation.Create$188(Self,Control$2,TimeInMs$1,Config$3,null);
      Self.FRelativeMove = true;
      Copy$TPoint(ToPoint,Self.FToPoint);
      return Self
   }
   /// procedure TMoveAnimation.FindPathCoords(progress: Float; path: TW3AnimationPath; lengths: array of Float; totalLen: Float; var x: Integer; var y: Integer)
   ///  [line: 388, column: 26, file: SmartCL.Animation]
   ,FindPathCoords:function(Self, progress, path$1, lengths, totalLen, x$42, y$32) {
      var linePart = 0;
      progress *= totalLen;
      if (progress >= lengths[Self.FCachedIndex+1]) {
         while (Self.FCachedIndex < lengths.length-2 && progress >= lengths[Self.FCachedIndex+1]) {
            ++Self.FCachedIndex         }
      }
      linePart = 1;
      if (lengths[Self.FCachedIndex+1] != lengths[Self.FCachedIndex]) {
         linePart = (progress-lengths[Self.FCachedIndex]) / (lengths[Self.FCachedIndex+1]-lengths[Self.FCachedIndex]);
         if (linePart > 1) {
            linePart = 1;
         }
      }
      x$42.v = TW3Animation.Interpolate$1(Self.ClassType,path$1[Self.FCachedIndex*2],path$1[(Self.FCachedIndex*2)+2],linePart);
      y$32.v = TW3Animation.Interpolate$1(Self.ClassType,path$1[(Self.FCachedIndex*2)+1],path$1[(Self.FCachedIndex*2)+3],linePart);
   }
   /// procedure TMoveAnimation.Initialize(var animationStep: TW3AnimationStepEvent)
   ///  [line: 410, column: 26, file: SmartCL.Animation]
   ,Initialize:function(Self, animationStep) {
      var fromPoint = {X$1:0,Y$1:0};
      if (Self.FRelativeMove) {
         fromPoint = Create$105(TW3MovableControl.GetLeft(Self.FControl),TW3MovableControl.GetTop(Self.FControl));
         Self.OnAnimationStep = function (Progress) {
            TW3TagObj.BeginUpdate(Self.FControl);
            TW3MovableControl.SetLeft$(Self.FControl,TW3Animation.Interpolate$1(Self.ClassType,fromPoint.X$1,Self.FToPoint.X$1,Progress));
            TW3MovableControl.SetTop$(Self.FControl,TW3Animation.Interpolate$1(Self.ClassType,fromPoint.Y$1,Self.FToPoint.Y$1,Progress));
            TW3TagObj.EndUpdate(Self.FControl);
         };
      }
   }
   ,Destroy:TW3Animation.Destroy
   ,Initialize$:function($){return $.ClassType.Initialize.apply($.ClassType, arguments)}
};
/// TW3ListBoxLabel = class (TW3Label)
///  [line: 59, column: 3, file: SmartCL.Controls.ListBox]
var TW3ListBoxLabel = {
   $ClassName:"TW3ListBoxLabel",$Parent:TW3Label
   ,$Init:function ($) {
      TW3Label.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3Label.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3Label.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3ListBoxLabel.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ListBoxItemData = class (TObject)
///  [line: 37, column: 3, file: SmartCL.Controls.ListBox]
var TW3ListBoxItemData = {
   $ClassName:"TW3ListBoxItemData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Caption$10 = "";
      $.FSelected$2 = false;
      $.Height$10 = $.Index$4 = $.Top$7 = 0;
      $.ItemObject = null;
   }
   /// destructor TW3ListBoxItemData.Destroy()
   ///  [line: 150, column: 31, file: SmartCL.Controls.ListBox]
   ,Destroy:function(Self) {
      if (Self.ItemObject !== null) {
         TObject.Free(Self.ItemObject);
      }
      TObject.Destroy(Self);
   }
   /// procedure TW3ListBoxItemData.RemoveSelectedStyle()
   ///  [line: 157, column: 30, file: SmartCL.Controls.ListBox]
   ,RemoveSelectedStyle:function(Self) {
      if (Self.ItemObject !== null) {
         TW3TagStyle.RemoveClassFromControl(TW3TagStyle,Self.ItemObject.FHandle$4,"TW3ListItemSelectedBackground");
      }
   }
   /// procedure TW3ListBoxItemData.SetSelected(const Value: Boolean)
   ///  [line: 169, column: 30, file: SmartCL.Controls.ListBox]
   ,SetSelected$2:function(Self, Value$5) {
      if (Value$5 != Self.FSelected$2) {
         Self.FSelected$2 = Value$5;
         if (Self.ItemObject !== null) {
            if (Value$5) {
               TW3ListBoxItemData.SetSelectedStyle(Self);
            } else {
               TW3ListBoxItemData.RemoveSelectedStyle(Self);
            }
         }
      }
   }
   /// procedure TW3ListBoxItemData.SetSelectedStyle()
   ///  [line: 163, column: 30, file: SmartCL.Controls.ListBox]
   ,SetSelectedStyle:function(Self) {
      if (Self.ItemObject !== null) {
         TW3TagStyle.AddClassToControl(TW3TagStyle,Self.ItemObject.FHandle$4,"TW3ListItemSelectedBackground");
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TW3CustomScrollControl = class (TW3CustomControl)
///  [line: 238, column: 3, file: SmartCL.Scroll]
var TW3CustomScrollControl = {
   $ClassName:"TW3CustomScrollControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FBarSize = 20;
      $.FContainer = $.FHorizScrollBar = $.FHorizScrollIndicator = $.FVertScrollBar = $.FVertScrollIndicator = null;
      $.FScrollBars = 0;
   }
   /// function TW3CustomScrollControl.AdjustClientRect(const Rect: TRect) : TRect
   ///  [line: 1002, column: 33, file: SmartCL.Scroll]
   ,AdjustClientRect:function(Self, Rect$1) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      Result.Top$3 = Rect$1.Top$3;
      Result.Left$3 = Rect$1.Top$3;
      if (Self.FVertScrollBar !== null && TW3MovableControl.GetVisible(Self.FVertScrollBar)) {
         Result.Right$1 = Rect$1.Right$1-Self.FBarSize;
      } else {
         Result.Right$1 = Rect$1.Right$1;
      }
      if (Self.FHorizScrollBar !== null && TW3MovableControl.GetVisible(Self.FHorizScrollBar)) {
         Result.Bottom$1 = Rect$1.Bottom$1-Self.FBarSize;
      } else {
         Result.Bottom$1 = Rect$1.Bottom$1;
      }
      return Result
   }
   /// procedure TW3CustomScrollControl.FinalizeObject()
   ///  [line: 966, column: 34, file: SmartCL.Scroll]
   ,FinalizeObject:function(Self) {
      if (Self.FHorizScrollBar !== null) {
         TObject.Free(Self.FHorizScrollBar);
      }
      if (Self.FVertScrollBar !== null) {
         TObject.Free(Self.FVertScrollBar);
      }
      if (Self.FHorizScrollIndicator !== null) {
         TObject.Free(Self.FHorizScrollIndicator);
      }
      if (Self.FVertScrollIndicator !== null) {
         TObject.Free(Self.FVertScrollIndicator);
      }
      TW3CustomControl.FinalizeObject(Self);
   }
   /// function TW3CustomScrollControl.GetBarSize() : Integer
   ///  [line: 987, column: 34, file: SmartCL.Scroll]
   ,GetBarSize:function(Self) {
      return Self.FBarSize;
   }
   /// function TW3CustomScrollControl.GetContentHeight() : Integer
   ///  [line: 1229, column: 33, file: SmartCL.Scroll]
   ,GetContentHeight:function(Self) {
      return 0;
   }
   /// function TW3CustomScrollControl.GetContentWidth() : Integer
   ///  [line: 1224, column: 33, file: SmartCL.Scroll]
   ,GetContentWidth:function(Self) {
      return 0;
   }
   /// function TW3CustomScrollControl.GetHorizontalScrollPosition() : Integer
   ///  [line: 1234, column: 33, file: SmartCL.Scroll]
   ,GetHorizontalScrollPosition:function(Self) {
      return 0;
   }
   /// function TW3CustomScrollControl.GetScrollContainerClass() : TW3ScrollContainerClass
   ///  [line: 982, column: 33, file: SmartCL.Scroll]
   ,GetScrollContainerClass:function(Self) {
      return TW3ScrollContainer;
   }
   /// function TW3CustomScrollControl.GetVerticalScrollPosition() : Integer
   ///  [line: 1239, column: 33, file: SmartCL.Scroll]
   ,GetVerticalScrollPosition:function(Self) {
      return 0;
   }
   /// procedure TW3CustomScrollControl.HandleScrollBar(Sender: TObject)
   ///  [line: 1128, column: 34, file: SmartCL.Scroll]
   ,HandleScrollBar:function(Self, Sender) {
      /* null */
   }
   /// procedure TW3CustomScrollControl.InitializeObject()
   ///  [line: 957, column: 34, file: SmartCL.Scroll]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FBarSize = 20;
      Self.FScrollBars = 0;
      Self.FContainer = TW3TagContainer.Create$81$($NewDyn(TW3CustomScrollControl.GetScrollContainerClass(Self),""),Self);
   }
   /// function TW3CustomScrollControl.IsObjectReady() : Boolean
   ///  [line: 951, column: 33, file: SmartCL.Scroll]
   ,IsObjectReady:function(Self) {
      return TW3MovableControl.IsObjectReady(Self) && Self.FContainer !== null && TW3OwnedObject.IsObjectReady$(Self.FContainer);
   }
   /// procedure TW3CustomScrollControl.Resize()
   ///  [line: 1016, column: 34, file: SmartCL.Scroll]
   ,Resize:function(Self) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      TW3MovableControl.Resize(Self);
      if ($SetIn(Self.FComponentState,4,0,11) && TW3MovableControl.GetIsVisible(Self)) {
         CRect = TW3MovableControl.AdjustClientRect$(Self,TW3MovableControl.ClientRect$(Self));
         TW3CustomScrollControl.ResizeScrollBars$(Self,CRect);
         if (Self.FContainer !== null) {
            TW3MovableControl.SetBounds$1$(Self.FContainer,CRect);
         }
         TW3CustomScrollControl.UpdateIndicators(Self,null);
      }
   }
   /// procedure TW3CustomScrollControl.ResizeScrollBars(const Rect: TRect)
   ///  [line: 1032, column: 34, file: SmartCL.Scroll]
   ,ResizeScrollBars:function(Self, Rect$1) {
      if (Self.FVertScrollBar !== null) {
         TW3MovableControl.SetBounds$(Self.FVertScrollBar,Rect$1.Right$1,Rect$1.Top$3,Self.FBarSize,TRect$Height$5(Rect$1));
      }
      if (Self.FHorizScrollBar !== null) {
         TW3MovableControl.SetBounds$(Self.FHorizScrollBar,Rect$1.Left$3,Rect$1.Bottom$1,TRect$Width$6(Rect$1),Self.FBarSize);
      }
      if (Self.FVertScrollIndicator !== null) {
         TW3MovableControl.SetBounds$(Self.FVertScrollIndicator,Rect$1.Right$1-8,Rect$1.Top$3,4,TRect$Height$5(Rect$1));
      }
      if (Self.FHorizScrollIndicator !== null) {
         TW3MovableControl.SetBounds$(Self.FHorizScrollIndicator,Rect$1.Left$3,Rect$1.Bottom$1-8,TRect$Width$6(Rect$1),4);
      }
   }
   /// procedure TW3CustomScrollControl.SetBarSize(const NewSize: Integer)
   ///  [line: 992, column: 34, file: SmartCL.Scroll]
   ,SetBarSize:function(Self, NewSize) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Self.FBarSize = NewSize;
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3MovableControl.Invalidate$(Self);
         }
      }
   }
   /// procedure TW3CustomScrollControl.SetScrollBars(const Value: TW3ScrollBarType)
   ///  [line: 1047, column: 34, file: SmartCL.Scroll]
   ,SetScrollBars:function(Self, Value$5) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Value$5 != Self.FScrollBars) {
            Self.FScrollBars = Value$5;
            switch (Value$5) {
               case 1 :
                  if (Self.FVertScrollBar !== null) {
                     TW3TagObj.FreeAfter(Self.FVertScrollBar,100);
                     Self.FVertScrollBar = null;
                  }
                  if (Self.FHorizScrollBar !== null) {
                     TW3TagObj.FreeAfter(Self.FHorizScrollBar,100);
                     Self.FHorizScrollBar = null;
                  }
                  Self.FVertScrollIndicator = TW3TagContainer.Create$81$($New(TW3ScrollContentIndicator),Self);
                  Self.FHorizScrollIndicator = TW3TagContainer.Create$81$($New(TW3ScrollContentIndicator),Self);
                  Self.FHorizScrollIndicator.FDirection$2 = 1;
                  break;
               case 2 :
                  if (Self.FVertScrollIndicator !== null) {
                     TW3TagObj.FreeAfter(Self.FVertScrollIndicator,100);
                     Self.FVertScrollIndicator = null;
                  }
                  if (Self.FHorizScrollIndicator !== null) {
                     TW3TagObj.FreeAfter(Self.FHorizScrollIndicator,100);
                     Self.FHorizScrollIndicator = null;
                  }
                  Self.FHorizScrollBar = TW3TagContainer.Create$81$($New(TW3HorizontalScrollbar),Self);
                  TW3CustomControl._setChanged(Self.FHorizScrollBar,$Event1(Self,TW3CustomScrollControl.HandleScrollBar$));
                  Self.FVertScrollBar = TW3TagContainer.Create$81$($New(TW3VerticalScrollbar),Self);
                  TW3CustomControl._setChanged(Self.FVertScrollBar,$Event1(Self,TW3CustomScrollControl.HandleScrollBar$));
                  break;
               default :
                  if (Self.FVertScrollBar !== null) {
                     TW3TagObj.FreeAfter(Self.FVertScrollBar,100);
                     Self.FVertScrollBar = null;
                  }
                  if (Self.FHorizScrollBar !== null) {
                     TW3TagObj.FreeAfter(Self.FHorizScrollBar,100);
                     Self.FHorizScrollBar = null;
                  }
                  if (Self.FVertScrollIndicator !== null) {
                     TW3TagObj.FreeAfter(Self.FVertScrollIndicator,100);
                     Self.FVertScrollIndicator = null;
                  }
                  if (Self.FHorizScrollIndicator !== null) {
                     TW3TagObj.FreeAfter(Self.FHorizScrollIndicator,100);
                     Self.FHorizScrollIndicator = null;
                  }
                  TW3MovableControl.Invalidate$(Self);
            }
         }
      }
   }
   /// procedure TW3CustomScrollControl.UpdateIndicators(Sender: TObject)
   ///  [line: 1133, column: 34, file: SmartCL.Scroll]
   ,UpdateIndicators:function(Self, Sender) {
      var ContainerHeight = 0,
         ContainerWidth = 0,
         ContentHeight = 0,
         ContentWidth = 0;
      if ($SetIn(Self.FComponentState,4,0,11) && (!($SetIn(Self.FComponentState,3,0,11))) && (!($SetIn(Self.FComponentState,10,0,11)))) {
         ContainerHeight = TW3MovableControl.ClientHeight(Self.FContainer);
         ContainerWidth = TW3MovableControl.ClientWidth(Self.FContainer);
         ContentHeight = TW3CustomScrollControl.GetContentHeight$(Self);
         ContentWidth = TW3CustomScrollControl.GetContentWidth$(Self);
         if (Self.FVertScrollBar !== null) {
            TW3TagObj.BeginUpdate(Self.FVertScrollBar);
            try {
               if (ContainerHeight < ContentHeight) {
                  if (!(TW3MovableControl.GetVisible(Self.FVertScrollBar))) {
                     TW3MovableControl.SetVisible(Self.FVertScrollBar,true);
                     TW3MovableControl.Invalidate$(Self);
                  }
                  TW3CustomScrollBar.SetPageSize(Self.FVertScrollBar,ContainerHeight);
                  TW3CustomScrollBar.SetTotal(Self.FVertScrollBar,ContentHeight);
                  TW3CustomScrollBar.SetPosition$3(Self.FVertScrollBar,TW3CustomScrollControl.GetVerticalScrollPosition$(Self));
               } else {
                  if (TW3MovableControl.GetVisible(Self.FVertScrollBar)) {
                     TW3MovableControl.SetVisible(Self.FVertScrollBar,false);
                     TW3MovableControl.Invalidate$(Self);
                  }
               }
            } finally {
               TW3TagObj.EndUpdate(Self.FVertScrollBar);
            }
         }
         if (Self.FHorizScrollBar !== null) {
            TW3TagObj.BeginUpdate(Self.FHorizScrollBar);
            try {
               if (ContainerWidth < ContentWidth) {
                  if (!(TW3MovableControl.GetVisible(Self.FHorizScrollBar))) {
                     TW3MovableControl.SetVisible(Self.FHorizScrollBar,true);
                     TW3MovableControl.Invalidate$(Self);
                  }
                  TW3CustomScrollBar.SetPageSize(Self.FHorizScrollBar,ContainerWidth);
                  TW3CustomScrollBar.SetTotal(Self.FHorizScrollBar,ContentWidth);
                  TW3CustomScrollBar.SetPosition$3(Self.FHorizScrollBar,TW3CustomScrollControl.GetHorizontalScrollPosition$(Self));
               } else {
                  if (TW3MovableControl.GetVisible(Self.FHorizScrollBar)) {
                     TW3MovableControl.SetVisible(Self.FHorizScrollBar,false);
                     TW3MovableControl.Invalidate$(Self);
                  }
               }
            } finally {
               TW3TagObj.EndUpdate(Self.FHorizScrollBar);
            }
         }
         if (Self.FVertScrollIndicator !== null) {
            TW3CustomScrollContentIndicator.UpdateIndicator$(Self.FVertScrollIndicator,ContentHeight,ContainerHeight,TW3CustomScrollControl.GetVerticalScrollPosition$(Self));
         }
         if (Self.FHorizScrollIndicator !== null) {
            TW3CustomScrollContentIndicator.UpdateIndicator$(Self.FHorizScrollIndicator,ContentWidth,ContainerWidth,TW3CustomScrollControl.GetHorizontalScrollPosition$(Self));
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady$:function($){return $.ClassType.IsObjectReady($)}
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect$:function($){return $.ClassType.AdjustClientRect.apply($.ClassType, arguments)}
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetContentHeight$:function($){return $.ClassType.GetContentHeight($)}
   ,GetContentWidth$:function($){return $.ClassType.GetContentWidth($)}
   ,GetHorizontalScrollPosition$:function($){return $.ClassType.GetHorizontalScrollPosition($)}
   ,GetVerticalScrollPosition$:function($){return $.ClassType.GetVerticalScrollPosition($)}
   ,HandleScrollBar$:function($){return $.ClassType.HandleScrollBar.apply($.ClassType, arguments)}
   ,ResizeScrollBars$:function($){return $.ClassType.ResizeScrollBars.apply($.ClassType, arguments)}
   ,SetScrollBars$:function($){return $.ClassType.SetScrollBars.apply($.ClassType, arguments)}
};
TW3CustomScrollControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollControl = class (TW3CustomScrollControl)
///  [line: 271, column: 3, file: SmartCL.Scroll]
var TW3ScrollControl = {
   $ClassName:"TW3ScrollControl",$Parent:TW3CustomScrollControl
   ,$Init:function ($) {
      TW3CustomScrollControl.$Init($);
      $.FContent$1 = $.FObserver = $.FScrollController = null;
   }
   /// procedure TW3ScrollControl.FinalizeObject()
   ///  [line: 1266, column: 28, file: SmartCL.Scroll]
   ,FinalizeObject:function(Self) {
      TW3ScrollControl.SetAutoUpdate(Self,false);
      TObject.Free(Self.FScrollController);
      TObject.Free(Self.FContent$1);
      TW3CustomScrollControl.FinalizeObject(Self);
   }
   /// function TW3ScrollControl.GetAutoUpdate() : Boolean
   ///  [line: 1314, column: 27, file: SmartCL.Scroll]
   ,GetAutoUpdate:function(Self) {
      return Self.FObserver !== null;
   }
   /// function TW3ScrollControl.GetContentHeight() : Integer
   ///  [line: 1354, column: 27, file: SmartCL.Scroll]
   ,GetContentHeight:function(Self) {
      return TW3MovableControl.GetHeight$(Self.FContent$1);
   }
   /// function TW3ScrollControl.GetContentWidth() : Integer
   ///  [line: 1349, column: 27, file: SmartCL.Scroll]
   ,GetContentWidth:function(Self) {
      return TW3MovableControl.GetWidth$(Self.FContent$1);
   }
   /// function TW3ScrollControl.GetHorizontalScrollPosition() : Integer
   ///  [line: 1359, column: 27, file: SmartCL.Scroll]
   ,GetHorizontalScrollPosition:function(Self) {
      return Math.abs(Self.FScrollController.FContentLeft);
   }
   /// function TW3ScrollControl.GetScrollContentClass() : TW3ScrollContentClass
   ///  [line: 1274, column: 27, file: SmartCL.Scroll]
   ,GetScrollContentClass:function(Self) {
      return TW3ScrollContent;
   }
   /// function TW3ScrollControl.GetVerticalScrollPosition() : Integer
   ///  [line: 1364, column: 27, file: SmartCL.Scroll]
   ,GetVerticalScrollPosition:function(Self) {
      return Math.abs(Self.FScrollController.FContentTop);
   }
   /// procedure TW3ScrollControl.HandleScrollBar(Sender: TObject)
   ///  [line: 1279, column: 28, file: SmartCL.Scroll]
   ,HandleScrollBar:function(Self, Sender) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Sender === Self.FVertScrollBar) {
            TW3ScrollController.MoveContentTo(Self.FScrollController,Self.FScrollController.FContentLeft,-Self.FVertScrollBar.FPosition);
         } else if (Sender === Self.FHorizScrollBar) {
            TW3ScrollController.MoveContentTo(Self.FScrollController,-Self.FHorizScrollBar.FPosition,Self.FScrollController.FContentTop);
         }
      }
   }
   /// procedure TW3ScrollControl.InitializeObject()
   ///  [line: 1252, column: 28, file: SmartCL.Scroll]
   ,InitializeObject:function(Self) {
      TW3CustomScrollControl.InitializeObject(Self);
      Self.FContent$1 = TW3TagContainer.Create$81$($NewDyn(TW3ScrollControl.GetScrollContentClass(Self),""),Self.FContainer);
      Self.FScrollController = TW3ScrollController.Create$175($New(TW3ScrollController),Self.FContainer);
      TW3ScrollController.SetContent(Self.FScrollController,Self.FContent$1);
      Self.FScrollController.FOnUpdateIndicator = $Event1(Self,TW3CustomScrollControl.UpdateIndicators);
      Self.FScrollController.FOnScrolling = function (_implicit_Sender) {
         if (Self.FOnScroll) {
            Self.FOnScroll(Self);
         }
      };
      Self.FScrollController.LockMovementDirection = true;
   }
   /// function TW3ScrollControl.IsObjectReady() : Boolean
   ///  [line: 1246, column: 27, file: SmartCL.Scroll]
   ,IsObjectReady:function(Self) {
      return TW3CustomScrollControl.IsObjectReady(Self) && Self.FContent$1 !== null && TW3OwnedObject.IsObjectReady$(Self.FContent$1);
   }
   /// procedure TW3ScrollControl.Resize()
   ///  [line: 1295, column: 28, file: SmartCL.Scroll]
   ,Resize:function(Self) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      TW3CustomScrollControl.Resize(Self);
      if (Self.FContainer === null || (!(TW3MovableControl.GetIsVisible(Self.FContainer)))) {
         return;
      }
      if (Self.FScrollController !== null) {
         if (Self.FContent$1 !== null) {
            CRect = TW3MovableControl.ClientRect$(Self.FContainer);
            if (TW3MovableControl.GetWidth$(Self.FContent$1) < CRect.Right$1) {
               TW3MovableControl.SetWidth$(Self.FContent$1,CRect.Right$1);
            }
            if (TW3MovableControl.GetHeight$(Self.FContent$1) < CRect.Bottom$1) {
               TW3MovableControl.SetHeight$(Self.FContent$1,CRect.Bottom$1);
            }
            TW3ScrollController.Refresh$1(Self.FScrollController);
         }
      }
      TW3CustomScrollControl.UpdateIndicators(Self,null);
   }
   /// procedure TW3ScrollControl.SetAutoUpdate(Value: Boolean)
   ///  [line: 1319, column: 28, file: SmartCL.Scroll]
   ,SetAutoUpdate:function(Self, Value$5) {
      if (Value$5) {
         if (Self.FObserver !== null) {
            return;
         }
         Self.FObserver = TMutationObserver.Create$177($New(TMutationObserver));
         Self.FObserver.Options.Attributes = true;
         Self.FObserver.Options.ChildList = true;
         Self.FObserver.Options.SubTree = true;
         Self.FObserver.OnChanged = function (_implicit_sender, _implicit_mutationRecord) {
            TW3ScrollControl.UpdateContent(Self);
         };
         TMutationObserver.Observe(Self.FObserver,Self.FContent$1.FHandle$4);
      } else {
         if (Self.FObserver !== null) {
            TObject.Free(Self.FObserver);
            Self.FObserver = null;
         }
      }
   }
   /// procedure TW3ScrollControl.UpdateContent()
   ///  [line: 1339, column: 28, file: SmartCL.Scroll]
   ,UpdateContent:function(Self) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3ScrollContent.UpdateSize(Self.FContent$1);
         if (Self.FScrollController !== null) {
            TW3ScrollController.Refresh$1(Self.FScrollController);
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady$:function($){return $.ClassType.IsObjectReady($)}
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3CustomScrollControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetContentHeight$:function($){return $.ClassType.GetContentHeight($)}
   ,GetContentWidth$:function($){return $.ClassType.GetContentWidth($)}
   ,GetHorizontalScrollPosition$:function($){return $.ClassType.GetHorizontalScrollPosition($)}
   ,GetVerticalScrollPosition$:function($){return $.ClassType.GetVerticalScrollPosition($)}
   ,HandleScrollBar$:function($){return $.ClassType.HandleScrollBar.apply($.ClassType, arguments)}
   ,ResizeScrollBars:TW3CustomScrollControl.ResizeScrollBars
   ,SetScrollBars:TW3CustomScrollControl.SetScrollBars
};
TW3ScrollControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ListBox = class (TW3ScrollControl)
///  [line: 61, column: 3, file: SmartCL.Controls.ListBox]
var TW3ListBox = {
   $ClassName:"TW3ListBox",$Parent:TW3ScrollControl
   ,$Init:function ($) {
      TW3ScrollControl.$Init($);
      $.FCachedControls = $.FOnItemClick = $.FOnSelected$1 = $.FOnShowItem = null;
      $.FFilter = "";
      $.FFilteredItems = [];
      $.FFirstPaintedIndex = $.FItemHeight$1 = $.FItemWidth = $.FLastPaintedIndex = $.FSelectedIndex = 0;
      $.FItemClass$1 = null;
      $.FItemData = [];
      $.FItemDataClass = null;
      $.FMultiSelect$1 = $.FNeedsRefresh = $.FRecycleControls = false;
      $.FStash = [];
      $.FWorkList$1 = [];
   }
   /// function TW3ListBox.Add(const Text: String) : Integer
   ///  [line: 264, column: 21, file: SmartCL.Controls.ListBox]
   ,Add$16:function(Self, Text$10) {
      var Result = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Result = TW3ListBox.AddItem(Self,Text$10).Index$4;
      }
      return Result
   }
   /// function TW3ListBox.AddItem(const Text: String) : TW3ListBoxItemData
   ///  [line: 270, column: 21, file: SmartCL.Controls.ListBox]
   ,AddItem:function(Self, Text$10) {
      var Result = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Result = TW3ListBox.CreateItemData(Self);
         Result.Caption$10 = Text$10;
         Result.Index$4 = Self.FItemData.length;
         Self.FItemData.push(Result);
         if (TW3ListBox.FilterItem(Self,Result)) {
            Self.FFilteredItems.push(Result);
         }
         Self.FNeedsRefresh = true;
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3MovableControl.Invalidate$(Self);
         }
      }
      return Result
   }
   /// procedure TW3ListBox.AfterUpdate()
   ///  [line: 286, column: 22, file: SmartCL.Controls.ListBox]
   ,AfterUpdate:function(Self) {
      TW3MovableControl.AfterUpdate(Self);
      if ($SetIn(Self.FComponentState,4,0,11) && (!($SetIn(Self.FComponentState,3,0,11)))) {
         TW3ListBox.Refresh$2(Self);
      }
   }
   /// procedure TW3ListBox.Clear()
   ///  [line: 223, column: 22, file: SmartCL.Controls.ListBox]
   ,Clear$26:function(Self) {
      var i$7 = 0,
         i$8 = 0;
      Self.FWorkList$1.length=0;
      Self.FStash.length=0;
      var $temp76;
      for(i$7=0,$temp76=Self.FItemData.length;i$7<$temp76;i$7++) {
         try {
            TObject.Free(Self.FItemData[i$7]);
         } catch ($e) {
            var e$1 = $W($e);
            /* null */
         }
      }
      Self.FItemData.length=0;
      Self.FFilteredItems.length=0;
      var $temp77;
      for(i$8=0,$temp77=TObjectList.GetCount$1(Self.FCachedControls);i$8<$temp77;i$8++) {
         try {
            TObject.Free($As(TObjectList.GetItem$14(Self.FCachedControls,i$8),TW3CustomControl));
         } catch ($e) {
            var e$2 = $W($e);
            /* null */
         }
      }
      TObjectList.Clear$8(Self.FCachedControls);
      Self.FFirstPaintedIndex = -1;
      Self.FLastPaintedIndex = -1;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3MovableControl.Invalidate$(Self);
      }
   }
   /// function TW3ListBox.CreateItemData() : TW3ListBoxItemData
   ///  [line: 443, column: 21, file: SmartCL.Controls.ListBox]
   ,CreateItemData:function(Self) {
      var Result = null;
      Result = TObject.Create($NewDyn(Self.FItemDataClass,""));
      Result.Height$10 = Self.FItemHeight$1;
      return Result
   }
   /// function TW3ListBox.FilterItem(Item: TW3ListBoxItemData) : Boolean
   ///  [line: 449, column: 21, file: SmartCL.Controls.ListBox]
   ,FilterItem:function(Self, Item$3) {
      var Result = false;
      if (Item$3 !== null) {
         if (!($SetIn(Self.FComponentState,10,0,11))) {
            Result = Self.FFilter == "" || ((Item$3.Caption$10).toLocaleUpperCase().indexOf(Self.FFilter)+1) > 0;
         }
      }
      return Result
   }
   /// procedure TW3ListBox.FinalizeObject()
   ///  [line: 206, column: 22, file: SmartCL.Controls.ListBox]
   ,FinalizeObject:function(Self) {
      TW3ListBox.Clear$26(Self);
      TObject.Free(Self.FCachedControls);
      TW3ScrollControl.FinalizeObject(Self);
   }
   /// function TW3ListBox.GetItems() : TStrArray
   ///  [line: 768, column: 21, file: SmartCL.Controls.ListBox]
   ,GetItems$11:function(Self) {
      var Result = [];
      var i$7 = 0;
      Result = [];
      var $temp78;
      for(i$7=0,$temp78=Self.FItemData.length;i$7<$temp78;i$7++) {
         Result.push(Self.FItemData[i$7].Caption$10);
      }
      return Result
   }
   /// procedure TW3ListBox.HandleItemClick(Sender: TObject)
   ///  [line: 458, column: 22, file: SmartCL.Controls.ListBox]
   ,HandleItemClick:function(Self, Sender) {
      var i$7 = 0,
         Item$3 = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         var $temp79;
         for(i$7=0,$temp79=Self.FFilteredItems.length;i$7<$temp79;i$7++) {
            Item$3 = Self.FFilteredItems[i$7];
            if (Item$3.ItemObject === Sender) {
               if (Self.FMultiSelect$1) {
                  TW3ListBoxItemData.SetSelected$2(Item$3,!(Item$3.FSelected$2));
                  if (Item$3.FSelected$2) {
                     Self.FSelectedIndex = Item$3.Index$4;
                  } else {
                     Self.FSelectedIndex = -1;
                  }
               } else {
                  TW3ListBox.SetSelectedIndex$3(Self,Item$3.Index$4);
               }
               if (Self.FOnItemClick) {
                  Self.FOnItemClick(Self,Item$3);
               }
               if (Self.FOnSelected$1) {
                  Self.FOnSelected$1(Self,Item$3.Index$4);
               }
               break;
            }
         }
      }
   }
   /// procedure TW3ListBox.HandleScrollChange(Sender: TObject)
   ///  [line: 486, column: 22, file: SmartCL.Controls.ListBox]
   ,HandleScrollChange$1:function(Self, Sender) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FNeedsRefresh) {
            TW3ListBox.Refresh$2(Self);
         } else {
            TW3ListBox.ShowVisibleItems(Self,false);
         }
      }
      if (Self.FOnScroll) {
         Self.FOnScroll(Self);
      }
   }
   /// procedure TW3ListBox.HideStash()
   ///  [line: 497, column: 22, file: SmartCL.Controls.ListBox]
   ,HideStash:function(Self) {
      var i$7 = 0,
         Item$3 = null;
      var $temp80;
      for(i$7=0,$temp80=Self.FStash.length;i$7<$temp80;i$7++) {
         Item$3 = Self.FStash[i$7];
         if (Item$3.ItemObject !== null) {
            if (Self.FRecycleControls) {
               if (Item$3.FSelected$2) {
                  TW3ListBoxItemData.RemoveSelectedStyle(Item$3);
               }
               TW3MovableControl.SetVisible(Item$3.ItemObject,false);
               TObjectList.Add$1(Self.FCachedControls,Item$3.ItemObject);
            } else {
               TObject.Free(Item$3.ItemObject);
            }
            Item$3.ItemObject = null;
         }
      }
      Self.FStash.length=0;
   }
   /// procedure TW3ListBox.InitializeObject()
   ///  [line: 182, column: 22, file: SmartCL.Controls.ListBox]
   ,InitializeObject:function(Self) {
      TW3ScrollControl.InitializeObject(Self);
      Self.FItemClass$1 = TW3ListBoxLabel;
      Self.FItemDataClass = TW3ListBoxItemData;
      Self.FItemHeight$1 = 24;
      Self.FRecycleControls = true;
      Self.FCachedControls = TObjectList.Create$127($New(TObjectList));
      Self.FFirstPaintedIndex = -1;
      Self.FLastPaintedIndex = -1;
      Self.FScrollController.FOnScrolling = $Event1(Self,TW3ListBox.HandleScrollChange$1);
      TW3ScrollController.SetDirection$1(Self.FScrollController,0);
      TW3ScrollController.SetUseTransform(Self.FScrollController,true);
      Self.FScrollController.FAllowPullDown = true;
      TW3CustomScrollControl.SetScrollBars$(Self,1);
      TW3CustomControl._setMouseClick(Self.FContent$1,function (_implicit_Sender) {
         TW3ListBox.SetSelectedIndex$3(Self,-1);
      });
   }
   /// procedure TW3ListBox.InvalidateVisible()
   ///  [line: 400, column: 22, file: SmartCL.Controls.ListBox]
   ,InvalidateVisible:function(Self) {
      var i$7 = 0,
         VItem = null;
      if (Self.FFirstPaintedIndex >= 0) {
         var $temp81;
         for(i$7=Self.FFirstPaintedIndex,$temp81=Self.FLastPaintedIndex;i$7<=$temp81;i$7++) {
            VItem = Self.FFilteredItems[i$7];
            if (VItem.ItemObject !== null) {
               Self.FWorkList$1.push(VItem);
            }
         }
      }
      Self.FNeedsRefresh = true;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3MovableControl.Invalidate$(Self);
      }
   }
   /// procedure TW3ListBox.PaintItems()
   ///  [line: 651, column: 22, file: SmartCL.Controls.ListBox]
   ,PaintItems$1:function(Self) {
      var Bounds$1 = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         PaintStarted = 0,
         hxtra = 0,
         yMin = 0,
         yMax = 0,
         Item$3 = null,
         StashItem = null;
      Bounds$1 = TW3MovableControl.ClientRect$(Self.FContent$1);
      PaintStarted = GetMilliseconds();
      hxtra = $Div(TW3MovableControl.ClientHeight(Self),10);
      yMin = (-Self.FScrollController.FContentTop)-hxtra;
      if (yMin < 0) {
         yMin = 0;
      }
      yMax = yMin+TW3MovableControl.ClientHeight(Self)+hxtra;
      do {
         if (!Self.FWorkList$1.length) {
            break;
         }
         Item$3 = Self.FWorkList$1[0];
         Self.FWorkList$1.shift();
         if (Item$3.ItemObject === null) {
            if (Item$3.Top$7 < yMin || Item$3.Top$7 > yMax) {
               continue;
            }
            if (Self.FStash.length > 0) {
               StashItem = Self.FStash[0];
               Item$3.ItemObject = StashItem.ItemObject;
               StashItem.ItemObject = null;
               Self.FStash.shift();
               if (Item$3.FSelected$2) {
                  TW3ListBoxItemData.SetSelectedStyle(Item$3);
               }
               TW3MovableControl.SetBounds$(Item$3.ItemObject,Bounds$1.Left$3,Item$3.Top$7,TRect$Width$6(Bounds$1),Item$3.Height$10);
            } else if (TObjectList.GetCount$1(Self.FCachedControls) > 0) {
               Item$3.ItemObject = $As(TObjectList.GetItem$14(Self.FCachedControls,0),TW3CustomControl);
               TObjectList.Remove$1(Self.FCachedControls,0);
               TW3TagObj.BeginUpdate(Item$3.ItemObject);
               try {
                  TW3MovableControl.SetVisible(Item$3.ItemObject,true);
                  if (Item$3.FSelected$2) {
                     TW3ListBoxItemData.SetSelectedStyle(Item$3);
                  }
                  TW3MovableControl.SetBounds$(Item$3.ItemObject,Bounds$1.Left$3,Item$3.Top$7,TRect$Width$6(Bounds$1),Item$3.Height$10);
               } finally {
                  TW3TagObj.EndUpdate(Item$3.ItemObject);
               }
            } else {
               Item$3.ItemObject = TW3TagContainer.Create$81$($NewDyn(Self.FItemClass$1,""),Self.FContent$1);
               if (Item$3.FSelected$2) {
                  TW3ListBoxItemData.SetSelectedStyle(Item$3);
               }
               TW3MovableControl.SetBounds$(Item$3.ItemObject,Bounds$1.Left$3,Item$3.Top$7,TRect$Width$6(Bounds$1),Item$3.Height$10);
            }
         } else {
            TW3MovableControl.SetBounds$(Item$3.ItemObject,Bounds$1.Left$3,Item$3.Top$7,TRect$Width$6(Bounds$1),Item$3.Height$10);
         }
         TW3ListBox.ShowListItem(Self,Item$3);
      } while (!(GetMilliseconds()-PaintStarted >= 10));
      if (!Self.FWorkList$1.length) {
         TW3ListBox.HideStash(Self);
      } else {
         TW3Dispatch.RequestAnimationFrame(TW3Dispatch,$Event0(Self,TW3ListBox.PaintItems$1));
      }
   }
   /// procedure TW3ListBox.Refresh()
   ///  [line: 530, column: 22, file: SmartCL.Controls.ListBox]
   ,Refresh$2:function(Self) {
      var NewCW = 0,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         h = 0,
         i$7 = 0;
      if ((!($SetIn(Self.FComponentState,10,0,11))) && TW3MovableControl.GetIsVisible(Self)) {
         Self.FNeedsRefresh = false;
         if (Self.FContent$1 !== null) {
            CRect = TW3MovableControl.ClientRect$(Self.FContainer);
            if (Self.FItemWidth < TRect$Width$6(CRect)) {
               NewCW = TRect$Width$6(CRect);
               TW3ScrollController.SetDirection$1(Self.FScrollController,0);
            } else {
               NewCW = Self.FItemWidth;
               TW3ScrollController.SetDirection$1(Self.FScrollController,2);
            }
            if (TW3MovableControl.GetWidth$(Self.FContent$1) != NewCW) {
               TW3MovableControl.SetWidth$(Self.FContent$1,NewCW);
               TW3ListBox.InvalidateVisible(Self);
            }
            h = 0;
            var $temp82;
            for(i$7=0,$temp82=Self.FFilteredItems.length;i$7<$temp82;i$7++) {
               Self.FFilteredItems[i$7].Top$7 = h;
               (h+= Self.FFilteredItems[i$7].Height$10);
            }
            TW3MovableControl.SetHeight$(Self.FContent$1,(h < TRect$Height$5(CRect))?TRect$Height$5(CRect):h);
            TW3ScrollController.Refresh$1(Self.FScrollController);
            TW3ListBox.ShowVisibleItems(Self,false);
         }
      }
   }
   /// procedure TW3ListBox.Resize()
   ///  [line: 517, column: 22, file: SmartCL.Controls.ListBox]
   ,Resize:function(Self) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      TW3ScrollControl.Resize(Self);
      if (Self.FContent$1 !== null) {
         CRect = TW3MovableControl.ClientRect$(Self.FContainer);
         if (TW3MovableControl.GetIsVisible(Self)) {
            TW3ListBox.ResizeItems(Self);
            TW3ListBox.Refresh$2(Self);
         }
      }
   }
   /// procedure TW3ListBox.ResizeItems()
   ///  [line: 567, column: 22, file: SmartCL.Controls.ListBox]
   ,ResizeItems:function(Self) {
      var w = 0,
         a$392 = 0,
         Item$3 = null,
         a$393 = 0,
         Item$4 = null;
      w = TW3MovableControl.ClientWidth(Self.FContent$1);
      if (Self.FFirstPaintedIndex >= 0) {
         var $temp83;
         for(a$392=Self.FFirstPaintedIndex,$temp83=Self.FLastPaintedIndex;a$392<=$temp83;a$392++) {
            if (a$392 != -1) {
               Item$3 = Self.FFilteredItems[a$392];
               if (Item$3.ItemObject !== null) {
                  TW3MovableControl.SetWidth$(Item$3.ItemObject,w);
               }
            }
         }
      }
      var $temp84;
      for(a$393=0,$temp84=Self.FStash.length;a$393<$temp84;a$393++) {
         Item$4 = Self.FStash[a$393];
         if (Item$4.ItemObject !== null) {
            TW3MovableControl.SetWidth$(Item$4.ItemObject,w);
         }
      }
   }
   /// procedure TW3ListBox.SetItems(const Value: TStrArray)
   ///  [line: 775, column: 22, file: SmartCL.Controls.ListBox]
   ,SetItems$3:function(Self, Value$5) {
      var i$7 = 0;
      TW3TagObj.BeginUpdate(Self);
      try {
         TW3ListBox.Clear$26(Self);
         var $temp85;
         for(i$7=0,$temp85=Value$5.length;i$7<$temp85;i$7++) {
            TW3ListBox.AddItem(Self,Value$5[i$7]);
         }
      } finally {
         TW3TagObj.EndUpdate(Self);
      }
   }
   /// procedure TW3ListBox.SetOnItemClick(Value: TW3ListBoxItemDataEvent)
   ///  [line: 613, column: 22, file: SmartCL.Controls.ListBox]
   ,SetOnItemClick:function(Self, Value$5) {
      Self.FOnItemClick = Value$5;
   }
   /// procedure TW3ListBox.SetOnSelected(Value: TW3ListItemSelectedEvent)
   ///  [line: 618, column: 22, file: SmartCL.Controls.ListBox]
   ,SetOnSelected:function(Self, Value$5) {
      Self.FOnSelected$1 = Value$5;
   }
   /// procedure TW3ListBox.SetSelectedIndex(const Value: Integer)
   ///  [line: 623, column: 22, file: SmartCL.Controls.ListBox]
   ,SetSelectedIndex$3:function(Self, Value$5) {
      var i$7 = 0,
         Item$3 = null;
      Self.FSelectedIndex = -1;
      var $temp86;
      for(i$7=0,$temp86=Self.FFilteredItems.length;i$7<$temp86;i$7++) {
         Item$3 = Self.FFilteredItems[i$7];
         if (Item$3.Index$4 == Value$5) {
            Self.FSelectedIndex = Value$5;
            TW3ListBoxItemData.SetSelected$2(Item$3,true);
         } else if (Item$3.FSelected$2) {
            TW3ListBoxItemData.SetSelected$2(Item$3,false);
         }
      }
   }
   /// procedure TW3ListBox.ShowListItem(Item: TW3ListBoxItemData)
   ///  [line: 708, column: 22, file: SmartCL.Controls.ListBox]
   ,ShowListItem:function(Self, Item$3) {
      if (Self.FOnShowItem) {
         Self.FOnShowItem(Self,Item$3);
      } else if ($Is(Item$3.ItemObject,TW3Label)) {
         TW3Label.SetCaption$2$($As(Item$3.ItemObject,TW3Label),Item$3.Caption$10);
      } else {
         try {
            TW3TagObj.a$50(Item$3.ItemObject,Item$3.Caption$10);
         } catch ($e) {
            /* null */
         }
      }
      TW3CustomControl._setMouseClick(Item$3.ItemObject,$Event1(Self,TW3ListBox.HandleItemClick));
   }
   /// procedure TW3ListBox.ShowVisibleItems(RefreshAll: Boolean = False)
   ///  [line: 726, column: 22, file: SmartCL.Controls.ListBox]
   ,ShowVisibleItems:function(Self, RefreshAll) {
      var hxtra = 0,
         yMin = 0,
         yMax = 0,
         a$392 = 0,
         Item$3 = null;
      if ((!($SetIn(Self.FComponentState,10,0,11))) && TW3MovableControl.GetIsVisible(Self)) {
         Self.FFirstPaintedIndex = -1;
         Self.FLastPaintedIndex = -1;
         hxtra = $Div(TW3MovableControl.ClientHeight(Self),10);
         yMin = (-Self.FScrollController.FContentTop)-hxtra;
         if (yMin < 0) {
            yMin = 0;
         }
         yMax = yMin+TW3MovableControl.ClientHeight(Self)+hxtra;
         var $temp87;
         for(a$392=0,$temp87=Self.FFilteredItems.length;a$392<$temp87;a$392++) {
            Item$3 = Self.FFilteredItems[a$392];
            if (Item$3.Top$7 >= yMin && Item$3.Top$7 <= yMax) {
               if (Self.FFirstPaintedIndex == -1 || a$392 < Self.FFirstPaintedIndex) {
                  Self.FFirstPaintedIndex = a$392;
               }
               if (Self.FLastPaintedIndex == -1 || a$392 > Self.FLastPaintedIndex) {
                  Self.FLastPaintedIndex = a$392;
               }
               if (Item$3.ItemObject === null || RefreshAll) {
                  if (Self.FWorkList$1.indexOf(Item$3) == -1) {
                     Self.FWorkList$1.push(Item$3);
                  }
                  $Remove(Self.FStash,Item$3,0);
               }
            } else {
               if (Item$3.ItemObject !== null) {
                  $Remove(Self.FWorkList$1,Item$3,0);
                  if (Self.FRecycleControls) {
                     if (Item$3.FSelected$2) {
                        TW3ListBoxItemData.RemoveSelectedStyle(Item$3);
                     }
                     if (Self.FStash.indexOf(Item$3) == -1) {
                        Self.FStash.push(Item$3);
                     }
                  }
               }
            }
         }
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3ListBox.PaintItems$1(Self);
         }
      }
   }
   /// procedure TW3ListBox.StyleTagObject()
   ///  [line: 214, column: 22, file: SmartCL.Controls.ListBox]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,8);
      TW3CustomControl.SetBackgroundType(Self,4);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3ScrollControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate$:function($){return $.ClassType.AfterUpdate($)}
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3CustomScrollControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetContentHeight:TW3ScrollControl.GetContentHeight
   ,GetContentWidth:TW3ScrollControl.GetContentWidth
   ,GetHorizontalScrollPosition:TW3ScrollControl.GetHorizontalScrollPosition
   ,GetVerticalScrollPosition:TW3ScrollControl.GetVerticalScrollPosition
   ,HandleScrollBar:TW3ScrollControl.HandleScrollBar
   ,ResizeScrollBars:TW3CustomScrollControl.ResizeScrollBars
   ,SetScrollBars:TW3CustomScrollControl.SetScrollBars
};
TW3ListBox.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollSpeed enumeration
///  [line: 71, column: 3, file: SmartCL.Scroll]
var TW3ScrollSpeed = { 300:"ssSlow", 200:"ssNormal", 100:"ssFast" };
/// TW3ScrollController = class (TObject)
///  [line: 138, column: 3, file: SmartCL.Scroll]
var TW3ScrollController = {
   $ClassName:"TW3ScrollController",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.LockMovementDirection = $.Enabled = $.FAllowPullDown = $.FAllowPullUp = $.FMomentumScrolling = $.FPullStarted = $.FSnapToPage = $.FUseTransform = false;
      $.FAmplitudeX = $.FAmplitudeY = $.FContentHeight = $.FContentLeft = $.FContentTop = $.FContentWidth = $.FExtraY = $.FMinValueX = $.FMinValueY = $.FMouseWheelDelta = $.FScrollStartTime = $.FStartTime = $.FTargetX = $.FTargetY = $.FTimeConstant = $.Fx = $.Fy = 0;
      $.FContent$2 = $.FOnAttached = $.FOnEndScroll = $.FOnPullEnd = $.FOnPullMove = $.FOnPullStart = $.FOnScrolling = $.FOnStartScroll = $.FOnUpdateIndicator = $.FScrollControl = null;
      $.FDirection$1 = 0;
      $.FMomentumVelocityX = 0;
      $.FMomentumVelocityY = 0;
      $.FScrollSpeed = 300;
      $.FVelocityX = 0;
      $.FVelocityY = 0;
   }
   /// procedure TW3ScrollController.Attach()
   ///  [line: 528, column: 31, file: SmartCL.Scroll]
   ,Attach$1:function(Self) {
      TW3Dispatch.SetTimeOut(TW3Dispatch,function () {
         if (Self.FOnAttached) {
            Self.FOnAttached(Self);
         }
      },100);
   }
   /// procedure TW3ScrollController.AutoScroll()
   ///  [line: 787, column: 31, file: SmartCL.Scroll]
   ,AutoScroll:function(Self) {
      var t = 0,
         dt = 0,
         dSlow = 0,
         DeltaX = 0,
         DeltaY = 0,
         NewX = 0,
         NewY = 0,
         Temp$1 = "",
         Temp$2 = "";
      if (Self.FMomentumScrolling) {
         t = GetMilliseconds();
         dt = t-Self.FScrollStartTime;
         dSlow = Math.exp((-dt) / Self.FTimeConstant);
         DeltaX = (-Self.FAmplitudeX) * dSlow;
         DeltaY = (-Self.FAmplitudeY) * dSlow;
         NewX = Self.FTargetX-Math.round(DeltaX);
         NewY = Self.FTargetY-Math.round(DeltaY);
         Self.FMomentumVelocityX = Self.FVelocityX * dSlow;
         Self.FMomentumVelocityY = Self.FVelocityY * dSlow;
         Self.FContentLeft = NewX;
         Self.FContentTop = NewY;
         if (Self.FContent$2 !== null) {
            if (Self.FUseTransform) {
               Temp$1 = "translate(";
               Temp$1 += (Self.FContentLeft).toString();
          Temp$1 += "px,";
          Temp$1 += (Self.FContentTop).toString();
          Temp$1 += "px)";
               Self.FContent$2.FHandle$4.style[CSSTransform$1] = Temp$1;
            } else {
               TW3MovableControl.MoveTo$(Self.FContent$2,Self.FContentLeft,Self.FContentTop);
            }
         }
         if (Self.FOnScrolling) {
            Self.FOnScrolling(Self);
         }
         if (Self.FOnUpdateIndicator) {
            Self.FOnUpdateIndicator(Self);
         }
         if (Math.abs(DeltaX) < 1 && Math.abs(DeltaY) < 1) {
            Self.FMomentumScrolling = false;
            Self.FContentLeft = Self.FTargetX;
            Self.FContentTop = Self.FTargetY;
            if (Self.FContent$2 !== null) {
               if (Self.FUseTransform) {
                  Temp$2 = "translate(";
                  Temp$2 += (Self.FContentLeft).toString();
            Temp$2 += "px,";
            Temp$2 += (Self.FContentTop).toString();
            Temp$2 += "px)";
                  Self.FContent$2.FHandle$4.style[CSSTransform$1] = Temp$2;
               } else {
                  TW3MovableControl.MoveTo$(Self.FContent$2,Self.FContentLeft,Self.FContentTop);
               }
            }
            if (Self.FOnScrolling) {
               Self.FOnScrolling(Self);
            }
            if (Self.FOnUpdateIndicator) {
               Self.FOnUpdateIndicator(Self);
            }
            if (Self.FOnEndScroll) {
               Self.FOnEndScroll(Self);
            }
         } else {
            TW3Dispatch.RequestAnimationFrame(TW3Dispatch,$Event0(Self,TW3ScrollController.AutoScroll));
         }
      }
   }
   /// function TW3ScrollController.CheckTargetX(const x: Integer) : Integer
   ///  [line: 728, column: 30, file: SmartCL.Scroll]
   ,CheckTargetX:function(Self, x$42) {
      var Result = 0;
      if (x$42 < Self.FMinValueX) {
         Result = Self.FMinValueX;
      } else {
         Result = (x$42 > 0)?0:x$42;
      }
      return Result
   }
   /// function TW3ScrollController.CheckTargetY(const y: Integer) : Integer
   ///  [line: 736, column: 30, file: SmartCL.Scroll]
   ,CheckTargetY:function(Self, y$32) {
      var Result = 0;
      if (y$32 < Self.FMinValueY) {
         Result = Self.FMinValueY;
      } else {
         Result = (y$32 > 0)?0:y$32;
      }
      return Result
   }
   /// constructor TW3ScrollController.Create(const Owner: TW3CustomControl)
   ///  [line: 509, column: 33, file: SmartCL.Scroll]
   ,Create$175:function(Self, Owner$13) {
      TObject.Create(Self);
      CSSTransform$1 = TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Transform");
      Self.FScrollControl = Owner$13;
      Self.FScrollControl.FTransparentEvents = false;
      TW3ScrollController.SetDirection$1(Self,2);
      TW3ScrollController.SetScrollSpeed(Self,200);
      Self.Enabled = true;
      TW3ScrollController.SetUseTransform(Self,true);
      if (Owner$13 !== null) {
         TW3ScrollController.Attach$1(Self);
      }
      return Self
   }
   /// procedure TW3ScrollController.HandleMouseWheel(Sender: TObject; Shift: TShiftState; WheelDelta: Integer; const MousePos: TPoint; var Handled: Boolean)
   ///  [line: 606, column: 31, file: SmartCL.Scroll]
   ,HandleMouseWheel:function(Self, Sender, Shift, WheelDelta, MousePos, Handled) {
      var dy$3 = 0;
      if ((1<<Self.FDirection$1&5)!=0) {
         dy$3 = Self.FContentTop;
         if (Self.FMouseWheelDelta) {
            dy$3+=$Sign(WheelDelta) * Self.FMouseWheelDelta;
         } else {
            dy$3+=$Sign(WheelDelta) * TW3MovableControl.ClientHeight(Self.FScrollControl);
         }
         TW3ScrollController.MomentumScrollTo(Self,Self.FContentLeft,dy$3);
         Handled.v = true;
      }
   }
   /// procedure TW3ScrollController.HandleMove(Sender: TObject; dx: Integer; dy: Integer)
   ///  [line: 639, column: 31, file: SmartCL.Scroll]
   ,HandleMove:function(Self, Sender, dx$3, dy$3) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         t = 0,
         dt = 0,
         vy = 0,
         vx = 0;
      if (!(Self.Enabled)) {
         return;
      }
      CRect = TW3MovableControl.ClientRect$(Self.FScrollControl);
      if (Self.FContent$2 !== null && Self.FContentWidth <= TW3MovableControl.ClientWidth(Self.FScrollControl)) {
         dx$3 = CRect.Left$3;
      }
      t = GetMilliseconds();
      dt = t-Self.FStartTime;
      Self.FStartTime = t;
      vy = 1000 * dy$3 / (1+dt);
      vx = 1000 * dx$3 / (1+dt);
      Self.FVelocityY = 0.8 * vy+0.2 * Self.FVelocityY;
      Self.FVelocityX = 0.8 * vx+0.2 * Self.FVelocityX;
      Self.FMomentumVelocityY = 0.8 * vy+0.2 * Self.FMomentumVelocityY;
      Self.FMomentumVelocityX = 0.8 * vx+0.2 * Self.FMomentumVelocityX;
      Self.Fx += dx$3;
      Self.Fy += dy$3;
      Self.FExtraY = Self.Fy-TW3ScrollController.CheckTargetY(Self,Self.Fy);
      Self.FExtraY = $Sign(Self.FExtraY) * Trunc(Math.pow(Math.sqrt(Math.abs(Self.FExtraY) / 2),2));
      if ((!(Self.FAllowPullDown)) && Self.FExtraY > 0) {
         Self.FExtraY = 0;
      }
      if ((!(Self.FAllowPullUp)) && Self.FExtraY < 0) {
         Self.FExtraY = 0;
      }
      if (Self.FExtraY) {
         if (Self.FPullStarted) {
            if (Self.FOnPullMove) {
               Self.FOnPullMove(Self,Self.FExtraY);
            }
         } else {
            if (Self.FOnPullStart) {
               Self.FOnPullStart(Self,Self.FExtraY);
            }
            Self.FPullStarted = true;
         }
      }
      TW3ScrollController.MoveContentTo(Self,TW3ScrollController.CheckTargetX(Self,Self.Fx),TW3ScrollController.CheckTargetY(Self,Self.Fy)+Self.FExtraY);
   }
   /// procedure TW3ScrollController.HandleMoveEnd(Sender: TObject)
   ///  [line: 688, column: 31, file: SmartCL.Scroll]
   ,HandleMoveEnd$1:function(Self, Sender) {
      if (!(Self.Enabled)) {
         return;
      }
      Self.FStartTime = 0;
      Self.FAmplitudeY = -Math.round(0.5 * (Self.FVelocityY+Self.FMomentumVelocityY));
      Self.FAmplitudeX = -Math.round(0.5 * (Self.FVelocityX+Self.FMomentumVelocityX));
      if (Self.FSnapToPage) {
         if ((Self.FAmplitudeY!=0) && Math.abs(Self.FAmplitudeY) > ($Div(TW3MovableControl.ClientHeight(Self.FScrollControl),2))) {
            Self.FAmplitudeY = $Div($Sign(Self.FAmplitudeY) * TW3MovableControl.ClientHeight(Self.FScrollControl),2);
         }
         if ((Self.FAmplitudeX!=0) && Math.abs(Self.FAmplitudeX) > ($Div(TW3MovableControl.ClientWidth(Self.FScrollControl),2))) {
            Self.FAmplitudeX = $Div($Sign(Self.FAmplitudeX) * TW3MovableControl.ClientWidth(Self.FScrollControl),2);
         }
      }
      Self.FTargetY = Self.FContentTop-Self.FAmplitudeY;
      Self.FTargetX = Self.FContentLeft-Self.FAmplitudeX;
      if (Self.FSnapToPage) {
         Self.FTargetY = Math.round(Self.FTargetY / TW3MovableControl.ClientHeight(Self.FScrollControl)) * TW3MovableControl.ClientHeight(Self.FScrollControl);
         Self.FTargetX = Math.round(Self.FTargetX / TW3MovableControl.ClientWidth(Self.FScrollControl)) * TW3MovableControl.ClientWidth(Self.FScrollControl);
      }
      TW3ScrollController.MomentumScrollTo(Self,Self.FTargetX,Self.FTargetY);
      if (Self.FPullStarted) {
         Self.FPullStarted = false;
         if (Self.FOnPullEnd) {
            Self.FOnPullEnd(Self,Self.FExtraY);
         }
      }
      Self.FExtraY = 0;
   }
   /// procedure TW3ScrollController.HandleMoveStart(Sender: TObject)
   ///  [line: 620, column: 31, file: SmartCL.Scroll]
   ,HandleMoveStart:function(Self, Sender) {
      if (!(Self.Enabled)) {
         return;
      }
      if (Self.LockMovementDirection && Self.FDirection$1 == 2) {
         EventManager.FDirection = EventManager.FDetectedDirection;
      }
      Self.FStartTime = 1;
      Self.Fx = Self.FContentLeft;
      Self.Fy = Self.FContentTop;
      Self.FVelocityX = 0;
      Self.FVelocityY = 0;
      Self.FMomentumScrolling = false;
      if (Self.FOnStartScroll) {
         Self.FOnStartScroll(Self);
      }
   }
   /// procedure TW3ScrollController.MomentumScrollTo(const TargetX: Integer; const TargetY: Integer)
   ///  [line: 923, column: 31, file: SmartCL.Scroll]
   ,MomentumScrollTo:function(Self, TargetX, TargetY) {
      Self.FTargetX = TW3ScrollController.CheckTargetX(Self,TargetX);
      Self.FTargetY = TW3ScrollController.CheckTargetY(Self,TargetY);
      Self.FAmplitudeX = Self.FContentLeft-Self.FTargetX;
      Self.FAmplitudeY = Self.FContentTop-Self.FTargetY;
      if (Math.abs(Self.FAmplitudeX) < 10 && Math.abs(Self.FAmplitudeY) < 10) {
         TW3ScrollController.MoveContentTo(Self,Self.FTargetX,Self.FTargetY);
         Self.FVelocityX = 0;
         Self.FVelocityY = 0;
         Self.FMomentumScrolling = false;
      } else {
         Self.FVelocityX = Self.FAmplitudeX / 0.5;
         Self.FVelocityY = Self.FAmplitudeY / 0.5;
         Self.FScrollStartTime = GetMilliseconds();
         Self.FMomentumScrolling = true;
         TW3Dispatch.RequestAnimationFrame(TW3Dispatch,$Event0(Self,TW3ScrollController.AutoScroll));
      }
   }
   /// procedure TW3ScrollController.MoveContentTo(const TargetX: Integer; const TargetY: Integer)
   ///  [line: 867, column: 31, file: SmartCL.Scroll]
   ,MoveContentTo:function(Self, TargetX, TargetY) {
      var Temp$1 = "";
      Self.FContentLeft = TargetX;
      Self.FContentTop = TargetY;
      if (Self.FContent$2 !== null) {
         if (Self.FUseTransform) {
            Temp$1 = "translate(";
            Temp$1 += (TargetX).toString();
        Temp$1 += "px,";
        Temp$1 += (TargetY).toString();
        Temp$1 += "px)";
            Self.FContent$2.FHandle$4.style[CSSTransform$1] = Temp$1;
         } else {
            TW3MovableControl.MoveTo$(Self.FContent$2,TargetX,TargetY);
         }
      }
      if (Self.FOnScrolling) {
         Self.FOnScrolling(Self);
      }
      if (Self.FOnUpdateIndicator) {
         Self.FOnUpdateIndicator(Self);
      }
   }
   /// procedure TW3ScrollController.Refresh()
   ///  [line: 744, column: 31, file: SmartCL.Scroll]
   ,Refresh$1:function(Self) {
      var Temp$1 = "";
      if (Self.FScrollControl !== null) {
         TW3ScrollInfo.ScrollTo(TW3CustomControl.GetScrollInfo(Self.FScrollControl),0,0);
      }
      if (Self.FContent$2 !== null) {
         TW3ScrollInfo.ScrollTo(TW3CustomControl.GetScrollInfo(Self.FContent$2),0,0);
         Self.FContentHeight = TW3MovableControl.GetHeight$(Self.FContent$2);
         Self.FContentWidth = TW3MovableControl.GetWidth$(Self.FContent$2);
         Self.FMinValueY = (-Self.FContentHeight)+TW3MovableControl.ClientHeight(Self.FScrollControl);
         Self.FMinValueX = (-Self.FContentWidth)+TW3MovableControl.ClientWidth(Self.FScrollControl);
         Self.FContentLeft = TW3ScrollController.CheckTargetX(Self,Self.FContentLeft);
         Self.FContentTop = TW3ScrollController.CheckTargetY(Self,Self.FContentTop);
         if (Self.FContent$2 !== null) {
            if (Self.FUseTransform) {
               Temp$1 = "translate(";
               Temp$1 += (Self.FContentLeft).toString();
          Temp$1 += "px,";
          Temp$1 += (Self.FContentTop).toString();
          Temp$1 += "px)";
               Self.FContent$2.FHandle$4.style[CSSTransform$1] = Temp$1;
            } else {
               TW3MovableControl.MoveTo$(Self.FContent$2,Self.FContentLeft,Self.FContentTop);
            }
         }
         if (Self.FOnScrolling) {
            Self.FOnScrolling(Self);
         }
         if (Self.FOnUpdateIndicator) {
            Self.FOnUpdateIndicator(Self);
         }
      }
   }
   /// procedure TW3ScrollController.ScrollTo(const TargetX: Integer; const TargetY: Integer)
   ///  [line: 894, column: 31, file: SmartCL.Scroll]
   ,ScrollTo$1:function(Self, TargetX, TargetY) {
      var Temp$1 = "";
      Self.FContentLeft = TargetX;
      Self.FContentTop = TargetY;
      if (Self.FContent$2 !== null) {
         if (Self.FUseTransform) {
            Temp$1 = "translate(";
            Temp$1 += (Self.FContentLeft).toString();
        Temp$1 += "px,";
        Temp$1 += (Self.FContentTop).toString();
        Temp$1 += "px)";
            Self.FContent$2.FHandle$4.style[CSSTransform$1] = Temp$1;
         } else {
            TW3MovableControl.MoveTo$(Self.FContent$2,Self.FContentLeft,Self.FContentTop);
         }
      }
      if (Self.FOnScrolling) {
         Self.FOnScrolling(Self);
      }
      if (Self.FOnUpdateIndicator) {
         Self.FOnUpdateIndicator(Self);
      }
   }
   /// procedure TW3ScrollController.SetContent(const Value: TW3ScrollContent)
   ///  [line: 540, column: 31, file: SmartCL.Scroll]
   ,SetContent:function(Self, Value$5) {
      Self.FContent$2 = Value$5;
      TW3ScrollController.SetUseTransform(Self,Self.FUseTransform);
   }
   /// procedure TW3ScrollController.SetDirection(const Value: TMovementDirection)
   ///  [line: 546, column: 31, file: SmartCL.Scroll]
   ,SetDirection$1:function(Self, Value$5) {
      Self.FDirection$1 = Value$5;
      if ((1<<Value$5&7)!=0) {
         TW3CustomControl._SetBeginMovement(Self.FScrollControl,$Event1(Self,TW3ScrollController.HandleMoveStart));
         TW3CustomControl._SetEndMovement(Self.FScrollControl,$Event1(Self,TW3ScrollController.HandleMoveEnd$1));
      } else {
         TW3CustomControl._SetBeginMovement(Self.FScrollControl,null);
         TW3CustomControl._SetEndMovement(Self.FScrollControl,null);
      }
      if (Value$5 == 2) {
         TW3CustomControl._SetAllMovement(Self.FScrollControl,$Event3(Self,TW3ScrollController.HandleMove));
      } else {
         TW3CustomControl._SetAllMovement(Self.FScrollControl,null);
      }
      if (Value$5 == 1) {
         TW3CustomControl._SetHorizontalMovement(Self.FScrollControl,$Event3(Self,TW3ScrollController.HandleMove));
      } else {
         TW3CustomControl._SetHorizontalMovement(Self.FScrollControl,null);
      }
      if (!Value$5) {
         TW3CustomControl._SetVerticalMovement(Self.FScrollControl,$Event3(Self,TW3ScrollController.HandleMove));
      } else {
         TW3CustomControl._SetVerticalMovement(Self.FScrollControl,null);
      }
      TW3CustomControl._setMouseWheel(Self.FScrollControl,$Event(Self,TW3ScrollController.HandleMouseWheel));
   }
   /// procedure TW3ScrollController.SetMinValueX(const Value: Integer)
   ///  [line: 578, column: 31, file: SmartCL.Scroll]
   ,SetMinValueX:function(Self, Value$5) {
      if (Value$5 < 0) {
         Self.FMinValueX = Value$5;
      } else {
         Self.FMinValueX = 0;
      }
   }
   /// procedure TW3ScrollController.SetScrollSpeed(const Value: TW3ScrollSpeed)
   ///  [line: 588, column: 31, file: SmartCL.Scroll]
   ,SetScrollSpeed:function(Self, Value$5) {
      if (Value$5 != Self.FScrollSpeed) {
         Self.FScrollSpeed = Value$5;
         Self.FTimeConstant = Value$5;
      }
   }
   /// procedure TW3ScrollController.SetUseTransform(const Value: Boolean)
   ///  [line: 597, column: 31, file: SmartCL.Scroll]
   ,SetUseTransform:function(Self, Value$5) {
      Self.FUseTransform = Value$5;
      if (Self.FContent$2 !== null) {
         if (Self.FUseTransform) {
            TW3TagObj.WillChange(Self.FContent$2,"transform");
         } else {
            TW3TagObj.WillChange(Self.FContent$2,"top, left");
         }
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3CustomScrollContentIndicator = class (TW3CustomControl)
///  [line: 90, column: 3, file: SmartCL.Scroll]
var TW3CustomScrollContentIndicator = {
   $ClassName:"TW3CustomScrollContentIndicator",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// procedure TW3CustomScrollContentIndicator.StyleTagObject()
   ///  [line: 371, column: 43, file: SmartCL.Scroll]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,11);
   }
   /// procedure TW3CustomScrollContentIndicator.UpdateIndicator(const ContentSize: Integer; const VisibleSize: Integer; const ContentPos: Integer)
   ///  [line: 399, column: 43, file: SmartCL.Scroll]
   ,UpdateIndicator:function(Self, ContentSize, VisibleSize, ContentPos) {
      TW3CustomScrollContentIndicator.Show$(Self);
   }
   /// procedure TW3CustomScrollContentIndicator.Show()
   ///  [line: 394, column: 43, file: SmartCL.Scroll]
   ,Show:function(Self) {
      TW3MovableControl.SetAlpha(Self,100);
   }
   /// procedure TW3CustomScrollContentIndicator.Hide()
   ///  [line: 389, column: 43, file: SmartCL.Scroll]
   ,Hide:function(Self) {
      TW3MovableControl.SetAlpha(Self,0);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,UpdateIndicator$:function($){return $.ClassType.UpdateIndicator.apply($.ClassType, arguments)}
   ,Show$:function($){return $.ClassType.Show($)}
   ,Hide$:function($){return $.ClassType.Hide($)}
};
TW3CustomScrollContentIndicator.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollContentIndicator = class (TW3CustomScrollContentIndicator)
///  [line: 104, column: 3, file: SmartCL.Scroll]
var TW3ScrollContentIndicator = {
   $ClassName:"TW3ScrollContentIndicator",$Parent:TW3CustomScrollContentIndicator
   ,$Init:function ($) {
      TW3CustomScrollContentIndicator.$Init($);
      $.FDirection$2 = 0;
      $.FFader = null;
      $.FHideFrom = 0;
   }
   /// function TW3ScrollContentIndicator.FadeHandler(Sender: TW3CustomRepeater) : TW3RepeatResult
   ///  [line: 442, column: 36, file: SmartCL.Scroll]
   ,FadeHandler:function(Self, Sender) {
      var Result = 241;
      var ms = 0,
         Temp$1 = 0;
      Result = 241;
      ms = GetMilliseconds();
      if ((Self.FHideFrom!=0) && Self.FHideFrom <= ms) {
         Temp$1 = TInteger.EnsureRange(Self.FAlpha-10,0,100);
         if (Temp$1 > 0) {
            TW3MovableControl.SetAlpha(Self,Temp$1);
         } else {
            TW3MovableControl.SetAlpha(Self,0);
            Result = 242;
         }
      }
      return Result
   }
   /// procedure TW3ScrollContentIndicator.FinalizeObject()
   ///  [line: 424, column: 37, file: SmartCL.Scroll]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FFader);
      Self.FFader = null;
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3ScrollContentIndicator.Hide()
   ///  [line: 436, column: 37, file: SmartCL.Scroll]
   ,Hide:function(Self) {
      if (!(Self.FFader.FActive)) {
         TW3CustomRepeater.SetActive(Self.FFader,true);
      }
   }
   /// procedure TW3ScrollContentIndicator.InitializeObject()
   ///  [line: 409, column: 37, file: SmartCL.Scroll]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FDirection$2 = 0;
      Self.FFader = TW3EventRepeater.Create$69($New(TW3EventRepeater));
      Self.FFader.OnRepeat = $Event1(Self,TW3ScrollContentIndicator.FadeHandler);
      TW3CustomRepeater.SetDelay$1(Self.FFader,60);
      Self.FHideFrom = 0;
      TW3MovableControl.SetUseAlpha(Self,true);
      TW3MovableControl.SetAlpha(Self,0);
      TW3TagObj.WillChange(Self,"left, top");
   }
   /// procedure TW3ScrollContentIndicator.Show()
   ///  [line: 431, column: 37, file: SmartCL.Scroll]
   ,Show:function(Self) {
      TW3MovableControl.SetAlpha(Self,100);
   }
   /// procedure TW3ScrollContentIndicator.UpdateIndicator(const ContentSize: Integer; const VisibleSize: Integer; const ContentPos: Integer)
   ///  [line: 461, column: 37, file: SmartCL.Scroll]
   ,UpdateIndicator:function(Self, ContentSize, VisibleSize, ContentPos) {
      var LPos = 0,
         dy$3 = 0,
         hd = 0,
         LDiff = 0,
         LOwner = null,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      if (ContentSize > VisibleSize) {
         LPos = Math.abs(ContentPos);
         dy$3 = $Div(LPos * VisibleSize,ContentSize);
         hd = $Div(VisibleSize*VisibleSize,ContentSize);
         if (dy$3+hd > VisibleSize) {
            LDiff = Math.abs(VisibleSize-(dy$3+hd));
            (LDiff+= 4);
            (hd-= LDiff);
         } else if (ContentPos < 0) {
            (hd-= LPos);
            dy$3 = 0;
         }
         LOwner = $As(TW3TagContainer.a$53(Self),TW3CustomScrollControl);
         CRect = TW3MovableControl.ClientRect$(LOwner);
         if (!Self.FDirection$2) {
            TW3MovableControl.SetTop$(Self,dy$3+CRect.Top$3);
            TW3MovableControl.SetHeight$(Self,hd);
         } else {
            TW3MovableControl.SetLeft$(Self,dy$3+CRect.Top$3);
            TW3MovableControl.SetWidth$(Self,hd);
         }
         if (Self.FAlpha != 100) {
            TW3CustomScrollContentIndicator.Show$(Self);
         }
         Self.FHideFrom = GetMilliseconds()+120;
         TW3CustomScrollContentIndicator.Hide$(Self);
      } else {
         TW3MovableControl.SetAlpha(Self,0);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomScrollContentIndicator.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,UpdateIndicator$:function($){return $.ClassType.UpdateIndicator.apply($.ClassType, arguments)}
   ,Show$:function($){return $.ClassType.Show($)}
   ,Hide$:function($){return $.ClassType.Hide($)}
};
TW3ScrollContentIndicator.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollContent = class (TW3CustomControl)
///  [line: 129, column: 3, file: SmartCL.Scroll]
var TW3ScrollContent = {
   $ClassName:"TW3ScrollContent",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3ScrollContent.GetScrollParent() : TW3CustomControl
   ///  [line: 307, column: 27, file: SmartCL.Scroll]
   ,GetScrollParent:function(Self) {
      var Result = null;
      if ($SetIn(Self.FComponentState,10,0,11)) {
         Result = null;
      } else if (TW3TagContainer.a$53(Self) !== null) {
         Result = $As(TW3TagContainer.a$53(Self),TW3CustomControl);
      }
      return Result
   }
   /// procedure TW3ScrollContent.UpdateSize()
   ///  [line: 317, column: 28, file: SmartCL.Scroll]
   ,UpdateSize:function(Self) {
      var wd = 0,
         hd = 0,
         LParent = null,
         xorg = 0,
         yorg = 0;
      LParent = TW3ScrollContent.GetScrollParent(Self);
      if (LParent !== null) {
         wd = TW3MovableControl.ClientWidth(LParent);
         hd = TW3MovableControl.ClientHeight(LParent);
      }
      xorg = wd;
      yorg = hd;
      TW3TagContainer.ForEach$1(Self,function (Child$1) {
         var Result = 160;
         var Ctrl = null,
            cw = 0,
            ch$4 = 0;
         if ($Is(Child$1,TW3MovableControl)) {
            Ctrl = $As(Child$1,TW3MovableControl);
            cw = TW3MovableControl.GetLeft(Ctrl)+TW3MovableControl.GetWidth$(Ctrl);
            ch$4 = TW3MovableControl.GetTop(Ctrl)+TW3MovableControl.GetHeight$(Ctrl);
            if (cw > wd) {
               wd = cw;
            }
            if (ch$4 > hd) {
               hd = ch$4;
            }
         }
         Result = 160;
         return Result
      });
      if (wd == xorg && hd == yorg) {
         if (!TW3TagContainer.GetChildCount(Self)) {
            if (TW3TagObj.a$47(Self).length > 0) {
               wd = (TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(Self)) < wd)?wd:TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(Self));
               hd = (TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(Self)) < hd)?hd:TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(Self));
            }
         }
      }
      TW3MovableControl.SetSize$2$(Self,wd,hd);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollContent.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollContainer = class (TW3CustomControl)
///  [line: 122, column: 3, file: SmartCL.Scroll]
var TW3ScrollContainer = {
   $ClassName:"TW3ScrollContainer",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollContainer.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollBarType enumeration
///  [line: 77, column: 3, file: SmartCL.Scroll]
var TW3ScrollBarType = [ "sbNone", "sbIndicator", "sbScrollbar" ];
/// TW3IndicatorDirection enumeration
///  [line: 85, column: 3, file: SmartCL.Scroll]
var TW3IndicatorDirection = [ "idVertical", "idHorizontal" ];
/// TMutationObserverOptions = class (TObject)
///  [line: 28, column: 3, file: SmartCL.Observer]
var TMutationObserverOptions = {
   $ClassName:"TMutationObserverOptions",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.AttributeFilter = undefined;
      $.CharacterDataOldValue = $.AttributeOldValue = $.SubTree = $.Attributes = $.ChildList = $.CharacterData = false;
   }
   /// constructor TMutationObserverOptions.Create()
   ///  [line: 73, column: 38, file: SmartCL.Observer]
   ,Create$176:function(Self) {
      TObject.Create(Self);
      Self.Attributes = true;
      Self.AttributeOldValue = true;
      return Self
   }
   /// function TMutationObserverOptions.toObject() : Variant
   ///  [line: 80, column: 35, file: SmartCL.Observer]
   ,toObject:function(Self) {
      var Result = undefined;
      Result = TVariant.CreateObject();
      Result.attributes = Self.Attributes;
      Result.childList = Self.ChildList;
      Result.characterData = Self.CharacterData;
      Result.subtree = Self.SubTree;
      Result.attributeOldValue = Self.AttributeOldValue;
      Result.characterDataOldValue = Self.CharacterDataOldValue;
      Result.attributeFilter = Self.AttributeFilter;
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TMutationObserver = class (TObject)
///  [line: 44, column: 3, file: SmartCL.Observer]
var TMutationObserver = {
   $ClassName:"TMutationObserver",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.Options = $.OnChanged = $.OnDisconnect = $.OnConnect = null;
      $.FHandle$19 = undefined;
      $.FObserving = false;
   }
   /// procedure TMutationObserver.CBMutationChange(mutationRecordsList: Variant)
   ///  [line: 135, column: 29, file: SmartCL.Observer]
   ,CBMutationChange:function(Self, mutationRecordsList) {
      if (Self.OnChanged) {
         Self.OnChanged(Self,mutationRecordsList);
      }
   }
   /// constructor TMutationObserver.Create()
   ///  [line: 96, column: 31, file: SmartCL.Observer]
   ,Create$177:function(Self) {
      var mRef = null,
         mhandle = undefined;
      TObject.Create(Self);
      Self.Options = TMutationObserverOptions.Create$176($New(TMutationObserverOptions));
      mRef = $Event1(Self,TMutationObserver.CBMutationChange);
      try {
         mhandle = new MutationObserver(function (_a_d)
        {
          mRef(_a_d);
        }
        );
      } catch ($e) {
         var e$1 = $W($e);
         throw EW3Exception.CreateFmt($New(EMutationObserver),"Failed to allocate mutation observer, system threw <%s>",[e$1.FMessage]);
      }
      Self.FHandle$19 = mhandle;
      return Self
   }
   /// destructor TMutationObserver.Destroy()
   ///  [line: 123, column: 30, file: SmartCL.Observer]
   ,Destroy:function(Self) {
      if (Self.FObserving) {
         TMutationObserver.Disconnect$2(Self);
      }
      if (Self.FHandle$19) {
         Self.FHandle$19 = null;
      }
      TObject.Free(Self.Options);
      TObject.Destroy(Self);
   }
   /// procedure TMutationObserver.Disconnect()
   ///  [line: 172, column: 29, file: SmartCL.Observer]
   ,Disconnect$2:function(Self) {
      if (Self.FObserving) {
         if (Self.FHandle$19) {
            try {
               Self.FHandle$19.disconnect();
            } catch ($e) {
               var e$1 = $W($e);
               throw EW3Exception.CreateFmt($New(EMutationObserver),"Failed to disconnect mutation observer, system threw <%>",[e$1.FMessage]);
            }
            Self.FObserving = false;
            if (Self.OnDisconnect) {
               Self.OnDisconnect(Self);
            }
         } else {
            throw Exception.Create($New(EMutationObserver),"Mutation observer not allocated error");
         }
      }
   }
   /// procedure TMutationObserver.Observe(targetHandle: THandle)
   ///  [line: 141, column: 29, file: SmartCL.Observer]
   ,Observe:function(Self, targetHandle) {
      var mRef = undefined;
      if (Self.FObserving) {
         TMutationObserver.Disconnect$2(Self);
      }
      if (Self.FHandle$19) {
         mRef = Self.FHandle$19;
         try {
            Self.FHandle$19.observe(targetHandle,TMutationObserverOptions.toObject(Self.Options));
         } catch ($e) {
            var e$1 = $W($e);
            throw $e;
         }
         Self.FObserving = true;
         if (Self.OnConnect) {
            Self.OnConnect(Self);
         }
      } else {
         throw Exception.Create($New(EMutationObserver),"Mutation observer not allocated error");
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// EMutationObserver = class (EW3Exception)
///  [line: 42, column: 3, file: SmartCL.Observer]
var EMutationObserver = {
   $ClassName:"EMutationObserver",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3CustomScrollBar = class (TW3CustomControl)
///  [line: 70, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3CustomScrollBar = {
   $ClassName:"TW3CustomScrollBar",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnScrollEnds = null;
      $.OnScrollBegins = null;
      $.FDownBtn = $.FHandle$20 = $.FUpBtn = null;
      $.FDragPos = $.FDragSize = $.FEntry = 0;
      $.FMoving = false;
      $.FPageSize = $.FPosition = $.FTotal = 0;
   }
   /// function TW3CustomScrollBar.CalcSizeOfHandle() : Integer
   ///  [line: 451, column: 29, file: SmartCL.Controls.ScrollBar]
   ,CalcSizeOfHandle:function(Self) {
      var Result = 0;
      var LRatio = 0;
      LRatio = TW3CustomScrollBar.GetArea$(Self) / Self.FTotal;
      Result = Math.round(LRatio * Self.FPageSize);
      return Result
   }
   /// function TW3CustomScrollBar.CreationFlags() : TW3CreationFlags
   ///  [line: 293, column: 29, file: SmartCL.Controls.ScrollBar]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetInc(Result,5,0,8);
      $SetExc(Result,7,0,8);
      return Result
   }
   /// procedure TW3CustomScrollBar.FinalizeObject()
   ///  [line: 278, column: 30, file: SmartCL.Controls.ScrollBar]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FUpBtn);
      TObject.Free(Self.FDownBtn);
      TObject.Free(Self.FHandle$20);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3CustomScrollBar.HandleMaxClick(Sender: TObject)
   ///  [line: 341, column: 30, file: SmartCL.Controls.ScrollBar]
   ,HandleMaxClick:function(Self, Sender) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FTotal > 0) {
            TW3CustomScrollBar.SetPosition$3(Self,Self.FPosition+Self.FPageSize);
         }
      }
   }
   /// procedure TW3CustomScrollBar.HandleMinClick(Sender: TObject)
   ///  [line: 332, column: 30, file: SmartCL.Controls.ScrollBar]
   ,HandleMinClick:function(Self, Sender) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FTotal > 0) {
            TW3CustomScrollBar.SetPosition$3(Self,Self.FPosition-Self.FPageSize);
         }
      }
   }
   /// procedure TW3CustomScrollBar.InitializeObject()
   ///  [line: 268, column: 30, file: SmartCL.Controls.ScrollBar]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FUpBtn = TW3CustomScrollBar.CreateLowerButton$(Self);
      Self.FDownBtn = TW3CustomScrollBar.CreateHigherButton$(Self);
      Self.FHandle$20 = TW3TagContainer.Create$81$($New(TW3ScrollbarHandle),Self);
      Self.FHandle$20.FTransparentEvents = true;
   }
   /// procedure TW3CustomScrollBar.MouseWheelHandler(Sender: TObject; Shift: TShiftState; WheelDelta: Integer; const MousePos: TPoint; var Handled: Boolean)
   ///  [line: 313, column: 30, file: SmartCL.Controls.ScrollBar]
   ,MouseWheelHandler:function(Self, Sender, Shift, WheelDelta, MousePos, Handled) {
      var e$1,
         LDelta = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FTotal > 0) {
            e$1 = event;
            if (e$1) {
               LDelta = Math.max(-1,Math.min(1,WheelDelta|e$1.detail));
               TW3CustomScrollBar.SetPosition$3(Self,Math.round(Self.FPosition-LDelta * 50));
            }
            Handled.v = true;
         }
      }
   }
   /// procedure TW3CustomScrollBar.ObjectReady()
   ///  [line: 305, column: 30, file: SmartCL.Controls.ScrollBar]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3CustomControl._setMouseClick(Self.FUpBtn,$Event1(Self,TW3CustomScrollBar.HandleMinClick));
      TW3CustomControl._setMouseClick(Self.FDownBtn,$Event1(Self,TW3CustomScrollBar.HandleMaxClick));
      TW3CustomControl._setMouseWheel(Self,$Event(Self,TW3CustomScrollBar.MouseWheelHandler));
   }
   /// function TW3CustomScrollBar.PixelOffsetToPosition(aPxPos: Integer) : Integer
   ///  [line: 462, column: 29, file: SmartCL.Controls.ScrollBar]
   ,PixelOffsetToPosition:function(Self, aPxPos) {
      return Math.round(aPxPos * Self.FTotal / TW3CustomScrollBar.GetArea$(Self));
   }
   /// function TW3CustomScrollBar.PositionToPixelOffset(const aPosition: Integer) : Integer
   ///  [line: 457, column: 29, file: SmartCL.Controls.ScrollBar]
   ,PositionToPixelOffset:function(Self, aPosition) {
      return Math.round(aPosition * TW3CustomScrollBar.GetArea$(Self) / Self.FTotal);
   }
   /// procedure TW3CustomScrollBar.Recalculate()
   ///  [line: 467, column: 30, file: SmartCL.Controls.ScrollBar]
   ,Recalculate:function(Self) {
      Self.FDragSize = TW3CustomScrollBar.CalcSizeOfHandle(Self);
      Self.FDragPos = TW3CustomScrollBar.PositionToPixelOffset(Self,Self.FPosition);
   }
   /// procedure TW3CustomScrollBar.SetEnabled(const EnabledValue: Boolean)
   ///  [line: 286, column: 30, file: SmartCL.Controls.ScrollBar]
   ,SetEnabled$1:function(Self, EnabledValue) {
      TW3CustomControl.SetEnabled$1$(Self.FUpBtn,EnabledValue);
      TW3CustomControl.SetEnabled$1$(Self.FDownBtn,EnabledValue);
      TW3CustomControl.SetEnabled$1(Self,EnabledValue);
   }
   /// procedure TW3CustomScrollBar.SetPageSize(NewPageSize: Integer)
   ///  [line: 386, column: 30, file: SmartCL.Controls.ScrollBar]
   ,SetPageSize:function(Self, NewPageSize) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         NewPageSize = TInteger.EnsureRange(NewPageSize,0,Self.FTotal);
         if (NewPageSize != Self.FPageSize) {
            Self.FPageSize = NewPageSize;
            if (Self.FTotal > 0) {
               TW3CustomScrollBar.Recalculate(Self);
               TW3MovableControl.Invalidate$(Self);
               if (!($SetIn(Self.FComponentState,3,0,11))) {
                  if (Self.FOnChanged) {
                     Self.FOnChanged(Self);
                  }
               }
            }
         }
      }
   }
   /// procedure TW3CustomScrollBar.SetPosition(NewPosition: Integer)
   ///  [line: 411, column: 30, file: SmartCL.Controls.ScrollBar]
   ,SetPosition$3:function(Self, NewPosition) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         NewPosition = TInteger.EnsureRange(NewPosition,0,Self.FTotal-Self.FPageSize);
         if (NewPosition != Self.FPosition) {
            Self.FPosition = NewPosition;
            if (Self.FTotal > 0) {
               TW3CustomScrollBar.Recalculate(Self);
               TW3MovableControl.Invalidate$(Self);
               if (!($SetIn(Self.FComponentState,3,0,11))) {
                  if (Self.FOnChanged) {
                     Self.FOnChanged(Self);
                  }
               }
            }
         }
      }
   }
   /// procedure TW3CustomScrollBar.SetPositionNoCalc(NewPosition: Integer)
   ///  [line: 436, column: 30, file: SmartCL.Controls.ScrollBar]
   ,SetPositionNoCalc:function(Self, NewPosition) {
      NewPosition = TInteger.EnsureRange(NewPosition,0,Self.FTotal-Self.FPageSize);
      if (NewPosition != Self.FPosition) {
         Self.FPosition = NewPosition;
         if (!($SetIn(Self.FComponentState,3,0,11))) {
            if (Self.FOnChanged) {
               Self.FOnChanged(Self);
            }
         }
      }
   }
   /// procedure TW3CustomScrollBar.SetTotal(NewTotal: Integer)
   ///  [line: 350, column: 30, file: SmartCL.Controls.ScrollBar]
   ,SetTotal:function(Self, NewTotal) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         NewTotal = TInteger.EnsureRange(NewTotal,0,2147483647);
         if (NewTotal != Self.FTotal) {
            Self.FTotal = NewTotal;
            if (Self.FPageSize > Self.FTotal) {
               Self.FPageSize = Self.FTotal;
            }
            if (Self.FPosition > Self.FTotal-Self.FPageSize) {
               if (Self.FTotal-Self.FPageSize < 1) {
                  Self.FPosition = 0;
               } else {
                  Self.FPosition = Self.FTotal-Self.FPageSize;
               }
            }
            if (TControlHandleHelper$Valid$3(Self.FHandle$4) && $SetIn(Self.FComponentState,4,0,11)) {
               TW3CustomScrollBar.Recalculate(Self);
               TW3MovableControl.Invalidate$(Self);
               if (!($SetIn(Self.FComponentState,3,0,11))) {
                  if (Self.FOnChanged) {
                     Self.FOnChanged(Self);
                  }
               }
            }
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1$:function($){return $.ClassType.SetEnabled$1.apply($.ClassType, arguments)}
   ,CreateHigherButton$:function($){return $.ClassType.CreateHigherButton($)}
   ,CreateLowerButton$:function($){return $.ClassType.CreateLowerButton($)}
   ,GetArea$:function($){return $.ClassType.GetArea($)}
};
TW3CustomScrollBar.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3VerticalScrollbar = class (TW3CustomScrollBar)
///  [line: 122, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3VerticalScrollbar = {
   $ClassName:"TW3VerticalScrollbar",$Parent:TW3CustomScrollBar
   ,$Init:function ($) {
      TW3CustomScrollBar.$Init($);
   }
   /// function TW3VerticalScrollbar.CreateHigherButton() : TW3ScrollbarHigherButton
   ///  [line: 669, column: 31, file: SmartCL.Controls.ScrollBar]
   ,CreateHigherButton:function(Self) {
      return TW3TagContainer.Create$81$($New(TW3ScrollbarBottomButton),Self);
   }
   /// function TW3VerticalScrollbar.CreateLowerButton() : TW3ScrollbarLowerButton
   ///  [line: 664, column: 31, file: SmartCL.Controls.ScrollBar]
   ,CreateLowerButton:function(Self) {
      return TW3TagContainer.Create$81$($New(TW3ScrollbarTopButton),Self);
   }
   /// function TW3VerticalScrollbar.GetArea() : Integer
   ///  [line: 757, column: 31, file: SmartCL.Controls.ScrollBar]
   ,GetArea:function(Self) {
      var Result = 0;
      Result = TW3MovableControl.GetTop(Self.FDownBtn)-TW3MovableControl.GetBoundsRect(Self.FUpBtn).Bottom$1;
      return Result
   }
   /// procedure TW3VerticalScrollbar.HandleDragBarMouseDown(Sender: TObject; button: TMouseButton; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 674, column: 32, file: SmartCL.Controls.ScrollBar]
   ,HandleDragBarMouseDown:function(Self, Sender, button$3, shiftState, x$42, y$32) {
      if (!button$3) {
         if (TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(Self.FHandle$20),x$42,y$32)) {
            TW3CustomControl.SetFocus(Self.FHandle$20);
            TW3CustomControl.SetCapture(Self);
            Self.FEntry = y$32-TW3MovableControl.GetTop(Self.FHandle$20);
            Self.FMoving = true;
            if (Self.OnScrollBegins) {
               Self.OnScrollBegins(Self);
            }
            event.stopImmediatePropagation();
         } else if (y$32 < TW3MovableControl.GetTop(Self.FHandle$20) && (!(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(Self.FUpBtn),x$42,y$32)))) {
            TW3CustomScrollBar.SetPosition$3(Self,Self.FPosition-Self.FPageSize);
         } else if (y$32 > TW3MovableControl.GetBoundsRect(Self.FHandle$20).Bottom$1 && (!(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(Self.FDownBtn),x$42,y$32)))) {
            TW3CustomScrollBar.SetPosition$3(Self,Self.FPosition+Self.FPageSize);
         }
      }
   }
   /// procedure TW3VerticalScrollbar.HandleDragBarMouseMove(Sender: TObject; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 706, column: 32, file: SmartCL.Controls.ScrollBar]
   ,HandleDragBarMouseMove:function(Self, Sender, shiftState, x$42, y$32) {
      var mNewPos = 0,
         dy$3 = 0;
      if (Self.FMoving) {
         dy$3 = y$32-Self.FEntry;
         TW3MovableControl.SetTop$(Self.FHandle$20,TInteger.EnsureRange(dy$3,TW3MovableControl.GetBoundsRect(Self.FUpBtn).Bottom$1,TW3MovableControl.GetTop(Self.FDownBtn)-Self.FDragSize));
         mNewPos = TW3CustomScrollBar.PixelOffsetToPosition(Self,TW3MovableControl.GetTop(Self.FHandle$20)-TW3MovableControl.GetBoundsRect(Self.FUpBtn).Bottom$1);
         TW3CustomScrollBar.SetPositionNoCalc(Self,mNewPos);
      }
   }
   /// procedure TW3VerticalScrollbar.HandleDragBarMouseUp(Sender: TObject; button: TMouseButton; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 729, column: 32, file: SmartCL.Controls.ScrollBar]
   ,HandleDragBarMouseUp:function(Self, Sender, button$3, shiftState, x$42, y$32) {
      if (Self.FMoving) {
         Self.FMoving = false;
         TW3CustomControl.ReleaseCapture(Self);
         if (Self.OnScrollEnds) {
            Self.OnScrollEnds(Self);
         }
      }
   }
   /// procedure TW3VerticalScrollbar.InitializeObject()
   ///  [line: 619, column: 32, file: SmartCL.Controls.ScrollBar]
   ,InitializeObject:function(Self) {
      var ImgHandle,
         ImgHandle$1;
      TW3CustomScrollBar.InitializeObject(Self);
      TW3TagObj.a$48(Self.FUpBtn,"<img width=100% height=100%>");
      TW3TagObj.a$48(Self.FDownBtn,"<img width=100% height=100%>");
      if (TControlHandleHelper$GetChildCount$1(Self.FUpBtn.FHandle$4) > 0) {
         ImgHandle = TControlHandleHelper$GetChildByIndex(Self.FUpBtn.FHandle$4,0);
         if (ImgHandle) {
            ImgHandle.src = "data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAAA\/klEQVQ4je2QvUrEQBSFz40PYOHCggiCrQmWlsLiA8xkyDtoq2wharfNylY2+hKZSdJYWIngOwQFkd0n2DbMiU0CMf6gdoKnGc65d757ucCfl3xVVEodisiuiJxZaxc\/AmitLwCMGzv33o+Konj6FkApNROR4168CIJglKbpYzcMPpg86X1eNu8GyVtjzNZnANFaXwE47WRjkqGItKtvknwwxmy\/A8RxfATgoPV1XZ8752Z5ns8B7IvIc1MakrxJkmT1DYDkTmfySZZlk9ZYa1+893udTdarqhoAwErbFEXRHck1ANfOucv+bcqyXIZhaEkORGTqnLvv9\/zrl3oFMYVbLEeX4OkAAAAASUVORK5CYII=";
            TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,ImgHandle,"TW3NoSelect");
         }
      }
      if (TControlHandleHelper$GetChildCount$1(Self.FDownBtn.FHandle$4) > 0) {
         ImgHandle$1 = TControlHandleHelper$GetChildByIndex(Self.FDownBtn.FHandle$4,0);
         if (ImgHandle$1) {
            ImgHandle$1.src = "data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAABBUlEQVQ4je2PMU7DQBRE5y9ukBsOQGIRhCxouAUV1nrX2pJTAKKLEmq4yhr7AqahpERyChfAHRAWK38aJyIro4gyEtPN\/HmzWuBfOz9NlmVHcRx3dV1\/\/gZIKU+iKPpomuYLAMTyoLW+6LpuQUTPxpjxEKyUmgohXsIwfDLG7K4NMPM5AAIwcc5V\/ohSagpg3tvTtm3H\/sANgNfeTpxzlZRyNACDmWdlWS7Qv7hSkiQHQRBUAKI+apj5gYgulx0imltrZyvv\/1Nrvc\/MjwAO\/RsRXVlr79cyvwQAUsqREKLyRq7zPL\/zu8IPAKAoinchxBkzv\/XR7RC8UWma7imljv8Mbpe+AQXEWbnYo3KmAAAAAElFTkSuQmCC";
            TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,ImgHandle$1,"TW3NoSelect");
         }
      }
      TW3CustomControl._setMouseDown(Self,$Event(Self,TW3VerticalScrollbar.HandleDragBarMouseDown));
      TW3CustomControl._setMouseMove(Self,$Event(Self,TW3VerticalScrollbar.HandleDragBarMouseMove));
      TW3CustomControl._setMouseUp(Self,$Event(Self,TW3VerticalScrollbar.HandleDragBarMouseUp));
      Self.SimulateMouseEvents = true;
   }
   /// procedure TW3VerticalScrollbar.Resize()
   ///  [line: 742, column: 32, file: SmartCL.Controls.ScrollBar]
   ,Resize:function(Self) {
      var cw = 0;
      TW3MovableControl.Resize(Self);
      cw = TW3MovableControl.ClientWidth(Self);
      TW3MovableControl.SetBounds$(Self.FUpBtn,0,0,cw,cw);
      TW3MovableControl.SetBounds$(Self.FDownBtn,0,TW3MovableControl.ClientHeight(Self)-cw,cw,cw);
      TW3CustomScrollBar.Recalculate(Self);
      TW3MovableControl.SetVisible(Self.FHandle$20,Self.FTotal > 0 || Self.FDragPos > 0);
      if (TW3MovableControl.GetVisible(Self.FHandle$20)) {
         TW3MovableControl.SetBounds$(Self.FHandle$20,0,cw+Self.FDragPos,cw,Self.FDragSize);
      }
   }
   /// procedure TW3VerticalScrollbar.StyleTagObject()
   ///  [line: 656, column: 32, file: SmartCL.Controls.ScrollBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomScrollBar.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3CustomScrollBar.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3CustomScrollBar.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomScrollBar.SetEnabled$1
   ,CreateHigherButton$:function($){return $.ClassType.CreateHigherButton($)}
   ,CreateLowerButton$:function($){return $.ClassType.CreateLowerButton($)}
   ,GetArea$:function($){return $.ClassType.GetArea($)}
};
TW3VerticalScrollbar.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarLowerButton = class (TW3CustomControl)
///  [line: 39, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarLowerButton = {
   $ClassName:"TW3ScrollbarLowerButton",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3ScrollbarLowerButton.CreationFlags() : TW3CreationFlags
   ///  [line: 200, column: 34, file: SmartCL.Controls.ScrollBar]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetInc(Result,5,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarLowerButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarTopButton = class (TW3ScrollbarLowerButton)
///  [line: 49, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarTopButton = {
   $ClassName:"TW3ScrollbarTopButton",$Parent:TW3ScrollbarLowerButton
   ,$Init:function ($) {
      TW3ScrollbarLowerButton.$Init($);
   }
   /// procedure TW3ScrollbarTopButton.StyleTagObject()
   ///  [line: 230, column: 33, file: SmartCL.Controls.ScrollBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3ScrollbarLowerButton.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarTopButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarHigherButton = class (TW3CustomControl)
///  [line: 44, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarHigherButton = {
   $ClassName:"TW3ScrollbarHigherButton",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3ScrollbarHigherButton.CreationFlags() : TW3CreationFlags
   ///  [line: 215, column: 35, file: SmartCL.Controls.ScrollBar]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetInc(Result,5,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarHigherButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarRightButton = class (TW3ScrollbarHigherButton)
///  [line: 60, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarRightButton = {
   $ClassName:"TW3ScrollbarRightButton",$Parent:TW3ScrollbarHigherButton
   ,$Init:function ($) {
      TW3ScrollbarHigherButton.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3ScrollbarHigherButton.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarRightButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarLeftButton = class (TW3ScrollbarLowerButton)
///  [line: 57, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarLeftButton = {
   $ClassName:"TW3ScrollbarLeftButton",$Parent:TW3ScrollbarLowerButton
   ,$Init:function ($) {
      TW3ScrollbarLowerButton.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3ScrollbarLowerButton.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarLeftButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarHandle = class (TW3CustomControl)
///  [line: 63, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarHandle = {
   $ClassName:"TW3ScrollbarHandle",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// procedure TW3ScrollbarHandle.StyleTagObject()
   ///  [line: 254, column: 30, file: SmartCL.Controls.ScrollBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
   }
   /// function TW3ScrollbarHandle.CreationFlags() : TW3CreationFlags
   ///  [line: 243, column: 29, file: SmartCL.Controls.ScrollBar]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetInc(Result,5,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarHandle.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ScrollbarBottomButton = class (TW3ScrollbarHigherButton)
///  [line: 54, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3ScrollbarBottomButton = {
   $ClassName:"TW3ScrollbarBottomButton",$Parent:TW3ScrollbarHigherButton
   ,$Init:function ($) {
      TW3ScrollbarHigherButton.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3ScrollbarHigherButton.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ScrollbarBottomButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3HorizontalScrollbar = class (TW3CustomScrollBar)
///  [line: 140, column: 3, file: SmartCL.Controls.ScrollBar]
var TW3HorizontalScrollbar = {
   $ClassName:"TW3HorizontalScrollbar",$Parent:TW3CustomScrollBar
   ,$Init:function ($) {
      TW3CustomScrollBar.$Init($);
   }
   /// function TW3HorizontalScrollbar.CreateHigherButton() : TW3ScrollbarHigherButton
   ///  [line: 528, column: 33, file: SmartCL.Controls.ScrollBar]
   ,CreateHigherButton:function(Self) {
      return TW3TagContainer.Create$81$($New(TW3ScrollbarRightButton),Self);
   }
   /// function TW3HorizontalScrollbar.CreateLowerButton() : TW3ScrollbarLowerButton
   ///  [line: 523, column: 33, file: SmartCL.Controls.ScrollBar]
   ,CreateLowerButton:function(Self) {
      return TW3TagContainer.Create$81$($New(TW3ScrollbarLeftButton),Self);
   }
   /// function TW3HorizontalScrollbar.GetArea() : Integer
   ///  [line: 533, column: 33, file: SmartCL.Controls.ScrollBar]
   ,GetArea:function(Self) {
      var Result = 0;
      Result = TW3MovableControl.GetLeft(Self.FDownBtn)-1-(TW3MovableControl.GetBoundsRect(Self.FUpBtn).Right$1+1);
      return Result
   }
   /// procedure TW3HorizontalScrollbar.HandleDragBarMouseDown(Sender: TObject; button: TMouseButton; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 538, column: 34, file: SmartCL.Controls.ScrollBar]
   ,HandleDragBarMouseDown$1:function(Self, Sender, button$3, shiftState, x$42, y$32) {
      if (!button$3) {
         if (TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(Self.FHandle$20),x$42,y$32)) {
            TW3CustomControl.SetCapture(Self);
            Self.FEntry = x$42-TW3MovableControl.GetLeft(Self.FHandle$20);
            Self.FMoving = true;
            if (Self.OnScrollBegins) {
               Self.OnScrollBegins(Self);
            }
         } else if (x$42 < TW3MovableControl.GetLeft(Self.FHandle$20) && (!(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(Self.FUpBtn),x$42,y$32)))) {
            TW3CustomScrollBar.SetPosition$3(Self,Self.FPosition-Self.FPageSize);
         } else if (x$42 > TW3MovableControl.GetBoundsRect(Self.FHandle$20).Right$1 && (!(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(Self.FDownBtn),x$42,y$32)))) {
            TW3CustomScrollBar.SetPosition$3(Self,Self.FPosition+Self.FPageSize);
         }
      }
   }
   /// procedure TW3HorizontalScrollbar.HandleDragBarMouseMove(Sender: TObject; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 563, column: 34, file: SmartCL.Controls.ScrollBar]
   ,HandleDragBarMouseMove$1:function(Self, Sender, shiftState, x$42, y$32) {
      var mNewPos = 0,
         dx$3 = 0;
      if (Self.FMoving) {
         dx$3 = x$42-Self.FEntry;
         TW3MovableControl.SetLeft$(Self.FHandle$20,TInteger.EnsureRange(dx$3,TW3MovableControl.GetBoundsRect(Self.FUpBtn).Right$1,TW3MovableControl.GetLeft(Self.FDownBtn)-Self.FDragSize));
         mNewPos = TW3CustomScrollBar.PixelOffsetToPosition(Self,TW3MovableControl.GetLeft(Self.FHandle$20)-(TW3MovableControl.GetBoundsRect(Self.FUpBtn).Right$1+1));
         TW3CustomScrollBar.SetPositionNoCalc(Self,mNewPos);
      }
   }
   /// procedure TW3HorizontalScrollbar.HandleDragBarMouseUp(Sender: TObject; button: TMouseButton; shiftState: TShiftState; x: Integer; y: Integer)
   ///  [line: 585, column: 34, file: SmartCL.Controls.ScrollBar]
   ,HandleDragBarMouseUp$1:function(Self, Sender, button$3, shiftState, x$42, y$32) {
      if (Self.FMoving) {
         Self.FMoving = false;
         TW3CustomControl.ReleaseCapture(Self);
         if (Self.OnScrollEnds) {
            Self.OnScrollEnds(Self);
         }
      }
   }
   /// procedure TW3HorizontalScrollbar.InitializeObject()
   ///  [line: 477, column: 34, file: SmartCL.Controls.ScrollBar]
   ,InitializeObject:function(Self) {
      var ImgHandle,
         ImgHandle$1;
      TW3CustomScrollBar.InitializeObject(Self);
      TW3TagObj.a$48(Self.FUpBtn,"<img width=100% height=100%>");
      TW3TagObj.a$48(Self.FDownBtn,"<img width=100% height=100%>");
      if (TControlHandleHelper$GetChildCount$1(Self.FUpBtn.FHandle$4) > 0) {
         ImgHandle = TControlHandleHelper$GetChildByIndex(Self.FUpBtn.FHandle$4,0);
         if (ImgHandle) {
            ImgHandle.src = "data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAAA6klEQVQ4jcWSMU7EQAxFv0OFaLmEfQVoKBDtZE6ChLYAKRQsokAg7Uk8B4COhprGPgIF1bZImGYjLUMSQrXu\/Of\/J8tjYNe195chpXTJzEVE3s3srX5vpsI5546I7gAcRsTjkGcUkHPuIuKm74loNeSjIbFt23sAiy1pUUp5mAX4T\/gXIKWUiKhsjX2rqt1YGKh20DTND2BErKfCQPWNZubMvAZwtpFOmXnf3Z9nAQDA3V8ryDEzH7j70yxADxGRLwAnG+lIRD7N7KX2jt6Bqi6J6LrvI+J8yDd5iaq6jIgrAB9EdDHl3V19A2PtT5Dyi9aLAAAAAElFTkSuQmCC";
            TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,ImgHandle,"TW3NoSelect");
         }
      }
      if (TControlHandleHelper$GetChildCount$1(Self.FDownBtn.FHandle$4) > 0) {
         ImgHandle$1 = TControlHandleHelper$GetChildByIndex(Self.FDownBtn.FHandle$4,0);
         if (ImgHandle$1) {
            ImgHandle$1.src = "data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAAA1UlEQVQ4jc3QsWoCQRDG8f8YsbDOQ9zcK0gaMf3tE\/gKSpBY2AaClU9yB9amiWibcsd3sEmTKnBpPFiOvSVWOt3szPdjd+HW9RA7dM5NVXWnqj0zO1wNqOoH8AhMVPXXzPZXAVmWDURkfGnHKSQKmNmnqv4Azw2S5\/nQe7\/7F3BBji1kFEM6gQAZAE8B8uW9PzU7vRQAUNf1d2reTw2dc+\/Aa9OLyLwsy224I4nwGli0wpv2XvQJRVGswjCwioU7ARGZheGqqt66btr1iS\/AGVimwvdRf3FdSIK1auN+AAAAAElFTkSuQmCC";
            TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(Self).ClassType,ImgHandle$1,"TW3NoSelect");
         }
      }
      TW3CustomControl._setMouseDown(Self,$Event(Self,TW3HorizontalScrollbar.HandleDragBarMouseDown$1));
      TW3CustomControl._setMouseMove(Self,$Event(Self,TW3HorizontalScrollbar.HandleDragBarMouseMove$1));
      TW3CustomControl._setMouseUp(Self,$Event(Self,TW3HorizontalScrollbar.HandleDragBarMouseUp$1));
      Self.SimulateMouseEvents = true;
   }
   /// procedure TW3HorizontalScrollbar.Resize()
   ///  [line: 597, column: 34, file: SmartCL.Controls.ScrollBar]
   ,Resize:function(Self) {
      var ch$4 = 0,
         dx$3 = 0;
      TW3MovableControl.Resize(Self);
      ch$4 = TW3MovableControl.ClientHeight(Self);
      TW3MovableControl.SetBounds$(Self.FUpBtn,0,0,ch$4,ch$4);
      TW3MovableControl.SetBounds$(Self.FDownBtn,TW3MovableControl.ClientWidth(Self)-ch$4,0,ch$4,ch$4);
      TW3CustomScrollBar.Recalculate(Self);
      TW3MovableControl.SetVisible(Self.FHandle$20,(Self.FTotal < 1 || Self.FDragPos < 0)?false:true);
      if (TW3MovableControl.GetVisible(Self.FHandle$20)) {
         dx$3 = ch$4+Self.FDragPos;
         TW3MovableControl.SetBounds$(Self.FHandle$20,dx$3,0,Self.FDragSize,ch$4);
      }
   }
   /// procedure TW3HorizontalScrollbar.StyleTagObject()
   ///  [line: 514, column: 34, file: SmartCL.Controls.ScrollBar]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomScrollBar.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3CustomScrollBar.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3CustomScrollBar.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomScrollBar.SetEnabled$1
   ,CreateHigherButton$:function($){return $.ClassType.CreateHigherButton($)}
   ,CreateLowerButton$:function($){return $.ClassType.CreateLowerButton($)}
   ,GetArea$:function($){return $.ClassType.GetArea($)}
};
TW3HorizontalScrollbar.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3CheckBox = class (TW3Label)
///  [line: 20, column: 3, file: SmartCL.Controls.CheckBox]
var TW3CheckBox = {
   $ClassName:"TW3CheckBox",$Parent:TW3Label
   ,$Init:function ($) {
      TW3Label.$Init($);
      $.FAutoCheck = false;
      $.FChkCaption = undefined;
      $.FChkMark = undefined;
      $.FOnChecked = null;
   }
   /// procedure TW3CheckBox.CBClick(eventObj: JEvent)
   ///  [line: 57, column: 23, file: SmartCL.Controls.CheckBox]
   ,CBClick:function(Self, eventObj) {
      TW3CheckBox.ToggleValueOnClick$(Self);
      TW3CustomControl.CBClick(Self,eventObj);
      if (Self.FAutoCheck && (Self.FOnChecked!==null)) {
         Self.FOnChecked(Self);
      }
   }
   /// function TW3CheckBox.CreationFlags() : TW3CreationFlags
   ///  [line: 51, column: 22, file: SmartCL.Controls.CheckBox]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3Label.CreationFlags(Self);
      $SetInc(Result,7,0,8);
      return Result
   }
   /// function TW3CheckBox.GetCaption() : String
   ///  [line: 117, column: 22, file: SmartCL.Controls.CheckBox]
   ,GetCaption$1:function(Self) {
      var Result = "";
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FChkCaption) {
            Result = String(Self.FChkCaption.innerHTML);
         }
      }
      return Result
   }
   /// function TW3CheckBox.GetChecked() : Boolean
   ///  [line: 142, column: 22, file: SmartCL.Controls.CheckBox]
   ,GetChecked:function(Self) {
      return $VarToBool(Self.FChkMark.checked);
   }
   /// function TW3CheckBox.GetMarkType() : String
   ///  [line: 64, column: 22, file: SmartCL.Controls.CheckBox]
   ,GetMarkType:function(Self) {
      return "checkbox";
   }
   /// procedure TW3CheckBox.InitializeObject()
   ///  [line: 69, column: 23, file: SmartCL.Controls.CheckBox]
   ,InitializeObject:function(Self) {
      TW3Label.InitializeObject(Self);
      Self.FAutoCheck = true;
      Self.FContent.display = "inline";
      Self.FContent.style.display = "flex";
      Self.FContent.style.width = "100%";
      Self.FChkMark = document.createElement("input");
      w3_setAttrib(Self.FChkMark,"type",TW3CheckBox.GetMarkType$(Self));
      Self.FChkMark.style.width = "16px";
      Self.FChkMark.style.height = "16px";
      Self.FChkMark.style.position = "relative";
      Self.FChkMark.style["flex-shrink"] = 0;
      Self.FChkMark.style["vertical-align"] = "middle";
      w3_setAttrib(Self.FChkMark,"tabindex",-1);
      Self.FContent.appendChild(Self.FChkMark);
      Self.FChkCaption = document.createElement("pre");
      w3_setAttrib(Self.FChkCaption,"class","lbxcontent lbxdisableBreak");
      Self.FChkCaption.style.position = "relative";
      Self.FChkCaption.style["vertical-align"] = "middle";
      Self.FContent.appendChild(Self.FChkCaption);
      Self.FChkMark["onclick"] = function (eventObj) {
         eventObj.preventDefault();
      };
      TW3CustomControl._setKeyPress(Self,function (Sender, Character) {
         var e$1;
         if (Character == " ") {
            TW3CheckBox.SetChecked$1$(Self,!(TW3CheckBox.GetChecked(Self)));
         }
         e$1 = event;
         if (e$1) {
            e$1.PreventDefault;
            e$1.StopPropagation;
         }
      });
      TW3CustomControl._setMouseClick(Self,function (_implicit_Sender) {
         /* null */
      });
   }
   /// procedure TW3CheckBox.SetCaption(const NewCaption: String)
   ///  [line: 126, column: 23, file: SmartCL.Controls.CheckBox]
   ,SetCaption$2:function(Self, NewCaption) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FChkCaption.innerHTML != NewCaption) {
            Self.FChkCaption.innerHTML = NewCaption;
            if (Self.FAuto$1) {
               TW3Label.AdjustToAutoSize(Self);
            }
            if (Self.FOnChanged) {
               Self.FOnChanged(Self);
            }
         }
      }
   }
   /// procedure TW3CheckBox.SetChecked(aValue: Boolean)
   ///  [line: 147, column: 23, file: SmartCL.Controls.CheckBox]
   ,SetChecked$1:function(Self, aValue) {
      Self.FChkMark.checked = aValue;
   }
   /// procedure TW3CheckBox.SetHAlign(const NewAlign: TTextAlign)
   ///  [line: 152, column: 23, file: SmartCL.Controls.CheckBox]
   ,SetHAlign:function(Self, NewAlign) {
      var MoveCheck = false;
      if (NewAlign != Self.FHAlign) {
         if (NewAlign == 2) {
            MoveCheck = Self.FHAlign != 2;
         } else {
            MoveCheck = Self.FHAlign == 2;
         }
         if (MoveCheck) {
            Self.FContent.removeChild(Self.FChkMark);
            if (NewAlign == 2) {
               Self.FContent.appendChild(Self.FChkMark);
            } else {
               Self.FContent.insertBefore(Self.FChkMark,Self.FChkCaption);
            }
         }
         TW3Label.SetHAlign(Self,NewAlign);
      }
   }
   /// procedure TW3CheckBox.SetWordWrap(const NewWrap: Boolean)
   ///  [line: 169, column: 23, file: SmartCL.Controls.CheckBox]
   ,SetWordWrap:function(Self, NewWrap) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (!(Self.FAuto$1)) {
            if (NewWrap != Self.FWrap$1) {
               Self.FWrap$1 = NewWrap;
               if (NewWrap) {
                  Self.FChkCaption.classList.remove("lbxdisableBreak");
                  Self.FChkCaption.classList.add("lbxenableBreak");
               } else {
                  Self.FChkCaption.classList.remove("lbxenableBreak");
                  Self.FChkCaption.classList.add("lbxdisableBreak");
               }
            }
         }
      }
   }
   /// procedure TW3CheckBox.ToggleValueOnClick()
   ///  [line: 195, column: 23, file: SmartCL.Controls.CheckBox]
   ,ToggleValueOnClick:function(Self) {
      if (Self.FAutoCheck) {
         TW3CheckBox.SetChecked$1$(Self,!(TW3CheckBox.GetChecked(Self)));
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1$:function($){return $.ClassType.GetCaption$1($)}
   ,SetCaption$2$:function($){return $.ClassType.SetCaption$2.apply($.ClassType, arguments)}
   ,SetHAlign$:function($){return $.ClassType.SetHAlign.apply($.ClassType, arguments)}
   ,SetWordWrap$:function($){return $.ClassType.SetWordWrap.apply($.ClassType, arguments)}
   ,GetMarkType$:function($){return $.ClassType.GetMarkType($)}
   ,SetChecked$1$:function($){return $.ClassType.SetChecked$1.apply($.ClassType, arguments)}
   ,ToggleValueOnClick$:function($){return $.ClassType.ToggleValueOnClick($)}
};
TW3CheckBox.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3InputType enumeration
///  [line: 26, column: 3, file: SmartCL.Controls.EditBox]
var TW3InputType = [ "itNone", "itColor", "itDate", "itDateTime", "itDateTimeLocal", "itEmail", "itMonth", "itNumber", "itRange", "itSearch", "itTel", "itTime", "itUrl", "itWeek", "itPassword", "itFile" ];
/// TW3EditBox = class (TW3CustomControl)
///  [line: 46, column: 3, file: SmartCL.Controls.EditBox]
var TW3EditBox = {
   $ClassName:"TW3EditBox",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// function TW3EditBox.CreationFlags() : TW3CreationFlags
   ///  [line: 236, column: 21, file: SmartCL.Controls.EditBox]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetInc(Result,7,0,8);
      $SetInc(Result,6,0,8);
      return Result
   }
   /// function TW3EditBox.GetAutoCapitalize() : Boolean
   ///  [line: 467, column: 21, file: SmartCL.Controls.EditBox]
   ,GetAutoCapitalize:function(Self) {
      var Result = false;
      var Temp$1 = "";
      if (Self.FHandle$4) {
         Temp$1 = w3_getAttribAsStr(Self.FHandle$4,"autocapitalize");
         Result = (Temp$1).toLocaleLowerCase() == TBoolean.OnOff(true);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetAutoCapitalize", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetAutoComplete() : Boolean
   ///  [line: 250, column: 22, file: SmartCL.Controls.EditBox]
   ,GetAutoComplete:function(Self) {
      var Result = false;
      var State$2 = "";
      if (Self.FHandle$4) {
         State$2 = w3_getAttribAsStr(Self.FHandle$4,"autocomplete");
         State$2 = Trim$_String_((State$2).toLocaleLowerCase());
         Result = ((State$2=="on")||(State$2==""));
      }
      return Result
   }
   /// function TW3EditBox.GetAutoCorrect() : Boolean
   ///  [line: 447, column: 21, file: SmartCL.Controls.EditBox]
   ,GetAutoCorrect:function(Self) {
      var Result = false;
      var Temp$1 = "";
      if (Self.FHandle$4) {
         Temp$1 = w3_getAttribAsStr(Self.FHandle$4,"autocorrect");
         Result = (Temp$1).toLocaleLowerCase() == TBoolean.OnOff(true);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetAutoCorrect", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetMax() : Integer
   ///  [line: 352, column: 22, file: SmartCL.Controls.EditBox]
   ,GetMax:function(Self) {
      var Result = 0;
      if (Self.FHandle$4) {
         Result = w3_getAttribAsInt(Self.FHandle$4,"max");
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetMax", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetMaxLength() : Integer
   ///  [line: 370, column: 22, file: SmartCL.Controls.EditBox]
   ,GetMaxLength$1:function(Self) {
      var Result = 0;
      if (Self.FHandle$4) {
         Result = w3_getAttribAsInt(Self.FHandle$4,"maxlength");
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetMaxLength", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetMin() : Integer
   ///  [line: 334, column: 21, file: SmartCL.Controls.EditBox]
   ,GetMin:function(Self) {
      var Result = 0;
      if (Self.FHandle$4) {
         Result = w3_getAttribAsInt(Self.FHandle$4,"min");
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetMin", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetPlaceHolder() : String
   ///  [line: 429, column: 21, file: SmartCL.Controls.EditBox]
   ,GetPlaceHolder:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = w3_getAttribAsStr(Self.FHandle$4,"placeholder");
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetPlaceHolder", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetRange() : Integer
   ///  [line: 388, column: 21, file: SmartCL.Controls.EditBox]
   ,GetRange:function(Self) {
      var Result = 0;
      if (Self.FHandle$4) {
         Result = w3_getAttribAsInt(Self.FHandle$4,"value");
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetRange", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetReadOnly() : Boolean
   ///  [line: 269, column: 21, file: SmartCL.Controls.EditBox]
   ,GetReadOnly:function(Self) {
      var Result = false;
      if (Self.FHandle$4) {
         Result = w3_HasAttrib(Self.FHandle$4,"readonly");
      }
      return Result
   }
   /// function TW3EditBox.GetSpellCheck() : Boolean
   ///  [line: 290, column: 21, file: SmartCL.Controls.EditBox]
   ,GetSpellCheck:function(Self) {
      var Result = false;
      var State$2 = "";
      if (Self.FHandle$4) {
         State$2 = w3_getAttribAsStr(Self.FHandle$4,"spellcheck");
         State$2 = Trim$_String_((State$2).toLocaleLowerCase());
         Result = ((State$2=="true")||(State$2==""));
      }
      return Result
   }
   /// function TW3EditBox.GetText() : String
   ///  [line: 487, column: 21, file: SmartCL.Controls.EditBox]
   ,GetText$3:function(Self) {
      var Result = "";
      if (Self.FHandle$4) {
         Result = w3_getPropertyAsStr(Self.FHandle$4,"value");
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetText", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.GetTextAlign() : TTextAlign
   ///  [line: 309, column: 21, file: SmartCL.Controls.EditBox]
   ,GetTextAlign$1:function(Self) {
      var Result = 0;
      var Temp$1 = "";
      if (Self.FHandle$4) {
         Temp$1 = (w3_GetStyleAsStr(Self.FHandle$4,"textAlign")).toLocaleLowerCase();
         if (Temp$1 == "left") {
            Result = 0;
         } else if (Temp$1 == "center") {
            Result = 1;
         } else if (Temp$1 == "right") {
            Result = 2;
         }
      }
      return Result
   }
   /// function TW3EditBox.GetType() : TW3InputType
   ///  [line: 406, column: 21, file: SmartCL.Controls.EditBox]
   ,GetType:function(Self) {
      var Result = 0;
      var Temp$1 = "";
      if (Self.FHandle$4) {
         Temp$1 = w3_getAttribAsStr(Self.FHandle$4,"type");
         if (Temp$1.length > 0) {
            Result = $VarToInt(_NameLUT[Temp$1],"");
         } else {
            Result = 0;
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.GetType", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
      return Result
   }
   /// function TW3EditBox.MakeElementTagObj() : THandle
   ///  [line: 218, column: 21, file: SmartCL.Controls.EditBox]
   ,MakeElementTagObj:function(Self) {
      var Result = undefined;
      Result = w3_CreateHtmlElement("input");
      w3_setAttrib(Result,"type","text");
      return Result
   }
   /// procedure TW3EditBox.SetAutoCapitalize(const NewValue: Boolean)
   ///  [line: 478, column: 22, file: SmartCL.Controls.EditBox]
   ,SetAutoCapitalize:function(Self, NewValue) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"autocapitalize",TBoolean.OnOff(NewValue));
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetAutoCapitalize", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetAutoComplete(const NewValue: Boolean)
   ///  [line: 260, column: 22, file: SmartCL.Controls.EditBox]
   ,SetAutoComplete$1:function(Self, NewValue) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHandle$4) {
            w3_setAttrib(Self.FHandle$4,"autocomplete",TBoolean.OnOff(NewValue));
         }
      }
   }
   /// procedure TW3EditBox.SetAutoCorrect(const NewValue: Boolean)
   ///  [line: 458, column: 22, file: SmartCL.Controls.EditBox]
   ,SetAutoCorrect$1:function(Self, NewValue) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"autocorrect",TBoolean.OnOff(NewValue));
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetAutoCorrect", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetMax(const NewMaxValue: Integer)
   ///  [line: 361, column: 22, file: SmartCL.Controls.EditBox]
   ,SetMax:function(Self, NewMaxValue) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"max",NewMaxValue);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetMax", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetMaxLength(const Value: Integer)
   ///  [line: 379, column: 22, file: SmartCL.Controls.EditBox]
   ,SetMaxLength$1:function(Self, Value$5) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"maxlength",Value$5);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetMaxLength", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetMin(const NewMinValue: Integer)
   ///  [line: 343, column: 22, file: SmartCL.Controls.EditBox]
   ,SetMin:function(Self, NewMinValue) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"min",NewMinValue);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetMin", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetPlaceHolder(const NewValue: String)
   ///  [line: 438, column: 22, file: SmartCL.Controls.EditBox]
   ,SetPlaceHolder:function(Self, NewValue) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"placeholder",NewValue);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetPlaceHolder", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetRange(const NewRange: Integer)
   ///  [line: 397, column: 22, file: SmartCL.Controls.EditBox]
   ,SetRange$1:function(Self, NewRange) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"value",NewRange);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetRange", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetReadOnly(const ReadOnlyValue: Boolean)
   ///  [line: 275, column: 22, file: SmartCL.Controls.EditBox]
   ,SetReadOnly:function(Self, ReadOnlyValue) {
      var LCurrent = false;
      if (Self.FHandle$4) {
         LCurrent = w3_HasAttrib(Self.FHandle$4,"readonly");
         if (ReadOnlyValue != LCurrent) {
            if (LCurrent) {
               w3_RemoveAttrib(Self.FHandle$4,"readonly");
            } else {
               w3_AddAttrib(Self.FHandle$4,"readonly");
            }
         }
      }
   }
   /// procedure TW3EditBox.SetSpellCheck(const NewValue: Boolean)
   ///  [line: 300, column: 22, file: SmartCL.Controls.EditBox]
   ,SetSpellCheck$1:function(Self, NewValue) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHandle$4) {
            w3_setAttrib(Self.FHandle$4,"spellcheck",(BoolToStr(NewValue)).toLocaleLowerCase());
         }
      }
   }
   /// procedure TW3EditBox.SetText(const NewText: String)
   ///  [line: 496, column: 22, file: SmartCL.Controls.EditBox]
   ,SetText$2:function(Self, NewText) {
      if (Self.FHandle$4) {
         w3_setProperty(Self.FHandle$4,"value",NewText);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetText", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetTextAlign(const NewTextAlign: TTextAlign)
   ///  [line: 320, column: 22, file: SmartCL.Controls.EditBox]
   ,SetTextAlign$1:function(Self, NewTextAlign) {
      if (Self.FHandle$4) {
         switch (NewTextAlign) {
            case 0 :
               Self.FHandle$4.style["textAlign"] = "left";
               break;
            case 1 :
               Self.FHandle$4.style["textAlign"] = "center";
               break;
            case 2 :
               Self.FHandle$4.style["textAlign"] = "right";
               break;
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetTextAlign", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.SetType(const NewInputType: TW3InputType)
   ///  [line: 420, column: 22, file: SmartCL.Controls.EditBox]
   ,SetType:function(Self, NewInputType) {
      if (Self.FHandle$4) {
         w3_setAttrib(Self.FHandle$4,"type",_TypeLUT[NewInputType]);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.SetType", TObject.ClassName(Self.ClassType), "Invalid handle error"]);
      }
   }
   /// procedure TW3EditBox.StyleTagObject()
   ///  [line: 224, column: 22, file: SmartCL.Controls.EditBox]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,7);
      TW3CustomControl.SetBackgroundType(Self,8);
      w3_setAttrib(Self.FHandle$4,"autocorrect","off");
      w3_setAttrib(Self.FHandle$4,"autocapitalize","off");
      w3_setAttrib(Self.FHandle$4,"placeholder","");
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)}
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3EditBox.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
function SetupEditTypeLookupTables() {
   _TypeLUT = TVariant.CreateObject();
   _TypeLUT[0] = "none";
   _TypeLUT[1] = "color";
   _TypeLUT[2] = "date";
   _TypeLUT[3] = "datetime";
   _TypeLUT[4] = "datetime-local";
   _TypeLUT[5] = "email";
   _TypeLUT[6] = "month";
   _TypeLUT[7] = "number";
   _TypeLUT[8] = "range";
   _TypeLUT[9] = "search";
   _TypeLUT[10] = "tel";
   _TypeLUT[11] = "time";
   _TypeLUT[12] = "url";
   _TypeLUT[13] = "week";
   _TypeLUT[14] = "password";
   _TypeLUT[15] = "file";
   _NameLUT = TVariant.CreateObject();
   _NameLUT["none"] = 0;
   _NameLUT["color"] = 1;
   _NameLUT["date"] = 2;
   _NameLUT["datetime"] = 3;
   _NameLUT["datetime-local"] = 4;
   _NameLUT["email"] = 5;
   _NameLUT["month"] = 6;
   _NameLUT["number"] = 7;
   _NameLUT["range"] = 8;
   _NameLUT["search"] = 9;
   _NameLUT["tel"] = 10;
   _NameLUT["time"] = 11;
   _NameLUT["url"] = 12;
   _NameLUT["week"] = 13;
   _NameLUT["password"] = 14;
   _NameLUT["file"] = 15;
};
/// TW3ListMenuItem = class (TW3CustomControl)
///  [line: 41, column: 3, file: SmartCL.Controls.ListMenu]
var TW3ListMenuItem = {
   $ClassName:"TW3ListMenuItem",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FText$3 = null;
   }
   /// procedure TW3ListMenuItem.InitializeObject()
   ///  [line: 319, column: 27, file: SmartCL.Controls.ListMenu]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FText$3 = TW3TagContainer.Create$81$($New(TW3Label),Self);
      TW3Label.SetAuto$1(Self.FText$3,false);
      TW3Label.SetVAlign(Self.FText$3,1);
      TW3Label.SetHAlign$(Self.FText$3,0);
   }
   /// procedure TW3ListMenuItem.StyleTagObject()
   ///  [line: 328, column: 27, file: SmartCL.Controls.ListMenu]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3MovableControl.SetStyleClass(Self,"TW3ListMenuItem");
      TW3CustomControl.SetBorderType(Self,13);
      TW3CustomControl.SetBackgroundType(Self,5);
   }
   /// constructor TW3ListMenuItem.Create(AOwner: TW3ListMenu)
   ///  [line: 312, column: 29, file: SmartCL.Controls.ListMenu]
   ,Create$195:function(Self, AOwner) {
      TW3TagContainer.Create$81(Self,AOwner);
      TW3TagObj.SetDisplayMode(Self,2);
      TW3TagObj.SetPositionMode(Self,22);
      return Self
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ListMenuItem.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ListMenuItemText = class (TW3ListMenuItem)
///  [line: 55, column: 3, file: SmartCL.Controls.ListMenu]
var TW3ListMenuItemText = {
   $ClassName:"TW3ListMenuItemText",$Parent:TW3ListMenuItem
   ,$Init:function ($) {
      TW3ListMenuItem.$Init($);
      $.FOffset$3 = 8;
   }
   /// procedure TW3ListMenuItemText.FinalizeObject()
   ///  [line: 340, column: 31, file: SmartCL.Controls.ListMenu]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FText$3);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3ListMenuItemText.Resize()
   ///  [line: 356, column: 31, file: SmartCL.Controls.ListMenu]
   ,Resize:function(Self) {
      var LBounds = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         dx$3 = 0,
         dy$3 = 0,
         wd = 0,
         hd = 0;
      TW3MovableControl.Resize(Self);
      LBounds = TW3MovableControl.ClientRect$(Self);
      dx$3 = LBounds.Left$3+Self.FOffset$3+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FLeft);
      dy$3 = LBounds.Top$3+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FTop);
      wd = TRect$Width$6(LBounds)-(dx$3+TW3Borders.GetHSpace(TW3MovableControl.GetBorder(Self))+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FRight));
      hd = TRect$Height$5(LBounds)-(dy$3+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FTop)+TW3Borders.GetVSpace(TW3MovableControl.GetBorder(Self))+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FBottom));
      TW3MovableControl.SetBounds$(Self.FText$3,dx$3,dy$3,wd,hd);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject:TW3ListMenuItem.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3ListMenuItem.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ListMenuItemText.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ListMenuItemGlyph = class (TW3ListMenuItem)
///  [line: 66, column: 3, file: SmartCL.Controls.ListMenu]
var TW3ListMenuItemGlyph = {
   $ClassName:"TW3ListMenuItemGlyph",$Parent:TW3ListMenuItem
   ,$Init:function ($) {
      TW3ListMenuItem.$Init($);
      $.FContainer$1 = null;
   }
   /// procedure TW3ListMenuItemGlyph.InitializeObject()
   ///  [line: 371, column: 32, file: SmartCL.Controls.ListMenu]
   ,InitializeObject:function(Self) {
      TW3ListMenuItem.InitializeObject(Self);
      Self.FContainer$1 = TW3TagContainer.Create$81$($New(TW3GlyphContainer),Self);
      TW3GlyphContainer.SetAwesome(Self.FContainer$1,"fa-bars");
   }
   /// procedure TW3ListMenuItemGlyph.FinalizeObject()
   ///  [line: 378, column: 32, file: SmartCL.Controls.ListMenu]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FText$3);
      TObject.Free(Self.FContainer$1);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3ListMenuItemGlyph.Resize()
   ///  [line: 398, column: 32, file: SmartCL.Controls.ListMenu]
   ,Resize:function(Self) {
      var LBounds = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         dx$3 = 0,
         dy$3 = 0,
         wd = 0,
         hd = 0;
      TW3MovableControl.Resize(Self);
      LBounds = TW3MovableControl.ClientRect$(Self);
      TW3MovableControl.SetBounds$(Self.FContainer$1,LBounds.Left$3,LBounds.Top$3,TRect$Height$5(LBounds),TRect$Height$5(LBounds));
      dx$3 = LBounds.Left$3+TW3MovableControl.GetWidth$(Self.FContainer$1)+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FLeft);
      dy$3 = LBounds.Top$3+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FTop);
      wd = TRect$Width$6(LBounds)-(dx$3+TW3Borders.GetHSpace(TW3MovableControl.GetBorder(Self))+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FRight));
      hd = TRect$Height$5(LBounds)-(dy$3+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FTop)+TW3Borders.GetVSpace(TW3MovableControl.GetBorder(Self))+TW3Border.GetPadding(TW3MovableControl.GetBorder(Self).FBottom));
      TW3MovableControl.SetBounds$(Self.FText$3,dx$3,dy$3,wd,hd);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3ListMenuItem.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ListMenuItemGlyph.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ListMenu = class (TW3CustomControl)
///  [line: 77, column: 3, file: SmartCL.Controls.ListMenu]
var TW3ListMenu = {
   $ClassName:"TW3ListMenu",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FItemHeight$2 = 40;
      $.FOnSelected$2 = null;
   }
   /// function TW3ListMenu.AddTextItem(const Caption: String) : TW3ListMenuItemText
   ///  [line: 180, column: 22, file: SmartCL.Controls.ListMenu]
   ,AddTextItem:function(Self, Caption$11) {
      var Result = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Result = TW3ListMenuItem.Create$195($New(TW3ListMenuItemText),Self);
         TW3CustomControl._setMouseClick(Result,$Event1(Self,TW3ListMenu.HandleItemClick$1));
         TW3MovableControl.SetHeight$(Result,Self.FItemHeight$2);
         TW3Dispatch.WaitFor(TW3Dispatch,[Result],function () {
            TW3TagObj.BeginUpdate(Self);
            TW3Label.SetCaption$2$(Result.FText$3,Caption$11);
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         });
      }
      return Result
   }
   /// procedure TW3ListMenu.Clear()
   ///  [line: 119, column: 23, file: SmartCL.Controls.ListMenu]
   ,Clear$28:function(Self) {
      var LItems = [],
         Item$3 = null;
      LItems = TW3CustomControl.GetChildrenSortedByYPos(Self);
      while (LItems.length > 0) {
         Item$3 = LItems.pop();
         TObject.Free(Item$3);
      }
   }
   /// function TW3ListMenu.GetCount() : Integer
   ///  [line: 254, column: 22, file: SmartCL.Controls.ListMenu]
   ,GetCount$5:function(Self) {
      return TW3TagContainer.GetChildCount(Self);
   }
   /// function TW3ListMenu.GetItem(const Index: Integer) : TW3ListMenuItem
   ///  [line: 259, column: 22, file: SmartCL.Controls.ListMenu]
   ,GetItem$17:function(Self, Index$6) {
      return $As(TW3TagContainer.GetChildObject(Self,Index$6),TW3ListMenuItem);
   }
   /// function TW3ListMenu.GetItems() : TStrArray
   ///  [line: 283, column: 22, file: SmartCL.Controls.ListMenu]
   ,GetItems$12:function(Self) {
      var Result = [];
      var Captions = [];
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3TagContainer.ForEach$1(Self,function (Child$1) {
            var Result = 160;
            if ($Is(Child$1,TW3ListMenuItem)) {
               Captions.push(TW3Label.GetCaption$1$($As(Child$1,TW3ListMenuItem).FText$3));
            } else {
               Captions.push("");
            }
            Result = 160;
            return Result
         });
      }
      Result = Captions;
      return Result
   }
   /// procedure TW3ListMenu.HandleItemClick(Sender: TObject)
   ///  [line: 264, column: 23, file: SmartCL.Controls.ListMenu]
   ,HandleItemClick$1:function(Self, Sender) {
      var i$7 = 0;
      if (!Self.FOnSelected$2) {
         return;
      }
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3TagContainer.ForEach$1(Self,function (Child$1) {
            var Result = 160;
            if (Sender === Child$1) {
               Self.FOnSelected$2(Self,i$7);
               Result = 16;
            } else {
               ++i$7;
               Result = 160;
            }
            return Result
         });
      }
   }
   /// procedure TW3ListMenu.RegisterChild(const Child: TW3TagContainer)
   ///  [line: 217, column: 23, file: SmartCL.Controls.ListMenu]
   ,RegisterChild:function(Self, Child$1) {
      if ($Is(Child$1,TW3ListMenuItem)) {
         TW3TagContainer.RegisterChild(Self,Child$1);
      } else {
         throw EW3Exception.CreateFmt($New(EW3ListMenu),"[%s] can only contain instances of [%s] error",[TObject.ClassName(Self.ClassType), TObject.ClassName(TW3ListMenuItem)]);
      }
   }
   /// procedure TW3ListMenu.Resize()
   ///  [line: 385, column: 23, file: SmartCL.Controls.ListMenu]
   ,Resize:function(Self) {
      var x$42 = 0;
      TW3MovableControl.Resize(Self);
      if ($SetIn(Self.FComponentState,4,0,11)) {
         var $temp88;
         for(x$42=0,$temp88=TW3ListMenu.GetCount$5(Self);x$42<$temp88;x$42++) {
            if (!($SetIn(Self.FComponentState,10,0,11))) {
               TW3MovableControl.Invalidate$(TW3ListMenu.GetItem$17(Self,x$42));
            }
         }
      }
   }
   /// procedure TW3ListMenu.SetItems(const Value: TStrArray)
   ///  [line: 298, column: 23, file: SmartCL.Controls.ListMenu]
   ,SetItems$4:function(Self, Value$5) {
      var i$7 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3ListMenu.Clear$28(Self);
         var $temp89;
         for(i$7=0,$temp89=Value$5.length;i$7<$temp89;i$7++) {
            TW3ListMenu.AddTextItem(Self,Value$5[i$7]);
         }
      }
   }
   /// procedure TW3ListMenu.SetOnSelected(Value: TW3ListMenuItemSelectedEvent)
   ///  [line: 244, column: 23, file: SmartCL.Controls.ListMenu]
   ,SetOnSelected$1:function(Self, Value$5) {
      Self.FOnSelected$2 = Value$5;
      TW3TagContainer.ForEach$1(Self,function (Child$1) {
         var Result = 160;
         TW3CustomControl._setMouseClick($As(Child$1,TW3ListMenuItem),$Event1(Self,TW3ListMenu.HandleItemClick$1));
         Result = 160;
         return Result
      });
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild$:function($){return $.ClassType.RegisterChild.apply($.ClassType, arguments)}
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ListMenu.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// EW3ListMenu = class (EW3Exception)
///  [line: 38, column: 3, file: SmartCL.Controls.ListMenu]
var EW3ListMenu = {
   $ClassName:"EW3ListMenu",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3ToggleSwitch = class (TW3CustomControl)
///  [line: 65, column: 3, file: SmartCL.Controls.ToggleSwitch]
var TW3ToggleSwitch = {
   $ClassName:"TW3ToggleSwitch",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FChecked = $.FFxMoving = false;
      $.FKnob = $.FOffText = $.FOnText = null;
   }
   /// function TW3ToggleSwitch.CreationFlags() : TW3CreationFlags
   ///  [line: 201, column: 26, file: SmartCL.Controls.ToggleSwitch]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,6,0,8);
      $SetExc(Result,7,0,8);
      return Result
   }
   /// procedure TW3ToggleSwitch.FinalizeObject()
   ///  [line: 209, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FKnob);
      TObject.Free(Self.FOffText);
      TObject.Free(Self.FOnText);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3ToggleSwitch.HandleMouseClick(Sender: TObject)
   ///  [line: 273, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,HandleMouseClick:function(Self, Sender) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3ControlTracker.SetFocusedControl(TW3ControlTracker,$As(Sender,TW3CustomControl));
         if (TW3CustomControl.GetEnabled$1$(Self)) {
            TW3ToggleSwitch.Toggle(Self);
         }
      }
   }
   /// procedure TW3ToggleSwitch.HandleTouch(Sender: TObject; Info: TW3TouchData)
   ///  [line: 267, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,HandleTouch:function(Self, Sender, Info$1) {
      if (TW3TouchList.a$95(TW3TouchData.GetTouches(Info$1),0).target == Self.FKnob.FHandle$4) {
         TW3ToggleSwitch.Toggle(Self);
      }
   }
   /// procedure TW3ToggleSwitch.InitializeObject()
   ///  [line: 176, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FOnText = TW3TagContainer.Create$81$($New(TW3ToggleOnLabel),Self);
      TW3Label.SetCaption$2$(Self.FOnText,TBoolean.OnOff(true));
      TW3Label.SetVAlign(Self.FOnText,1);
      TW3Label.SetHAlign$(Self.FOnText,1);
      Self.FOffText = TW3TagContainer.Create$81$($New(TW3ToggleOffLabel),Self);
      TW3Label.SetCaption$2$(Self.FOffText,TBoolean.OnOff(false));
      TW3Label.SetVAlign(Self.FOffText,1);
      TW3Label.SetHAlign$(Self.FOffText,1);
      Self.FKnob = TW3TagContainer.Create$81$($New(TW3ToggleKnob),Self);
      TW3CustomControl._setMouseClick(Self.FKnob,$Event1(Self,TW3ToggleSwitch.HandleMouseClick));
      TW3CustomControl._setTouchEnds(Self.FKnob,$Event2(Self,TW3ToggleSwitch.HandleTouch));
      TW3CustomControl._setMouseClick(Self,$Event1(Self,TW3ToggleSwitch.HandleMouseClick));
      TW3MovableControl.SetSize$2$(Self,100,32);
   }
   /// procedure TW3ToggleSwitch.RegisterChild(const Child: TW3TagContainer)
   ///  [line: 225, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,RegisterChild:function(Self, Child$1) {
      if (Child$1 !== null) {
         if ($Is(Child$1,TW3ToggleKnob) || $Is(Child$1,TW3ToggleLabel)) {
            TW3TagContainer.RegisterChild(Self,Child$1);
         } else {
            throw EW3Exception.CreateFmt($New(EW3Exception),$R[26],[TObject.ClassName(Self.ClassType)]);
         }
      } else {
         TW3TagContainer.RegisterChild(Self,Child$1);
      }
   }
   /// procedure TW3ToggleSwitch.Resize()
   ///  [line: 288, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,Resize:function(Self) {
      var LBounds = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         Half = 0,
         dx$3 = 0;
      TW3MovableControl.Resize(Self);
      LBounds = TW3MovableControl.ClientRect$(Self);
      if (!(TRect$Empty$2(LBounds))) {
         Half = $Div(TRect$Width$6(LBounds),2);
         TW3MovableControl.SetBounds$(Self.FOnText,LBounds.Left$3,LBounds.Top$3,Half,TRect$Height$5(LBounds));
         dx$3 = LBounds.Left$3;
         (dx$3+= Half);
         LBounds.Left$3 += Half;
         TW3MovableControl.SetBounds$1$(Self.FOffText,LBounds);
         TW3MovableControl.SetTop$(Self.FKnob,LBounds.Top$3);
         TW3MovableControl.SetHeight$(Self.FKnob,TRect$Height$5(LBounds));
         LBounds = TW3MovableControl.ClientRect$(Self);
         if (Self.FChecked) {
            dx$3 = LBounds.Right$1-TW3MovableControl.GetWidth$(Self.FKnob);
         } else {
            dx$3 = LBounds.Left$3;
         }
         if (TW3MovableControl.GetLeft(Self.FKnob) != dx$3) {
            if (Self.FFxMoving) {
               TW3MovableControl.Invalidate$(Self);
            } else {
               Self.FFxMoving = true;
               TW3MovableControl.fxMoveTo$1(Self.FKnob,dx$3,LBounds.Top$3,0.12,function () {
                  Self.FFxMoving = false;
               });
            }
         }
      }
   }
   /// procedure TW3ToggleSwitch.SetChecked(const CheckValue: Boolean)
   ///  [line: 257, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,SetChecked:function(Self, CheckValue$2) {
      if (CheckValue$2 != Self.FChecked) {
         Self.FChecked = CheckValue$2;
         TW3MovableControl.Invalidate$(Self);
         if (Self.FOnChanged) {
            Self.FOnChanged(Self);
         }
      }
   }
   /// procedure TW3ToggleSwitch.SetEnabled(const EnabledValue: Boolean)
   ///  [line: 237, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,SetEnabled$1:function(Self, EnabledValue) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3CustomControl.SetEnabled$1(Self,EnabledValue);
         if (EnabledValue) {
            TW3MovableControl.SetAlpha(Self.FKnob,255);
            TW3MovableControl.SetUseAlpha(Self.FKnob,false);
         } else {
            TW3MovableControl.SetAlpha(Self.FKnob,128);
            TW3MovableControl.SetUseAlpha(Self.FKnob,true);
         }
      }
   }
   /// procedure TW3ToggleSwitch.StyleTagObject()
   ///  [line: 217, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,6);
   }
   /// procedure TW3ToggleSwitch.Toggle()
   ///  [line: 283, column: 27, file: SmartCL.Controls.ToggleSwitch]
   ,Toggle:function(Self) {
      TW3ToggleSwitch.SetChecked(Self,!(Self.FChecked));
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild$:function($){return $.ClassType.RegisterChild.apply($.ClassType, arguments)}
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1$:function($){return $.ClassType.SetEnabled$1.apply($.ClassType, arguments)}
};
TW3ToggleSwitch.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ToggleLabel = class (TW3Label)
///  [line: 47, column: 3, file: SmartCL.Controls.ToggleSwitch]
var TW3ToggleLabel = {
   $ClassName:"TW3ToggleLabel",$Parent:TW3Label
   ,$Init:function ($) {
      TW3Label.$Init($);
   }
   /// procedure TW3ToggleLabel.StyleTagObject()
   ///  [line: 162, column: 26, file: SmartCL.Controls.ToggleSwitch]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,11);
   }
   /// function TW3ToggleLabel.CreationFlags() : TW3CreationFlags
   ///  [line: 151, column: 25, file: SmartCL.Controls.ToggleSwitch]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3Label.CreationFlags(Self);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetExc(Result,7,0,8);
      $SetExc(Result,5,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3Label.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3ToggleLabel.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ToggleOnLabel = class (TW3ToggleLabel)
///  [line: 55, column: 3, file: SmartCL.Controls.ToggleSwitch]
var TW3ToggleOnLabel = {
   $ClassName:"TW3ToggleOnLabel",$Parent:TW3ToggleLabel
   ,$Init:function ($) {
      TW3ToggleLabel.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3Label.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3ToggleLabel.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3ToggleLabel.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3ToggleOnLabel.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ToggleOffLabel = class (TW3ToggleLabel)
///  [line: 59, column: 3, file: SmartCL.Controls.ToggleSwitch]
var TW3ToggleOffLabel = {
   $ClassName:"TW3ToggleOffLabel",$Parent:TW3ToggleLabel
   ,$Init:function ($) {
      TW3ToggleLabel.$Init($);
   }
   /// procedure TW3ToggleOffLabel.StyleTagObject()
   ///  [line: 138, column: 29, file: SmartCL.Controls.ToggleSwitch]
   ,StyleTagObject:function(Self) {
      TW3ToggleLabel.StyleTagObject(Self);
      TW3CustomControl.ThemeReset(Self);
      TW3CustomControl.SetBackgroundType(Self,13);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3Label.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3ToggleLabel.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3ToggleOffLabel.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ToggleKnob = class (TW3CustomControl)
///  [line: 36, column: 3, file: SmartCL.Controls.ToggleSwitch]
var TW3ToggleKnob = {
   $ClassName:"TW3ToggleKnob",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// procedure TW3ToggleKnob.HandleKeyPressed(Sender: TObject; const Character: Char)
   ///  [line: 129, column: 25, file: SmartCL.Controls.ToggleSwitch]
   ,HandleKeyPressed:function(Self, Sender, Character) {
      if (((Character=="\r")||(Character==" "))) {
         TW3ToggleSwitch.Toggle($As(TW3TagContainer.a$53(Self),TW3ToggleSwitch));
      }
   }
   /// procedure TW3ToggleKnob.InitializeObject()
   ///  [line: 105, column: 25, file: SmartCL.Controls.ToggleSwitch]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3CustomControl._setKeyPress(Self,$Event2(Self,TW3ToggleKnob.HandleKeyPressed));
   }
   /// procedure TW3ToggleKnob.FinalizeObject()
   ///  [line: 111, column: 25, file: SmartCL.Controls.ToggleSwitch]
   ,FinalizeObject:function(Self) {
      TW3CustomControl._setKeyPress(Self,null);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// function TW3ToggleKnob.CreationFlags() : TW3CreationFlags
   ///  [line: 117, column: 24, file: SmartCL.Controls.ToggleSwitch]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      $SetExc(Result,6,0,8);
      $SetExc(Result,2,0,8);
      $SetExc(Result,3,0,8);
      $SetExc(Result,4,0,8);
      $SetExc(Result,5,0,8);
      $SetInc(Result,7,0,8);
      return Result
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ToggleKnob.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3TabsPosition enumeration
///  [line: 28, column: 3, file: SmartCL.Controls.TabControl]
var TW3TabsPosition = [ "tpTop", "tpBottom" ];
/// TW3TabHeaders = class (TW3ScrollControl)
///  [line: 77, column: 3, file: SmartCL.Controls.TabControl]
var TW3TabHeaders = {
   $ClassName:"TW3TabHeaders",$Parent:TW3ScrollControl
   ,$Init:function ($) {
      TW3ScrollControl.$Init($);
      $.FIndex = 0;
      $.FItems = [];
   }
   /// procedure TW3TabHeaders.FinalizeObject()
   ///  [line: 811, column: 25, file: SmartCL.Controls.TabControl]
   ,FinalizeObject:function(Self) {
      TW3ScrollControl.FinalizeObject(Self);
   }
   /// procedure TW3TabHeaders.InitializeObject()
   ///  [line: 793, column: 25, file: SmartCL.Controls.TabControl]
   ,InitializeObject:function(Self) {
      TW3ScrollControl.InitializeObject(Self);
      TW3ScrollController.SetDirection$1(Self.FScrollController,1);
      TW3ScrollController.SetScrollSpeed(Self.FScrollController,100);
      TW3CustomControl._setMouseWheel(Self,function (Sender, Shift, WheelDelta, MousePos, Handled) {
         TW3ScrollController.MomentumScrollTo(Self.FScrollController,Self.FScrollController.FContentLeft+$Sign(WheelDelta) * TW3MovableControl.GetWidth$(Self),0);
         Handled.v = true;
      });
   }
   /// procedure TW3TabHeaders.Resize()
   ///  [line: 823, column: 25, file: SmartCL.Controls.TabControl]
   ,Resize:function(Self) {
      TW3ScrollControl.Resize(Self);
      TW3MovableControl.SetHeight$(Self.FContent$1,TW3MovableControl.ClientHeight(Self));
      TW3TabHeaders.UpdateHeaders(Self);
      TW3TabHeaders.StyleHeaders(Self);
      TW3TabHeaders.ScrollHeaders(Self);
   }
   /// procedure TW3TabHeaders.ScrollHeaders()
   ///  [line: 831, column: 25, file: SmartCL.Controls.TabControl]
   ,ScrollHeaders:function(Self) {
      var Header$1 = null,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         wd = 0,
         x$42 = 0;
      if (Self.FItems.length > 0) {
         Header$1 = Self.FItems[Self.FIndex];
         CRect = TW3MovableControl.ClientRect$(Self);
         wd = $Div(TRect$Width$6(CRect),2);
         x$42 = TW3MovableControl.GetLeft(Header$1)+($Div(TW3MovableControl.GetWidth$(Header$1),2));
         (x$42-= wd);
         if (x$42 < 0) {
            x$42 = 0;
         }
         TW3ScrollController.MomentumScrollTo(Self.FScrollController,-x$42,Self.FScrollController.FContentTop);
      }
   }
   /// procedure TW3TabHeaders.SetSelectedIndex(const Value: Integer)
   ///  [line: 851, column: 25, file: SmartCL.Controls.TabControl]
   ,SetSelectedIndex:function(Self, Value$5) {
      if (Value$5 != Self.FIndex) {
         if (Value$5 >= 0 && Value$5 < Self.FItems.length) {
            Self.FIndex = Value$5;
            TW3MovableControl.Invalidate$(Self);
         }
      }
   }
   /// procedure TW3TabHeaders.StyleHeaders()
   ///  [line: 863, column: 25, file: SmartCL.Controls.TabControl]
   ,StyleHeaders:function(Self) {
      var i$7 = 0,
         Header$1 = null;
      var $temp90;
      for(i$7=0,$temp90=Self.FItems.length;i$7<$temp90;i$7++) {
         Header$1 = Self.FItems[i$7];
         Header$1.FIndex$1 = i$7;
         TW3TabHeader.SetSelected(Header$1,i$7 == Self.FIndex);
         if (Header$1.FSelected) {
            TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(Header$1),"TW3TabHeaderSelected");
         }
         TW3CustomControl._setMouseClick(Header$1,function (Sender) {
            TW3TabControl.SetTabIndex($As(TW3TagContainer.a$53(Self),TW3TabControl),$As(Sender,TW3TabHeader).FIndex$1);
         });
      }
   }
   /// procedure TW3TabHeaders.StyleTagObject()
   ///  [line: 817, column: 25, file: SmartCL.Controls.TabControl]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,14);
   }
   /// procedure TW3TabHeaders.UpdateHeaders()
   ///  [line: 883, column: 25, file: SmartCL.Controls.TabControl]
   ,UpdateHeaders:function(Self) {
      var hh = 0,
         FTabCtrl = null,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         x$42 = 0,
         NewHeader = null,
         i$7 = 0,
         Header$1 = null,
         Tab = null;
      if (TW3TagContainer.a$53(Self) !== null && $Is(TW3TagContainer.a$53(Self),TW3TabControl)) {
         FTabCtrl = $As(TW3TagContainer.a$53(Self),TW3TabControl);
      } else {
         return;
      }
      CRect = TW3MovableControl.ClientRect$(Self);
      x$42 = CRect.Left$3;
      if (Self.FItems.length < TW3TabControl.TabCount(FTabCtrl)) {
         while (Self.FItems.length < TW3TabControl.TabCount(FTabCtrl)) {
            NewHeader = TW3TagContainer.Create$81$($New(TW3TabHeader),Self.FContent$1);
            Self.FItems.push(NewHeader);
         }
         TW3Dispatch.WaitFor(TW3Dispatch,Self.FItems,function () {
            TW3MovableControl.Invalidate$(Self);
         });
         return;
      }
      while (Self.FItems.length > TW3TabControl.TabCount(FTabCtrl)) {
         TObject.Free(Self.FItems[Self.FItems.length-1]);
         Self.FItems.splice((Self.FItems.length-1),1)
         ;
      }
      var $temp91;
      for(i$7=0,$temp91=Self.FItems.length;i$7<$temp91;i$7++) {
         Header$1 = Self.FItems[i$7];
         Tab = TW3TabControl.GetTab(FTabCtrl,i$7);
         Header$1.FIndex$1 = Tab.FTabIndex$1;
         if (TW3Label.GetCaption$1$(Header$1) != Tab.FCaption$4) {
            TW3Label.SetCaption$2$(Header$1,Tab.FCaption$4);
         }
         TW3MovableControl.SetLeft$(Header$1,x$42);
         if (TW3MovableControl.GetHeight$(Header$1) > hh) {
            hh = TW3MovableControl.GetHeight$(Header$1);
         }
         (x$42+= TW3MovableControl.GetWidth$(Header$1));
      }
      (x$42+= 4);
      if (x$42 < TRect$Width$6(CRect)) {
         x$42 = TRect$Width$6(CRect);
      }
      TW3MovableControl.SetWidth$(Self.FContent$1,x$42);
      TW3ScrollController.Refresh$1(Self.FScrollController);
      hh = hh+TW3MovableControl.GetHeight$(Self)-TW3MovableControl.ClientHeight(Self);
      if (FTabCtrl.FHeaderHeight < hh) {
         TW3TabControl.SetHeaderHeight(FTabCtrl,hh);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3ScrollControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3CustomScrollControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetContentHeight:TW3ScrollControl.GetContentHeight
   ,GetContentWidth:TW3ScrollControl.GetContentWidth
   ,GetHorizontalScrollPosition:TW3ScrollControl.GetHorizontalScrollPosition
   ,GetVerticalScrollPosition:TW3ScrollControl.GetVerticalScrollPosition
   ,HandleScrollBar:TW3ScrollControl.HandleScrollBar
   ,ResizeScrollBars:TW3CustomScrollControl.ResizeScrollBars
   ,SetScrollBars:TW3CustomScrollControl.SetScrollBars
};
TW3TabHeaders.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3TabHeader = class (TW3Label)
///  [line: 64, column: 3, file: SmartCL.Controls.TabControl]
var TW3TabHeader = {
   $ClassName:"TW3TabHeader",$Parent:TW3Label
   ,$Init:function ($) {
      TW3Label.$Init($);
      $.FIndex$1 = -1;
      $.FSelected = false;
   }
   /// procedure TW3TabHeader.ObjectReady()
   ///  [line: 952, column: 24, file: SmartCL.Controls.TabControl]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3Label.SetVAlign(Self,1);
      TW3Label.SetAuto$1(Self,true);
   }
   /// procedure TW3TabHeader.SetSelected(const Value: Boolean)
   ///  [line: 959, column: 24, file: SmartCL.Controls.TabControl]
   ,SetSelected:function(Self, Value$5) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FSelected != Value$5) {
            Self.FSelected = Value$5;
            if (Self.FHandle$4) {
               if (Value$5) {
                  TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(Self),"TW3TabHeaderSelected");
                  TW3CustomControl.SetBackgroundType(Self,11);
                  TW3CustomControl.SetBorderType(Self,6);
               } else {
                  TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(Self),"TW3TabHeaderSelected");
                  TW3CustomControl.SetBackgroundType(Self,15);
                  TW3CustomControl.SetBorderType(Self,0);
               }
            }
         }
      }
   }
   /// procedure TW3TabHeader.StyleTagObject()
   ///  [line: 946, column: 24, file: SmartCL.Controls.TabControl]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBackgroundType(Self,15);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3Label.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3Label.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3TabHeader.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3TabControlBottom = class (TW3CustomControl)
///  [line: 61, column: 3, file: SmartCL.Controls.TabControl]
var TW3TabControlBottom = {
   $ClassName:"TW3TabControlBottom",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3TabControlBottom.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3TabControl = class (TW3CustomControl)
///  [line: 95, column: 3, file: SmartCL.Controls.TabControl]
var TW3TabControl = {
   $ClassName:"TW3TabControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnTabAdded = null;
      $.OnTabChange = null;
      $.FAnimateTabs = false;
      $.FContentBottom = $.FHeaders = $.FScrollController$1 = null;
      $.FHeaderHeight = $.FPreferredTabIndex = $.FTabIndex = 0;
      $.FTabClass = null;
      $.FTabs$1 = [];
      $.FTabsPosition = 0;
   }
   /// function TW3TabControl.AddForm(const FormClassName: String) : TW3Tab
   ///  [line: 230, column: 24, file: SmartCL.Controls.TabControl]
   ,AddForm:function(Self, FormClassName) {
      var Result = null;
      var Frm = null,
         i$7 = 0,
         FrmInfo = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         var $temp92;
         for(i$7=0,$temp92=Forms$2().FList.length;i$7<$temp92;i$7++) {
            FrmInfo = Forms$2().FList[i$7];
            if (TObject.ClassName(FrmInfo.FormClass) == FormClassName) {
               try {
                  Result = TW3TagContainer.Create$81$($NewDyn(Self.FTabClass,""),Self.FContentBottom);
                  Result.FTabControl = Self;
                  Result.FTabIndex$1 = Self.FTabs$1.length;
                  TW3MovableControl.SetBounds$1$(Result,TW3MovableControl.ClientRect$(Self));
                  Frm = TW3TagContainer.Create$81$($NewDyn(FrmInfo.FormClass,""),Result);
                  TW3MovableControl.SetBounds$1$(Frm,TW3MovableControl.ClientRect$(Result));
                  TW3Tab.SetCaption$7(Result,TW3CustomForm.GetCaption(Frm));
                  TW3Tab.SetAutoSize(Result,true);
                  Result.OnPrepareTab = function (_implicit_Sender) {
                     TW3CustomForm.BuildForm(Frm);
                  };
                  Result.OnShowTab = function (_implicit_Sender) {
                     TW3CustomForm.FormActivated(Frm);
                  };
                  Result.OnHideTab = function (_implicit_Sender) {
                     TW3CustomForm.FormDeactivated(Frm);
                  };
               } catch ($e) {
                  /* null */
               }
               if (Frm !== null) {
                  Self.FTabs$1.push(Result);
                  if (Self.OnTabAdded) {
                     Self.OnTabAdded(Result);
                  }
                  TW3OwnedObject.InitAsync$(Frm,function () {
                     TW3MovableControl.Invalidate$(Frm);
                     TW3TabControl.ArrangeTabs(Self);
                     TW3TabControl.AdjustScrollValues(Self);
                  });
               } else {
                  TObject.Free(Result);
               }
               break;
            }
         }
      }
      return Result
   }
   /// function TW3TabControl.AddTab(const TabCaption: String) : TW3Tab
   ///  [line: 277, column: 24, file: SmartCL.Controls.TabControl]
   ,AddTab:function(Self, TabCaption) {
      var Result = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Result = TW3TagContainer.Create$81$($NewDyn(Self.FTabClass,""),Self.FContentBottom);
         TW3TabControl.InitTab(Self,Result);
         TW3Tab.SetCaption$7(Result,TabCaption);
      }
      return Result
   }
   /// procedure TW3TabControl.AdjustScrollValues()
   ///  [line: 301, column: 25, file: SmartCL.Controls.TabControl]
   ,AdjustScrollValues:function(Self) {
      var w = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FContentBottom !== null && Self.FScrollController$1 !== null) {
            w = TRect$Width$6(TW3MovableControl.ClientRect$(Self.FContentBottom));
            TW3ScrollController.SetMinValueX(Self.FScrollController$1,(-w) * (Self.FTabs$1.length-1));
            Self.FScrollController$1.FContentLeft = (-Self.FTabIndex) * w;
         }
      }
   }
   /// procedure TW3TabControl.ArrangeTabs()
   ///  [line: 313, column: 25, file: SmartCL.Controls.TabControl]
   ,ArrangeTabs:function(Self) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         h = 0,
         w = 0,
         i$7 = 0,
         Tab = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHeaders !== null) {
            TW3MovableControl.Invalidate$(Self.FHeaders);
         }
         CRect = TW3MovableControl.ClientRect$(Self.FContentBottom);
         h = TRect$Height$5(CRect);
         w = TRect$Width$6(CRect);
         var $temp93;
         for(i$7=0,$temp93=Self.FTabs$1.length;i$7<$temp93;i$7++) {
            Tab = Self.FTabs$1[i$7];
            if (i$7 == Self.FTabIndex) {
               TW3MovableControl.SetVisible(Tab,true);
               if (Tab.Prepared) {
                  TW3MovableControl.SetBounds$1$(Tab,CRect);
                  TW3MovableControl.Invalidate$(Tab);
               } else {
                  TW3TabControl.PrepareTab(Self,Tab,true);
               }
            } else {
               if (TW3MovableControl.GetVisible(Tab)) {
                  TW3MovableControl.SetLeft$(Tab,10000);
                  if ((!(Tab.Prepared)) && Math.abs(Tab.FTabIndex$1-Self.FTabIndex) == 1) {
                     TW3TabControl.PrepareTab(Self,Tab,false);
                  }
                  TW3ControlTracker.ConstructionReadyExecute(TW3ControlTracker,Self,function () {
                     Tab.FHandle$4.style["display"] = "none";
                     Tab.FHandle$4.style["visibility"] = "hidden";
                  });
               }
            }
         }
      }
   }
   /// procedure TW3TabControl.Clear()
   ///  [line: 214, column: 25, file: SmartCL.Controls.TabControl]
   ,Clear$20:function(Self) {
      var x$42 = 0;
      var $temp94;
      for(x$42=0,$temp94=Self.FTabs$1.length;x$42<$temp94;x$42++) {
         TObject.Free(Self.FTabs$1[x$42]);
      }
      Self.FTabs$1.length=0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         TW3TabControl.EnumerateTabs(Self);
         TW3TabControl.ArrangeTabs(Self);
         TW3MovableControl.Invalidate$(Self);
      }
   }
   /// procedure TW3TabControl.EnumerateTabs()
   ///  [line: 347, column: 25, file: SmartCL.Controls.TabControl]
   ,EnumerateTabs:function(Self) {
      var i$7 = 0;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         var $temp95;
         for(i$7=0,$temp95=Self.FTabs$1.length;i$7<$temp95;i$7++) {
            Self.FTabs$1[i$7].FTabIndex$1 = i$7;
         }
      }
   }
   /// procedure TW3TabControl.FinalizeObject()
   ///  [line: 193, column: 25, file: SmartCL.Controls.TabControl]
   ,FinalizeObject:function(Self) {
      TW3TabControl.Clear$20(Self);
      TObject.Free(Self.FContentBottom);
      TObject.Free(Self.FHeaders);
      TObject.Free(Self.FScrollController$1);
      TW3CustomControl.FinalizeObject(Self);
   }
   /// function TW3TabControl.GetAllowSwipe() : Boolean
   ///  [line: 711, column: 24, file: SmartCL.Controls.TabControl]
   ,GetAllowSwipe:function(Self) {
      return Self.FScrollController$1.Enabled;
   }
   /// function TW3TabControl.GetTab(const Value: Integer) : TW3Tab
   ///  [line: 402, column: 24, file: SmartCL.Controls.TabControl]
   ,GetTab:function(Self, Value$5) {
      var Result = null;
      if (Value$5 >= 0 && Value$5 < Self.FTabs$1.length) {
         Result = Self.FTabs$1[Value$5];
      }
      return Result
   }
   /// function TW3TabControl.GetTabs() : TStrArray
   ///  [line: 583, column: 24, file: SmartCL.Controls.TabControl]
   ,GetTabs:function(Self) {
      var Result = [];
      var i$7 = 0,
         Tab = null;
      Result = [];
      var $temp96;
      for(i$7=0,$temp96=Self.FTabs$1.length;i$7<$temp96;i$7++) {
         Tab = Self.FTabs$1[i$7];
         Result.push(Tab.FCaption$4);
      }
      return Result
   }
   /// procedure TW3TabControl.HandleScrollChange(Sender: TObject)
   ///  [line: 409, column: 25, file: SmartCL.Controls.TabControl]
   ,HandleScrollChange:function(Self, Sender) {
      var x$42 = 0,
         i$7 = 0,
         Tab = null,
         LeftTab = null,
         RightTab = null,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      if (!($SetIn(Self.FComponentState,0,0,11))) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if (Self.FTabs$1.length > 0) {
               CRect = TW3MovableControl.ClientRect$(Self.FContentBottom);
               i$7 = Trunc((-Self.FScrollController$1.FContentLeft) / TRect$Width$6(CRect));
               x$42 = Self.FScrollController$1.FContentLeft+i$7 * TRect$Width$6(CRect)+CRect.Left$3;
               LeftTab = TW3TabControl.GetTab(Self,i$7);
               RightTab = TW3TabControl.GetTab(Self,i$7+1);
               if (LeftTab !== null) {
                  TW3MovableControl.SetVisible(LeftTab,true);
                  TW3MovableControl.SetBounds$(LeftTab,x$42,CRect.Top$3,TRect$Width$6(CRect),TRect$Height$5(CRect));
               }
               if (RightTab !== null) {
                  TW3MovableControl.SetVisible(RightTab,true);
                  TW3MovableControl.SetBounds$(RightTab,x$42+TRect$Width$6(CRect),CRect.Top$3,TRect$Width$6(CRect),TRect$Height$5(CRect));
               }
               var $temp97;
               for(i$7=0,$temp97=Self.FTabs$1.length;i$7<$temp97;i$7++) {
                  Tab = Self.FTabs$1[i$7];
                  if (Tab !== LeftTab && Tab !== RightTab && TW3MovableControl.GetVisible(Tab)) {
                     TW3MovableControl.SetVisible(Tab,false);
                  }
               }
            }
         }
      }
   }
   /// procedure TW3TabControl.HandleScrollEnd(Sender: TObject)
   ///  [line: 452, column: 25, file: SmartCL.Controls.TabControl]
   ,HandleScrollEnd:function(Self, Sender) {
      var i$7 = 0,
         Tab = null;
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         Self.FTabIndex = Trunc((-Self.FScrollController$1.FContentLeft) / TRect$Width$6(TW3MovableControl.ClientRect$(Self.FContentBottom)));
         Self.FPreferredTabIndex = -1;
         var $temp98;
         for(i$7=0,$temp98=Self.FTabs$1.length;i$7<$temp98;i$7++) {
            Tab = Self.FTabs$1[i$7];
            if ((!(Tab.FHidden)) && i$7 != Self.FTabIndex) {
               TW3Tab.HideTab(Tab);
            }
         }
         TW3TabControl.SendTabEvents(Self,Self.FTabIndex);
         if (Self.FHeaders !== null) {
            TW3TabHeaders.SetSelectedIndex(Self.FHeaders,Self.FTabIndex);
         }
         TW3TabControl.ArrangeTabs(Self);
         TW3TabControl.AdjustScrollValues(Self);
      }
   }
   /// procedure TW3TabControl.InitializeObject()
   ///  [line: 166, column: 25, file: SmartCL.Controls.TabControl]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      Self.FTabClass = TW3Tab;
      Self.FTabsPosition = 0;
      Self.FHeaderHeight = 30;
      Self.FAnimateTabs = true;
      Self.FContentBottom = TW3TagContainer.Create$81$($New(TW3TabControlBottom),Self);
      TW3MovableControl.ReadyExecute(Self.FContentBottom,function () {
         TW3MovableControl.SetAlign$(Self.FContentBottom,5);
         Self.FScrollController$1 = TW3ScrollController.Create$175($New(TW3ScrollController),Self.FContentBottom);
         Self.FScrollController$1.FOnScrolling = $Event1(Self,TW3TabControl.HandleScrollChange);
         Self.FScrollController$1.FOnEndScroll = $Event1(Self,TW3TabControl.HandleScrollEnd);
         TW3ScrollController.SetDirection$1(Self.FScrollController$1,1);
         TW3ScrollController.SetScrollSpeed(Self.FScrollController$1,100);
         Self.FScrollController$1.FSnapToPage = true;
      });
      Self.FHeaders = TW3TagContainer.Create$81$($New(TW3TabHeaders),Self);
      TW3MovableControl.ReadyExecute(Self.FHeaders,function () {
         TW3MovableControl.SetHeight$(Self.FHeaders,Self.FHeaderHeight);
         TW3MovableControl.SetAlign$(Self.FHeaders,1);
      });
   }
   /// procedure TW3TabControl.InitTab(const Tab: TW3Tab)
   ///  [line: 287, column: 25, file: SmartCL.Controls.TabControl]
   ,InitTab:function(Self, Tab) {
      Tab.FTabControl = Self;
      Tab.FTabIndex$1 = Self.FTabs$1.length;
      Self.FTabs$1.push(Tab);
      TW3Dispatch.WaitFor(TW3Dispatch,[Tab],function () {
         TW3TabControl.ArrangeTabs(Self);
         TW3TabControl.AdjustScrollValues(Self);
      });
      if (Self.OnTabAdded) {
         Self.OnTabAdded(Tab);
      }
   }
   /// procedure TW3TabControl.ObjectReady()
   ///  [line: 202, column: 25, file: SmartCL.Controls.TabControl]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3TabControl.SetTabIndex(Self,Self.FPreferredTabIndex);
   }
   /// procedure TW3TabControl.PrepareTab(Tab: TW3Tab; SendShowEvent: Boolean = False)
   ///  [line: 606, column: 25, file: SmartCL.Controls.TabControl]
   ,PrepareTab:function(Self, Tab, SendShowEvent) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         x$42 = 0;
      if (Tab !== null) {
         if (!(Tab.Prepared)) {
            try {
               CRect = TW3MovableControl.ClientRect$(Self.FContentBottom);
               TW3MovableControl.SetVisible(Tab,true);
               x$42 = 10000;
               if (Self.FTabIndex == Tab.FTabIndex$1) {
                  x$42 = 0;
               }
               TW3MovableControl.SetBounds$(Tab,x$42,CRect.Top$3,TRect$Width$6(CRect),TRect$Height$5(CRect));
               if (Tab.OnPrepareTab) {
                  Tab.OnPrepareTab(Tab);
               }
               TW3MovableControl.Invalidate$(Tab);
            } finally {
               Tab.Prepared = true;
            }
         }
         if (SendShowEvent && (Tab.OnShowTab!==null)) {
            Tab.OnShowTab(Tab);
         }
      }
   }
   /// procedure TW3TabControl.RegisterChild(const Child: TW3TagContainer)
   ///  [line: 721, column: 25, file: SmartCL.Controls.TabControl]
   ,RegisterChild:function(Self, Child$1) {
      if ($Is(Child$1,TW3Tab)) {
         TW3TagContainer.RegisterChild$(Self.FContentBottom,Child$1);
         TW3TabControl.InitTab(Self,$As(Child$1,TW3Tab));
      } else {
         TW3TagContainer.RegisterChild(Self,Child$1);
      }
   }
   /// procedure TW3TabControl.Resize()
   ///  [line: 521, column: 25, file: SmartCL.Controls.TabControl]
   ,Resize:function(Self) {
      var LRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         i$7 = 0,
         Tab = null;
      TW3MovableControl.Resize(Self);
      if (!(TW3MovableControl.GetIsVisible(Self))) {
         return;
      }
      CRect = TW3MovableControl.ClientRect$(Self.FContentBottom);
      if (Self.FTabs$1.length > 0) {
         var $temp99;
         for(i$7=0,$temp99=Self.FTabs$1.length;i$7<$temp99;i$7++) {
            Tab = Self.FTabs$1[i$7];
            if (TW3MovableControl.GetVisible(Tab)) {
               TW3MovableControl.SetBounds$1$(Tab,CRect);
            }
         }
         if (Self.FScrollController$1 !== null) {
            TW3TabControl.ArrangeTabs(Self);
            TW3TabControl.AdjustScrollValues(Self);
         }
      }
   }
   /// procedure TW3TabControl.SendTabEvents(TabIdx: Integer)
   ///  [line: 630, column: 25, file: SmartCL.Controls.TabControl]
   ,SendTabEvents:function(Self, TabIdx) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            CRect = TW3MovableControl.ClientRect$(Self.FContentBottom);
            if (TabIdx >= 0 && TabIdx < Self.FTabs$1.length) {
               TW3TabControl.PrepareTab(Self,TW3TabControl.GetTab(Self,TabIdx),true);
               TW3TabControl.PrepareTab(Self,TW3TabControl.GetTab(Self,TabIdx-1),false);
               TW3TabControl.PrepareTab(Self,TW3TabControl.GetTab(Self,TabIdx+1),false);
               if (Self.OnTabChange) {
                  Self.OnTabChange(Self);
               }
            }
         }
      }
   }
   /// procedure TW3TabControl.SetAllowSwipe(const Value: Boolean)
   ///  [line: 716, column: 25, file: SmartCL.Controls.TabControl]
   ,SetAllowSwipe:function(Self, Value$5) {
      Self.FScrollController$1.Enabled = Value$5;
   }
   /// procedure TW3TabControl.SetHeaderHeight(Value: Integer)
   ///  [line: 568, column: 25, file: SmartCL.Controls.TabControl]
   ,SetHeaderHeight:function(Self, Value$5) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Self.FHeaderHeight != Value$5) {
            Self.FHeaderHeight = Value$5;
            if (Self.FHeaders !== null) {
               TW3MovableControl.SetHeight$(Self.FHeaders,Self.FHeaderHeight);
            }
            if ($SetIn(Self.FComponentState,4,0,11)) {
               TW3MovableControl.Invalidate$(Self);
            }
         }
      }
   }
   /// procedure TW3TabControl.SetTabIndex(const Value: Integer)
   ///  [line: 651, column: 25, file: SmartCL.Controls.TabControl]
   ,SetTabIndex:function(Self, Value$5) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if (Self.FTabs$1.length > 0) {
               if (Value$5 < 0 || Value$5 >= Self.FTabs$1.length) {
                  return;
               }
               if (Self.FHeaders !== null) {
                  TW3TabHeaders.SetSelectedIndex(Self.FHeaders,Value$5);
               }
               CRect = TW3MovableControl.ClientRect$(Self.FContentBottom);
               if (Self.FPreferredTabIndex == Value$5 || (!(Self.FAnimateTabs))) {
                  Self.FPreferredTabIndex = -1;
                  Self.FTabIndex = Value$5;
                  TW3ScrollController.ScrollTo$1(Self.FScrollController$1,(-Value$5) * TRect$Width$6(CRect),0);
                  TW3TabControl.SendTabEvents(Self,Value$5);
               } else {
                  Self.FPreferredTabIndex = -1;
                  TW3ScrollController.MomentumScrollTo(Self.FScrollController$1,(-Value$5) * TRect$Width$6(CRect),0);
               }
            }
         } else {
            Self.FPreferredTabIndex = Value$5;
         }
      }
   }
   /// procedure TW3TabControl.SetTabs(const Value: TStrArray)
   ///  [line: 592, column: 25, file: SmartCL.Controls.TabControl]
   ,SetTabs:function(Self, Value$5) {
      TW3Dispatch.WaitFor(TW3Dispatch,[Self.FContentBottom],function () {
         var i$7 = 0;
         TW3TabControl.Clear$20(Self);
         var $temp100;
         for(i$7=0,$temp100=Value$5.length;i$7<$temp100;i$7++) {
            if ((Value$5[i$7].indexOf("form:")+1) == 1) {
               if (TW3TabControl.AddForm(Self,Value$5[i$7].substr(5,1000)) !== null) {
                  continue;
               }
            }
            TW3TabControl.AddTab(Self,Value$5[i$7]);
         }
      });
   }
   /// procedure TW3TabControl.SetTabsPosition(const Value: TW3TabsPosition)
   ///  [line: 681, column: 25, file: SmartCL.Controls.TabControl]
   ,SetTabsPosition:function(Self, Value$5) {
      if (Value$5 != Self.FTabsPosition) {
         Self.FTabsPosition = Value$5;
         if (Self.FHeaders !== null) {
            if (!Value$5) {
               TW3MovableControl.SetAlign$(Self.FHeaders,1);
            } else {
               TW3MovableControl.SetAlign$(Self.FHeaders,2);
            }
         }
      }
   }
   /// procedure TW3TabControl.StyleTagObject()
   ///  [line: 208, column: 25, file: SmartCL.Controls.TabControl]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,1);
   }
   /// function TW3TabControl.TabCount() : Integer
   ///  [line: 706, column: 24, file: SmartCL.Controls.TabControl]
   ,TabCount:function(Self) {
      return Self.FTabs$1.length;
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild$:function($){return $.ClassType.RegisterChild.apply($.ClassType, arguments)}
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3TabControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3Tab = class (TW3CustomControl)
///  [line: 33, column: 3, file: SmartCL.Controls.TabControl]
var TW3Tab = {
   $ClassName:"TW3Tab",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.OnShowTab = null;
      $.OnPrepareTab = null;
      $.OnHideTab = null;
      $.Prepared = $.FHidden = false;
      $.FAutoSize = false;
      $.FCaption$4 = "";
      $.FTabControl = null;
      $.FTabIndex$1 = 0;
   }
   /// procedure TW3Tab.HideTab()
   ///  [line: 733, column: 18, file: SmartCL.Controls.TabControl]
   ,HideTab:function(Self) {
      Self.FHidden = true;
      if (Self.Prepared && (Self.OnHideTab!==null)) {
         Self.OnHideTab(Self);
      }
   }
   /// procedure TW3Tab.Resize()
   ///  [line: 773, column: 18, file: SmartCL.Controls.TabControl]
   ,Resize:function(Self) {
      var CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         LItem$3 = null;
      TW3MovableControl.Resize(Self);
      if (TW3TagContainer.GetChildCount(Self) == 1) {
         if (Self.FAutoSize) {
            CRect = TW3MovableControl.ClientRect$(Self);
            LItem$3 = $As(TW3TagContainer.GetChildObject(Self,0),TW3CustomControl);
            TW3MovableControl.SetBounds$1$(LItem$3,CRect);
            TW3MovableControl.Invalidate$(LItem$3);
         }
      }
   }
   /// procedure TW3Tab.SetAlign(const Value: TW3Align)
   ///  [line: 740, column: 18, file: SmartCL.Controls.TabControl]
   ,SetAlign:function(Self, Value$5) {
      TW3MovableControl.SetAlign(Self,0);
   }
   /// procedure TW3Tab.SetAutoSize(const Value: Boolean)
   ///  [line: 746, column: 18, file: SmartCL.Controls.TabControl]
   ,SetAutoSize:function(Self, Value$5) {
      if (Self.FAutoSize != Value$5) {
         Self.FAutoSize = Value$5;
         if ($SetIn(Self.FComponentState,4,0,11)) {
            TW3MovableControl.Invalidate$(Self);
         }
      }
   }
   /// procedure TW3Tab.SetCaption(const Value: String)
   ///  [line: 757, column: 18, file: SmartCL.Controls.TabControl]
   ,SetCaption$7:function(Self, Value$5) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Value$5 != Self.FCaption$4) {
            Self.FCaption$4 = Value$5;
            if (Self.FTabControl !== null && Self.FTabControl.FHeaders !== null) {
               TW3MovableControl.Invalidate$(Self.FTabControl.FHeaders);
            }
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign$:function($){return $.ClassType.SetAlign.apply($.ClassType, arguments)}
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Tab.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3CustomArrowButton = class (TW3Button)
///  [line: 47, column: 3, file: SmartCL.Controls.ArrowButtons]
var TW3CustomArrowButton = {
   $ClassName:"TW3CustomArrowButton",$Parent:TW3Button
   ,$Init:function ($) {
      TW3Button.$Init($);
      $.FArrowImage = null;
   }
   /// procedure TW3CustomArrowButton.InitializeArrowImage(const Rotate: Integer)
   ///  [line: 78, column: 32, file: SmartCL.Controls.ArrowButtons]
   ,InitializeArrowImage:function(Self, Rotate$2) {
      Self.FArrowImage = TW3TagContainer.Create$81$($New(TW3ArrowUpImage),Self);
      TW3MovableControl.SetBounds$1$(Self.FArrowImage,TW3MovableControl.ClientRect$(Self));
      if (Rotate$2) {
         TW3CustomControl.SetAngle(Self.FArrowImage,Rotate$2);
      }
   }
   /// procedure TW3CustomArrowButton.FinalizeObject()
   ///  [line: 85, column: 32, file: SmartCL.Controls.ArrowButtons]
   ,FinalizeObject:function(Self) {
      if (Self.FArrowImage !== null) {
         TObject.Free(Self.FArrowImage);
      }
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3CustomArrowButton.Resize()
   ///  [line: 91, column: 32, file: SmartCL.Controls.ArrowButtons]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      if (Self.FArrowImage !== null) {
         TW3MovableControl.SetBounds$1$(Self.FArrowImage,TW3MovableControl.ClientRect$(Self));
      }
   }
   /// procedure TW3CustomArrowButton.SetCaption(NewCaption: String)
   ///  [line: 97, column: 32, file: SmartCL.Controls.ArrowButtons]
   ,SetCaption$6:function(Self, NewCaption) {
      /* null */
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject:TW3Button.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3Button.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3Button.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3Button.CBKeyUp
   ,Dispatch:TW3Button.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,SetCaption$6$:function($){return $.ClassType.SetCaption$6.apply($.ClassType, arguments)}
};
TW3CustomArrowButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ArrowUpImage = class (TW3CustomControl)
///  [line: 42, column: 3, file: SmartCL.Controls.ArrowButtons]
var TW3ArrowUpImage = {
   $ClassName:"TW3ArrowUpImage",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3ArrowUpImage.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ArrowUpButton = class (TW3CustomArrowButton)
///  [line: 56, column: 3, file: SmartCL.Controls.ArrowButtons]
var TW3ArrowUpButton = {
   $ClassName:"TW3ArrowUpButton",$Parent:TW3CustomArrowButton
   ,$Init:function ($) {
      TW3CustomArrowButton.$Init($);
   }
   /// procedure TW3ArrowUpButton.ObjectReady()
   ///  [line: 102, column: 28, file: SmartCL.Controls.ArrowButtons]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3CustomArrowButton.InitializeArrowImage(Self,0);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomArrowButton.FinalizeObject
   ,InitializeObject:TW3Button.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3Button.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3Button.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize:TW3CustomArrowButton.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3Button.CBKeyUp
   ,Dispatch:TW3Button.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,SetCaption$6:TW3CustomArrowButton.SetCaption$6
};
TW3ArrowUpButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3ArrowDownButton = class (TW3CustomArrowButton)
///  [line: 61, column: 3, file: SmartCL.Controls.ArrowButtons]
var TW3ArrowDownButton = {
   $ClassName:"TW3ArrowDownButton",$Parent:TW3CustomArrowButton
   ,$Init:function ($) {
      TW3CustomArrowButton.$Init($);
   }
   /// procedure TW3ArrowDownButton.ObjectReady()
   ///  [line: 108, column: 30, file: SmartCL.Controls.ArrowButtons]
   ,ObjectReady:function(Self) {
      TW3MovableControl.ObjectReady(Self);
      TW3CustomArrowButton.InitializeArrowImage(Self,180);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomArrowButton.FinalizeObject
   ,InitializeObject:TW3Button.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3Button.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3Button.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady$:function($){return $.ClassType.ObjectReady($)}
   ,Resize:TW3CustomArrowButton.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3Button.CBKeyUp
   ,Dispatch:TW3Button.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,SetCaption$6:TW3CustomArrowButton.SetCaption$6
};
TW3ArrowDownButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3StringGridColumn = class (TObject)
///  [line: 96, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridColumn = {
   $ClassName:"TW3StringGridColumn",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.SortOrder = 0;
      $.BackgroundType = 0;
      $.BorderType = 0;
      $.VAlign = 0;
      $.AlignText = 0;
      $.Grid = $.FOnClick$1 = null;
      $.FBaseClass = $.FCaption$5 = "";
      $.FIndex$2 = $.FWidth$2 = 0;
   }
   // IGNORED: TW3StringGridColumn.CheckValue
   /// function TW3StringGridColumn.CompareSortData(Item1: Integer; Item2: Integer) : Integer
   ///  [line: 943, column: 30, file: SmartCL.Controls.StringGrid]
   ,CompareSortData:function(Self, Item1, Item2) {
      var Result = 0;
      var Data1,
         Data2;
      Data1 = TW3CustomStringGrid.GetCells$(Self.Grid,Item1,Self.FIndex$2);
      Data2 = TW3CustomStringGrid.GetCells$(Self.Grid,Item2,Self.FIndex$2);
      if (!Self.SortOrder) {
         Result = CompareStr(String(Data1),String(Data2));
      } else {
         Result = CompareStr(String(Data2),String(Data1));
      }
      return Result
   }
   /// constructor TW3StringGridColumn.Create()
   ///  [line: 928, column: 33, file: SmartCL.Controls.StringGrid]
   ,Create$178:function(Self) {
      Self.FBaseClass = "TW3Label";
      Self.AlignText = 0;
      Self.VAlign = 1;
      Self.BorderType = 17;
      Self.BackgroundType = 0;
      Self.SortOrder = 0;
      return Self
   }
   /// function TW3StringGridColumn.GenerateHtml(GridLine: TW3RenderedGridLine; ColumnIndex: Integer; CurrentLeft: Integer) : String
   ///  [line: 952, column: 30, file: SmartCL.Controls.StringGrid]
   ,GenerateHtml:function(Self, GridLine, ColumnIndex$1, CurrentLeft) {
      return "<div><\/div>";
   }
   /// function TW3StringGridColumn.GetClasses() : String
   ///  [line: 957, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetClasses:function(Self) {
      return Self.FBaseClass + " " + TW3Theme.GetClassNameForBorderType(Self.BorderType) + " " + TW3Theme.GetClassNameForBackgroundType(Self.BackgroundType);
   }
   /// function TW3StringGridColumn.GetInnerClasses() : String
   ///  [line: 963, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetInnerClasses:function(Self) {
      var Result = "";
      Result = "lbxcontent lbxdisableBreak";
      switch (Self.AlignText) {
         case 0 :
            Result = Result + " lbxcontent_h_left";
            break;
         case 1 :
            Result = Result + " lbxcontent_h_center";
            break;
         case 2 :
            Result = Result + " lbxcontent_h_right";
            break;
      }
      switch (Self.VAlign) {
         case 0 :
            Result = Result + " lbxcontent_v_top";
            break;
         case 1 :
            Result = Result + " lbxcontent_v_center";
            break;
         case 2 :
            Result = Result + " lbxcontent_v_bottom";
            break;
      }
      return Result
   }
   /// procedure TW3StringGridColumn.SetCaption(const Value: String)
   ///  [line: 983, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetCaption$8:function(Self, Value$5) {
      if (Self.FCaption$5 != Value$5) {
         Self.FCaption$5 = Value$5;
         TW3CustomStringGrid.UpdateHeaders$2(Self.Grid);
      }
   }
   /// procedure TW3StringGridColumn.SetColumnEvents(Sender: TW3CustomStringGrid; GridLine: TW3RenderedGridLine; ColumnIndex: Integer)
   ///  [line: 978, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetColumnEvents:function(Self, Sender, GridLine, ColumnIndex$1) {
      /* null */
   }
   /// procedure TW3StringGridColumn.SetWidth(const Value: Integer)
   ///  [line: 991, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetWidth$7:function(Self, Value$5) {
      if (Self.FWidth$2 != Value$5) {
         Self.FWidth$2 = Value$5;
         TW3CustomStringGrid.UpdateHeaders$2(Self.Grid);
         TW3CustomStringGrid.InvalidateGrid(Self.Grid);
      }
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TW3StringGridColumn.CheckValue
   ,CompareSortData$:function($){return $.ClassType.CompareSortData.apply($.ClassType, arguments)}
   ,Create$178$:function($){return $.ClassType.Create$178($)}
   ,GenerateHtml$:function($){return $.ClassType.GenerateHtml.apply($.ClassType, arguments)}
   ,GetClasses$:function($){return $.ClassType.GetClasses($)}
   ,SetColumnEvents$:function($){return $.ClassType.SetColumnEvents.apply($.ClassType, arguments)}
};
/// TW3StringGridTextColumn = class (TW3StringGridColumn)
///  [line: 129, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridTextColumn = {
   $ClassName:"TW3StringGridTextColumn",$Parent:TW3StringGridColumn
   ,$Init:function ($) {
      TW3StringGridColumn.$Init($);
   }
   /// function TW3StringGridTextColumn.GenerateHtml(GridLine: TW3RenderedGridLine; ColumnIndex: Integer; CurrentLeft: Integer) : String
   ///  [line: 1002, column: 34, file: SmartCL.Controls.StringGrid]
   ,GenerateHtml:function(Self, GridLine, ColumnIndex$1, CurrentLeft) {
      var Result = "";
      var ItemId = "";
      ItemId = Self.Grid.FHandle$4.id + "_row_" + (GridLine.DataIndex).toString() + "_col_" + ColumnIndex$1.toString();
      GridLine.ItemIds.push(ItemId);
      Result = "<div id=\"" + ItemId + "\" class=\"" + TW3StringGridColumn.GetClasses$(Self) + "\" style=\"visibility: visible; display: inline-block; overflow: hidden; left: " + CurrentLeft.toString() + "px; position: absolute; width: " + Self.FWidth$2.toString() + "px; height: 100%;border-radius: 0px;\"><div class=\"" + TW3StringGridColumn.GetInnerClasses(Self) + "\">" + TString.EncodeTags(TString,String(TW3CustomStringGrid.GetCells$(Self.Grid,GridLine.DataIndex,ColumnIndex$1))) + "<\/div><\/div>";
      return Result
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TW3StringGridColumn.CheckValue
   ,CompareSortData:TW3StringGridColumn.CompareSortData
   ,Create$178:TW3StringGridColumn.Create$178
   ,GenerateHtml$:function($){return $.ClassType.GenerateHtml.apply($.ClassType, arguments)}
   ,GetClasses:TW3StringGridColumn.GetClasses
   ,SetColumnEvents:TW3StringGridColumn.SetColumnEvents
};
/// TW3StringGridSortOptions = class (TObject)
///  [line: 195, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridSortOptions = {
   $ClassName:"TW3StringGridSortOptions",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FSortColumns = [];
      $.Grid$1 = null;
      $.SortedGridLines = [];
   }
   /// function TW3StringGridSortOptions.CompareSortData(Item1: Integer; Item2: Integer) : Integer
   ///  [line: 1209, column: 35, file: SmartCL.Controls.StringGrid]
   ,CompareSortData$1:function(Self, Item1, Item2) {
      var Result = 0;
      var c$1 = 0;
      Result = TW3StringGridColumn.CompareSortData$(Self.FSortColumns[0],Item1,Item2);
      if (Result) {
         return Result;
      }
      var $temp101;
      for(c$1=1,$temp101=Self.FSortColumns.length;c$1<$temp101;c$1++) {
         Result = TW3StringGridColumn.CompareSortData$(Self.FSortColumns[c$1],Item1,Item2);
         if (Result) {
            return Result;
         }
      }
      return Result
   }
   /// constructor TW3StringGridSortOptions.Create(Owner: TW3CustomStringGrid)
   ///  [line: 1175, column: 38, file: SmartCL.Controls.StringGrid]
   ,Create$179:function(Self, Owner$13) {
      TObject.Create(Self);
      Self.Grid$1 = Owner$13;
      return Self
   }
   /// procedure TW3StringGridSortOptions.SetSortColumn(Col: TW3StringGridColumn; SortOrder: TW3SortOrder = 0)
   ///  [line: 1202, column: 36, file: SmartCL.Controls.StringGrid]
   ,SetSortColumn$1:function(Self, Col, SortOrder$1) {
      Self.FSortColumns.length=0;
      Self.FSortColumns.push(Col);
      Col.SortOrder = SortOrder$1;
   }
   /// procedure TW3StringGridSortOptions.Sort()
   ///  [line: 1219, column: 36, file: SmartCL.Controls.StringGrid]
   ,Sort$5:function(Self) {
      var CFunc = null,
         i$7 = 0,
         a$420 = 0,
         a$421 = 0;
      Self.SortedGridLines.length=0;
      if (!Self.FSortColumns.length) {
         return;
      }
      var $temp102;
      for(i$7=0,$temp102=Self.Grid$1.FRowCount;i$7<$temp102;i$7++) {
         Self.SortedGridLines.push(i$7);
      }
      CFunc = $Event2(Self,TW3StringGridSortOptions.CompareSortData$1);
      Self.SortedGridLines.sort(CFunc);
      ;
   }
   /// procedure TW3StringGridSortOptions.ToggleSortColumn(Index: Integer)
   ///  [line: 1230, column: 36, file: SmartCL.Controls.StringGrid]
   ,ToggleSortColumn:function(Self, Index$6) {
      var Col = null;
      Col = TW3CustomStringGrid.GetColumn(Self.Grid$1,Index$6);
      if (!Self.FSortColumns.indexOf(Col)) {
         if (!Col.SortOrder) {
            Col.SortOrder = 1;
         } else {
            Col.SortOrder = 0;
         }
      } else {
         TW3StringGridSortOptions.SetSortColumn$1(Self,Col,0);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TW3StringGridLineControl = class (TW3CustomControl)
///  [line: 41, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridLineControl = {
   $ClassName:"TW3StringGridLineControl",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
   }
   /// procedure TW3StringGridLineControl.InitializeObject()
   ///  [line: 912, column: 36, file: SmartCL.Controls.StringGrid]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3TagObj.WillChange(Self,"top");
      Self.TouchPreventDefault = false;
   }
   /// procedure TW3StringGridLineControl.StyleTagObject()
   ///  [line: 920, column: 36, file: SmartCL.Controls.StringGrid]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,15);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3MovableControl.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3StringGridLineControl.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3StringGridHeaders = class (TW3CustomControl)
///  [line: 183, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridHeaders = {
   $ClassName:"TW3StringGridHeaders",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.Scrollable = false;
      $.Grid = null;
      $.FHeaders$1 = [];
   }
   /// procedure TW3StringGridHeaders.HandleHeaderClick(Sender: TObject)
   ///  [line: 1249, column: 32, file: SmartCL.Controls.StringGrid]
   ,HandleHeaderClick:function(Self, Sender) {
      var Col = 0;
      Col = $As(Sender,TW3StringGridColumnHeader).ColumnIndex;
      if (Col >= 0) {
         TW3StringGridSortOptions.ToggleSortColumn(Self.Grid.FSortOptions,Col);
         TW3CustomStringGrid.Sort$6(Self.Grid);
      }
   }
   /// procedure TW3StringGridHeaders.Resize()
   ///  [line: 1302, column: 32, file: SmartCL.Controls.StringGrid]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      TW3StringGridHeaders.UpdateHeaders$1(Self);
   }
   /// procedure TW3StringGridHeaders.UpdateHeaders()
   ///  [line: 1258, column: 32, file: SmartCL.Controls.StringGrid]
   ,UpdateHeaders$1:function(Self) {
      var Col = null,
         ColHeader = null,
         lft = 0,
         FirstCol = 0,
         LastCol = 0,
         ch$4 = 0,
         GridColumns = [],
         i$7 = 0,
         i$8 = 0;
      TW3CustomControl.SetBorderType(Self,3);
      ch$4 = TW3MovableControl.ClientHeight(Self);
      GridColumns = Self.Grid.FColumns;
      var $temp103;
      for(i$7=Self.FHeaders$1.length-1,$temp103=GridColumns.length+1;i$7>=$temp103;i$7--) {
         TObject.Free(Self.FHeaders$1[i$7]);
         Self.FHeaders$1.splice(i$7,1)
         ;
      }
      if (Self.Scrollable) {
         FirstCol = Self.Grid.FFixedColumns;
         LastCol = GridColumns.length;
      } else {
         FirstCol = 0;
         LastCol = Self.Grid.FFixedColumns-1;
      }
      var $temp104;
      for(i$8=FirstCol,$temp104=LastCol;i$8<=$temp104;i$8++) {
         if (i$8 < GridColumns.length) {
            Col = GridColumns[i$8];
         } else {
            Col = null;
         }
         if ((Self.FHeaders$1.length-1) < i$8) {
            ColHeader = TW3TagContainer.Create$81$($New(TW3StringGridColumnHeader),Self);
            TW3CustomControl._setMouseClick(ColHeader,$Event1(Self,TW3StringGridHeaders.HandleHeaderClick));
            Self.FHeaders$1.push(ColHeader);
         } else {
            ColHeader = Self.FHeaders$1[i$8];
         }
         TW3MovableControl.SetLeft$(ColHeader,lft);
         if (Col !== null) {
            ColHeader.ColumnIndex = Col.FIndex$2;
            TW3MovableControl.SetSize$2$(ColHeader,Col.FWidth$2,ch$4);
            TW3Label.SetCaption$2$(ColHeader,Col.FCaption$5);
            (lft+= Col.FWidth$2);
         } else {
            ColHeader.ColumnIndex = -1;
            TW3MovableControl.SetSize$2$(ColHeader,1000,ch$4);
            TW3Label.SetCaption$2$(ColHeader,"");
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject:TW3CustomControl.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3StringGridHeaders.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3StringGridEditColumn = class (TW3StringGridColumn)
///  [line: 149, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridEditColumn = {
   $ClassName:"TW3StringGridEditColumn",$Parent:TW3StringGridColumn
   ,$Init:function ($) {
      TW3StringGridColumn.$Init($);
   }
   /// function TW3StringGridEditColumn.GetClasses() : String
   ///  [line: 1073, column: 34, file: SmartCL.Controls.StringGrid]
   ,GetClasses:function(Self) {
      return TW3StringGridColumn.GetClasses(Self) + " TW3TransparentBackground";
   }
   /// constructor TW3StringGridEditColumn.Create()
   ///  [line: 1057, column: 37, file: SmartCL.Controls.StringGrid]
   ,Create$178:function(Self) {
      Self.FBaseClass = "TW3EditBox";
      Self.AlignText = 0;
      Self.VAlign = 1;
      Self.BorderType = 17;
      Self.BackgroundType = 0;
      return Self
   }
   /// function TW3StringGridEditColumn.GenerateHtml(GridLine: TW3RenderedGridLine; ColumnIndex: Integer; CurrentLeft: Integer) : String
   ///  [line: 1066, column: 34, file: SmartCL.Controls.StringGrid]
   ,GenerateHtml:function(Self, GridLine, ColumnIndex$1, CurrentLeft) {
      var Result = "";
      var ItemId = "";
      ItemId = Self.Grid.FHandle$4.id + "_row_" + (GridLine.DataIndex).toString() + "_editcol_" + ColumnIndex$1.toString();
      GridLine.ItemIds.push(ItemId);
      Result = "<input id=\"" + ItemId + "\" type=\"text\" class=\"" + TW3StringGridColumn.GetClasses$(Self) + "\" autocorrect=\"off\" autocapitalize=\"off\" placeholder=\"\" style=\"visibility: visible; display: inline-block; overflow: hidden; left: " + CurrentLeft.toString() + "px; position: absolute; width: " + Self.FWidth$2.toString() + "px; height: 100%;border-radius: 0px;\" value=\"" + TString.EncodeTags(TString,String(TW3CustomStringGrid.GetCells$(Self.Grid,GridLine.DataIndex,ColumnIndex$1))) + "\"<\/input>";
      return Result
   }
   /// procedure TW3StringGridEditColumn.SetColumnEvents(Sender: TW3CustomStringGrid; GridLine: TW3RenderedGridLine; ColumnIndex: Integer)
   ///  [line: 1078, column: 35, file: SmartCL.Controls.StringGrid]
   ,SetColumnEvents:function(Self, Sender, GridLine, ColumnIndex$1) {
      var cHandle = undefined;
      try {
         cHandle = TControlHandleHelper$GetChildById(GridLine.FixedCols.FHandle$4,GridLine.ItemIds[ColumnIndex$1]);
         if ((!cHandle)) {
            cHandle = TControlHandleHelper$GetChildById(GridLine.ScrollableCols.FHandle$4,GridLine.ItemIds[ColumnIndex$1]);
         }
         cHandle["oninput"] = $Event1(Sender,TW3CustomStringGrid.HandleDataChanged);
         cHandle.onfocus = $Event1(Sender,TW3CustomStringGrid.HandleColFocus);
         cHandle.onblur = $Event1(Sender,TW3CustomStringGrid.HandleColBlur);
      } catch ($e) {
         /* null */
      }
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TW3StringGridColumn.CheckValue
   ,CompareSortData:TW3StringGridColumn.CompareSortData
   ,Create$178$:function($){return $.ClassType.Create$178($)}
   ,GenerateHtml$:function($){return $.ClassType.GenerateHtml.apply($.ClassType, arguments)}
   ,GetClasses$:function($){return $.ClassType.GetClasses($)}
   ,SetColumnEvents$:function($){return $.ClassType.SetColumnEvents.apply($.ClassType, arguments)}
};
/// TW3StringGridColumnHeader = class (TW3Label)
///  [line: 177, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridColumnHeader = {
   $ClassName:"TW3StringGridColumnHeader",$Parent:TW3Label
   ,$Init:function ($) {
      TW3Label.$Init($);
      $.ColumnIndex = 0;
   }
   /// procedure TW3StringGridColumnHeader.StyleTagObject()
   ///  [line: 1240, column: 37, file: SmartCL.Controls.StringGrid]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,3);
      TW3CustomControl.SetBackgroundType(Self,9);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3Label.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3Label.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3StringGridColumnHeader.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3StringGridCheckmarkColumn = class (TW3StringGridEditColumn)
///  [line: 170, column: 3, file: SmartCL.Controls.StringGrid]
var TW3StringGridCheckmarkColumn = {
   $ClassName:"TW3StringGridCheckmarkColumn",$Parent:TW3StringGridEditColumn
   ,$Init:function ($) {
      TW3StringGridEditColumn.$Init($);
   }
   /// constructor TW3StringGridCheckmarkColumn.Create()
   ///  [line: 1133, column: 42, file: SmartCL.Controls.StringGrid]
   ,Create$178:function(Self) {
      Self.FBaseClass = "TW3CheckMark";
      Self.AlignText = 1;
      Self.VAlign = 1;
      Self.BorderType = 17;
      Self.BackgroundType = 0;
      return Self
   }
   /// function TW3StringGridCheckmarkColumn.GenerateHtml(GridLine: TW3RenderedGridLine; ColumnIndex: Integer; CurrentLeft: Integer) : String
   ///  [line: 1142, column: 39, file: SmartCL.Controls.StringGrid]
   ,GenerateHtml:function(Self, GridLine, ColumnIndex$1, CurrentLeft) {
      var Result = "";
      var ItemId = "";
      function GetChecked$1(Value$5) {
         var Result = "";
         if (Value$5) {
            Result = "checked=\"checked\"";
         } else {
            Result = "";
         }
         return Result
      };
      ItemId = Self.Grid.FHandle$4.id + "_row_" + (GridLine.DataIndex).toString() + "_chkcol_" + ColumnIndex$1.toString();
      GridLine.ItemIds.push(ItemId);
      Result = "<div class=\"" + TW3StringGridColumn.GetClasses$(Self) + "\" style=\"visibility: visible; display: inline-block; overflow: hidden; left: " + CurrentLeft.toString() + "px; position: absolute; width: " + Self.FWidth$2.toString() + "px; height: 100%;border-radius: 0px;\"><input id=\"" + ItemId + "\" type=\"checkbox\" class=\"" + TW3StringGridColumn.GetInnerClasses(Self) + "\" " + GetChecked$1(TW3CustomStringGrid.GetCells$(Self.Grid,GridLine.DataIndex,ColumnIndex$1)) + "><\/input><\/div>";
      return Result
   }
   /// procedure TW3StringGridCheckmarkColumn.SetColumnEvents(Sender: TW3CustomStringGrid; GridLine: TW3RenderedGridLine; ColumnIndex: Integer)
   ///  [line: 1156, column: 40, file: SmartCL.Controls.StringGrid]
   ,SetColumnEvents:function(Self, Sender, GridLine, ColumnIndex$1) {
      var cHandle = undefined;
      try {
         cHandle = TControlHandleHelper$GetChildById(GridLine.FixedCols.FHandle$4,GridLine.ItemIds[ColumnIndex$1]);
         if ((!cHandle)) {
            cHandle = TControlHandleHelper$GetChildById(GridLine.ScrollableCols.FHandle$4,GridLine.ItemIds[ColumnIndex$1]);
         }
         cHandle["onchange"] = $Event1(Sender,TW3CustomStringGrid.HandleDataChanged);
      } catch ($e) {
         /* null */
      }
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TW3StringGridColumn.CheckValue
   ,CompareSortData:TW3StringGridColumn.CompareSortData
   ,Create$178$:function($){return $.ClassType.Create$178($)}
   ,GenerateHtml$:function($){return $.ClassType.GenerateHtml.apply($.ClassType, arguments)}
   ,GetClasses:TW3StringGridEditColumn.GetClasses
   ,SetColumnEvents$:function($){return $.ClassType.SetColumnEvents.apply($.ClassType, arguments)}
};
/// TW3CustomStringGrid = class (TW3CustomScrollControl)
///  [line: 213, column: 3, file: SmartCL.Controls.StringGrid]
var TW3CustomStringGrid = {
   $ClassName:"TW3CustomStringGrid",$Parent:TW3CustomScrollControl
   ,$Init:function ($) {
      TW3CustomScrollControl.$Init($);
      $.FCachedLines = [];
      $.FColumns = [];
      $.FCurrentSize = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      $.FFixedColumns = $.FFixedWidth = $.FHeaderHeight$1 = $.FLineHeight = $.FRowCount = $.FScrollableWidth = 0;
      $.FFixedContent = $.FFixedHeader = $.FFixedScrollController = $.FListRenderer = $.FOnCellChanged = $.FOnCellClick = $.FOnDrawGridLineTheme = $.FScrollableContainer = $.FScrollableContent = $.FScrollableHeader = $.FScrollableScrollController = $.FSortOptions = null;
      $.FMultiSelect = $.FPreventRepaint = $.FTriggered = false;
      $.FRowBackgroundType = 0;
      $.FRowBorderType = 0;
      $.FRowOddBackgroundType = 0;
      $.FRowOddBorderType = 0;
      $.FSelectedRows = [];
      $.FStashedLines = [];
      $.FVisibleLines = [];
   }
   /// function TW3CustomStringGrid.AdjustClientRect(const Rect: TRect) : TRect
   ///  [line: 819, column: 30, file: SmartCL.Controls.StringGrid]
   ,AdjustClientRect:function(Self, Rect$1) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      Result = TW3CustomScrollControl.AdjustClientRect(Self,Rect$1);
      Result.Top$3 += Self.FHeaderHeight$1;
      return Result
   }
   /// procedure TW3CustomStringGrid.DrawGridLine(Sender: TObject; Value: Integer)
   ///  [line: 709, column: 31, file: SmartCL.Controls.StringGrid]
   ,DrawGridLine:function(Self, Sender, Value$5) {
      var GridLine = {Index$3:0,DataIndex:0,FixedCols:null,ScrollableCols:null,ItemIds:[],PreventHide:false},
         ht = "",
         CurrentLeft = 0,
         i$7 = 0,
         i$8 = 0,
         i$9 = 0;
      if (Self.FStashedLines.length > 0) {
         Copy$TW3RenderedGridLine(Self.FStashedLines[0],GridLine);
         Self.FStashedLines.shift();
         TW3MovableControl.SetBounds$(GridLine.FixedCols,0,Value$5 * Self.FLineHeight,Self.FFixedWidth,Self.FLineHeight);
         if (GridLine.ScrollableCols !== null) {
            TW3MovableControl.SetBounds$(GridLine.ScrollableCols,0,Value$5 * Self.FLineHeight,Self.FScrollableWidth,Self.FLineHeight);
         }
      } else if (Self.FCachedLines.length > 0) {
         Copy$TW3RenderedGridLine(Self.FCachedLines[0],GridLine);
         Self.FCachedLines.shift();
         TW3MovableControl.SetVisible(GridLine.FixedCols,true);
         if (GridLine.ScrollableCols !== null) {
            TW3MovableControl.SetVisible(GridLine.ScrollableCols,true);
         }
         TW3MovableControl.SetBounds$(GridLine.FixedCols,0,Value$5 * Self.FLineHeight,Self.FFixedWidth,Self.FLineHeight);
         if (GridLine.ScrollableCols !== null) {
            TW3MovableControl.SetBounds$(GridLine.ScrollableCols,0,Value$5 * Self.FLineHeight,Self.FScrollableWidth,Self.FLineHeight);
         }
      } else {
         GridLine.FixedCols = TW3TagContainer.Create$81$($New(TW3StringGridLineControl),Self.FFixedContent);
         TW3CustomControl._setMouseClick(GridLine.FixedCols,$Event1(Self,TW3CustomStringGrid.HandleClick));
         if (Self.FFixedColumns < Self.FColumns.length) {
            GridLine.ScrollableCols = TW3TagContainer.Create$81$($New(TW3StringGridLineControl),Self.FScrollableContent);
            TW3CustomControl._setMouseClick(GridLine.ScrollableCols,$Event1(Self,TW3CustomStringGrid.HandleClick));
            TW3MovableControl.SetBounds$(GridLine.ScrollableCols,0,Value$5 * Self.FLineHeight,Self.FScrollableWidth,Self.FLineHeight);
         }
         TW3MovableControl.SetBounds$(GridLine.FixedCols,0,Value$5 * Self.FLineHeight,Self.FFixedWidth,Self.FLineHeight);
      }
      GridLine.Index$3 = Value$5;
      GridLine.DataIndex = TW3CustomStringGrid.IndexToDataIndex(Self,Value$5);
      Self.FVisibleLines.push(Clone$TW3RenderedGridLine(GridLine));
      TW3CustomStringGrid.DrawGridLineTheme(Self,GridLine);
      if (Self.FFixedColumns > 0) {
         var $temp105;
         for(i$7=0,$temp105=Self.FFixedColumns;i$7<$temp105;i$7++) {
            ht += TW3StringGridColumn.GenerateHtml$(Self.FColumns[i$7],Clone$TW3RenderedGridLine(GridLine),i$7,CurrentLeft);
            (CurrentLeft+= Self.FColumns[i$7].FWidth$2);
         }
         TW3TagObj.a$48(GridLine.FixedCols,ht);
         ht = "";
         CurrentLeft = 0;
      }
      var $temp106;
      for(i$8=Self.FFixedColumns,$temp106=Self.FColumns.length;i$8<$temp106;i$8++) {
         ht += TW3StringGridColumn.GenerateHtml$(Self.FColumns[i$8],Clone$TW3RenderedGridLine(GridLine),i$8,CurrentLeft);
         (CurrentLeft+= Self.FColumns[i$8].FWidth$2);
      }
      if (GridLine.ScrollableCols !== null) {
         TW3TagObj.a$48(GridLine.ScrollableCols,ht);
      }
      var $temp107;
      for(i$9=0,$temp107=Self.FColumns.length;i$9<$temp107;i$9++) {
         TW3StringGridColumn.SetColumnEvents$(Self.FColumns[i$9],Self,Clone$TW3RenderedGridLine(GridLine),i$9);
      }
   }
   /// procedure TW3CustomStringGrid.DrawGridLineTheme(const GridLine: TW3RenderedGridLine)
   ///  [line: 770, column: 31, file: SmartCL.Controls.StringGrid]
   ,DrawGridLineTheme:function(Self, GridLine) {
      var BackgroundTheme = { v : 0 },
         BorderTheme = { v : 0 };
      if (Odd$_Integer_(GridLine.Index$3)) {
         BackgroundTheme.v = Self.FRowOddBackgroundType;
         BorderTheme.v = Self.FRowOddBorderType;
      } else {
         BackgroundTheme.v = Self.FRowBackgroundType;
         BorderTheme.v = Self.FRowBorderType;
      }
      if (Self.FSelectedRows.indexOf(GridLine.DataIndex) >= 0) {
         BackgroundTheme.v = 7;
      }
      if (Self.FOnDrawGridLineTheme) {
         Self.FOnDrawGridLineTheme(Self,GridLine.DataIndex,BackgroundTheme,BorderTheme);
      }
      TW3CustomControl.SetBackgroundType(GridLine.FixedCols,BackgroundTheme.v);
      TW3CustomControl.SetBorderType(GridLine.FixedCols,BorderTheme.v);
      TW3CustomControl.SetBackgroundType(GridLine.ScrollableCols,BackgroundTheme.v);
      TW3CustomControl.SetBorderType(GridLine.ScrollableCols,BorderTheme.v);
   }
   /// function TW3CustomStringGrid.EventToColumnRow(const eventObj: JEvent; var Index: Integer; var Col: Integer) : Boolean
   ///  [line: 493, column: 30, file: SmartCL.Controls.StringGrid]
   ,EventToColumnRow:function(Self, eventObj, Index$6, Col) {
      var Result = false;
      var cHandle = undefined,
         eId = "",
         RLine = {Index$3:0,DataIndex:0,FixedCols:null,ScrollableCols:null,ItemIds:[],PreventHide:false},
         i$7 = 0,
         j$2 = 0;
      cHandle = eventObj.target;
      if (cHandle) {
         eId = String(cHandle.id);
         var $temp108;
         for(i$7=0,$temp108=Self.FVisibleLines.length;i$7<$temp108;i$7++) {
            Copy$TW3RenderedGridLine(Self.FVisibleLines[i$7],RLine);
            j$2 = RLine.ItemIds.indexOf(eId);
            if (j$2 >= 0) {
               Result = true;
               Index$6.v = i$7;
               Col.v = j$2;
               return Result;
            }
         }
      }
      Result = false;
      return Result
   }
   /// function TW3CustomStringGrid.GetCells(Row: Integer; Col: Integer) : Variant
   ///  [line: 353, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetCells:function(Self, Row, Col) {
      return "";
   }
   /// function TW3CustomStringGrid.GetColumn(Col: Integer) : TW3StringGridColumn
   ///  [line: 363, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetColumn:function(Self, Col) {
      return Self.FColumns[Col];
   }
   /// function TW3CustomStringGrid.GetContentHeight() : Integer
   ///  [line: 830, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetContentHeight:function(Self) {
      return TW3MovableControl.GetHeight$(Self.FFixedContent);
   }
   /// function TW3CustomStringGrid.GetContentWidth() : Integer
   ///  [line: 825, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetContentWidth:function(Self) {
      return Self.FScrollableWidth+Self.FFixedWidth;
   }
   /// function TW3CustomStringGrid.GetHorizontalScrollPosition() : Integer
   ///  [line: 835, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetHorizontalScrollPosition:function(Self) {
      return Math.abs(Self.FScrollableScrollController.FContentLeft);
   }
   /// function TW3CustomStringGrid.GetSelected(const Idx: Integer) : Boolean
   ///  [line: 858, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetSelected:function(Self, Idx) {
      return Self.FSelectedRows.indexOf(Idx) >= 0;
   }
   /// function TW3CustomStringGrid.GetSelectedIndex() : Integer
   ///  [line: 845, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetSelectedIndex:function(Self) {
      var Result = 0;
      if (Self.FSelectedRows.length > 0) {
         Result = Self.FSelectedRows[(Self.FSelectedRows.length-1)];
      } else {
         Result = -1;
      }
      return Result
   }
   /// function TW3CustomStringGrid.GetVerticalScrollPosition() : Integer
   ///  [line: 840, column: 30, file: SmartCL.Controls.StringGrid]
   ,GetVerticalScrollPosition:function(Self) {
      return Math.abs(Self.FFixedScrollController.FContentTop);
   }
   /// procedure TW3CustomStringGrid.HandleClick(Sender: TObject)
   ///  [line: 444, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleClick:function(Self, Sender) {
      var dHandle = undefined,
         idStr = "",
         RLine = {Index$3:0,DataIndex:0,FixedCols:null,ScrollableCols:null,ItemIds:[],PreventHide:false},
         Col = null,
         i$7 = 0,
         j$2 = 0,
         k = 0,
         c$1 = 0;
      TW3EventManager.AllowDefaultAction(EventManager);
      var $temp109;
      for(i$7=0,$temp109=Self.FVisibleLines.length;i$7<$temp109;i$7++) {
         Copy$TW3RenderedGridLine(Self.FVisibleLines[i$7],RLine);
         if (RLine.FixedCols === Sender || RLine.ScrollableCols === Sender) {
            var $temp110;
            for(j$2=0,$temp110=EventManager.DetectedHandles.length;j$2<$temp110;j$2++) {
               dHandle = EventManager.DetectedHandles[j$2];
               idStr = String(dHandle.id);
               k = RLine.ItemIds.indexOf(idStr);
               if (k >= 0) {
                  if (Self.FMultiSelect) {
                     TW3CustomStringGrid.SetSelected$1(Self,RLine.DataIndex,!(TW3CustomStringGrid.GetSelected(Self,RLine.DataIndex)));
                  } else {
                     TW3CustomStringGrid.SetSelectedIndex$1(Self,RLine.DataIndex);
                  }
                  Col = TW3CustomStringGrid.GetColumn(Self,k);
                  if (Col.FOnClick$1) {
                     Col.FOnClick$1(Col,RLine.DataIndex);
                  }
                  c$1 = Self.FColumns.indexOf(Col);
                  if (Self.FOnCellClick) {
                     Self.FOnCellClick(Self,RLine.DataIndex,c$1);
                  }
                  return;
               }
            }
         }
      }
   }
   /// procedure TW3CustomStringGrid.HandleColBlur(eventObj: JEvent)
   ///  [line: 523, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleColBlur:function(Self, eventObj) {
      var i$7 = { v : 0 },
         Col = { v : 0 };
      if (TW3CustomStringGrid.EventToColumnRow(Self,eventObj,i$7,Col)) {
         Self.FVisibleLines[i$7.v].PreventHide = false;
      }
   }
   /// procedure TW3CustomStringGrid.HandleColFocus(eventObj: JEvent)
   ///  [line: 516, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleColFocus:function(Self, eventObj) {
      var i$7 = { v : 0 },
         Col = { v : 0 };
      if (TW3CustomStringGrid.EventToColumnRow(Self,eventObj,i$7,Col)) {
         Self.FVisibleLines[i$7.v].PreventHide = true;
      }
   }
   /// procedure TW3CustomStringGrid.HandleDataChanged(eventObj: JInputEvent)
   ///  [line: 530, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleDataChanged:function(Self, eventObj) {
      var cHandle = undefined,
         eId = "",
         RLine = {Index$3:0,DataIndex:0,FixedCols:null,ScrollableCols:null,ItemIds:[],PreventHide:false},
         i$7 = 0,
         j$2 = 0;
      cHandle = eventObj.target;
      if (cHandle) {
         eId = String(cHandle.id);
         var $temp111;
         for(i$7=0,$temp111=Self.FVisibleLines.length;i$7<$temp111;i$7++) {
            Copy$TW3RenderedGridLine(Self.FVisibleLines[i$7],RLine);
            j$2 = RLine.ItemIds.indexOf(eId);
            if (j$2 >= 0) {
               Self.FPreventRepaint = true;
               try {
                  if ($Is(TW3CustomStringGrid.GetColumn(Self,j$2),TW3StringGridCheckmarkColumn)) {
                     if (cHandle.checked) {
                        TW3CustomStringGrid.SetCells$(Self,RLine.DataIndex,j$2,true);
                     } else {
                        TW3CustomStringGrid.SetCells$(Self,RLine.DataIndex,j$2,false);
                     }
                  } else {
                     TW3CustomStringGrid.SetCells$(Self,RLine.DataIndex,j$2,cHandle.value);
                  }
               } finally {
                  Self.FPreventRepaint = false;
               }
               if (Self.FOnCellChanged) {
                  Self.FOnCellChanged(Self,RLine.DataIndex,j$2);
               }
               return;
            }
         }
      }
      eventObj.preventDefault();
   }
   /// procedure TW3CustomStringGrid.HandleHorizontalScroll(Sender: TObject)
   ///  [line: 576, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleHorizontalScroll:function(Self, Sender) {
      TW3ScrollInfo.ScrollX(TW3CustomControl.GetScrollInfo(Self.FScrollableHeader),-Self.FScrollableScrollController.FContentLeft);
      TW3CustomScrollControl.UpdateIndicators(Self,null);
   }
   /// procedure TW3CustomStringGrid.HandleScrollBar(Sender: TObject)
   ///  [line: 560, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleScrollBar:function(Self, Sender) {
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         if (Sender === Self.FVertScrollBar) {
            TW3ScrollController.ScrollTo$1(Self.FFixedScrollController,Self.FFixedScrollController.FContentLeft,-Self.FVertScrollBar.FPosition);
         } else if (Sender === Self.FHorizScrollBar) {
            TW3ScrollController.ScrollTo$1(Self.FScrollableScrollController,-Self.FHorizScrollBar.FPosition,Self.FScrollableScrollController.FContentTop);
         }
      }
   }
   /// procedure TW3CustomStringGrid.HandleVerticalScroll(Sender: TObject)
   ///  [line: 611, column: 31, file: SmartCL.Controls.StringGrid]
   ,HandleVerticalScroll:function(Self, Sender) {
      TW3CustomStringGrid.TriggerRendering(Self);
      if (Self.FScrollableContent !== null) {
         Self.FScrollableWidth = TW3MovableControl.ClientWidth(Self.FScrollableContent);
      } else {
         Self.FScrollableWidth = 0;
      }
      TW3CustomScrollControl.UpdateIndicators(Self,null);
   }
   /// function TW3CustomStringGrid.HideGridLine(Sender: TObject; Value: Integer) : Boolean
   ///  [line: 792, column: 30, file: SmartCL.Controls.StringGrid]
   ,HideGridLine:function(Self, Sender, Value$5) {
      var Result = false;
      var i$7 = 0;
      Result = false;
      var $temp112;
      for(i$7=0,$temp112=Self.FVisibleLines.length;i$7<$temp112;i$7++) {
         if (Self.FVisibleLines[i$7].Index$3 == Value$5) {
            if (Self.FVisibleLines[i$7].PreventHide) {
               return Result;
            }
            Self.FStashedLines.push(Clone$TW3RenderedGridLine(Self.FVisibleLines[i$7]));
            Self.FVisibleLines[i$7].ItemIds.length=0;
            Self.FVisibleLines.splice(i$7,1)
            ;
            Result = true;
            break;
         }
      }
      return Result
   }
   /// function TW3CustomStringGrid.IndexToDataIndex(const Value: Integer) : Integer
   ///  [line: 477, column: 30, file: SmartCL.Controls.StringGrid]
   ,IndexToDataIndex:function(Self, Value$5) {
      var Result = 0;
      if (Self.FSortOptions.SortedGridLines.length > Value$5) {
         Result = Self.FSortOptions.SortedGridLines[Value$5];
      } else {
         Result = Value$5;
      }
      return Result
   }
   /// procedure TW3CustomStringGrid.InitializeObject()
   ///  [line: 392, column: 31, file: SmartCL.Controls.StringGrid]
   ,InitializeObject:function(Self) {
      TW3CustomScrollControl.InitializeObject(Self);
      Self.FHeaderHeight$1 = 30;
      Self.FLineHeight = 25;
      Self.FFixedColumns = 1;
      Self.FRowBorderType = 15;
      Self.FRowBackgroundType = 5;
      Self.FRowOddBorderType = 15;
      Self.FRowOddBackgroundType = 5;
      Self.FFixedContent = TW3TagContainer.Create$81$($New(TW3ScrollContent),Self.FContainer);
      Self.FScrollableContainer = TW3TagContainer.Create$81$($New(TW3ScrollContainer),Self.FFixedContent);
      Self.FScrollableContent = TW3TagContainer.Create$81$($New(TW3ScrollContent),Self.FScrollableContainer);
      Self.FFixedScrollController = TW3ScrollController.Create$175($New(TW3ScrollController),Self.FContainer);
      TW3ScrollController.SetContent(Self.FFixedScrollController,Self.FFixedContent);
      TW3ScrollController.SetDirection$1(Self.FFixedScrollController,0);
      TW3ScrollController.SetUseTransform(Self.FFixedScrollController,true);
      Self.FFixedScrollController.FOnScrolling = $Event1(Self,TW3CustomStringGrid.HandleVerticalScroll);
      Self.FScrollableScrollController = TW3ScrollController.Create$175($New(TW3ScrollController),Self.FScrollableContainer);
      TW3ScrollController.SetDirection$1(Self.FScrollableScrollController,1);
      TW3ScrollController.SetContent(Self.FScrollableScrollController,Self.FScrollableContent);
      Self.FScrollableScrollController.FOnScrolling = $Event1(Self,TW3CustomStringGrid.HandleHorizontalScroll);
      Self.FListRenderer = TObject.Create($New(TW3DynamicListRenderer));
      Self.FListRenderer.FOnDraw = $Event2(Self,TW3CustomStringGrid.DrawGridLine);
      Self.FListRenderer.FOnHide = $Event2(Self,TW3CustomStringGrid.HideGridLine);
      Self.FListRenderer.FOnStop = $Event1(Self,TW3CustomStringGrid.StopRendering);
      Self.FSortOptions = TW3StringGridSortOptions.Create$179($New(TW3StringGridSortOptions),Self);
      Self.FFixedHeader = TW3TagContainer.Create$81$($New(TW3StringGridHeaders),Self);
      Self.FFixedHeader.Grid = Self;
      Self.FScrollableHeader = TW3TagContainer.Create$81$($New(TW3StringGridHeaders),Self);
      Self.FScrollableHeader.Scrollable = true;
      Self.FScrollableHeader.Grid = Self;
      TW3CustomScrollControl.SetScrollBars$(Self,2);
   }
   /// procedure TW3CustomStringGrid.InvalidateGrid()
   ///  [line: 584, column: 31, file: SmartCL.Controls.StringGrid]
   ,InvalidateGrid:function(Self) {
      TW3DynamicListRenderer.InvalidateAll(Self.FListRenderer);
      Self.FCurrentSize.Right$1 = -1;
      TW3MovableControl.Invalidate$(Self);
      TW3CustomStringGrid.TriggerRendering(Self);
   }
   /// procedure TW3CustomStringGrid.PaintGrid()
   ///  [line: 592, column: 31, file: SmartCL.Controls.StringGrid]
   ,PaintGrid:function(Self) {
      Self.FTriggered = false;
      TW3DynamicListRenderer.Stop$1(Self.FListRenderer);
      TW3DynamicListRenderer.SetCount(Self.FListRenderer,Self.FRowCount);
      Self.FListRenderer.LineHeight = Self.FLineHeight;
      Self.FListRenderer.ViewHeight = TW3MovableControl.ClientHeight(Self.FContainer);
      Self.FListRenderer.Position = -Self.FFixedScrollController.FContentTop;
      TW3DynamicListRenderer.Run(Self.FListRenderer);
   }
   /// procedure TW3CustomStringGrid.Resize()
   ///  [line: 619, column: 31, file: SmartCL.Controls.StringGrid]
   ,Resize:function(Self) {
      var fw = 0,
         sw = 0,
         cw = 0,
         ch$4 = 0,
         CRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         i$7 = 0;
      TW3CustomScrollControl.Resize(Self);
      CRect = TW3MovableControl.ClientRect$(Self.FContainer);
      if (TRect$Width$6(CRect) == TRect$Width$6(Self.FCurrentSize) && TRect$Height$5(CRect) == TRect$Height$5(Self.FCurrentSize)) {
         return;
      }
      var $temp113;
      for(i$7=0,$temp113=Self.FColumns.length;i$7<$temp113;i$7++) {
         if (Self.FFixedColumns > i$7) {
            (fw+= Self.FColumns[i$7].FWidth$2);
         } else {
            (sw+= Self.FColumns[i$7].FWidth$2);
         }
      }
      Self.FFixedWidth = fw;
      cw = TRect$Width$6(CRect)-fw;
      ch$4 = Self.FRowCount * Self.FLineHeight;
      TW3MovableControl.SetBounds$(Self.FFixedHeader,0,0,Self.FFixedWidth,Self.FHeaderHeight$1);
      TW3MovableControl.SetBounds$(Self.FScrollableHeader,Self.FFixedWidth,0,TRect$Width$6(CRect)-Self.FFixedWidth,Self.FHeaderHeight$1);
      if (ch$4 < TRect$Height$5(CRect)) {
         ch$4 = TRect$Height$5(CRect);
      }
      if (sw+fw < TRect$Width$6(CRect)) {
         sw = TRect$Width$6(CRect)-fw;
      }
      TW3MovableControl.SetBounds$(Self.FFixedContent,0,0,TRect$Width$6(CRect),ch$4);
      if (Self.FScrollableContainer !== null) {
         TW3MovableControl.SetBounds$(Self.FScrollableContainer,fw,0,TRect$Width$6(CRect)-fw,ch$4);
      }
      if (Self.FScrollableContent !== null) {
         TW3MovableControl.SetBounds$(Self.FScrollableContent,0,0,sw,ch$4);
         Self.FScrollableWidth = sw;
      }
      if (TRect$Width$6(Self.FCurrentSize) != TRect$Width$6(CRect)) {
         TW3DynamicListRenderer.InvalidateAll(Self.FListRenderer);
      }
      TW3ScrollController.Refresh$1(Self.FFixedScrollController);
      if (Self.FScrollableScrollController !== null) {
         TW3ScrollController.Refresh$1(Self.FScrollableScrollController);
      }
      Copy$TRect(CRect,Self.FCurrentSize);
   }
   /// procedure TW3CustomStringGrid.ResizeScrollBars(const Rect: TRect)
   ///  [line: 655, column: 31, file: SmartCL.Controls.StringGrid]
   ,ResizeScrollBars:function(Self, Rect$1) {
      if (Self.FVertScrollBar !== null) {
         TW3MovableControl.SetBounds$(Self.FVertScrollBar,Rect$1.Right$1,0,Self.FBarSize,Rect$1.Bottom$1);
      }
      if (Self.FHorizScrollBar !== null) {
         TW3MovableControl.SetBounds$(Self.FHorizScrollBar,0,Rect$1.Bottom$1,Rect$1.Right$1,Self.FBarSize);
      }
      if (Self.FVertScrollIndicator !== null) {
         TW3MovableControl.SetBounds$(Self.FVertScrollIndicator,Rect$1.Right$1-8,0,4,Rect$1.Bottom$1);
      }
      if (Self.FHorizScrollIndicator !== null) {
         TW3MovableControl.SetBounds$(Self.FHorizScrollIndicator,0,Rect$1.Bottom$1-8,TRect$Width$6(Rect$1),4);
      }
   }
   /// procedure TW3CustomStringGrid.SetCells(Row: Integer; Col: Integer; Value: Variant)
   ///  [line: 368, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetCells:function(Self, Row, Col, Value$5) {
      if (Self.FPreventRepaint) {
         return;
      }
      if ($SetIn(Self.FComponentState,3,0,11)) {
         TW3CustomStringGrid.InvalidateGrid(Self);
      } else {
         TW3TagObj.AddToComponentState(Self,[32]);
      }
   }
   /// procedure TW3CustomStringGrid.SetFixedColumns(const Value: Integer)
   ///  [line: 671, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetFixedColumns:function(Self, Value$5) {
      if (Value$5 != Self.FFixedColumns) {
         Self.FFixedColumns = Value$5;
         TW3CustomStringGrid.UpdateHeaders$2(Self);
         TW3CustomStringGrid.InvalidateGrid(Self);
      }
   }
   /// procedure TW3CustomStringGrid.SetHeaderHeight(const Value: Integer)
   ///  [line: 680, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetHeaderHeight$1:function(Self, Value$5) {
      if (Self.FHeaderHeight$1 != Value$5) {
         Self.FHeaderHeight$1 = Value$5;
         TW3DynamicListRenderer.InvalidateAll(Self.FListRenderer);
         TW3MovableControl.Invalidate$(Self);
      }
   }
   /// procedure TW3CustomStringGrid.SetLineHeight(const Value: Integer)
   ///  [line: 689, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetLineHeight:function(Self, Value$5) {
      if (Self.FLineHeight != Value$5) {
         Self.FLineHeight = Value$5;
         TW3CustomStringGrid.InvalidateGrid(Self);
      }
   }
   /// procedure TW3CustomStringGrid.SetRowCount(const Value: Integer)
   ///  [line: 377, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetRowCount:function(Self, Value$5) {
      var a$392 = 0;
      if (Self.FRowCount != Value$5) {
         if (Value$5 < Self.FRowCount) {
            for(a$392=(Self.FSelectedRows.length-1);a$392>=0;a$392--) {
               if (Self.FSelectedRows[a$392] >= Value$5) {
                  Self.FSelectedRows.splice(a$392,1)
                  ;
               }
            }
            Self.FRowCount = Value$5;
            TW3CustomStringGrid.Sort$6(Self);
         } else {
            Self.FRowCount = Value$5;
            TW3CustomStringGrid.InvalidateGrid(Self);
         }
      }
   }
   /// procedure TW3CustomStringGrid.SetSelected(const Idx: Integer; const Value: Boolean)
   ///  [line: 863, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetSelected$1:function(Self, Idx, Value$5) {
      var i$7 = 0;
      i$7 = Self.FSelectedRows.indexOf(Idx);
      if (Value$5) {
         if (i$7 == -1) {
            Self.FSelectedRows.push(Idx);
         } else {
            return;
         }
      } else if (i$7 > -1) {
         Self.FSelectedRows.splice(i$7,1)
         ;
      } else {
         return;
      }
      var $temp114;
      for(i$7=0,$temp114=Self.FVisibleLines.length;i$7<$temp114;i$7++) {
         if (Self.FVisibleLines[i$7].DataIndex == Idx) {
            TW3CustomStringGrid.DrawGridLineTheme(Self,Self.FVisibleLines[i$7]);
            return;
         }
      }
   }
   /// procedure TW3CustomStringGrid.SetSelectedIndex(const Value: Integer)
   ///  [line: 851, column: 31, file: SmartCL.Controls.StringGrid]
   ,SetSelectedIndex$1:function(Self, Value$5) {
      while (Self.FSelectedRows.length > 0) {
         TW3CustomStringGrid.SetSelected$1(Self,Self.FSelectedRows[0],false)      }
      TW3CustomStringGrid.SetSelected$1(Self,Value$5,true);
   }
   /// procedure TW3CustomStringGrid.Sort()
   ///  [line: 697, column: 31, file: SmartCL.Controls.StringGrid]
   ,Sort$6:function(Self) {
      TW3StringGridSortOptions.Sort$5(Self.FSortOptions);
      TW3CustomStringGrid.InvalidateGrid(Self);
   }
   /// procedure TW3CustomStringGrid.StopRendering(Sender: TObject)
   ///  [line: 806, column: 31, file: SmartCL.Controls.StringGrid]
   ,StopRendering:function(Self, Sender) {
      var i$7 = 0,
         Line = {Index$3:0,DataIndex:0,FixedCols:null,ScrollableCols:null,ItemIds:[],PreventHide:false};
      if (!Self.FStashedLines.length) {
         return;
      }
      var $temp115;
      for(i$7=0,$temp115=Self.FStashedLines.length;i$7<$temp115;i$7++) {
         Copy$TW3RenderedGridLine(Self.FStashedLines[i$7],Line);
         TW3MovableControl.SetVisible(Line.FixedCols,false);
         if (Line.ScrollableCols !== null) {
            TW3MovableControl.SetVisible(Line.ScrollableCols,false);
         }
         Self.FCachedLines.push(Clone$TW3RenderedGridLine(Line));
      }
      Self.FStashedLines.length=0;
   }
   /// procedure TW3CustomStringGrid.StyleTagObject()
   ///  [line: 435, column: 31, file: SmartCL.Controls.StringGrid]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,8);
      TW3CustomControl.SetBackgroundType(Self,4);
   }
   /// procedure TW3CustomStringGrid.TriggerRendering()
   ///  [line: 603, column: 31, file: SmartCL.Controls.StringGrid]
   ,TriggerRendering:function(Self) {
      if (!(Self.FTriggered)) {
         Self.FTriggered = true;
         TW3Dispatch.Execute(TW3Dispatch,$Event0(Self,TW3CustomStringGrid.PaintGrid),10);
      }
   }
   /// procedure TW3CustomStringGrid.UpdateHeaders()
   ///  [line: 703, column: 31, file: SmartCL.Controls.StringGrid]
   ,UpdateHeaders$2:function(Self) {
      TW3MovableControl.Invalidate$(Self.FFixedHeader);
      TW3MovableControl.Invalidate$(Self.FScrollableHeader);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3CustomScrollControl.IsObjectReady
   ,FinalizeObject:TW3CustomScrollControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect$:function($){return $.ClassType.AdjustClientRect.apply($.ClassType, arguments)}
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetContentHeight$:function($){return $.ClassType.GetContentHeight($)}
   ,GetContentWidth$:function($){return $.ClassType.GetContentWidth($)}
   ,GetHorizontalScrollPosition$:function($){return $.ClassType.GetHorizontalScrollPosition($)}
   ,GetVerticalScrollPosition$:function($){return $.ClassType.GetVerticalScrollPosition($)}
   ,HandleScrollBar$:function($){return $.ClassType.HandleScrollBar.apply($.ClassType, arguments)}
   ,ResizeScrollBars$:function($){return $.ClassType.ResizeScrollBars.apply($.ClassType, arguments)}
   ,SetScrollBars:TW3CustomScrollControl.SetScrollBars
   ,GetCells$:function($){return $.ClassType.GetCells.apply($.ClassType, arguments)}
   ,SetCells$:function($){return $.ClassType.SetCells.apply($.ClassType, arguments)}
   ,SetRowCount$:function($){return $.ClassType.SetRowCount.apply($.ClassType, arguments)}
};
TW3CustomStringGrid.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3SortOrder enumeration
///  [line: 56, column: 3, file: SmartCL.Controls.StringGrid]
var TW3SortOrder = [ "soNormal", "soReverse" ];
/// TW3RenderedGridLine = record
///  [line: 47, column: 3, file: SmartCL.Controls.StringGrid]
function Copy$TW3RenderedGridLine(s,d) {
   d.Index$3=s.Index$3;
   d.DataIndex=s.DataIndex;
   d.FixedCols=s.FixedCols;
   d.ScrollableCols=s.ScrollableCols;
   d.ItemIds=s.ItemIds;
   d.PreventHide=s.PreventHide;
   return d;
}
function Clone$TW3RenderedGridLine($) {
   return {
      Index$3:$.Index$3,
      DataIndex:$.DataIndex,
      FixedCols:$.FixedCols,
      ScrollableCols:$.ScrollableCols,
      ItemIds:$.ItemIds,
      PreventHide:$.PreventHide
   }
}
/// TW3DynamicListRenderer = class (TObject)
///  [line: 67, column: 3, file: SmartCL.Controls.StringGrid]
var TW3DynamicListRenderer = {
   $ClassName:"TW3DynamicListRenderer",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.LineHeight = $.Position = $.ViewHeight = $.FCount = 0;
      $.FActive$3 = false;
      $.FOnDraw = null;
      $.FOnHide = null;
      $.FOnStop = null;
      $.FVisibleItems = [];
      $.FWorkList = [];
   }
   /// destructor TW3DynamicListRenderer.Destroy()
   ///  [line: 1310, column: 35, file: SmartCL.Controls.StringGrid]
   ,Destroy:function(Self) {
      TW3DynamicListRenderer.Stop$1(Self);
      TObject.Destroy(Self);
   }
   /// procedure TW3DynamicListRenderer.Invalidate(Value: Integer)
   ///  [line: 1376, column: 34, file: SmartCL.Controls.StringGrid]
   ,Invalidate$3:function(Self, Value$5) {
      var i$7 = 0;
      i$7 = Self.FVisibleItems.indexOf(Value$5);
      if (i$7 >= 0) {
         if (Self.FOnHide) {
            Self.FOnHide(Self,Value$5);
         }
         Self.FVisibleItems.splice(i$7,1)
         ;
      }
   }
   /// procedure TW3DynamicListRenderer.InvalidateAll()
   ///  [line: 1385, column: 34, file: SmartCL.Controls.StringGrid]
   ,InvalidateAll:function(Self) {
      var i$7 = 0;
      if (!Self.FVisibleItems.length) {
         return;
      }
      var $temp116;
      for(i$7=0,$temp116=Self.FVisibleItems.length;i$7<$temp116;i$7++) {
         if (Self.FOnHide) {
            Self.FOnHide(Self,Self.FVisibleItems[i$7]);
         }
      }
      Self.FVisibleItems.length=0;
   }
   /// procedure TW3DynamicListRenderer.PaintItems()
   ///  [line: 1347, column: 34, file: SmartCL.Controls.StringGrid]
   ,PaintItems:function(Self) {
      var PaintStarted = 0,
         Item$3 = 0;
      if (!Self.FWorkList.length) {
         TW3DynamicListRenderer.Stop$1(Self);
      }
      if (!(Self.FActive$3)) {
         return;
      }
      PaintStarted = GetMilliseconds();
      do {
         if (!(Self.FActive$3)) {
            Self.FWorkList.length=0;
            return;
         }
         Item$3 = Self.FWorkList[0];
         Self.FWorkList.shift();
         if (Self.FOnDraw) {
            Self.FOnDraw(Self,Item$3);
         }
         Self.FVisibleItems.push(Item$3);
      } while (!(GetMilliseconds()-PaintStarted >= 10 || (Self.FWorkList.length==0)));
      if (!Self.FWorkList.length) {
         TW3DynamicListRenderer.Stop$1(Self);
      }
      if (Self.FActive$3) {
         TW3Dispatch.RequestAnimationFrame(TW3Dispatch,$Event0(Self,TW3DynamicListRenderer.PaintItems));
      }
   }
   /// procedure TW3DynamicListRenderer.Run()
   ///  [line: 1316, column: 34, file: SmartCL.Controls.StringGrid]
   ,Run:function(Self) {
      var i$7 = 0,
         j$2 = 0,
         Item$3 = 0,
         FirstVis = 0,
         LastVis = 0;
      FirstVis = ($Div(Self.Position,Self.LineHeight))-2;
      LastVis = ($Div(Self.Position+Self.ViewHeight,Self.LineHeight))+2;
      if (FirstVis < 0) {
         FirstVis = 0;
      }
      if (LastVis > Self.FCount-1) {
         LastVis = Self.FCount-1;
      }
      Self.FWorkList.length=0;
      var $temp117;
      for(i$7=FirstVis,$temp117=LastVis;i$7<=$temp117;i$7++) {
         Self.FWorkList.push(i$7);
      }
      for(i$7=(Self.FVisibleItems.length-1);i$7>=0;i$7--) {
         Item$3 = Self.FVisibleItems[i$7];
         j$2 = Self.FWorkList.indexOf(Item$3);
         if (j$2 == -1) {
            if ((Self.FOnHide!==null) && Self.FOnHide(Self,Item$3)) {
               Self.FVisibleItems.splice(i$7,1)
               ;
            }
         } else {
            Self.FWorkList.splice(j$2,1)
            ;
         }
      }
      Self.FActive$3 = true;
      TW3DynamicListRenderer.PaintItems(Self);
   }
   /// procedure TW3DynamicListRenderer.SetCount(const Value: Integer)
   ///  [line: 1401, column: 34, file: SmartCL.Controls.StringGrid]
   ,SetCount:function(Self, Value$5) {
      while (Self.FCount > Value$5) {
         --Self.FCount;
         TW3DynamicListRenderer.Invalidate$3(Self,Self.FCount);
      }
      Self.FCount = Value$5;
   }
   /// procedure TW3DynamicListRenderer.Stop()
   ///  [line: 1368, column: 34, file: SmartCL.Controls.StringGrid]
   ,Stop$1:function(Self) {
      if (Self.FActive$3) {
         Self.FActive$3 = false;
         if (Self.FOnStop) {
            Self.FOnStop(Self);
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TW3RadioButton = class (TW3CheckBox)
///  [line: 20, column: 3, file: SmartCL.Controls.RadioButton]
var TW3RadioButton = {
   $ClassName:"TW3RadioButton",$Parent:TW3CheckBox
   ,$Init:function ($) {
      TW3CheckBox.$Init($);
   }
   /// procedure TW3RadioButton.HandleMutualExclusion()
   ///  [line: 42, column: 26, file: SmartCL.Controls.RadioButton]
   ,HandleMutualExclusion:function(Self) {
      var Allow = null;
      if (!(TW3CheckBox.GetChecked(Self))) {
         return;
      }
      Allow = Self;
      TW3TagContainer.ForEach$1(TW3TagContainer.a$53(Self),function (Child$1) {
         var Result = 160;
         var rb = null;
         if (Child$1 !== Allow && $Is(Child$1,TW3RadioButton)) {
            rb = $As(Child$1,TW3RadioButton);
            if (TW3CheckBox.GetChecked(rb)) {
               TW3CheckBox.SetChecked$1$(rb,false);
            }
         }
         Result = 160;
         return Result
      });
   }
   /// function TW3RadioButton.GetMarkType() : String
   ///  [line: 31, column: 25, file: SmartCL.Controls.RadioButton]
   ,GetMarkType:function(Self) {
      return "radio";
   }
   /// procedure TW3RadioButton.SetChecked(aValue: Boolean)
   ///  [line: 36, column: 26, file: SmartCL.Controls.RadioButton]
   ,SetChecked$1:function(Self, aValue) {
      TW3CheckBox.SetChecked$1(Self,aValue);
      if (aValue) {
         TW3RadioButton.HandleMutualExclusion(Self);
      }
   }
   /// procedure TW3RadioButton.ToggleValueOnClick()
   ///  [line: 58, column: 26, file: SmartCL.Controls.RadioButton]
   ,ToggleValueOnClick:function(Self) {
      if (Self.FAutoCheck) {
         TW3CheckBox.SetChecked$1$(Self,true);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject:TW3CheckBox.InitializeObject
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3CheckBox.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CheckBox.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3CheckBox.GetCaption$1
   ,SetCaption$2:TW3CheckBox.SetCaption$2
   ,SetHAlign:TW3CheckBox.SetHAlign
   ,SetWordWrap:TW3CheckBox.SetWordWrap
   ,GetMarkType$:function($){return $.ClassType.GetMarkType($)}
   ,SetChecked$1$:function($){return $.ClassType.SetChecked$1.apply($.ClassType, arguments)}
   ,ToggleValueOnClick$:function($){return $.ClassType.ToggleValueOnClick($)}
};
TW3RadioButton.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3GroupBox = class (TW3Label)
///  [line: 26, column: 3, file: SmartCL.Controls.GroupBox]
var TW3GroupBox = {
   $ClassName:"TW3GroupBox",$Parent:TW3Label
   ,$Init:function ($) {
      TW3Label.$Init($);
   }
   /// function TW3GroupBox.ClientRect() : TRect
   ///  [line: 35, column: 22, file: SmartCL.Controls.GroupBox]
   ,ClientRect:function(Self) {
      var Result = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      Result = TW3MovableControl.ClientRect(Self);
      if (Self.FContent) {
         Result.Top$3 += w3_GetStyleAsInt(Self.FContent,"height");
      }
      return Result
   }
   /// procedure TW3GroupBox.InitializeObject()
   ///  [line: 42, column: 23, file: SmartCL.Controls.GroupBox]
   ,InitializeObject:function(Self) {
      TW3Label.InitializeObject(Self);
      TW3Label.SetHAlign$(Self,0);
      TW3Label.SetVAlign(Self,0);
   }
   /// procedure TW3GroupBox.StyleTagObject()
   ///  [line: 49, column: 23, file: SmartCL.Controls.GroupBox]
   ,StyleTagObject:function(Self) {
      TW3MovableControl.StyleTagObject(Self);
      TW3CustomControl.SetBorderType(Self,3);
      TW3CustomControl.SetBackgroundType(Self,3);
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3Label.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3Label.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)}
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect$:function($){return $.ClassType.ClientRect($)}
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize:TW3Label.Resize
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3GroupBox.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3RadioGroup = class (TW3GroupBox)
///  [line: 21, column: 3, file: SmartCL.Controls.RadioGroup]
var TW3RadioGroup = {
   $ClassName:"TW3RadioGroup",$Parent:TW3GroupBox
   ,$Init:function ($) {
      TW3GroupBox.$Init($);
      $.FItemIndex = 0;
      $.FRBItems = [];
   }
   /// function TW3RadioGroup.AddNewRB(Value: String) : TW3RadioButton
   ///  [line: 59, column: 24, file: SmartCL.Controls.RadioGroup]
   ,AddNewRB:function(Self, Value$5) {
      var Result = null;
      Result = TW3TagContainer.Create$81$($New(TW3RadioButton),Self);
      Self.FRBItems.push(Result);
      TW3OwnedObject.InitAsync$(Result,function () {
         TW3Label.SetCaption$2$(Result,Value$5);
         Result.FOnChecked = $Event1(Self,TW3RadioGroup.HandleRadioClick);
      });
      return Result
   }
   /// procedure TW3RadioGroup.CBClick(eventObj: JEvent)
   ///  [line: 97, column: 25, file: SmartCL.Controls.RadioGroup]
   ,CBClick:function(Self, eventObj) {
      /* null */
   }
   /// procedure TW3RadioGroup.Clear()
   ///  [line: 88, column: 25, file: SmartCL.Controls.RadioGroup]
   ,Clear$23:function(Self) {
      var i$7 = 0;
      if (!Self.FRBItems.length) {
         return;
      }
      var $temp118;
      for(i$7=0,$temp118=Self.FRBItems.length;i$7<$temp118;i$7++) {
         TObject.Free(Self.FRBItems[i$7]);
      }
      Self.FRBItems.length=0;
      TW3MovableControl.Invalidate$(Self);
   }
   /// procedure TW3RadioGroup.FinalizeObject()
   ///  [line: 109, column: 25, file: SmartCL.Controls.RadioGroup]
   ,FinalizeObject:function(Self) {
      TW3RadioGroup.Clear$23(Self);
      TW3Label.FinalizeObject(Self);
   }
   /// function TW3RadioGroup.GetItems() : TStrArray
   ///  [line: 115, column: 24, file: SmartCL.Controls.RadioGroup]
   ,GetItems$10:function(Self) {
      var Result = [];
      var i$7 = 0;
      Result = [];
      var $temp119;
      for(i$7=0,$temp119=Self.FRBItems.length;i$7<$temp119;i$7++) {
         Result[i$7]=TW3Label.GetCaption$1$(Self.FRBItems[i$7]);
      }
      return Result
   }
   /// procedure TW3RadioGroup.HandleRadioClick(Sender: TObject)
   ///  [line: 152, column: 25, file: SmartCL.Controls.RadioGroup]
   ,HandleRadioClick:function(Self, Sender) {
      var Idx = 0;
      Idx = Self.FRBItems.indexOf($As(Sender,TW3RadioButton));
      if (Idx != Self.FItemIndex) {
         Self.FItemIndex = Idx;
         if (Self.FOnClick) {
            Self.FOnClick(Self);
         }
      }
   }
   /// procedure TW3RadioGroup.InitializeObject()
   ///  [line: 102, column: 25, file: SmartCL.Controls.RadioGroup]
   ,InitializeObject:function(Self) {
      Self.FTransparentEvents = false;
      Self.FItemIndex = -1;
      TW3GroupBox.InitializeObject(Self);
   }
   /// procedure TW3RadioGroup.Resize()
   ///  [line: 162, column: 25, file: SmartCL.Controls.RadioGroup]
   ,Resize:function(Self) {
      var cr = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},
         i$7 = 0,
         h = 0,
         y$32 = 0,
         w = 0;
      TW3Label.Resize(Self);
      if (!(TW3MovableControl.GetIsVisible(Self))) {
         return;
      }
      cr = TW3MovableControl.ClientRect$(Self);
      h = $Div(TRect$Height$5(cr),Self.FRBItems.length);
      w = TRect$Width$6(cr)-20;
      y$32 = cr.Top$3;
      var $temp120;
      for(i$7=0,$temp120=Self.FRBItems.length;i$7<$temp120;i$7++) {
         TW3MovableControl.SetBounds$(Self.FRBItems[i$7],10,y$32,w,h);
         TW3CheckBox.SetChecked$1$(Self.FRBItems[i$7],Self.FItemIndex == i$7);
         (y$32+= h);
      }
   }
   /// procedure TW3RadioGroup.SetEnabled(const EnabledValue: Boolean)
   ///  [line: 122, column: 25, file: SmartCL.Controls.RadioGroup]
   ,SetEnabled$1:function(Self, EnabledValue) {
      TW3CustomControl.SetEnabled$1(Self,EnabledValue);
      if (!($SetIn(Self.FComponentState,10,0,11))) {
         /* null */
      }
   }
   /// procedure TW3RadioGroup.SetItemIndex(const Value: Integer)
   ///  [line: 130, column: 25, file: SmartCL.Controls.RadioGroup]
   ,SetItemIndex:function(Self, Value$5) {
      if (Self.FItemIndex != Value$5) {
         if (Value$5 >= -1 && Value$5 < Self.FRBItems.length) {
            Self.FItemIndex = Value$5;
         } else {
            Self.FItemIndex = -1;
         }
         TW3MovableControl.Invalidate$(Self);
      }
   }
   /// procedure TW3RadioGroup.SetItems(const Value: TStrArray)
   ///  [line: 139, column: 25, file: SmartCL.Controls.RadioGroup]
   ,SetItems$2:function(Self, Value$5) {
      var i$7 = 0;
      TW3RadioGroup.Clear$23(Self);
      var $temp121;
      for(i$7=0,$temp121=Value$5.length;i$7<$temp121;i$7++) {
         TW3RadioGroup.AddNewRB(Self,Value$5[i$7]);
      }
      if ($SetIn(Self.FComponentState,1,0,11)) {
         TW3ControlTracker.ConstructionReadyExecute(TW3ControlTracker,Self,$Event0(Self,TW3MovableControl.Resize$));
      } else {
         TW3MovableControl.Invalidate$(Self);
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3Label.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3GroupBox.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3GroupBox.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3Label.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3Label.SetWidth
   ,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType, arguments)}
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1$:function($){return $.ClassType.SetEnabled$1.apply($.ClassType, arguments)}
   ,GetCaption$1:TW3Label.GetCaption$1
   ,SetCaption$2:TW3Label.SetCaption$2
   ,SetHAlign:TW3Label.SetHAlign
   ,SetWordWrap:TW3Label.SetWordWrap
};
TW3RadioGroup.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TNodeInfo = record
///  [line: 24, column: 3, file: Storage]
function Copy$TNodeInfo(s,d) {
   return d;
}
function Clone$TNodeInfo($) {
   return {

   }
}
function InitializeStorage() {
   var s = "",
      Data$7 = null,
      i = 0;
   W3Storage = TW3LocalStorage.Create$154($New(TW3LocalStorage));
   if (TW3CustomStorage.GetKeyExists(W3Storage,"NodeID")) {
      s = Trim$_String_(TW3CustomStorage.GetKeyStr(W3Storage,"NodeID",""));
      if (s != "") {
         Data$7 = TBinaryData.Create$145($New(TBinaryData),TUnManaged.AllocMemA(TUnManaged,6));
         for(i=0;i<=7;i++) {
            TBinaryData.SetByte(Data$7,i,parseInt(s.charAt(i),10));
         }
      } else {
         TW3CustomStorage.SetKeyStr(W3Storage,"NodeID","123456789000");
      }
   }
};
/// TW3StorageObjectType enumeration
///  [line: 37, column: 3, file: System.Device.Storage]
var TW3StorageObjectType = [ "otUnknown", "otFile", "otFolder", "otBlockDevice", "otCharacterDevice", "otSymbolicLink", "otFIFO", "otSocket" ];
/// TW3StorageDevice = class (TW3Component)
///  [line: 96, column: 3, file: System.Device.Storage]
var TW3StorageDevice = {
   $ClassName:"TW3StorageDevice",$Parent:TW3Component
   ,$Init:function ($) {
      TW3Component.$Init($);
      $.FActive$1 = false;
      $.FIdentifier = $.FName$4 = "";
      $.FOptions$7 = [0];
   }
   /// procedure TW3StorageDevice.FinalizeObject()
   ///  [line: 162, column: 28, file: System.Device.Storage]
   ,FinalizeObject:function(Self) {
      if (Self.FActive$1) {
         TW3StorageDevice.UnMount$(Self,null);
      }
      TW3CustomComponent.FinalizeObject(Self);
   }
   /// function TW3StorageDevice.GetActive() : Boolean
   ///  [line: 254, column: 27, file: System.Device.Storage]
   ,GetActive:function(Self) {
      return Self.FActive$1;
   }
   /// procedure TW3StorageDevice.InitializeObject()
   ///  [line: 154, column: 28, file: System.Device.Storage]
   ,InitializeObject:function(Self) {
      TW3CustomComponent.InitializeObject(Self);
      Self.FOptions$7 = [2];
      Self.FIdentifier = TDatatype.CreateGUID(TDatatype);
      Self.FName$4 = "dh0";
   }
   /// procedure TW3StorageDevice.SetActive(const NewActiveState: Boolean)
   ///  [line: 259, column: 28, file: System.Device.Storage]
   ,SetActive$1:function(Self, NewActiveState) {
      Self.FActive$1 = NewActiveState;
   }
   ,Destroy:TW3CustomComponent.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3CustomComponent.Create$11
   ,InitAsync:TW3OwnedObject.InitAsync
   ,IsObjectReady:TW3OwnedObject.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   // IGNORED: TW3StorageDevice.CdUp
   // IGNORED: TW3StorageDevice.ChDir
   // IGNORED: TW3StorageDevice.DirExists
   ,Examine$:function($){return $.ClassType.Examine.apply($.ClassType, arguments)}
   // IGNORED: TW3StorageDevice.FileExists
   // IGNORED: TW3StorageDevice.GetFileSize
   // IGNORED: TW3StorageDevice.GetPath
   // IGNORED: TW3StorageDevice.GetStorageObjectType
   // IGNORED: TW3StorageDevice.Load
   // IGNORED: TW3StorageDevice.MakeDir
   // IGNORED: TW3StorageDevice.Mount
   // IGNORED: TW3StorageDevice.RemoveDir
   // IGNORED: TW3StorageDevice.Save
   ,UnMount$:function($){return $.ClassType.UnMount.apply($.ClassType, arguments)}
};
TW3StorageDevice.$Intf={
   IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TW3DeviceAuthenticationData = class (TObject)
///  [line: 49, column: 3, file: System.Device.Storage]
var TW3DeviceAuthenticationData = {
   $ClassName:"TW3DeviceAuthenticationData",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
};
/// TW3CustomStorage = class (TObject)
///  [line: 53, column: 3, file: SmartCL.Storage]
var TW3CustomStorage = {
   $ClassName:"TW3CustomStorage",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.OnStorageClosed = null;
      $.OnStorageOpen = null;
      $.FActive$2 = false;
      $.FNameSpace = "";
   }
   /// procedure TW3CustomStorage.Close()
   ///  [line: 164, column: 28, file: SmartCL.Storage]
   ,Close$1:function(Self) {
      if (Self.FActive$2) {
         Self.FNameSpace = "";
         Self.FActive$2 = false;
         if (Self.OnStorageClosed) {
            Self.OnStorageClosed(Self);
         }
      }
   }
   /// function TW3CustomStorage.GetKeyExists(KeyName: String) : Boolean
   ///  [line: 199, column: 27, file: SmartCL.Storage]
   ,GetKeyExists:function(Self, KeyName) {
      var Result = false;
      if (Self.FActive$2) {
         KeyName = TW3CustomStorage.GetQualifiedName(Self,KeyName);
         Result = TW3CustomStorage.GetDataExistsFor$(Self,KeyName);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.GetKeyExists", TObject.ClassName(Self.ClassType), $R[29]]);
      }
      return Result
   }
   /// function TW3CustomStorage.GetKeyStr(KeyName: String; DefaultValue: String) : String
   ///  [line: 243, column: 27, file: SmartCL.Storage]
   ,GetKeyStr:function(Self, KeyName, DefaultValue) {
      var Result = "";
      if (Self.FActive$2) {
         KeyName = TW3CustomStorage.GetQualifiedName(Self,KeyName);
         if (TW3CustomStorage.GetDataExistsFor$(Self,KeyName)) {
            Result = TW3CustomStorage.GetDataFor$(Self,KeyName);
         } else {
            TW3CustomStorage.SetDataFor$(Self,KeyName,DefaultValue);
            Result = DefaultValue;
         }
      } else {
         throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.GetKeyStr", TObject.ClassName(Self.ClassType), $R[29]]);
      }
      return Result
   }
   /// function TW3CustomStorage.GetQualifiedName(KeyName: String) : String
   ///  [line: 185, column: 27, file: SmartCL.Storage]
   ,GetQualifiedName:function(Self, KeyName) {
      var Result = "";
      KeyName = (Trim$_String_(KeyName)).toLocaleLowerCase();
      if (KeyName.length > 0) {
         if (Self.FNameSpace.length > 0) {
            Result += Self.FNameSpace;
            Result += ".";
         }
         Result += KeyName;
      }
      return Result
   }
   /// function TW3CustomStorage.GetUnQualifiedName(KeyName: String) : String
   ///  [line: 175, column: 27, file: SmartCL.Storage]
   ,GetUnQualifiedName:function(Self, KeyName) {
      KeyName = { v : KeyName };
      var Result = "";
      if (Self.FNameSpace.length > 0) {
         if (StrBeginsWith(KeyName.v,Self.FNameSpace)) {
            Delete(KeyName,1,Self.FNameSpace.length+1);
         }
      }
      Result = KeyName.v;
      return Result
   }
   /// procedure TW3CustomStorage.Open(NameSpace: String)
   ///  [line: 145, column: 28, file: SmartCL.Storage]
   ,Open:function(Self, NameSpace$1) {
      if (Self.FActive$2) {
         throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.Open", TObject.ClassName(Self.ClassType), $R[28]]);
      } else {
         if (TW3CustomStorage.Supported$(Self.ClassType)) {
            Self.FNameSpace = Trim$_String_(NameSpace$1);
            Self.FActive$2 = true;
            if (Self.OnStorageOpen) {
               Self.OnStorageOpen(Self);
            }
         } else {
            throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.Open", TObject.ClassName(Self.ClassType), $R[30]]);
         }
      }
   }
   /// procedure TW3CustomStorage.SetKeyStr(KeyName: String; Value: String)
   ///  [line: 221, column: 28, file: SmartCL.Storage]
   ,SetKeyStr:function(Self, KeyName, Value$5) {
      if (Self.FActive$2) {
         KeyName = TW3CustomStorage.GetQualifiedName(Self,KeyName);
         TW3CustomStorage.SetDataFor$(Self,KeyName,Value$5);
      } else {
         throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.SetKeyStr", TObject.ClassName(Self.ClassType), $R[29]]);
      }
   }
   ,Destroy:TObject.Destroy
   ,DeleteDataFor$:function($){return $.ClassType.DeleteDataFor.apply($.ClassType, arguments)}
   ,GetDataExistsFor$:function($){return $.ClassType.GetDataExistsFor.apply($.ClassType, arguments)}
   ,GetDataFor$:function($){return $.ClassType.GetDataFor.apply($.ClassType, arguments)}
   ,GetHandle$9$:function($){return $.ClassType.GetHandle$9($)}
   ,SetDataFor$:function($){return $.ClassType.SetDataFor.apply($.ClassType, arguments)}
   ,Supported$:function($){return $.Supported($)}
};
/// EW3Storage = class (EW3Exception)
///  [line: 48, column: 3, file: SmartCL.Storage]
var EW3Storage = {
   $ClassName:"EW3Storage",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TW3LocalStorage = class (TW3CustomStorage)
///  [line: 19, column: 3, file: SmartCL.Storage.Local]
var TW3LocalStorage = {
   $ClassName:"TW3LocalStorage",$Parent:TW3CustomStorage
   ,$Init:function ($) {
      TW3CustomStorage.$Init($);
      $.FHandle$16 = null;
   }
   /// constructor TW3LocalStorage.Create()
   ///  [line: 49, column: 29, file: SmartCL.Storage.Local]
   ,Create$154:function(Self) {
      TObject.Create(Self);
      Self.FHandle$16 = window.localStorage;
      return Self
   }
   /// procedure TW3LocalStorage.DeleteDataFor(KeyName: String)
   ///  [line: 75, column: 27, file: SmartCL.Storage.Local]
   ,DeleteDataFor:function(Self, KeyName) {
      Self.FHandle$16.removeItem(KeyName);
   }
   /// function TW3LocalStorage.GetDataExistsFor(KeyName: String) : Boolean
   ///  [line: 80, column: 26, file: SmartCL.Storage.Local]
   ,GetDataExistsFor:function(Self, KeyName) {
      var Result = false;
      var x$42 = 0,
         LTemp = "";
      Result = false;
      KeyName = Trim$_String_((KeyName).toLocaleLowerCase());
      if (KeyName.length > 0) {
         var $temp122;
         for(x$42=0,$temp122=Self.FHandle$16.length;x$42<$temp122;x$42++) {
            LTemp = Self.FHandle$16.key(x$42);
            LTemp = Trim$_String_((LTemp).toLocaleLowerCase());
            if (LTemp == KeyName) {
               Result = true;
               break;
            }
         }
      }
      return Result
   }
   /// function TW3LocalStorage.GetDataFor(KeyName: String) : String
   ///  [line: 65, column: 27, file: SmartCL.Storage.Local]
   ,GetDataFor:function(Self, KeyName) {
      return Self.FHandle$16.getItem(KeyName);
   }
   /// function TW3LocalStorage.GetHandle() : TStorageHandle
   ///  [line: 60, column: 26, file: SmartCL.Storage.Local]
   ,GetHandle$9:function(Self) {
      return Self.FHandle$16;
   }
   /// procedure TW3LocalStorage.SetDataFor(KeyName: String; const Data: String)
   ///  [line: 70, column: 27, file: SmartCL.Storage.Local]
   ,SetDataFor:function(Self, KeyName, Data$8) {
      Self.FHandle$16.setItem(KeyName,Data$8);
   }
   /// function TW3LocalStorage.Supported() : Boolean
   ///  [line: 55, column: 32, file: SmartCL.Storage.Local]
   ,Supported:function(Self) {
      return $VarToBool(window.localStorage);
   }
   ,Destroy:TObject.Destroy
   ,DeleteDataFor$:function($){return $.ClassType.DeleteDataFor.apply($.ClassType, arguments)}
   ,GetDataExistsFor$:function($){return $.ClassType.GetDataExistsFor.apply($.ClassType, arguments)}
   ,GetDataFor$:function($){return $.ClassType.GetDataFor.apply($.ClassType, arguments)}
   ,GetHandle$9$:function($){return $.ClassType.GetHandle$9($)}
   ,SetDataFor$:function($){return $.ClassType.SetDataFor.apply($.ClassType, arguments)}
   ,Supported$:function($){return $.Supported($)}
};
/// TW3SessionStorage = class (TW3CustomStorage)
///  [line: 19, column: 3, file: SmartCL.Storage.Session]
var TW3SessionStorage = {
   $ClassName:"TW3SessionStorage",$Parent:TW3CustomStorage
   ,$Init:function ($) {
      TW3CustomStorage.$Init($);
      $.FHandle$17 = null;
   }
   /// constructor TW3SessionStorage.Create()
   ///  [line: 55, column: 31, file: SmartCL.Storage.Session]
   ,Create$161:function(Self) {
      TObject.Create(Self);
      Self.FHandle$17 = window.sessionStorage;
      return Self
   }
   /// procedure TW3SessionStorage.DeleteDataFor(KeyName: String)
   ///  [line: 76, column: 29, file: SmartCL.Storage.Session]
   ,DeleteDataFor:function(Self, KeyName) {
      Self.FHandle$17.removeItem(KeyName);
   }
   /// function TW3SessionStorage.GetDataExistsFor(KeyName: String) : Boolean
   ///  [line: 81, column: 28, file: SmartCL.Storage.Session]
   ,GetDataExistsFor:function(Self, KeyName) {
      var Result = false;
      var x$42 = 0,
         LTemp = "";
      Result = false;
      if (KeyName.length > 0) {
         var $temp123;
         for(x$42=0,$temp123=Self.FHandle$17.length;x$42<$temp123;x$42++) {
            LTemp = Self.FHandle$17.key(x$42);
            if (LTemp == KeyName) {
               Result = true;
               break;
            }
         }
      }
      return Result
   }
   /// function TW3SessionStorage.GetDataFor(KeyName: String) : String
   ///  [line: 66, column: 29, file: SmartCL.Storage.Session]
   ,GetDataFor:function(Self, KeyName) {
      return Self.FHandle$17.getItem(KeyName);
   }
   /// function TW3SessionStorage.GetHandle() : TStorageHandle
   ///  [line: 61, column: 28, file: SmartCL.Storage.Session]
   ,GetHandle$9:function(Self) {
      return window.sessionStorage;
   }
   /// procedure TW3SessionStorage.SetDataFor(KeyName: String; const Data: String)
   ///  [line: 71, column: 29, file: SmartCL.Storage.Session]
   ,SetDataFor:function(Self, KeyName, Data$8) {
      Self.FHandle$17.setItem(KeyName,Data$8);
   }
   /// function TW3SessionStorage.Supported() : Boolean
   ///  [line: 50, column: 34, file: SmartCL.Storage.Session]
   ,Supported:function(Self) {
      return $VarToBool(window.localStorage);
   }
   ,Destroy:TObject.Destroy
   ,DeleteDataFor$:function($){return $.ClassType.DeleteDataFor.apply($.ClassType, arguments)}
   ,GetDataExistsFor$:function($){return $.ClassType.GetDataExistsFor.apply($.ClassType, arguments)}
   ,GetDataFor$:function($){return $.ClassType.GetDataFor.apply($.ClassType, arguments)}
   ,GetHandle$9$:function($){return $.ClassType.GetHandle$9($)}
   ,SetDataFor$:function($){return $.ClassType.SetDataFor.apply($.ClassType, arguments)}
   ,Supported$:function($){return $.Supported($)}
};
/// TW3VirtualFsParser = class (TW3ErrorObject)
///  [line: 77, column: 3, file: System.FileSystem.Virtual]
var TW3VirtualFsParser = {
   $ClassName:"TW3VirtualFsParser",$Parent:TW3ErrorObject
   ,$Init:function ($) {
      TW3ErrorObject.$Init($);
      $.FContext$3 = $.FFileSystem$1 = null;
      $.FFilename$1 = $.FOriginal = $.FRootMoniker = $.FSeparator = "";
      $.FFolderParts = [];
   }
   /// procedure TW3VirtualFsParser.Clear()
   ///  [line: 333, column: 30, file: System.FileSystem.Virtual]
   ,Clear$14:function(Self) {
      TW3ErrorObject.ClearLastError$1(Self);
      Self.FOriginal = "";
      Self.FFilename$1 = "";
      Self.FFolderParts.length=0;
      Self.FContext$3 = null;
   }
   /// constructor TW3VirtualFsParser.Create(const FileSystem: TW3VirtualFileSystem)
   ///  [line: 324, column: 32, file: System.FileSystem.Virtual]
   ,Create$156:function(Self, FileSystem) {
      TW3ErrorObject.Create$71(Self);
      Self.FFileSystem$1 = FileSystem;
      Self.FRootMoniker = TPath.GetRootMoniker$2();
      Self.FSeparator = TPath.GetPathSeparator$2();
      return Self
   }
   /// function TW3VirtualFsParser.Parse(FilePath: String) : Boolean
   ///  [line: 391, column: 29, file: System.FileSystem.Virtual]
   ,Parse:function(Self, FilePath) {
      FilePath = { v : FilePath };
      var Result = false;
      var LIndex = 0,
         LFilePart = "",
         LObj = null;
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      TW3VirtualFsParser.Clear$14(Self);
      FilePath.v = Trim$_String_(FilePath.v);
      Self.FOriginal = FilePath.v;
      if (FilePath.v.length > 0) {
         Self.FContext$3 = null;
         if (StrBeginsWith(FilePath.v,Self.FRootMoniker)) {
            Delete(FilePath,1,Self.FRootMoniker.length);
            Self.FContext$3 = Self.FFileSystem$1;
         } else {
            Self.FContext$3 = TW3VirtualFileSystem.GetCurrent(Self.FFileSystem$1);
            if (StrBeginsWith(FilePath.v,Self.FSeparator)) {
               Delete(FilePath,1,Self.FSeparator.length);
               FilePath.v = Trim$_String_(FilePath.v);
            } else {
               if (!(TPath.IsValidPath$2(FilePath.v))) {
                  return Result;
               }
            }
         }
         if (FilePath.v.length < 1) {
            if (Self.FContext$3 === null) {
               TW3ErrorObject.SetLastError$1(Self,"Parsing failed, nothing to parse beyond entry");
               return Result;
            } else {
               Result = true;
               return Result;
            }
         }
         if (!(TPath.IsValidPath$2(FilePath.v))) {
            return Result;
         }
         if (((FilePath.v).indexOf(Self.FSeparator)>=0)) {
            Self.FFolderParts = FilePath.v.split(Self.FSeparator);
            LIndex = (Self.FFolderParts.length-1);
            LFilePart = Self.FFolderParts[LIndex];
            if (TPath.GetExtension$2(LFilePart).length == 4) {
               Self.FFilename$1 = LFilePart;
               Self.FFolderParts.splice(LIndex,1)
               ;
            }
            Result = true;
         } else {
            if (Self.FContext$3 !== null) {
               LObj = TW3VirtualFileSystemFolder.GetLocalFileObj(Self.FFileSystem$1,FilePath.v);
               if (LObj !== null) {
                  if ($Is(LObj,TW3VirtualFileSystemFolder)) {
                     Self.FFolderParts.push(FilePath.v);
                     Result = true;
                     return Result;
                  } else {
                     Self.FFilename$1 = FilePath.v;
                     Result = true;
                     return Result;
                  }
               }
            }
            if (TPath.GetExtension$2(FilePath.v).length == 4) {
               Self.FFilename$1 = FilePath.v;
            } else {
               Self.FFolderParts.push(Self.FFilename$1);
            }
            Result = true;
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Parsing failed, filename is empty error");
      }
      return Result
   }
   /// function TW3VirtualFsParser.TraverseToTargetContext() : TW3VirtualFileSystemFolder
   ///  [line: 342, column: 29, file: System.FileSystem.Virtual]
   ,TraverseToTargetContext:function(Self) {
      var Result = null;
      var LRoot = null,
         x$42 = 0,
         LText = "",
         LObj = null;
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      LRoot = Self.FContext$3;
      if (Self.FContext$3 !== null) {
         var $temp124;
         for(x$42=0,$temp124=Self.FFolderParts.length;x$42<$temp124;x$42++) {
            LText = Trim$_String_(Self.FFolderParts[x$42]);
            if (!LText.length) {
               continue;
            }
            LObj = TW3VirtualFileSystemFolder.GetLocalFileObj(LRoot,Self.FFolderParts[x$42]);
            if (LObj !== null) {
               if ($Is(LObj,TW3VirtualFileSystemFolder)) {
                  LRoot = $As(LObj,TW3VirtualFileSystemFolder);
               } else {
                  TW3ErrorObject.SetLastErrorF$1(Self,"Invalid path, expected folder not file [%s] error",[Self.FFolderParts[x$42]]);
                  return Result;
               }
            } else {
               TW3ErrorObject.SetLastErrorF$1(Self,"Invalid path, folder [%s] does not exist [%s] in [%s] error",[Self.FFolderParts[x$42], Self.FOriginal, TW3VirtualFileSystemObject.GetPath$2(LRoot)]);
               return Result;
            }
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Nothing to traverse, context was nil error");
         return Result;
      }
      Result = LRoot;
      return Result
   }
   ,Destroy:TW3ErrorObject.Destroy
   ,Create$71:TW3ErrorObject.Create$71
};
TW3VirtualFsParser.$Intf={
   IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TW3VirtualFileSystemObject = class (TW3ErrorObject)
///  [line: 100, column: 3, file: System.FileSystem.Virtual]
var TW3VirtualFileSystemObject = {
   $ClassName:"TW3VirtualFileSystemObject",$Parent:TW3ErrorObject
   ,$Init:function ($) {
      TW3ErrorObject.$Init($);
      $.FName$5 = "";
      $.FParent$1 = $.FRoot = null;
      $.FSize$3 = 0;
   }
   /// constructor TW3VirtualFileSystemObject.Create(const AOwner: TW3VirtualFileSystemFolder)
   ///  [line: 1456, column: 40, file: System.FileSystem.Virtual]
   ,Create$157:function(Self, AOwner) {
      TW3ErrorObject.Create$71(Self);
      Self.FParent$1 = AOwner;
      return Self
   }
   /// function TW3VirtualFileSystemObject.GetName() : String
   ///  [line: 1557, column: 37, file: System.FileSystem.Virtual]
   ,GetName$5:function(Self) {
      return Self.FName$5;
   }
   /// function TW3VirtualFileSystemObject.GetPath() : String
   ///  [line: 1520, column: 37, file: System.FileSystem.Virtual]
   ,GetPath$2:function(Self) {
      var Result = "";
      var LMoniker = "",
         LSeparator = "",
         LItem$3 = null,
         LStack = [],
         LSlice = "";
      LMoniker = TPath.GetRootMoniker$2();
      LSeparator = TPath.GetPathSeparator$2();
      if (Self.FParent$1 !== null) {
         LItem$3 = Self;
         while (LItem$3 !== null) {
            LSlice = TW3VirtualFileSystemObject.GetName$5(LItem$3);
            if (LSlice.length > 0) {
               LStack.push(LSlice);
            }
            LItem$3 = LItem$3.FParent$1;
         }
         LStack.reverse();
         Result = LMoniker + LStack.join(LSeparator);
      } else {
         Result = LMoniker + TW3VirtualFileSystemObject.GetName$5(Self);
      }
      return Result
   }
   /// function TW3VirtualFileSystemObject.GetSize() : Integer
   ///  [line: 1562, column: 37, file: System.FileSystem.Virtual]
   ,GetSize$11:function(Self) {
      return Self.FSize$3;
   }
   /// procedure TW3VirtualFileSystemObject.LoadFromStream(const Stream: TStream)
   ///  [line: 1462, column: 38, file: System.FileSystem.Virtual]
   ,LoadFromStream$3:function(Self, Stream$1) {
      var Reader = null;
      TW3ErrorObject.ClearLastError$1(Self);
      Reader = TStreamReader.Create$119($New(TStreamReader),Stream$1);
      try {
         try {
            TW3VirtualFileSystemObject.ReadFileObjectData$(Self,Reader);
         } catch ($e) {
            var e$1 = $W($e);
            TW3ErrorObject.SetLastErrorF$1(Self,"method [%s] failed, IO threw exception %s with message %s",["TW3VirtualFileSystemObject.LoadFromStream", TObject.ClassName(e$1.ClassType), e$1.FMessage])         }
      } finally {
         TObject.Free(Reader);
      }
   }
   /// procedure TW3VirtualFileSystemObject.ReadFileObjectData(const Reader: TStreamReader)
   ///  [line: 1507, column: 38, file: System.FileSystem.Virtual]
   ,ReadFileObjectData:function(Self, Reader) {
      var Header$1 = 0;
      Header$1 = TW3CustomReader.ReadInteger$1(Reader);
      if (Header$1 == 3133065982) {
         Self.FSize$3 = TW3CustomReader.ReadInteger$1(Reader);
         Self.FName$5 = TW3CustomReader.ReadString$2(Reader);
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method \"%s\" failed, invalid header: expected [$%s] not [$%s] error",["TW3VirtualFileSystemObject.ReadFileObjectData", "BABECAFE", IntToHex(Header$1,8)]);
      }
   }
   /// procedure TW3VirtualFileSystemObject.SaveToStream(const Stream: TStream)
   ///  [line: 1482, column: 38, file: System.FileSystem.Virtual]
   ,SaveToStream$2:function(Self, Stream$1) {
      var Writer = null;
      TW3ErrorObject.ClearLastError$1(Self);
      Writer = TStreamWriter.Create$117($New(TStreamWriter),Stream$1);
      try {
         try {
            TW3VirtualFileSystemObject.WriteFileObjectData$(Self,Writer);
         } catch ($e) {
            var e$1 = $W($e);
            TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, IO threw exception %s with message %s",["TW3VirtualFileSystemObject.SaveToStream", TObject.ClassName(e$1.ClassType), e$1.FMessage])         }
      } finally {
         TObject.Free(Writer);
      }
   }
   /// procedure TW3VirtualFileSystemObject.SetName(const NewName: String)
   ///  [line: 1552, column: 38, file: System.FileSystem.Virtual]
   ,SetName$5:function(Self, NewName) {
      Self.FName$5 = NewName;
   }
   /// procedure TW3VirtualFileSystemObject.SetRoot(const RootObj: TW3VirtualFileSystem)
   ///  [line: 1547, column: 39, file: System.FileSystem.Virtual]
   ,SetRoot:function(Self, RootObj) {
      Self.FRoot = RootObj;
   }
   /// procedure TW3VirtualFileSystemObject.SetSize(const NewSize: Integer)
   ///  [line: 1567, column: 38, file: System.FileSystem.Virtual]
   ,SetSize$13:function(Self, NewSize) {
      Self.FSize$3 = NewSize;
   }
   /// procedure TW3VirtualFileSystemObject.WriteFileObjectData(const Writer: TStreamWriter)
   ///  [line: 1500, column: 38, file: System.FileSystem.Virtual]
   ,WriteFileObjectData:function(Self, Writer) {
      TW3CustomWriter.WriteInteger(Writer,3133065982);
      TW3CustomWriter.WriteInteger(Writer,Self.FSize$3);
      TW3CustomWriter.WriteString$1(Writer,Self.FName$5);
   }
   ,Destroy:TW3ErrorObject.Destroy
   ,Create$71:TW3ErrorObject.Create$71
   ,LoadFromStream$3$:function($){return $.ClassType.LoadFromStream$3.apply($.ClassType, arguments)}
   ,ReadFileObjectData$:function($){return $.ClassType.ReadFileObjectData.apply($.ClassType, arguments)}
   ,WriteFileObjectData$:function($){return $.ClassType.WriteFileObjectData.apply($.ClassType, arguments)}
};
TW3VirtualFileSystemObject.$Intf={
   IW3FileSystemObject:[TW3VirtualFileSystemObject.SetRoot,TW3VirtualFileSystemObject.SetName$5,TW3VirtualFileSystemObject.SetSize$13,TW3VirtualFileSystemObject.GetPath$2,TW3VirtualFileSystemObject.GetName$5,TW3VirtualFileSystemObject.GetSize$11,TW3VirtualFileSystemObject.WriteFileObjectData,TW3VirtualFileSystemObject.ReadFileObjectData]
   ,IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TW3VirtualFileSystemFolder = class (TW3VirtualFileSystemObject)
///  [line: 142, column: 3, file: System.FileSystem.Virtual]
var TW3VirtualFileSystemFolder = {
   $ClassName:"TW3VirtualFileSystemFolder",$Parent:TW3VirtualFileSystemObject
   ,$Init:function ($) {
      TW3VirtualFileSystemObject.$Init($);
      $.FChildren$1 = [];
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 158, column: 35, file: System.FileSystem.Virtual]
   ,a$302:function(Self) {
      var Result = 0;
      Result = Self.FChildren$1.length;
      return Result
   }
   /// anonymous TSourceMethodSymbol
   ///  [line: 157, column: 70, file: System.FileSystem.Virtual]
   ,a$301:function(Self, Index$6) {
      var Result = null;
      Result = Self.FChildren$1[Index$6];
      return Result
   }
   /// function TW3VirtualFileSystemFolder.AddChildObject(const NewItem: TW3VirtualFileSystemObject) : TW3VirtualFileSystemObject
   ///  [line: 1246, column: 37, file: System.FileSystem.Virtual]
   ,AddChildObject:function(Self, NewItem) {
      var Result = null;
      var Index$6 = 0;
      TW3ErrorObject.ClearLastError$1(Self);
      if (NewItem !== null) {
         Result = NewItem;
         Index$6 = Self.FChildren$1.indexOf(NewItem);
         if (Index$6 < 0) {
            Self.FChildren$1.push(NewItem);
            TW3VirtualFileSystemFolder.DoItemAdded(Self,NewItem);
         } else {
            TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, child object already in collection error",["TW3VirtualFileSystemFolder.AddChildObject"]);
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, child object was nil error",["TW3VirtualFileSystemFolder.AddChildObject"]);
      }
      return Result
   }
   /// procedure TW3VirtualFileSystemFolder.Clear()
   ///  [line: 1411, column: 38, file: System.FileSystem.Virtual]
   ,Clear$15:function(Self) {
      var x$42 = 0;
      TW3ErrorObject.ClearLastError$1(Self);
      try {
         var $temp125;
         for(x$42=0,$temp125=Self.FChildren$1.length;x$42<$temp125;x$42++) {
            TW3VirtualFileSystemFolder.DoItemRemoved(Self,Self.FChildren$1[x$42]);
            TObject.Free(Self.FChildren$1[x$42]);
         }
      } finally {
         Self.FChildren$1.length=0;
      }
   }
   /// procedure TW3VirtualFileSystemFolder.DoItemAdded(const Item: TW3VirtualFileSystemObject)
   ///  [line: 1216, column: 38, file: System.FileSystem.Virtual]
   ,DoItemAdded:function(Self, Item$3) {
      var LAccess = null;
      TW3ErrorObject.ClearLastError$1(Self);
      if (Self.FRoot !== null) {
         if (Self.FRoot !== Self) {
            LAccess = $AsIntf(Self.FRoot,"IW3VirtualFileSystem");
            LAccess[1](Item$3);
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, root reference is nil error",["TW3VirtualFileSystemFolder.DoItemAdded"]);
      }
   }
   /// procedure TW3VirtualFileSystemFolder.DoItemRemoved(const Item: TW3VirtualFileSystemObject)
   ///  [line: 1231, column: 38, file: System.FileSystem.Virtual]
   ,DoItemRemoved:function(Self, Item$3) {
      var LAccess = null;
      TW3ErrorObject.ClearLastError$1(Self);
      if (Self.FRoot !== null) {
         if (Self.FRoot !== Self) {
            LAccess = $AsIntf(Self.FRoot,"IW3VirtualFileSystem");
            LAccess[2](Item$3);
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, root reference is nil error",["TW3VirtualFileSystemFolder.DoItemRemoved"]);
      }
   }
   /// function TW3VirtualFileSystemFolder.GetDirList() : TStrArray
   ///  [line: 1399, column: 37, file: System.FileSystem.Virtual]
   ,GetDirList:function(Self) {
      var Result = [];
      var x$42 = 0;
      TW3ErrorObject.ClearLastError$1(Self);
      var $temp126;
      for(x$42=0,$temp126=TW3VirtualFileSystemFolder.a$302(Self);x$42<$temp126;x$42++) {
         Result.push(TW3VirtualFileSystemObject.GetName$5(TW3VirtualFileSystemFolder.a$301(Self,x$42)));
      }
      return Result
   }
   /// function TW3VirtualFileSystemFolder.GetLocalFileObj(FileName: String) : TW3VirtualFileSystemObject
   ///  [line: 1434, column: 37, file: System.FileSystem.Virtual]
   ,GetLocalFileObj:function(Self, FileName) {
      var Result = null;
      var a$422 = 0,
         Child$1 = null;
      TW3ErrorObject.ClearLastError$1(Self);
      FileName = Trim$_String_((FileName).toLocaleLowerCase());
      if (FileName.length > 0) {
         var a$423 = [];
         a$423 = Self.FChildren$1;
         var $temp127;
         for(a$422=0,$temp127=a$423.length;a$422<$temp127;a$422++) {
            Child$1 = a$423[a$422];
            if ((TW3VirtualFileSystemObject.GetName$5(Child$1)).toLocaleLowerCase() == FileName) {
               Result = Child$1;
               break;
            }
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, filename was empty string error",["TW3VirtualFileSystemFolder.GetLocalFileObj"]);
      }
      return Result
   }
   /// procedure TW3VirtualFileSystemFolder.ReadFileObjectData(const Reader: TStreamReader)
   ///  [line: 1309, column: 38, file: System.FileSystem.Virtual]
   ,ReadFileObjectData:function(Self, Reader) {
      var LChild = null,
         LCount$1 = 0,
         LClassType = 0;
      TW3VirtualFileSystemObject.ReadFileObjectData(Self,Reader);
      if (!(TW3ErrorObject.GetFailed$1(Self))) {
         LCount$1 = TW3CustomReader.ReadInteger$1(Reader);
         if (LCount$1 > 0) {
            while (LCount$1 > 0) {
               LClassType = TW3CustomReader.ReadInteger$1(Reader);
               switch (LClassType) {
                  case 2184 :
                     LChild = TW3VirtualFileSystemObject.Create$157($New(TW3VirtualFileSystemFolder),Self);
                     break;
                  case 1911 :
                     LChild = TW3VirtualFileSystemObject.Create$157($New(TW3VirtualFileSystemFile),Self);
                     break;
               }
               Self.FChildren$1.push(LChild);
               TW3VirtualFileSystemObject.ReadFileObjectData$(LChild,Reader);
               --LCount$1;
            }
         }
      }
   }
   /// procedure TW3VirtualFileSystemFolder.RemoveChildObject(const Item: TW3VirtualFileSystemObject)
   ///  [line: 1269, column: 38, file: System.FileSystem.Virtual]
   ,RemoveChildObject:function(Self, Item$3) {
      var LIndex = 0;
      TW3ErrorObject.ClearLastError$1(Self);
      if (Item$3 !== null) {
         LIndex = Self.FChildren$1.indexOf(Item$3);
         if (LIndex >= 0) {
            TW3VirtualFileSystemFolder.DoItemRemoved(Self,Item$3);
            Self.FChildren$1.splice(LIndex,1)
            ;
            TObject.Free(Item$3);
         } else {
            TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, child object not in collection error",["TW3VirtualFileSystemFolder.RemoveChildObject"]);
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, child object was nil error",["TW3VirtualFileSystemFolder.RemoveChildObject"]);
      }
   }
   /// procedure TW3VirtualFileSystemFolder.WriteFileObjectData(const Writer: TStreamWriter)
   ///  [line: 1287, column: 38, file: System.FileSystem.Virtual]
   ,WriteFileObjectData:function(Self, Writer) {
      var a$424 = 0,
         Child$1 = null;
      TW3VirtualFileSystemObject.WriteFileObjectData(Self,Writer);
      if (!(TW3ErrorObject.GetFailed$1(Self))) {
         var a$425 = [];
         TW3CustomWriter.WriteInteger(Writer,Self.FChildren$1.length);
         a$425 = Self.FChildren$1;
         var $temp128;
         for(a$424=0,$temp128=a$425.length;a$424<$temp128;a$424++) {
            Child$1 = a$425[a$424];
            {var $temp129 = TObject.ClassType(Child$1.ClassType);
               if ($temp129==TW3VirtualFileSystemFolder) {
                  TW3CustomWriter.WriteInteger(Writer,2184)               }
                else if ($temp129==TW3VirtualFileSystemFile) {
                  TW3CustomWriter.WriteInteger(Writer,1911)               }
            }
            TW3VirtualFileSystemObject.WriteFileObjectData$(Child$1,Writer);
         }
      }
   }
   ,Destroy:TW3ErrorObject.Destroy
   ,Create$71:TW3ErrorObject.Create$71
   ,LoadFromStream$3:TW3VirtualFileSystemObject.LoadFromStream$3
   ,ReadFileObjectData$:function($){return $.ClassType.ReadFileObjectData.apply($.ClassType, arguments)}
   ,WriteFileObjectData$:function($){return $.ClassType.WriteFileObjectData.apply($.ClassType, arguments)}
};
TW3VirtualFileSystemFolder.$Intf={
   IW3FileSystemFolder:[TW3VirtualFileSystemFolder.GetLocalFileObj,TW3VirtualFileSystemFolder.AddChildObject,TW3VirtualFileSystemFolder.RemoveChildObject]
   ,IW3FileSystemObject:[TW3VirtualFileSystemObject.SetRoot,TW3VirtualFileSystemObject.SetName$5,TW3VirtualFileSystemObject.SetSize$13,TW3VirtualFileSystemObject.GetPath$2,TW3VirtualFileSystemObject.GetName$5,TW3VirtualFileSystemObject.GetSize$11,TW3VirtualFileSystemFolder.WriteFileObjectData,TW3VirtualFileSystemFolder.ReadFileObjectData]
   ,IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TW3VirtualFileSystemFile = class (TW3VirtualFileSystemObject)
///  [line: 175, column: 3, file: System.FileSystem.Virtual]
var TW3VirtualFileSystemFile = {
   $ClassName:"TW3VirtualFileSystemFile",$Parent:TW3VirtualFileSystemObject
   ,$Init:function ($) {
      TW3VirtualFileSystemObject.$Init($);
      $.FData$3 = [];
   }
   /// function TW3VirtualFileSystemFile.FetchData() : TByteArray
   ///  [line: 290, column: 35, file: System.FileSystem.Virtual]
   ,FetchData:function(Self) {
      var Result = [];
      var Cache = {v:[]};
      if (Self.FRoot !== null) {
         Cache.v = Self.FData$3;
         TW3VirtualFileSystem.DataReadFromFile(Self.FRoot,Self,Cache);
         Result = Cache.v;
      } else {
         Result = Self.FData$3;
      }
      return Result
   }
   /// procedure TW3VirtualFileSystemFile.PutData(const FileData: TByteArray)
   ///  [line: 303, column: 36, file: System.FileSystem.Virtual]
   ,PutData:function(Self, FileData) {
      var Cache = [],
         Access = null;
      if (Self.FRoot !== null) {
         Cache = FileData;
         TW3VirtualFileSystem.DataWrittenToFile(Self.FRoot,Self,Cache);
         Self.FData$3 = Cache;
      } else {
         Self.FData$3 = FileData;
      }
      Access = $AsIntf(Self,"IW3FileSystemObject");
      if (!(Access===null)) {
         Access[2](Self.FData$3.length);
      }
   }
   /// procedure TW3VirtualFileSystemFile.ReadFileObjectData(const Reader: TStreamReader)
   ///  [line: 280, column: 36, file: System.FileSystem.Virtual]
   ,ReadFileObjectData:function(Self, Reader) {
      var LBytes = [],
         LSize = 0;
      TW3VirtualFileSystemObject.ReadFileObjectData(Self,Reader);
      LSize = TW3CustomReader.ReadInteger$1(Reader);
      if (LSize > 0) {
         Self.FData$3 = TW3CustomReader.Read$2(Reader,LSize);
      }
   }
   /// procedure TW3VirtualFileSystemFile.WriteFileObjectData(const Writer: TStreamWriter)
   ///  [line: 272, column: 36, file: System.FileSystem.Virtual]
   ,WriteFileObjectData:function(Self, Writer) {
      TW3VirtualFileSystemObject.WriteFileObjectData(Self,Writer);
      TW3CustomWriter.WriteInteger(Writer,Self.FData$3.length);
      if (Self.FData$3.length > 0) {
         TW3CustomWriter.Write$2(Writer,Self.FData$3);
      }
   }
   ,Destroy:TW3ErrorObject.Destroy
   ,Create$71:TW3ErrorObject.Create$71
   ,LoadFromStream$3:TW3VirtualFileSystemObject.LoadFromStream$3
   ,ReadFileObjectData$:function($){return $.ClassType.ReadFileObjectData.apply($.ClassType, arguments)}
   ,WriteFileObjectData$:function($){return $.ClassType.WriteFileObjectData.apply($.ClassType, arguments)}
};
TW3VirtualFileSystemFile.$Intf={
   IW3FileSystemObject:[TW3VirtualFileSystemObject.SetRoot,TW3VirtualFileSystemObject.SetName$5,TW3VirtualFileSystemObject.SetSize$13,TW3VirtualFileSystemObject.GetPath$2,TW3VirtualFileSystemObject.GetName$5,TW3VirtualFileSystemObject.GetSize$11,TW3VirtualFileSystemFile.WriteFileObjectData,TW3VirtualFileSystemFile.ReadFileObjectData]
   ,IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TW3VirtualFileSystem = class (TW3VirtualFileSystemFolder)
///  [line: 211, column: 3, file: System.FileSystem.Virtual]
var TW3VirtualFileSystem = {
   $ClassName:"TW3VirtualFileSystem",$Parent:TW3VirtualFileSystemFolder
   ,$Init:function ($) {
      TW3VirtualFileSystemFolder.$Init($);
      $.FCurrent$1 = $.FLookup = $.FParser = null;
      $.FObjects$1 = [];
   }
   /// procedure TW3VirtualFileSystem.CdUp()
   ///  [line: 1151, column: 32, file: System.FileSystem.Virtual]
   ,CdUp$2:function(Self) {
      if (Self.FCurrent$1 !== null) {
         if (Self.FCurrent$1.FParent$1 !== null) {
            Self.FCurrent$1 = Self.FCurrent$1.FParent$1;
         }
      } else {
         Self.FCurrent$1 = Self;
      }
   }
   /// function TW3VirtualFileSystem.ChDir(NewPath: String) : Boolean
   ///  [line: 1177, column: 31, file: System.FileSystem.Virtual]
   ,ChDir$2:function(Self, NewPath) {
      var Result = false;
      var LRoot = null;
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if (TW3VirtualFsParser.Parse(Self.FParser,Trim$_String_(NewPath))) {
         LRoot = TW3VirtualFsParser.TraverseToTargetContext(Self.FParser);
         if (TW3ErrorObject.GetFailed$1(Self.FParser)) {
            TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, directory parser failed with [%s]",["TW3VirtualFileSystem.ChDir", Self.FParser.FLastError$1]);
            return Result;
         }
         Self.FCurrent$1 = LRoot;
         Result = true;
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, directory parser failed with [%s]",["TW3VirtualFileSystem.ChDir", Self.FParser.FLastError$1]);
      }
      return Result
   }
   /// constructor TW3VirtualFileSystem.Create()
   ///  [line: 537, column: 34, file: System.FileSystem.Virtual]
   ,Create$158:function(Self) {
      TW3VirtualFileSystemObject.Create$157(Self,null);
      Self.FParser = TW3VirtualFsParser.Create$156($New(TW3VirtualFsParser),Self);
      Self.FLookup = TBTree.Create$159($New(TBTree));
      Self.FCurrent$1 = Self;
      $AsIntf(Self,"IW3FileSystemObject")[0](Self);
      return Self
   }
   /// procedure TW3VirtualFileSystem.DataReadFromFile(const FileSysObj: TW3VirtualFileSystemFile; var Data: TByteArray)
   ///  [line: 565, column: 32, file: System.FileSystem.Virtual]
   ,DataReadFromFile:function(Self, FileSysObj, Data$8) {
      /* null */
   }
   /// procedure TW3VirtualFileSystem.DataWrittenToFile(const FileSysObj: TW3VirtualFileSystemFile; const Data: TByteArray)
   ///  [line: 553, column: 32, file: System.FileSystem.Virtual]
   ,DataWrittenToFile:function(Self, FileSysObj, Data$8) {
      /* null */
   }
   /// destructor TW3VirtualFileSystem.Destroy()
   ///  [line: 546, column: 33, file: System.FileSystem.Virtual]
   ,Destroy:function(Self) {
      TObject.Free(Self.FLookup);
      TObject.Free(Self.FParser);
      TW3ErrorObject.Destroy(Self);
   }
   /// function TW3VirtualFileSystem.DirectoryExists(const FullPath: String) : Boolean
   ///  [line: 773, column: 31, file: System.FileSystem.Virtual]
   ,DirectoryExists:function(Self, FullPath) {
      var Result = false;
      var temp$1 = "",
         FileObj = null;
      TW3ErrorObject.ClearLastError$1(Self);
      temp$1 = Trim$_String_(FullPath);
      if (temp$1.length > 0) {
         FileObj = TW3VirtualFileSystem.FindFileObject(Self,FullPath);
         if (FileObj !== null) {
            Result = $Is(FileObj,TW3VirtualFileSystemFolder);
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: invalid directory-name (empty) error",["TW3VirtualFileSystem.DirectoryExists"]);
      }
      return Result
   }
   /// function TW3VirtualFileSystem.Export() : TStream
   ///  [line: 742, column: 31, file: System.FileSystem.Virtual]
   ,Export:function(Self) {
      var Result = null;
      Result = TMemoryStream.Create$72($New(TMemoryStream));
      TW3VirtualFileSystemObject.SaveToStream$2(Self,Result);
      TStream.SetPosition$(Result,0);
      return Result
   }
   /// function TW3VirtualFileSystem.FileExists(const FileName: String) : Boolean
   ///  [line: 786, column: 31, file: System.FileSystem.Virtual]
   ,FileExists$2:function(Self, FileName) {
      var Result = false;
      var temp$1 = "",
         FileObj = null;
      TW3ErrorObject.ClearLastError$1(Self);
      temp$1 = Trim$_String_(FileName);
      if (temp$1.length > 0) {
         FileObj = TW3VirtualFileSystem.FindFileObject(Self,FileName);
         if (FileObj !== null) {
            Result = $Is(FileObj,TW3VirtualFileSystemFile);
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: invalid filename (empty) error",["TW3VirtualFileSystem.FileExists"]);
      }
      return Result
   }
   /// function TW3VirtualFileSystem.FindFileObject(Filename: String) : TW3VirtualFileSystemObject
   ///  [line: 799, column: 31, file: System.FileSystem.Virtual]
   ,FindFileObject:function(Self, Filename$2) {
      var Result = null;
      var LRoot = null,
         x$42 = 0,
         LPart = "",
         LObj = null;
      TW3ErrorObject.ClearLastError$1(Self);
      if (TW3VirtualFsParser.Parse(Self.FParser,Filename$2)) {
         LRoot = Self.FParser.FContext$3;
         var $temp130;
         for(x$42=0,$temp130=Self.FParser.FFolderParts.length;x$42<$temp130;x$42++) {
            LPart = Self.FParser.FFolderParts[x$42];
            LObj = TW3VirtualFileSystemFolder.GetLocalFileObj(LRoot,LPart);
            if (LObj !== null) {
               if ($Is(LObj,TW3VirtualFileSystemFolder)) {
                  LRoot = $As(LObj,TW3VirtualFileSystemFolder);
               } else {
                  if (Self.FParser.FFilename$1 == "") {
                     if (TPath.GetExtension$2(LPart) == "") {
                        Result = TW3VirtualFileSystemFolder.GetLocalFileObj(LRoot,LPart);
                        return Result;
                     }
                  }
               }
            } else {
               TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: could not cd to folder \"%s\" in path \"%s\" error",["TW3VirtualFileSystem.FindFileObject", LPart, Filename$2]);
               return Result;
            }
         }
         if (Self.FParser.FFilename$1.length > 0) {
            Result = TW3VirtualFileSystemFolder.GetLocalFileObj(LRoot,Self.FParser.FFilename$1);
         } else {
            Result = LRoot;
         }
      } else {
         TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Directory parser could failed with: %s",["TW3VirtualFileSystem.FindFileObject", Self.FParser.FLastError$1]);
      }
      return Result
   }
   /// function TW3VirtualFileSystem.GetCurrent() : TW3VirtualFileSystemFolder
   ///  [line: 768, column: 31, file: System.FileSystem.Virtual]
   ,GetCurrent:function(Self) {
      return Self.FCurrent$1;
   }
   /// procedure TW3VirtualFileSystem.LoadFromStream(const Stream: TStream)
   ///  [line: 762, column: 32, file: System.FileSystem.Virtual]
   ,LoadFromStream$3:function(Self, Stream$1) {
      TW3VirtualFileSystemFolder.Clear$15(Self);
      TW3VirtualFileSystemObject.LoadFromStream$3(Self,Stream$1);
   }
   /// function TW3VirtualFileSystem.MKDir(FolderName: String) : TW3VirtualFileSystemFolder
   ///  [line: 880, column: 31, file: System.FileSystem.Virtual]
   ,MKDir:function(Self, FolderName) {
      FolderName = { v : FolderName };
      var Result = {v:null};
      try {
         var LTarget = null,
            LFileAccess = null,
            LFolderAccess = null,
            LMoniker = "",
            LSeparator = "",
            LComputedTargetPath = "";
         TW3ErrorObject.ClearLastError$1(Self);
         LMoniker = TPath.GetRootMoniker$2();
         LSeparator = TPath.GetPathSeparator$2();
         FolderName.v = Trim$_String_(FolderName.v);
         if (FolderName.v.length > 0) {
            if (StrBeginsWith(FolderName.v,LMoniker)) {
               LTarget = Self;
            } else {
               LTarget = TW3VirtualFileSystem.GetCurrent(Self);
            }
            if (StrBeginsWith(FolderName.v,LMoniker)) {
               if (!(TW3VirtualFileSystem.ChDir$2(Self,TPath.GetDirectoryName$2(FolderName.v)))) {
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Could not find path \"%s\" error",["TW3VirtualFileSystem.MKDir", FolderName.v]);
                  return Result.v;
               }
            } else {
               if (StrBeginsWith(FolderName.v,LSeparator)) {
                  Delete(FolderName,1,1);
               }
               if (((FolderName.v).indexOf(LSeparator)>=0)) {
                  LComputedTargetPath = TW3VirtualFileSystemObject.GetPath$2(LTarget);
                  LComputedTargetPath += TPath.GetDirectoryName$2(FolderName.v);
                  FolderName.v = TPath.GetFileName$2(FolderName.v);
                  TW3VirtualFsParser.Parse(Self.FParser,LComputedTargetPath);
                  LTarget = TW3VirtualFsParser.TraverseToTargetContext(Self.FParser);
                  if (TW3ErrorObject.GetFailed$1(Self.FParser)) {
                     TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Could not add folder object, directory parser failed with: \"%s\"",["TW3VirtualFileSystem.MKDir", Self.FParser.FLastError$1]);
                     return Result.v;
                  }
               }
            }
            if (TW3VirtualFileSystemFolder.GetLocalFileObj(LTarget,FolderName.v) === null) {
               try {
                  Result.v = TW3VirtualFileSystemObject.Create$157($New(TW3VirtualFileSystemFolder),LTarget);
               } catch ($e) {
                  var e$1 = $W($e);
                  Result.v = null;
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Could not create folder-object, system threw exception %s with message [%s]",["TW3VirtualFileSystem.MKDir", TObject.ClassName(e$1.ClassType), e$1.FMessage]);
               }
               try {
                  LFileAccess = $AsIntf(Result.v,"IW3FileSystemObject");
                  LFileAccess[0](Self);
                  LFileAccess[1](FolderName.v);
               } catch ($e) {
                  var e$2 = $W($e);
                  TObject.Free(Result.v);
                  Result.v = null;
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Could not set name attribute on folder-object, system threw exception %s with message [%s]",["TW3VirtualFileSystem.MKDir", TObject.ClassName(e$2.ClassType), e$2.FMessage]);
               }
               try {
                  LFolderAccess = $AsIntf(LTarget,"IW3FileSystemFolder");
                  LFolderAccess[1](Result.v);
               } catch ($e) {
                  var e$3 = $W($e);
                  TObject.Free(Result.v);
                  Result.v = null;
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Could not add folder to filesystem, system threw exception %s with message [%s]",["TW3VirtualFileSystem.MKDir", TObject.ClassName(e$3.ClassType), e$3.FMessage]);
                  return Result.v;
               }
            } else {
               TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Folder \"%s\" already exists error",["TW3VirtualFileSystem.MKDir", FolderName.v]);
            }
         } else {
            TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: Foldername was empty error",["TW3VirtualFileSystem.MKDir"]);
         }
      } finally {return Result.v}
   }
   /// function TW3VirtualFileSystem.MKFile(FileName: String; const Data: TByteArray) : TW3VirtualFileSystemFile
   ///  [line: 983, column: 31, file: System.FileSystem.Virtual]
   ,MKFile:function(Self, FileName, Data$8) {
      FileName = { v : FileName };
      var Result = {v:null};
      try {
         var LTarget = null,
            LComputedTargetPath = "",
            LFileAccess = null,
            LFolderAccess = null,
            LMoniker = "",
            LSeparator = "",
            LObj = null;
         TW3ErrorObject.ClearLastError$1(Self);
         FileName.v = Trim$_String_(FileName.v);
         if (FileName.v.length > 0) {
            LMoniker = TPath.GetRootMoniker$2();
            LSeparator = TPath.GetPathSeparator$2();
            if (StrBeginsWith(FileName.v,LMoniker)) {
               LTarget = Self;
            } else {
               LTarget = TW3VirtualFileSystem.GetCurrent(Self);
            }
            if (StrBeginsWith(FileName.v,LMoniker)) {
               if (!(TW3VirtualFileSystem.ChDir$2(Self,TPath.GetDirectoryName$2(FileName.v)))) {
                  return Result.v;
               }
               LTarget = TW3VirtualFileSystem.GetCurrent(Self);
               FileName.v = TPath.GetFileName$2(FileName.v);
               if (!(TPath.HasValidFileNameChars$2(FileName.v))) {
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed: invalid filename [%s] error",["TW3VirtualFileSystem.MKFile", FileName.v]);
                  return Result.v;
               }
            } else {
               if (StrBeginsWith(FileName.v,LSeparator)) {
                  Delete(FileName,1,LSeparator.length);
               }
               if (((FileName.v).indexOf(LSeparator)>=0)) {
                  LComputedTargetPath = TW3VirtualFileSystemObject.GetPath$2(LTarget);
                  LComputedTargetPath += TPath.GetDirectoryName$2(FileName.v);
                  FileName.v = TPath.GetFileName$2(FileName.v);
                  LComputedTargetPath = TPath.IncludeTrailingPathDelimiter$2(LComputedTargetPath) + FileName.v;
                  TW3VirtualFsParser.Parse(Self.FParser,LComputedTargetPath);
                  LTarget = TW3VirtualFsParser.TraverseToTargetContext(Self.FParser);
                  if (TW3ErrorObject.GetFailed$1(Self.FParser)) {
                     TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed with message [%s]",["TW3VirtualFileSystem.MKFile", FileName.v, Self.FParser.FLastError$1]);
                     return Result.v;
                  }
                  FileName.v = Self.FParser.FFilename$1;
                  if (FileName.v.length < 1) {
                     TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, filename-part was empty error",["TW3VirtualFileSystem.MKFile", LComputedTargetPath]);
                     return Result.v;
                  }
               }
            }
            LObj = TW3VirtualFileSystemFolder.GetLocalFileObj(LTarget,FileName.v);
            if (LObj !== null) {
               if ($Is(LObj,TW3VirtualFileSystemFile)) {
                  Result.v = $As(LObj,TW3VirtualFileSystemFile);
               } else {
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed. Existing filesystem-object [%s] is a folder, expected file error",["TW3VirtualFileSystem.MKFile", FileName.v]);
                  return Result.v;
               }
            }
            if (Result.v === null) {
               try {
                  Result.v = TW3VirtualFileSystemObject.Create$157($New(TW3VirtualFileSystemFile),LTarget);
               } catch ($e) {
                  var e$1 = $W($e);
                  Result.v = null;
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, could not create filesystem object. System threw exception %s with message [%s]",["TW3VirtualFileSystem.MKFile", TObject.ClassName(e$1.ClassType), e$1.FMessage]);
                  return Result.v;
               }
               try {
                  LFileAccess = $AsIntf(Result.v,"IW3FileSystemObject");
                  LFileAccess[0](Self);
                  LFileAccess[1](FileName.v);
               } catch ($e) {
                  var e$2 = $W($e);
                  TObject.Free(Result.v);
                  Result.v = null;
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, could not set object attributes",["TW3VirtualFileSystem.MKFile"]);
                  return Result.v;
               }
               try {
                  LFolderAccess = $AsIntf(LTarget,"IW3FileSystemFolder");
                  LFolderAccess[1](Result.v);
               } catch ($e) {
                  var e$3 = $W($e);
                  TObject.Free(Result.v);
                  Result.v = null;
                  TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, could not add filesystem-object to collection",["TW3VirtualFileSystem.MKFile"]);
                  return Result.v;
               }
            }
            TW3VirtualFileSystemFile.PutData(Result.v,Data$8);
         } else {
            TW3ErrorObject.SetLastErrorF$1(Self,"Method [%s] failed, filename was empty error",["TW3VirtualFileSystem.MKFile"]);
         }
      } finally {return Result.v}
   }
   /// procedure TW3VirtualFileSystem.RegisterNewFileSystemObject(const FileSysObj: TW3VirtualFileSystemObject)
   ///  [line: 577, column: 32, file: System.FileSystem.Virtual]
   ,RegisterNewFileSystemObject:function(Self, FileSysObj) {
      var LAccess = null;
      if (FileSysObj !== null) {
         Self.FObjects$1.push(FileSysObj);
         LAccess = $AsIntf(FileSysObj,"IW3FileSystemObject");
         TBTree.Add$6(Self.FLookup,LAccess[3](),FileSysObj);
      }
   }
   /// procedure TW3VirtualFileSystem.RmDir(const PathName: String)
   ///  [line: 876, column: 32, file: System.FileSystem.Virtual]
   ,RmDir:function(Self, PathName) {
      /* null */
   }
   /// procedure TW3VirtualFileSystem.UnRegisterFileSystemObject(const FileSysObj: TW3VirtualFileSystemObject)
   ///  [line: 592, column: 32, file: System.FileSystem.Virtual]
   ,UnRegisterFileSystemObject:function(Self, FileSysObj) {
      var LIndex = 0,
         LAccess = null;
      if (FileSysObj !== null) {
         LIndex = Self.FObjects$1.indexOf(FileSysObj);
         if (LIndex >= 0) {
            Self.FObjects$1.splice(LIndex,1)
            ;
         }
         LAccess = $AsIntf(FileSysObj,"IW3FileSystemObject");
         TBTree.Remove$7(Self.FLookup,LAccess[3]());
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$71:TW3ErrorObject.Create$71
   ,LoadFromStream$3$:function($){return $.ClassType.LoadFromStream$3.apply($.ClassType, arguments)}
   ,ReadFileObjectData:TW3VirtualFileSystemFolder.ReadFileObjectData
   ,WriteFileObjectData:TW3VirtualFileSystemFolder.WriteFileObjectData
};
TW3VirtualFileSystem.$Intf={
   IW3VirtualFileSystem:[TW3VirtualFileSystem.FindFileObject,TW3VirtualFileSystem.RegisterNewFileSystemObject,TW3VirtualFileSystem.UnRegisterFileSystemObject,TW3VirtualFileSystem.DataWrittenToFile,TW3VirtualFileSystem.DataReadFromFile]
   ,IW3FileSystemObject:[TW3VirtualFileSystemObject.SetRoot,TW3VirtualFileSystemObject.SetName$5,TW3VirtualFileSystemObject.SetSize$13,TW3VirtualFileSystemObject.GetPath$2,TW3VirtualFileSystemObject.GetName$5,TW3VirtualFileSystemObject.GetSize$11,TW3VirtualFileSystemFolder.WriteFileObjectData,TW3VirtualFileSystemFolder.ReadFileObjectData]
   ,IW3FileSystemFolder:[TW3VirtualFileSystemFolder.GetLocalFileObj,TW3VirtualFileSystemFolder.AddChildObject,TW3VirtualFileSystemFolder.RemoveChildObject]
   ,IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TBTreeNode = class (JObject)
///  [line: 24, column: 3, file: System.BTree]
function TBTreeNode() {
}
$Extend(Object,TBTreeNode,
   {
      "Ident" : 0,
      "Data" : undefined,
      "Left" : null,
      "Right" : null
   });

/// TBTree = class (TObject)
///  [line: 39, column: 3, file: System.BTree]
var TBTree = {
   $ClassName:"TBTree",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FCurrent$2 = $.FRoot$1 = null;
   }
   /// function TBTree.Add(const Ident: Integer; const Data: Variant) : TBTreeNode
   ///  [line: 275, column: 17, file: System.BTree]
   ,Add$7:function(Self, Ident$1, Data$8) {
      var Result = null;
      var LNode = null;
      LNode = new TBTreeNode();
      LNode.Ident = Ident$1;
      LNode.Data = Data$8;
      if (Self.FRoot$1 === null) {
         Self.FRoot$1 = LNode;
      }
      Self.FCurrent$2 = Self.FRoot$1;
      while (1) {
         if (Ident$1 < Self.FCurrent$2.Ident) {
            if (Self.FCurrent$2.Left === null) {
               Self.FCurrent$2.Left = LNode;
               break;
            } else {
               Self.FCurrent$2 = Self.FCurrent$2.Left;
            }
         } else if (Ident$1 > Self.FCurrent$2.Ident) {
            if (Self.FCurrent$2.Right === null) {
               Self.FCurrent$2.Right = LNode;
               break;
            } else {
               Self.FCurrent$2 = Self.FCurrent$2.Right;
            }
         } else {
            break;
         }
      }
      Result = LNode;
      return Result
   }
   /// function TBTree.Add(const Ident: String; const Data: Variant) : TBTreeNode
   ///  [line: 270, column: 17, file: System.BTree]
   ,Add$6:function(Self, Ident$1, Data$8) {
      return TBTree.Add$7(Self,TString.CalcCRC(TString,Ident$1),Data$8);
   }
   /// constructor TBTree.Create()
   ///  [line: 93, column: 20, file: System.BTree]
   ,Create$159:function(Self) {
      TObject.Create(Self);
      Self.FRoot$1 = null;
      Self.FCurrent$2 = null;
      return Self
   }
   /// function TBTree.Remove(const Ident: String) : Boolean
   ///  [line: 382, column: 17, file: System.BTree]
   ,Remove$7:function(Self, Ident$1) {
      return TBTree.Remove$6(Self,TString.CalcCRC(TString,Ident$1));
   }
   /// function TBTree.Remove(const Ident: Integer) : Boolean
   ///  [line: 387, column: 17, file: System.BTree]
   ,Remove$6:function(Self, Ident$1) {
      var Result = false;
      var LFound$1 = false,
         LParent = null,
         LChildCount = 0,
         LReplacement = null,
         LReplacementParent = null;
      LFound$1 = false;
      LParent = null;
      Self.FCurrent$2 = Self.FRoot$1;
      while ((!(LFound$1)) && Self.FCurrent$2 !== null) {
         if (Ident$1 < Self.FCurrent$2.Ident) {
            LParent = Self.FCurrent$2;
            Self.FCurrent$2 = Self.FCurrent$2.Left;
         } else if (Ident$1 > Self.FCurrent$2.Ident) {
            LParent = Self.FCurrent$2;
            Self.FCurrent$2 = Self.FCurrent$2.Right;
         } else {
            LFound$1 = true;
         }
         if (LFound$1) {
            LChildCount = 0;
            if (Self.FCurrent$2.Left !== null) {
               ++LChildCount;
            }
            if (Self.FCurrent$2.Right !== null) {
               ++LChildCount;
            }
            if (Self.FCurrent$2 === Self.FRoot$1) {
               switch (LChildCount) {
                  case 0 :
                     Self.FRoot$1 = null;
                     break;
                  case 1 :
                     Self.FRoot$1 = (Self.FCurrent$2.Right === null)?Self.FCurrent$2.Left:Self.FCurrent$2.Right;
                     break;
                  case 2 :
                     LReplacement = Self.FRoot$1.Left;
                     while (LReplacement.Right !== null) {
                        LReplacementParent = LReplacement;
                        LReplacement = LReplacement.Right;
                     }
                     if (LReplacementParent !== null) {
                        LReplacementParent.Right = LReplacement.Left;
                        LReplacement.Right = Self.FRoot$1.Right;
                        LReplacement.Left = Self.FRoot$1.Left;
                     } else {
                        LReplacement.Right = Self.FRoot$1.Right;
                     }
                     break;
               }
               Self.FRoot$1 = LReplacement;
            } else {
               switch (LChildCount) {
                  case 0 :
                     if (Self.FCurrent$2.Ident < LParent.Ident) {
                        LParent.Left = null;
                     } else {
                        LParent.Right = null;
                     }
                     break;
                  case 1 :
                     if (Self.FCurrent$2.Ident < LParent.Ident) {
                        if (Self.FCurrent$2.Left === null) {
                           LParent.Left = Self.FCurrent$2.Right;
                        } else {
                           LParent.Left = Self.FCurrent$2.Left;
                        }
                     } else if (Self.FCurrent$2.Left === null) {
                        LParent.Right = Self.FCurrent$2.Right;
                     } else {
                        LParent.Right = Self.FCurrent$2.Left;
                     }
                     break;
                  case 2 :
                     LReplacement = Self.FCurrent$2.Left;
                     LReplacementParent = Self.FCurrent$2;
                     while (LReplacement.Right !== null) {
                        LReplacementParent = LReplacement;
                        LReplacement = LReplacement.Right;
                     }
                     LReplacementParent.Right = LReplacement.Left;
                     LReplacement.Right = Self.FCurrent$2.Right;
                     LReplacement.Left = Self.FCurrent$2.Left;
                     if (Self.FCurrent$2.Ident < LParent.Ident) {
                        LParent.Left = LReplacement;
                     } else {
                        LParent.Right = LReplacement;
                     }
                     break;
               }
            }
         }
      }
      Result = LFound$1;
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TNameValuePairData = record
///  [line: 29, column: 3, file: System.NameValuePairs]
function Copy$TNameValuePairData(s,d) {
   d.pdName=s.pdName;
   d.pdValue=s.pdValue;
   return d;
}
function Clone$TNameValuePairData($) {
   return {
      pdName:$.pdName,
      pdValue:$.pdValue
   }
}
/// TNameValuePair = class (TObject)
///  [line: 39, column: 3, file: System.NameValuePairs]
var TNameValuePair = {
   $ClassName:"TNameValuePair",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FData$4 = {pdName:"",pdValue:undefined};
   }
   /// procedure TNameValuePair.Clear()
   ///  [line: 126, column: 26, file: System.NameValuePairs]
   ,Clear$18:function(Self) {
      Self.FData$4.pdName = "";
      Self.FData$4.pdValue = null;
   }
   /// constructor TNameValuePair.Create()
   ///  [line: 120, column: 28, file: System.NameValuePairs]
   ,Create$160:function(Self) {
      TObject.Create(Self);
      TNameValuePair.Clear$18(Self);
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TW3DirectoryParser = class (TW3ErrorObject)
///  [line: 49, column: 3, file: System.IOUtils]
var TW3DirectoryParser = {
   $ClassName:"TW3DirectoryParser",$Parent:TW3ErrorObject
   ,$Init:function ($) {
      TW3ErrorObject.$Init($);
   }
   /// function TW3DirectoryParser.GetErrorObject() : IW3ErrorAccess
   ///  [line: 176, column: 29, file: System.IOUtils]
   ,GetErrorObject:function(Self) {
      return $AsIntf(Self,"IW3ErrorAccess");
   }
   /// function TW3DirectoryParser.IsPathRooted(FilePath: String) : Boolean
   ///  [line: 181, column: 29, file: System.IOUtils]
   ,IsPathRooted:function(Self, FilePath) {
      var Result = false;
      var LMoniker = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      FilePath = (Trim$_String_(FilePath)).toLocaleLowerCase();
      if (FilePath.length > 0) {
         LMoniker = TW3DirectoryParser.GetRootMoniker$(Self);
         Result = StrBeginsWith(FilePath,LMoniker);
      }
      return Result
   }
   /// function TW3DirectoryParser.IsRelativePath(FilePath: String) : Boolean
   ///  [line: 194, column: 29, file: System.IOUtils]
   ,IsRelativePath:function(Self, FilePath) {
      var Result = false;
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if (TW3DirectoryParser.IsValidPath$(Self,FilePath)) {
         Result = !(StrBeginsWith(FilePath,TW3DirectoryParser.GetRootMoniker$(Self)));
      }
      return Result
   }
   ,Destroy:TW3ErrorObject.Destroy
   ,Create$71:TW3ErrorObject.Create$71
   ,ChangeFileExt$:function($){return $.ClassType.ChangeFileExt.apply($.ClassType, arguments)}
   ,ExcludeLeadingPathDelimiter$:function($){return $.ClassType.ExcludeLeadingPathDelimiter.apply($.ClassType, arguments)}
   ,ExcludeTrailingPathDelimiter$:function($){return $.ClassType.ExcludeTrailingPathDelimiter.apply($.ClassType, arguments)}
   ,GetDevice$:function($){return $.ClassType.GetDevice.apply($.ClassType, arguments)}
   ,GetDirectoryName$:function($){return $.ClassType.GetDirectoryName.apply($.ClassType, arguments)}
   ,GetExtension$:function($){return $.ClassType.GetExtension.apply($.ClassType, arguments)}
   ,GetFileName$:function($){return $.ClassType.GetFileName.apply($.ClassType, arguments)}
   ,GetFileNameWithoutExtension$:function($){return $.ClassType.GetFileNameWithoutExtension.apply($.ClassType, arguments)}
   ,GetPathName$:function($){return $.ClassType.GetPathName.apply($.ClassType, arguments)}
   ,GetPathSeparator$:function($){return $.ClassType.GetPathSeparator($)}
   ,GetRootMoniker$:function($){return $.ClassType.GetRootMoniker($)}
   ,HasValidFileNameChars$:function($){return $.ClassType.HasValidFileNameChars.apply($.ClassType, arguments)}
   ,HasValidPathChars$:function($){return $.ClassType.HasValidPathChars.apply($.ClassType, arguments)}
   ,IncludeLeadingPathDelimiter$:function($){return $.ClassType.IncludeLeadingPathDelimiter.apply($.ClassType, arguments)}
   ,IncludeTrailingPathDelimiter$:function($){return $.ClassType.IncludeTrailingPathDelimiter.apply($.ClassType, arguments)}
   ,IsValidPath$:function($){return $.ClassType.IsValidPath.apply($.ClassType, arguments)}
};
TW3DirectoryParser.$Intf={
   IW3DirectoryParser:[TW3DirectoryParser.GetPathSeparator,TW3DirectoryParser.GetRootMoniker,TW3DirectoryParser.GetErrorObject,TW3DirectoryParser.IsValidPath,TW3DirectoryParser.HasValidPathChars,TW3DirectoryParser.HasValidFileNameChars,TW3DirectoryParser.IsRelativePath,TW3DirectoryParser.IsPathRooted,TW3DirectoryParser.GetFileNameWithoutExtension,TW3DirectoryParser.GetPathName,TW3DirectoryParser.GetDevice,TW3DirectoryParser.GetFileName,TW3DirectoryParser.GetExtension,TW3DirectoryParser.GetDirectoryName,TW3DirectoryParser.IncludeTrailingPathDelimiter,TW3DirectoryParser.IncludeLeadingPathDelimiter,TW3DirectoryParser.ExcludeLeadingPathDelimiter,TW3DirectoryParser.ExcludeTrailingPathDelimiter,TW3DirectoryParser.ChangeFileExt]
   ,IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TW3UnixDirectoryParser = class (TW3DirectoryParser)
///  [line: 81, column: 3, file: System.IOUtils]
var TW3UnixDirectoryParser = {
   $ClassName:"TW3UnixDirectoryParser",$Parent:TW3DirectoryParser
   ,$Init:function ($) {
      TW3DirectoryParser.$Init($);
   }
   /// function TW3UnixDirectoryParser.ChangeFileExt(const FilePath: String; NewExt: String) : String
   ///  [line: 670, column: 33, file: System.IOUtils]
   ,ChangeFileExt:function(Self, FilePath, NewExt) {
      NewExt = { v : NewExt };
      var Result = "";
      var Separator = "",
         x$42 = 0;
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      Separator = TW3DirectoryParser.GetPathSeparator$(Self);
      if (StrEndsWith(FilePath,Separator)) {
         TW3ErrorObject.SetLastError$1(Self,"Failed to change extension, path has no filename error");
         Result = FilePath;
         return Result;
      }
      NewExt.v = Trim$_String_(NewExt.v);
      while ((NewExt.v.charAt(0)==".")) {
         Delete(NewExt,1,1);
         if (NewExt.v.length < 1) {
            break;
         }
      }
      if (NewExt.v.length > 0) {
         NewExt.v = "." + NewExt.v;
      }
      for(x$42=FilePath.length;x$42>=1;x$42--) {
         {var $temp131 = FilePath.charAt(x$42-1);
            if ($temp131==".") {
               Result = FilePath.substr(0,(x$42-1)) + NewExt.v;
               break;
            }
             else if ($temp131==Separator) {
               Result = FilePath + NewExt.v;
               break;
            }
         }
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.ExcludeLeadingPathDelimiter(const FilePath: String) : String
   ///  [line: 723, column: 33, file: System.IOUtils]
   ,ExcludeLeadingPathDelimiter:function(Self, FilePath) {
      var Result = "";
      if (StrBeginsWith(FilePath,TW3DirectoryParser.GetPathSeparator$(Self))) {
         Result = FilePath.substr(1);
      } else {
         Result = FilePath;
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.ExcludeTrailingPathDelimiter(const FilePath: String) : String
   ///  [line: 739, column: 33, file: System.IOUtils]
   ,ExcludeTrailingPathDelimiter:function(Self, FilePath) {
      var Result = "";
      if (StrEndsWith(FilePath,TW3DirectoryParser.GetPathSeparator$(Self))) {
         Result = FilePath.substr(0,FilePath.length-1);
      } else {
         Result = FilePath;
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetDevice(const FilePath: String) : String
   ///  [line: 517, column: 33, file: System.IOUtils]
   ,GetDevice:function(Self, FilePath) {
      var Result = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if (FilePath.length > 0) {
         if (StrBeginsWith(FilePath,TW3DirectoryParser.GetRootMoniker$(Self))) {
            Result = TW3DirectoryParser.GetRootMoniker$(Self);
         } else {
            Result = "";
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Failed to extract device, path was empty error");
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetDirectoryName(const FilePath: String) : String
   ///  [line: 604, column: 33, file: System.IOUtils]
   ,GetDirectoryName:function(Self, FilePath) {
      var Result = "";
      var Separator = "",
         NameParts = [];
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if (FilePath.length > 0) {
         Separator = TW3DirectoryParser.GetPathSeparator$(Self);
         if (StrEndsWith(FilePath,Separator)) {
            Result = FilePath;
            return Result;
         }
         NameParts = FilePath.split(Separator);
         NameParts.splice((NameParts.length-1),1)
         ;
         Result = NameParts.join(Separator) + Separator;
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Failed to extract directory, path was empty error");
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetExtension(const Filename: String) : String
   ///  [line: 627, column: 33, file: System.IOUtils]
   ,GetExtension:function(Self, Filename$2) {
      var Result = "";
      var Separator = "",
         x$42 = 0,
         dx$3 = 0;
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if (Filename$2.length > 0) {
         Separator = TW3DirectoryParser.GetPathSeparator$(Self);
         if (StrEndsWith(Filename$2,Separator)) {
            TW3ErrorObject.SetLastError$1(Self,"Failed to extract extension, path contains no filename error");
         } else {
            for(x$42=Filename$2.length;x$42>=1;x$42--) {
               {var $temp132 = Filename$2.charAt(x$42-1);
                  if ($temp132==".") {
                     dx$3 = Filename$2.length;
                     (dx$3-= x$42);
                     ++dx$3;
                     Result = RightStr(Filename$2,dx$3);
                     break;
                  }
                   else if ($temp132==Separator) {
                     break;
                  }
               }
            }
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Failed to extract extension, filename was empty error");
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetFileName(const FilePath: String) : String
   ///  [line: 585, column: 33, file: System.IOUtils]
   ,GetFileName:function(Self, FilePath) {
      var Result = "";
      var Temp$1 = "",
         Separator = "",
         Parts = [];
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      Temp$1 = Trim$_String_(FilePath);
      if (Temp$1.length > 0) {
         Separator = TW3DirectoryParser.GetPathSeparator$(Self);
         if (StrEndsWith(Temp$1,Separator)) {
            TW3ErrorObject.SetLastError$1(Self,"No filename part in path error");
         } else {
            Parts = Temp$1.split(Separator);
            Result = Parts[(Parts.length-1)];
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Failed to extract filename, path was empty error");
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetFileNameWithoutExtension(const Filename: String) : String
   ///  [line: 575, column: 33, file: System.IOUtils]
   ,GetFileNameWithoutExtension:function(Self, Filename$2) {
      var Result = "";
      var temp$1 = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      temp$1 = TW3DirectoryParser.GetFileName$(Self,Filename$2);
      if (!(TW3ErrorObject.GetFailed$1(Self))) {
         Result = TW3DirectoryParser.ChangeFileExt$(Self,temp$1,"");
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetPathName(const FilePath: String) : String
   ///  [line: 532, column: 33, file: System.IOUtils]
   ,GetPathName:function(Self, FilePath) {
      var Result = "";
      var Temp$1 = "",
         Parts = [],
         Separator = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      Temp$1 = Trim$_String_(FilePath);
      if (Temp$1.length > 0) {
         Separator = TW3DirectoryParser.GetPathSeparator$(Self);
         if (StrEndsWith(Temp$1,Separator)) {
            if (Temp$1 == TW3DirectoryParser.GetRootMoniker$(Self)) {
               TW3ErrorObject.SetLastError$1(Self,"Failed to get directory name, path is root");
               return "";
            }
            Temp$1 = Temp$1.substr(0,Temp$1.length-1);
            Parts = Temp$1.split(Separator);
            Result = Parts[(Parts.length-1)];
            return Result;
         }
         Parts = Temp$1.split(Separator);
         if (Parts.length > 1) {
            Result = Parts[(Parts.length-1)-1];
         } else {
            Result = Parts[(Parts.length-1)];
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,"Failed to extract directory name, path was empty error");
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.GetPathSeparator() : Char
   ///  [line: 398, column: 33, file: System.IOUtils]
   ,GetPathSeparator:function(Self) {
      return "\/";
   }
   /// function TW3UnixDirectoryParser.GetRootMoniker() : String
   ///  [line: 403, column: 33, file: System.IOUtils]
   ,GetRootMoniker:function(Self) {
      return "~\/";
   }
   /// function TW3UnixDirectoryParser.HasValidFileNameChars(FileName: String) : Boolean
   ///  [line: 408, column: 33, file: System.IOUtils]
   ,HasValidFileNameChars:function(Self, FileName) {
      var Result = false;
      var el = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if (FileName.length > 0) {
         if ((FileName.charAt(0)==" ")) {
            TW3ErrorObject.SetLastErrorF$1(Self,"Unexpected character \" \" in filename \"%s\" error",[FileName]);
         } else {
            for (var $temp133=0;$temp133<FileName.length;$temp133++) {
               el=$uniCharAt(FileName,$temp133);
               if (!el) continue;
               Result = ((el>="A" && el<="Z")||(el>="a" && el<="z")||(el>="0" && el<="9")||(el=="-")||(el=="_")||(el==".")||(el==" "));
               if (!(Result)) {
                  TW3ErrorObject.SetLastErrorF$1(Self,"Unexpected character \"%s\" in filename \"%s\" error",[el, FileName]);
                  break;
               }
            }
         }
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.HasValidPathChars(FolderName: String) : Boolean
   ///  [line: 437, column: 33, file: System.IOUtils]
   ,HasValidPathChars:function(Self, FolderName) {
      var Result = false;
      var el = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if ((FolderName.charAt(0)==" ")) {
         TW3ErrorObject.SetLastErrorF$1(Self,"Unexpected character \" \" in foldername \"%s\" error",[FolderName]);
      } else {
         if (FolderName.length > 0) {
            for (var $temp134=0;$temp134<FolderName.length;$temp134++) {
               el=$uniCharAt(FolderName,$temp134);
               if (!el) continue;
               Result = ((el>="A" && el<="Z")||(el>="a" && el<="z")||(el>="0" && el<="9")||(el=="-")||(el=="_")||(el==".")||(el==" "));
               if (!(Result)) {
                  TW3ErrorObject.SetLastErrorF$1(Self,"Unexpected character \"%s\" in foldername \"%s\" error",[el, FolderName]);
                  break;
               }
            }
         }
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.IncludeLeadingPathDelimiter(const FilePath: String) : String
   ///  [line: 714, column: 33, file: System.IOUtils]
   ,IncludeLeadingPathDelimiter:function(Self, FilePath) {
      var Result = "";
      var Separator = "";
      Separator = TW3DirectoryParser.GetPathSeparator$(Self);
      if (StrBeginsWith(FilePath,Separator)) {
         Result = FilePath;
      } else {
         Result = Separator + FilePath;
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.IncludeTrailingPathDelimiter(const FilePath: String) : String
   ///  [line: 731, column: 33, file: System.IOUtils]
   ,IncludeTrailingPathDelimiter:function(Self, FilePath) {
      var Result = "";
      var LSeparator = "";
      LSeparator = TW3DirectoryParser.GetPathSeparator$(Self);
      Result = FilePath;
      if (!(StrEndsWith(Result,LSeparator))) {
         Result += LSeparator;
      }
      return Result
   }
   /// function TW3UnixDirectoryParser.IsValidPath(FilePath: String) : Boolean
   ///  [line: 466, column: 33, file: System.IOUtils]
   ,IsValidPath:function(Self, FilePath) {
      var Result = false;
      var Separator = "",
         PathParts = [],
         Index$6 = 0,
         a$426 = 0,
         part = "";
      if (TW3ErrorObject.GetFailed$1(Self)) {
         TW3ErrorObject.ClearLastError$1(Self);
      }
      if ((FilePath.charAt(0)==" ")) {
         TW3ErrorObject.SetLastErrorF$1(Self,"Unexpected character \" \" in path \"%s\" error",[FilePath]);
      } else {
         if (FilePath.length > 0) {
            Separator = TW3DirectoryParser.GetPathSeparator$(Self);
            PathParts = FilePath.split(Separator);
            Index$6 = 0;
            var $temp135;
            for(a$426=0,$temp135=PathParts.length;a$426<$temp135;a$426++) {
               part = PathParts[a$426];
               {var $temp136 = part;
                  if ($temp136=="") {
                     TW3ErrorObject.SetLastErrorF$1(Self,"Path has multiple separators (%s) error",[FilePath]);
                     return false;
                  }
                   else if ($temp136=="~") {
                     if (Index$6 > 0) {
                        TW3ErrorObject.SetLastErrorF$1(Self,"Path has misplaced root moniker (%s) error",[FilePath]);
                        return false;
                     }
                  }
                   else {
                     if (Index$6 == (PathParts.length-1)) {
                        if (!(TW3DirectoryParser.HasValidFileNameChars$(Self,part))) {
                           return false;
                        }
                     } else if (!(TW3DirectoryParser.HasValidPathChars$(Self,part))) {
                        return false;
                     }
                  }
               }
               Index$6++;
            }
            Result = true;
         }
      }
      return Result
   }
   ,Destroy:TW3ErrorObject.Destroy
   ,Create$71:TW3ErrorObject.Create$71
   ,ChangeFileExt$:function($){return $.ClassType.ChangeFileExt.apply($.ClassType, arguments)}
   ,ExcludeLeadingPathDelimiter$:function($){return $.ClassType.ExcludeLeadingPathDelimiter.apply($.ClassType, arguments)}
   ,ExcludeTrailingPathDelimiter$:function($){return $.ClassType.ExcludeTrailingPathDelimiter.apply($.ClassType, arguments)}
   ,GetDevice$:function($){return $.ClassType.GetDevice.apply($.ClassType, arguments)}
   ,GetDirectoryName$:function($){return $.ClassType.GetDirectoryName.apply($.ClassType, arguments)}
   ,GetExtension$:function($){return $.ClassType.GetExtension.apply($.ClassType, arguments)}
   ,GetFileName$:function($){return $.ClassType.GetFileName.apply($.ClassType, arguments)}
   ,GetFileNameWithoutExtension$:function($){return $.ClassType.GetFileNameWithoutExtension.apply($.ClassType, arguments)}
   ,GetPathName$:function($){return $.ClassType.GetPathName.apply($.ClassType, arguments)}
   ,GetPathSeparator$:function($){return $.ClassType.GetPathSeparator($)}
   ,GetRootMoniker$:function($){return $.ClassType.GetRootMoniker($)}
   ,HasValidFileNameChars$:function($){return $.ClassType.HasValidFileNameChars.apply($.ClassType, arguments)}
   ,HasValidPathChars$:function($){return $.ClassType.HasValidPathChars.apply($.ClassType, arguments)}
   ,IncludeLeadingPathDelimiter$:function($){return $.ClassType.IncludeLeadingPathDelimiter.apply($.ClassType, arguments)}
   ,IncludeTrailingPathDelimiter$:function($){return $.ClassType.IncludeTrailingPathDelimiter.apply($.ClassType, arguments)}
   ,IsValidPath$:function($){return $.ClassType.IsValidPath.apply($.ClassType, arguments)}
};
TW3UnixDirectoryParser.$Intf={
   IW3DirectoryParser:[TW3UnixDirectoryParser.GetPathSeparator,TW3UnixDirectoryParser.GetRootMoniker,TW3DirectoryParser.GetErrorObject,TW3UnixDirectoryParser.IsValidPath,TW3UnixDirectoryParser.HasValidPathChars,TW3UnixDirectoryParser.HasValidFileNameChars,TW3DirectoryParser.IsRelativePath,TW3DirectoryParser.IsPathRooted,TW3UnixDirectoryParser.GetFileNameWithoutExtension,TW3UnixDirectoryParser.GetPathName,TW3UnixDirectoryParser.GetDevice,TW3UnixDirectoryParser.GetFileName,TW3UnixDirectoryParser.GetExtension,TW3UnixDirectoryParser.GetDirectoryName,TW3UnixDirectoryParser.IncludeTrailingPathDelimiter,TW3UnixDirectoryParser.IncludeLeadingPathDelimiter,TW3UnixDirectoryParser.ExcludeLeadingPathDelimiter,TW3UnixDirectoryParser.ExcludeTrailingPathDelimiter,TW3UnixDirectoryParser.ChangeFileExt]
   ,IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TPath = class (TObject)
///  [line: 107, column: 3, file: System.IOUtils]
var TPath = {
   $ClassName:"TPath",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function TPath.GetDirectoryName(const FilePath: String) : String
   ///  [line: 322, column: 22, file: System.IOUtils]
   ,GetDirectoryName$2:function(FilePath) {
      var Result = "";
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[13](FilePath);
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   /// function TPath.GetExtension(const Filename: String) : String
   ///  [line: 313, column: 22, file: System.IOUtils]
   ,GetExtension$2:function(Filename$2) {
      var Result = "";
      var Access = null;
      Access = GetDirectoryParser();
      Result = Access[12](Filename$2);
      return Result
   }
   /// function TPath.GetFileName(const FilePath: String) : String
   ///  [line: 304, column: 22, file: System.IOUtils]
   ,GetFileName$2:function(FilePath) {
      var Result = "";
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[11](FilePath);
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   /// function TPath.GetPathSeparator() : Char
   ///  [line: 349, column: 22, file: System.IOUtils]
   ,GetPathSeparator$2:function() {
      var Result = "";
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[0]();
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   /// function TPath.GetRootMoniker() : String
   ///  [line: 358, column: 22, file: System.IOUtils]
   ,GetRootMoniker$2:function() {
      var Result = "";
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[1]();
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   /// function TPath.HasValidFileNameChars(const FileName: String) : Boolean
   ///  [line: 295, column: 22, file: System.IOUtils]
   ,HasValidFileNameChars$2:function(FileName) {
      var Result = false;
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[5](FileName);
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   /// function TPath.IncludeTrailingPathDelimiter(const FilePath: String) : String
   ///  [line: 331, column: 22, file: System.IOUtils]
   ,IncludeTrailingPathDelimiter$2:function(FilePath) {
      var Result = "";
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[14](FilePath);
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   /// function TPath.IsValidPath(const FilePath: String) : Boolean
   ///  [line: 277, column: 22, file: System.IOUtils]
   ,IsValidPath$2:function(FilePath) {
      var Result = false;
      var Access = null,
         Error$1 = null;
      Access = GetDirectoryParser();
      Error$1 = Access[2]();
      Result = Access[3](FilePath);
      if (Error$1[0]()) {
         throw Exception.Create($New(EPathError),Error$1[1]());
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
function GetDirectoryParser() {
   var Result = null;
   if (__Parser === null) {
      if (GetIsRunningInBrowser()) {
         __Parser = TW3ErrorObject.Create$71$($New(TW3UnixDirectoryParser));
      }
   }
   if (__Parser !== null) {
      Result = $AsIntf(__Parser,"IW3DirectoryParser");
   } else {
      Result = null;
   }
   return Result
};
/// EPathError = class (EW3Exception)
///  [line: 105, column: 3, file: System.IOUtils]
var EPathError = {
   $ClassName:"EPathError",$Parent:EW3Exception
   ,$Init:function ($) {
      EW3Exception.$Init($);
   }
   ,Destroy:Exception.Destroy
};
/// TTabMainForm = class (TW3Form)
///  [line: 42, column: 3, file: TabMainForm]
var TTabMainForm = {
   $ClassName:"TTabMainForm",$Parent:TW3Form
   ,$Init:function ($) {
      TW3Form.$Init($);
      $.ControllerManager$1 = $.W3ButtonAssignTrain = $.W3ButtonF0 = $.W3ButtonF1 = $.W3ButtonF2 = $.W3ButtonF3 = $.W3ButtonForward = $.W3ButtonReleaseTrain = $.W3ButtonReverse = $.W3CheckBoxLongAddress = $.W3CheckBoxQueryRelease = $.W3EditBoxDccAddress = $.W3LabelAddress = $.W3LabelSpeed = $.W3Panel1$1 = $.W3RadioGroupSpeedStep = $.W3SliderSpeed = null;
      $.FCallbacksAssigned = $.FStartupInitializeComplete = false;
   }
   /// procedure TTabMainForm.AssignCallbacks()
   ///  [line: 243, column: 24, file: TabMainForm]
   ,AssignCallbacks:function(Self) {
      Self.ControllerManager$1.ControllerNode.FOnTrainAssigned = $Event2(Self,TTabMainForm.OnControllerTrainAssigned);
      Self.ControllerManager$1.ControllerNode.FOnTrainReleased = $Event1(Self,TTabMainForm.OnControllerTrainReleased);
      Self.ControllerManager$1.ControllerNode.FOnControllerRequestTakeover = $Event2(Self,TTabMainForm.OnControllerRequestTakeover$1);
      Self.ControllerManager$1.ControllerNode.FOnQueryFunctionReply = $Event3(Self,TTabMainForm.OnControllerQueryFunctionReply);
      Self.ControllerManager$1.ControllerNode.FOnSearchResult = $Event(Self,TTabMainForm.OnControllerSearchResult);
   }
   /// procedure TTabMainForm.DisableThrottleControls()
   ///  [line: 230, column: 24, file: TabMainForm]
   ,DisableThrottleControls:function(Self) {
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF0,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF1,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF2,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF3,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonForward,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonReverse,false);
      TW3CustomControl.SetEnabled$1$(Self.W3SliderSpeed,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonAssignTrain,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonReleaseTrain,false);
   }
   /// procedure TTabMainForm.EnableThrottleControls()
   ///  [line: 216, column: 24, file: TabMainForm]
   ,EnableThrottleControls:function(Self) {
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF0,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF1,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF2,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonF3,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonForward,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonReverse,true);
      TW3CustomControl.SetEnabled$1$(Self.W3SliderSpeed,true);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonAssignTrain,false);
      TW3CustomControl.SetEnabled$1$(Self.W3ButtonReleaseTrain,true);
   }
   /// procedure TTabMainForm.InitializeForm()
   ///  [line: 82, column: 24, file: TabMainForm]
   ,InitializeForm:function(Self) {
      TW3CustomForm.InitializeForm(Self);
      Self.ControllerManager$1 = GetControllerManager();
   }
   /// procedure TTabMainForm.InitializeObject()
   ///  [line: 139, column: 24, file: TabMainForm]
   ,InitializeObject:function(Self) {
      TW3CustomForm.InitializeObject(Self);
      TW3ControlTracker.RegisterUnderConstruction(TW3ControlTracker,Self);
      $SetInc(Self.FComponentState,1,0,11);
      try {
         TW3CustomForm.SetCaption(Self,"Throttle Control");
         TW3TagContainer.SetComponentName(Self,"TabMainForm");
         Self.W3Panel1$1 = TW3TagContainer.Create$81$($New(TW3Panel),Self);
         TW3OwnedObject.InitAsync$(Self.W3Panel1$1,function () {
            TW3MovableControl.SetBounds$(Self.W3Panel1$1,0,0,312,424);
            TW3TagContainer.SetComponentName(Self.W3Panel1$1,"W3Panel1");
            Self.W3LabelAddress = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3LabelAddress,function () {
               TW3MovableControl.SetBounds$(Self.W3LabelAddress,168,56,128,32);
               TW3Label.SetCaption$2$(Self.W3LabelAddress,"Address");
               TW3TagContainer.SetComponentName(Self.W3LabelAddress,"W3LabelAddress");
            });
            Self.W3EditBoxDccAddress = TW3TagContainer.Create$81$($New(TW3EditBox),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3EditBoxDccAddress,function () {
               TW3MovableControl.SetBounds$(Self.W3EditBoxDccAddress,168,88,128,56);
               TW3EditBox.SetText$2(Self.W3EditBoxDccAddress,"40");
               TW3TagContainer.SetComponentName(Self.W3EditBoxDccAddress,"W3EditBoxDccAddress");
            });
            Self.W3ButtonForward = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonForward,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonForward,6,280,144,44);
               TW3Button.SetCaption$6$(Self.W3ButtonForward,"Forward");
               TW3TagContainer.SetComponentName(Self.W3ButtonForward,"W3ButtonForward");
               TW3CustomControl._setMouseClick(Self.W3ButtonForward,$Event1(Self,TTabMainForm.W3ButtonForwardClick));
            });
            Self.W3ButtonReverse = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonReverse,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonReverse,160,280,144,44);
               TW3Button.SetCaption$6$(Self.W3ButtonReverse,"Reverse");
               TW3TagContainer.SetComponentName(Self.W3ButtonReverse,"W3ButtonReverse");
               TW3CustomControl._setMouseClick(Self.W3ButtonReverse,$Event1(Self,TTabMainForm.W3ButtonReverseClick));
            });
            Self.W3ButtonF0 = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonF0,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonF0,2,224,74,44);
               TW3Button.SetCaption$6$(Self.W3ButtonF0,"F0");
               TW3TagContainer.SetComponentName(Self.W3ButtonF0,"W3ButtonF0");
               TW3CustomControl._setMouseClick(Self.W3ButtonF0,$Event1(Self,TTabMainForm.W3ButtonFunctionClick));
            });
            Self.W3ButtonF1 = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonF1,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonF1,78,224,74,44);
               TW3Button.SetCaption$6$(Self.W3ButtonF1,"F1");
               TW3TagContainer.SetComponentName(Self.W3ButtonF1,"W3ButtonF1");
               Self.W3ButtonF1.TagValue = 1;
               TW3CustomControl._setMouseClick(Self.W3ButtonF1,$Event1(Self,TTabMainForm.W3ButtonFunctionClick));
            });
            Self.W3ButtonF2 = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonF2,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonF2,154,224,74,44);
               TW3Button.SetCaption$6$(Self.W3ButtonF2,"F2");
               TW3TagContainer.SetComponentName(Self.W3ButtonF2,"W3ButtonF2");
               Self.W3ButtonF2.TagValue = 2;
               TW3CustomControl._setMouseClick(Self.W3ButtonF2,$Event1(Self,TTabMainForm.W3ButtonFunctionClick));
            });
            Self.W3ButtonF3 = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonF3,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonF3,230,224,74,44);
               TW3Button.SetCaption$6$(Self.W3ButtonF3,"F3");
               TW3TagContainer.SetComponentName(Self.W3ButtonF3,"W3ButtonF3");
               Self.W3ButtonF3.TagValue = 3;
               TW3CustomControl._setMouseClick(Self.W3ButtonF3,$Event1(Self,TTabMainForm.W3ButtonFunctionClick));
            });
            Self.W3SliderSpeed = TW3TagContainer.Create$81$($New(TW3Slider),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3SliderSpeed,function () {
               TW3MovableControl.SetBounds$(Self.W3SliderSpeed,0,352,304,44);
               TW3Slider.SetMaximum(Self.W3SliderSpeed,100);
               TW3CustomControl.SetBorderRadius(Self.W3SliderSpeed,10);
               TW3TagContainer.SetComponentName(Self.W3SliderSpeed,"W3SliderSpeed");
               Self.W3SliderSpeed.FOnChange = $Event1(Self,TTabMainForm.W3SliderSpeedChange);
            });
            Self.W3LabelSpeed = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3LabelSpeed,function () {
               TW3MovableControl.SetBounds$(Self.W3LabelSpeed,8,320,96,32);
               TW3Label.SetCaption$2$(Self.W3LabelSpeed,"Speed: 0");
               TW3TagContainer.SetComponentName(Self.W3LabelSpeed,"W3LabelSpeed");
            });
            Self.W3ButtonAssignTrain = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonAssignTrain,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonAssignTrain,8,8,144,44);
               TW3Button.SetCaption$6$(Self.W3ButtonAssignTrain,"Assign Train");
               TW3TagContainer.SetComponentName(Self.W3ButtonAssignTrain,"W3ButtonAssignTrain");
               TW3CustomControl._setMouseClick(Self.W3ButtonAssignTrain,$Event1(Self,TTabMainForm.W3ButtonAssignTrainClick));
            });
            Self.W3ButtonReleaseTrain = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonReleaseTrain,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonReleaseTrain,160,8,144,44);
               TW3Button.SetCaption$6$(Self.W3ButtonReleaseTrain,"Release Train");
               TW3TagContainer.SetComponentName(Self.W3ButtonReleaseTrain,"W3ButtonReleaseTrain");
               TW3CustomControl._setMouseClick(Self.W3ButtonReleaseTrain,$Event1(Self,TTabMainForm.W3ButtonReleaseTrainClick));
            });
            Self.W3CheckBoxLongAddress = TW3TagContainer.Create$81$($New(TW3CheckBox),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3CheckBoxLongAddress,function () {
               TW3MovableControl.SetBounds$(Self.W3CheckBoxLongAddress,168,152,136,32);
               TW3Label.SetCaption$2$(Self.W3CheckBoxLongAddress,"Long Address");
               TW3TagContainer.SetComponentName(Self.W3CheckBoxLongAddress,"W3CheckBoxLongAddress");
            });
            Self.W3RadioGroupSpeedStep = TW3TagContainer.Create$81$($New(TW3RadioGroup),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3RadioGroupSpeedStep,function () {
               TW3MovableControl.SetBounds$(Self.W3RadioGroupSpeedStep,8,64,144,112);
               TW3RadioGroup.SetItems$2(Self.W3RadioGroupSpeedStep,["14 Step", "28 Step", "128 Step"]);
               TW3Label.SetCaption$2$(Self.W3RadioGroupSpeedStep,"Speed Steps");
               TW3TagContainer.SetComponentName(Self.W3RadioGroupSpeedStep,"W3RadioGroupSpeedStep");
            });
            Self.W3CheckBoxQueryRelease = TW3TagContainer.Create$81$($New(TW3CheckBox),Self.W3Panel1$1);
            TW3OwnedObject.InitAsync$(Self.W3CheckBoxQueryRelease,function () {
               TW3MovableControl.SetBounds$(Self.W3CheckBoxQueryRelease,8,184,304,32);
               TW3Label.SetCaption$2$(Self.W3CheckBoxQueryRelease,"Ask to allow throttle steal");
               TW3TagContainer.SetComponentName(Self.W3CheckBoxQueryRelease,"W3CheckBoxQueryRelease");
            });
         });
      } finally {
         TW3ControlTracker.RegisterObjectReady(TW3ControlTracker,Self);
      }
      Self.FStartupInitializeComplete = false;
      Self.FCallbacksAssigned = false;
   }
   /// procedure TTabMainForm.OnControllerQueryFunctionReply(Sender: TLccNode; Address: DWord; Value: Word)
   ///  [line: 103, column: 24, file: TabMainForm]
   ,OnControllerQueryFunctionReply:function(Self, Sender, Address$1, Value$5) {
      alert("Query Function Reply");
   }
   /// procedure TTabMainForm.OnControllerRequestTakeover(Sender: TLccNode; var Allow: Boolean)
   ///  [line: 89, column: 24, file: TabMainForm]
   ,OnControllerRequestTakeover$1:function(Self, Sender, Allow) {
      Allow.v = true;
      if (TW3CheckBox.GetChecked(Self.W3CheckBoxQueryRelease)) {
         Allow.v = $VarToBool(confirm("Allow another throttle to take over the train"));
      }
      if (Allow.v && (Self.ControllerManager$1.ControllerNode!==null)) {
         TLccTrainController.ReleaseTrain(Self.ControllerManager$1.ControllerNode);
      }
   }
   /// procedure TTabMainForm.OnControllerSearchResult(Sender: TLccTractionAssignTrainAction; Results: TLccSearchResultsArray; SearchResultCount: Integer; var SelectedResultIndex: Integer)
   ///  [line: 98, column: 24, file: TabMainForm]
   ,OnControllerSearchResult:function(Self, Sender, Results, SearchResultCount, SelectedResultIndex) {
      /* null */
   }
   /// procedure TTabMainForm.OnControllerTrainAssigned(Sender: TLccNode; Reason: TControllerTrainAssignResult)
   ///  [line: 113, column: 24, file: TabMainForm]
   ,OnControllerTrainAssigned:function(Self, Sender, Reason) {
      switch (Reason) {
         case 0 :
            TTabMainForm.EnableThrottleControls(Self);
            break;
         case 1 :
            alert("Failed: Train Refused to Release");
            TTabMainForm.DisableThrottleControls(Self);
            break;
         case 2 :
            alert("Failed Controller Refused to Release");
            TTabMainForm.DisableThrottleControls(Self);
            break;
      }
   }
   /// procedure TTabMainForm.OnControllerTrainReleased(Sender: TLccNode)
   ///  [line: 133, column: 24, file: TabMainForm]
   ,OnControllerTrainReleased:function(Self, Sender) {
      TTabMainForm.DisableThrottleControls(Self);
   }
   /// procedure TTabMainForm.Resize()
   ///  [line: 147, column: 24, file: TabMainForm]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
      TW3MovableControl.SetWidth$(Self.W3Panel1$1,TW3MovableControl.GetWidth$(Self));
      TW3MovableControl.SetHeight$(Self.W3Panel1$1,TW3MovableControl.GetHeight$(Self));
      if (!(Self.FStartupInitializeComplete)) {
         TW3RadioGroup.SetItemIndex(Self.W3RadioGroupSpeedStep,0);
         TTabMainForm.DisableThrottleControls(Self);
         Self.FStartupInitializeComplete = true;
      }
   }
   /// procedure TTabMainForm.W3ButtonAssignTrainClick(Sender: TObject)
   ///  [line: 198, column: 24, file: TabMainForm]
   ,W3ButtonAssignTrainClick:function(Self, Sender) {
      if (!(Self.FCallbacksAssigned)) {
         TTabMainForm.AssignCallbacks(Self);
         Self.FCallbacksAssigned = true;
      }
      if (Self.ControllerManager$1.FControllerCreated) {
         TLccTrainController.AssignTrainByDccAddress(Self.ControllerManager$1.ControllerNode,parseInt(TW3EditBox.GetText$3(Self.W3EditBoxDccAddress),10),TW3CheckBox.GetChecked(Self.W3CheckBoxLongAddress),(Self.W3RadioGroupSpeedStep.FItemIndex+1));
      }
   }
   /// procedure TTabMainForm.W3ButtonForwardClick(Sender: TObject)
   ///  [line: 210, column: 24, file: TabMainForm]
   ,W3ButtonForwardClick:function(Self, Sender) {
      if (Self.ControllerManager$1.FControllerCreated) {
         TLccTrainController.SetDirection$3(Self.ControllerManager$1.ControllerNode,0);
      }
   }
   /// procedure TTabMainForm.W3ButtonFunctionClick(Sender: TObject)
   ///  [line: 176, column: 24, file: TabMainForm]
   ,W3ButtonFunctionClick:function(Self, Sender) {
      if (Self.ControllerManager$1.FControllerCreated) {
         TLccTrainController.SetFunctions$1(Self.ControllerManager$1.ControllerNode,$As(Sender,TW3Button).TagValue,~TLccTrainController.GetFunctions$1(Self.ControllerManager$1.ControllerNode,$As(Sender,TW3Button).TagValue));
      }
   }
   /// procedure TTabMainForm.W3ButtonReleaseTrainClick(Sender: TObject)
   ///  [line: 182, column: 24, file: TabMainForm]
   ,W3ButtonReleaseTrainClick:function(Self, Sender) {
      if (Self.ControllerManager$1.FControllerCreated) {
         TLccTrainController.ReleaseTrain(Self.ControllerManager$1.ControllerNode);
      }
   }
   /// procedure TTabMainForm.W3ButtonReverseClick(Sender: TObject)
   ///  [line: 163, column: 24, file: TabMainForm]
   ,W3ButtonReverseClick:function(Self, Sender) {
      if (Self.ControllerManager$1.FControllerCreated) {
         TLccTrainController.SetDirection$3(Self.ControllerManager$1.ControllerNode,1);
      }
   }
   /// procedure TTabMainForm.W3SliderSpeedChange(Sender: TObject)
   ///  [line: 169, column: 24, file: TabMainForm]
   ,W3SliderSpeedChange:function(Self, Sender) {
      TW3Label.SetCaption$2$(Self.W3LabelSpeed,"Speed: " + (Self.W3SliderSpeed.FValue$2).toFixed(0));
      if (Self.ControllerManager$1.FControllerCreated) {
         TLccTrainController.SetSpeed$1(Self.ControllerManager$1.ControllerNode,Self.W3SliderSpeed.FValue$2);
      }
   }
   ,Destroy:TW3CustomForm.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3CustomForm.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomForm.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3CustomForm.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,InitializeForm$:function($){return $.ClassType.InitializeForm($)}
};
TTabMainForm.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TLayoutConfig = class (TObject)
///  [line: 20, column: 3, file: SmartCL.Layout]
var TLayoutConfig = {
   $ClassName:"TLayoutConfig",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
   ,Height$11$:function($){return $.ClassType.Height$11.apply($.ClassType, arguments)}
   ,Margins$1$:function($){return $.ClassType.Margins$1.apply($.ClassType, arguments)}
   // IGNORED: TLayoutConfig.Margins
   ,Padding$3$:function($){return $.ClassType.Padding$3.apply($.ClassType, arguments)}
   // IGNORED: TLayoutConfig.Padding
   // IGNORED: TLayoutConfig.Spacing
   // IGNORED: TLayoutConfig.Stretch
   ,Width$13$:function($){return $.ClassType.Width$13.apply($.ClassType, arguments)}
};
/// TLayout = class (TObject)
///  [line: 31, column: 3, file: SmartCL.Layout]
var TLayout = {
   $ClassName:"TLayout",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TLayout.Resize
   // IGNORED: TLayout.Resize
   // IGNORED: TLayout.Config
};
function VarToString(v) {
   var Result = "";
   if (v == null) {
      Result = "N";
   } else {
      Result = ($VarToInt(v,"")).toString();
   }
   return Result
};
/// TLayoutRect = record
///  [line: 87, column: 3, file: SmartCL.Layout]
function Copy$TLayoutRect(s,d) {
   d.Bottom$8=s.Bottom$8;
   d.Height$13=s.Height$13;
   d.Left$12=s.Left$12;
   d.Right$9=s.Right$9;
   d.Top$12=s.Top$12;
   d.Width$15=s.Width$15;
   return d;
}
function Clone$TLayoutRect($) {
   return {
      Bottom$8:$.Bottom$8,
      Height$13:$.Height$13,
      Left$12:$.Left$12,
      Right$9:$.Right$9,
      Top$12:$.Top$12,
      Width$15:$.Width$15
   }
}
/// function TLayoutRect.IsHorizontalSet(var Self: TLayoutRect) : Boolean
///  [line: 252, column: 22, file: SmartCL.Layout]
function TLayoutRect$IsHorizontalSet(Self$36) {
   return Self$36.Left$12 != null && Self$36.Width$15 != null;
}
/// function TLayoutRect.IsVerticalSet(var Self: TLayoutRect) : Boolean
///  [line: 257, column: 22, file: SmartCL.Layout]
function TLayoutRect$IsVerticalSet(Self$37) {
   return Self$37.Top$12 != null && Self$37.Height$13 != null;
}
/// procedure TLayoutRect.Resolve(var Self: TLayoutRect)
///  [line: 262, column: 23, file: SmartCL.Layout]
function TLayoutRect$Resolve(Self$38) {
   if (Self$38.Left$12 == null && Self$38.Right$9 != null && Self$38.Width$15 != null) {
      Self$38.Left$12 = Self$38.Right$9-Self$38.Width$15;
   } else if (Self$38.Right$9 == null && Self$38.Left$12 != null && Self$38.Width$15 != null) {
      Self$38.Right$9 = Self$38.Left$12+Self$38.Width$15;
   } else if (Self$38.Width$15 == null && Self$38.Left$12 != null && Self$38.Right$9 != null) {
      Self$38.Width$15 = Self$38.Right$9-Self$38.Left$12;
   }
   if (Self$38.Top$12 == null && Self$38.Bottom$8 != null && Self$38.Height$13 != null) {
      Self$38.Top$12 = Self$38.Bottom$8-Self$38.Height$13;
   } else if (Self$38.Bottom$8 == null && Self$38.Top$12 != null && Self$38.Height$13 != null) {
      Self$38.Bottom$8 = Self$38.Top$12+Self$38.Height$13;
   } else if (Self$38.Height$13 == null && Self$38.Top$12 != null && Self$38.Bottom$8 != null) {
      Self$38.Height$13 = Self$38.Bottom$8-Self$38.Top$12;
   }
}
/// procedure TLayoutRect.SetBounds(var Self: TLayoutRect; aLeft: Variant; aRight: Variant; aWidth: Variant; aTop: Variant; aBottom: Variant; aHeight: Variant)
///  [line: 272, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetBounds$11(Self$39, aLeft$2, aRight$1, aWidth, aTop$2, aBottom$1, aHeight) {
   Self$39.Left$12 = aLeft$2;
   Self$39.Right$9 = aRight$1;
   Self$39.Width$15 = aWidth;
   Self$39.Top$12 = aTop$2;
   Self$39.Bottom$8 = aBottom$1;
   Self$39.Height$13 = aHeight;
   TLayoutRect$Resolve(Self$39);
}
/// procedure TLayoutRect.SetFromControl(var Self: TLayoutRect; control: TW3CustomControl)
///  [line: 283, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetFromControl(Self$40, control$2) {
   TLayoutRect$SetBounds$11(Self$40,TW3MovableControl.GetLeft(control$2),null,TW3MovableControl.ClientWidth(control$2),TW3MovableControl.GetTop(control$2),null,TW3MovableControl.ClientHeight(control$2));
}
/// procedure TLayoutRect.SetFromRect(var Self: TLayoutRect; rect: TRect)
///  [line: 288, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetFromRect(Self$41, rect$2) {
   TLayoutRect$SetBounds$11(Self$41,rect$2.Left$3,null,TRect$Width$6(rect$2),rect$2.Top$3,null,TRect$Height$5(rect$2));
}
/// procedure TLayoutRect.SetHeight(var Self: TLayoutRect; value: Integer)
///  [line: 293, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetHeight$4(Self$42, value$16) {
   Self$42.Height$13 = value$16;
   TLayoutRect$Resolve(Self$42);
}
/// procedure TLayoutRect.SetLeft(var Self: TLayoutRect; value: Integer)
///  [line: 308, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetLeft$5(Self$43, value$17) {
   Self$43.Left$12 = value$17;
   TLayoutRect$Resolve(Self$43);
}
/// procedure TLayoutRect.SetTop(var Self: TLayoutRect; value: Integer)
///  [line: 320, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetTop$2(Self$44, value$18) {
   Self$44.Top$12 = value$18;
   TLayoutRect$Resolve(Self$44);
}
/// procedure TLayoutRect.SetWidth(var Self: TLayoutRect; value: Integer)
///  [line: 341, column: 23, file: SmartCL.Layout]
function TLayoutRect$SetWidth$8(Self$45, value$19) {
   Self$45.Width$15 = value$19;
   TLayoutRect$Resolve(Self$45);
}
/// procedure TLayoutRect.Shrink(var Self: TLayoutRect; rect: TRect)
///  [line: 347, column: 23, file: SmartCL.Layout]
function TLayoutRect$Shrink$1(Self$46, rect$3) {
   if (Self$46.Left$12 != null) {
      Self$46.Left$12 = Self$46.Left$12+rect$3.Left$3;
   }
   if (Self$46.Right$9 != null) {
      Self$46.Right$9 = Self$46.Right$9-rect$3.Right$1;
   }
   if (Self$46.Width$15 != null) {
      Self$46.Width$15 = Self$46.Width$15-rect$3.Left$3-rect$3.Right$1;
   }
   if (Self$46.Top$12 != null) {
      Self$46.Top$12 = Self$46.Top$12+rect$3.Top$3;
   }
   if (Self$46.Bottom$8 != null) {
      Self$46.Bottom$8 = Self$46.Bottom$8-rect$3.Bottom$1;
   }
   if (Self$46.Height$13 != null) {
      Self$46.Height$13 = Self$46.Height$13-rect$3.Top$3-rect$3.Bottom$1;
   }
}
/// TLayoutImpl = class (TLayout)
///  [line: 159, column: 3, file: SmartCL.Layout]
var TLayoutImpl = {
   $ClassName:"TLayoutImpl",$Parent:TLayout
   ,$Init:function ($) {
      TLayout.$Init($);
      $.FAlign$1 = 0;
      $.FBounds = {Bottom$8:undefined,Height$13:undefined,Left$12:undefined,Right$9:undefined,Top$12:undefined,Width$15:undefined};
      $.FClientArea = {Bottom$8:undefined,Height$13:undefined,Left$12:undefined,Right$9:undefined,Top$12:undefined,Width$15:undefined};
      $.FConfig$1 = null;
      $.FControls = [];
      $.FName$7 = "";
   }
   /// procedure TLayoutImpl.AlignControl(control: TObject)
   ///  [line: 612, column: 23, file: SmartCL.Layout]
   ,AlignControl:function(Self, control$3) {
      TLayoutImpl.ResolveDimensionsFrom(Self,control$3);
      TLayoutImpl.ResizeControl(Self,control$3);
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutImpl.InternalResize($As(control$3,TLayoutImpl),Self);
      }
      TLayoutImpl.ResolveDimensionsFrom(Self,control$3);
      TLayoutImpl.ShrinkClientArea(Self,control$3);
   }
   /// procedure TLayoutImpl.CalculateUsableArea(container: TObject)
   ///  [line: 626, column: 23, file: SmartCL.Layout]
   ,CalculateUsableArea:function(Self, container) {
      var clientArea = {Bottom$8:undefined,Height$13:undefined,Left$12:undefined,Right$9:undefined,Top$12:undefined,Width$15:undefined},
         p1 = undefined,
         p2 = undefined;
      clientArea = Dimensions.GetClientArea(Dimensions,container);
      p1 = null;
      p2 = null;
      switch (Self.FAlign$1) {
         case 0 :
         case 2 :
            if (!Self.FAlign$1) {
               p1 = clientArea.Left$12;
            } else {
               p2 = clientArea.Right$9;
            }
            TLayoutRect$SetBounds$11(Self.FBounds,p1,p2,Self.FConfig$1.FWidth$3,clientArea.Top$12,clientArea.Bottom$8,clientArea.Height$13);
            break;
         case 1 :
         case 3 :
            if (Self.FAlign$1 == 1) {
               p1 = clientArea.Top$12;
            } else {
               p2 = clientArea.Bottom$8;
            }
            TLayoutRect$SetBounds$11(Self.FBounds,clientArea.Left$12,clientArea.Right$9,clientArea.Width$15,p1,p2,Self.FConfig$1.FHeight$2);
            break;
         case 4 :
         case 5 :
            TLayoutRect$SetBounds$11(Self.FBounds,clientArea.Left$12,clientArea.Right$9,clientArea.Width$15,clientArea.Top$12,clientArea.Bottom$8,clientArea.Height$13);
            break;
      }
      TLayoutRect$Shrink$1(Self.FBounds,Clone$TRect(Self.FConfig$1.FMargins));
      Copy$TLayoutRect(Self.FBounds,Self.FClientArea);
      TLayoutRect$Shrink$1(Self.FClientArea,Clone$TRect(Self.FConfig$1.FPadding));
      TLayoutImpl.ResizeStretchedChildren(Self);
   }
   // IGNORED: TLayoutImpl.Config
   /// constructor TLayoutImpl.Create(align: TAlign; config: TLayoutConfig; controls: TObjectArr)
   ///  [line: 603, column: 25, file: SmartCL.Layout]
   ,Create$213:function(Self, align$18, config, controls$1) {
      Self.FAlign$1 = align$18;
      Self.FConfig$1 = TLayoutConfigImpl.CreateFrom($New(TLayoutConfigImpl),$As(config,TLayoutConfigImpl));
      Self.FControls = controls$1;
      ++LayoutCount;
      Self.FName$7 = ("Layout "+LayoutCount.toString()+" ("+AlignToString(align$18).toString()+")");
      return Self
   }
   /// procedure TLayoutImpl.InternalResize(container: TObject)
   ///  [line: 674, column: 23, file: SmartCL.Layout]
   ,InternalResize:function(Self, container) {
      var gotClient = false,
         iControl$1 = 0;
      TLayoutImpl.CalculateUsableArea(Self,container);
      var $temp137;
      for(iControl$1=0,$temp137=Self.FControls.length;iControl$1<$temp137;iControl$1++) {
         if ($Is(Self.FControls[iControl$1],TW3CustomControl) || $As(Self.FControls[iControl$1],TLayoutImpl).FAlign$1 != 4) {
            TLayoutImpl.AlignControl(Self,Self.FControls[iControl$1]);
         }
      }
      gotClient = false;
      var $temp138;
      for(iControl$1=0,$temp138=Self.FControls.length;iControl$1<$temp138;iControl$1++) {
         if ($Is(Self.FControls[iControl$1],TLayoutImpl) && $As(Self.FControls[iControl$1],TLayoutImpl).FAlign$1 == 4) {
            if (gotClient) {
               throw Exception.Create($New(Exception),"Layout can contain only one client-aligned child");
            }
            gotClient = true;
            TLayoutImpl.AlignControl(Self,Self.FControls[iControl$1]);
         }
      }
   }
   /// procedure TLayoutImpl.LoggedResize(container: TObject)
   ///  [line: 724, column: 23, file: SmartCL.Layout]
   ,LoggedResize:function(Self, container) {
      Logger = "";
      try {
         try {
            TLayoutImpl.ResolveDimensionsFromChildren(Self);
            TLayoutImpl.InternalResize(Self,container);
         } catch ($e) {
            var E = $W($e);
            /* null */
         }
      } finally {
         /* null */
      }
   }
   // IGNORED: TLayoutImpl.Resize
   // IGNORED: TLayoutImpl.Resize
   /// procedure TLayoutImpl.ResizeControl(control: TObject)
   ///  [line: 760, column: 23, file: SmartCL.Layout]
   ,ResizeControl:function(Self, control$3) {
      if ($Is(control$3,TLayoutImpl)) {
         return;
      }
      if (Self.FAlign$1 != 5) {
         if (Self.FClientArea.Height$13 != null) {
            Dimensions.SetHeight$5(Dimensions,control$3,$VarToInt(Self.FClientArea.Height$13,""));
         }
         if (Self.FClientArea.Width$15 != null) {
            Dimensions.SetWidth$9(Dimensions,control$3,$VarToInt(Self.FClientArea.Width$15,""));
         }
      }
      if (Self.FClientArea.Top$12 != null) {
         if (Self.FAlign$1 == 3) {
            Dimensions.SetBottom$1(Dimensions,control$3,$VarToInt((Self.FClientArea.Top$12+Self.FClientArea.Height$13-Dimensions.GetOwnerTop(Dimensions,control$3)),""));
         } else if (Self.FAlign$1 != 5) {
            Dimensions.SetTop$3(Dimensions,control$3,$VarToInt((Self.FClientArea.Top$12-Dimensions.GetOwnerTop(Dimensions,control$3)),""));
         } else {
            Dimensions.SetTop$3(Dimensions,control$3,$VarToInt((Self.FClientArea.Top$12-Dimensions.GetOwnerTop(Dimensions,control$3)+($Div(Self.FClientArea.Height$13-Dimensions.GetHeight$8(Dimensions,control$3),2))),""));
         }
      }
      if (Self.FClientArea.Left$12 != null) {
         if (Self.FAlign$1 == 2) {
            Dimensions.SetRight$4(Dimensions,control$3,$VarToInt((Self.FClientArea.Left$12+Self.FClientArea.Width$15-Dimensions.GetOwnerLeft(Dimensions,control$3)),""));
         } else if (Self.FAlign$1 != 5) {
            Dimensions.SetLeft$6(Dimensions,control$3,$VarToInt((Self.FClientArea.Left$12-Dimensions.GetOwnerLeft(Dimensions,control$3)),""));
         } else {
            Dimensions.SetLeft$6(Dimensions,control$3,$VarToInt((Self.FClientArea.Left$12-Dimensions.GetOwnerLeft(Dimensions,control$3)+($Div(Self.FClientArea.Width$15-Dimensions.GetWidth$9(Dimensions,control$3),2))),""));
         }
      }
   }
   /// procedure TLayoutImpl.ResizeStretchedChildren()
   ///  [line: 797, column: 23, file: SmartCL.Layout]
   ,ResizeStretchedChildren:function(Self) {
      function ResizeChildren(clientSize, align$18, dimCalc, dimSet) {
         var clientSizeInt = 0,
            countStretched = 0,
            dim = undefined,
            iControl$1 = 0,
            layout = null;
         if (clientSize == null) {
            return;
         }
         countStretched = 0;
         clientSizeInt = $VarToInt(clientSize,"");
         var $temp139;
         for(iControl$1=0,$temp139=Self.FControls.length;iControl$1<$temp139;iControl$1++) {
            if ($Is(Self.FControls[iControl$1],TLayoutImpl)) {
               layout = $As(Self.FControls[iControl$1],TLayoutImpl);
               if (align$18.indexOf(layout.FAlign$1) >= 0) {
                  if (layout.FConfig$1.FStretch) {
                     ++countStretched;
                  } else {
                     dim = dimCalc(layout);
                     if (dim != null) {
                        clientSizeInt-=$VarToInt(dim,"");
                     }
                  }
               }
            }
         }
         clientSizeInt-=Self.FConfig$1.FSpacing * (Self.FControls.length-1);
         var $temp140;
         for(iControl$1=0,$temp140=Self.FControls.length;iControl$1<$temp140;iControl$1++) {
            if ($Is(Self.FControls[iControl$1],TLayoutImpl)) {
               layout = $As(Self.FControls[iControl$1],TLayoutImpl);
               if (align$18.indexOf(layout.FAlign$1) >= 0) {
                  if (layout.FConfig$1.FStretch) {
                     dimSet(layout,$Div(clientSizeInt,countStretched));
                     clientSizeInt-=$Div(clientSizeInt,countStretched);
                     --countStretched;
                  } else {
                     dim = dimCalc(layout);
                     if (dim != null) {
                        clientSizeInt-=$VarToInt(dim,"");
                     }
                  }
               }
            }
         }
      };
      ResizeChildren(Self.FClientArea.Width$15,[0, 2],function (layout) {
         var Result = undefined;
         Result = layout.FConfig$1.FWidth$3;
         return Result
      },function (layout, value$20) {
         TLayoutConfig.Width$13$(layout.FConfig$1,value$20);
      });
      ResizeChildren(Self.FClientArea.Height$13,[1, 3],function (layout) {
         var Result = undefined;
         Result = layout.FConfig$1.FHeight$2;
         return Result
      },function (layout, value$20) {
         TLayoutConfig.Height$11$(layout.FConfig$1,value$20);
      });
   }
   /// procedure TLayoutImpl.ResolveDimensionsFrom(control: TObject)
   ///  [line: 948, column: 23, file: SmartCL.Layout]
   ,ResolveDimensionsFrom:function(Self, control$3) {
      if ((!(TLayoutRect$IsHorizontalSet(Self.FClientArea))) && Dimensions.HasWidth(Dimensions,control$3) && ((1<<Self.FAlign$1&53)!=0)) {
         TLayoutImpl.SetHorizontal$1(Self,Dimensions.GetWidth$9(Dimensions,control$3));
      }
      if ((!(TLayoutRect$IsVerticalSet(Self.FClientArea))) && Dimensions.HasHeight(Dimensions,control$3) && ((1<<Self.FAlign$1&58)!=0)) {
         TLayoutImpl.SetVertical$1(Self,Dimensions.GetHeight$8(Dimensions,control$3));
      }
   }
   /// procedure TLayoutImpl.ResolveDimensionsFromChildren()
   ///  [line: 858, column: 23, file: SmartCL.Layout]
   ,ResolveDimensionsFromChildren:function(Self) {
      var control$3 = null,
         controlCount = 0,
         dim = undefined,
         iControl$1 = 0,
         sum = undefined;
      var $temp141;
      for(iControl$1=0,$temp141=Self.FControls.length;iControl$1<$temp141;iControl$1++) {
         if ($Is(Self.FControls[iControl$1],TLayoutImpl)) {
            TLayoutImpl.ResolveDimensionsFromChildren($As(Self.FControls[iControl$1],TLayoutImpl));
         }
      }
      if (Self.FAlign$1 == 5 && Self.FConfig$1.FWidth$3 != null && Self.FConfig$1.FHeight$2 != null) {
         return;
      }
      if (Self.FAlign$1 == 4 || ((1<<Self.FAlign$1&5)!=0) && Self.FConfig$1.FWidth$3 != null || ((1<<Self.FAlign$1&10)!=0) && Self.FConfig$1.FHeight$2 != null) {
         return;
      }
      if (Self.FAlign$1 == 5) {
         /* null */
      } else {
         sum = 0;
         controlCount = 0;
         var $temp142;
         for(iControl$1=0,$temp142=Self.FControls.length;iControl$1<$temp142;iControl$1++) {
            control$3 = Self.FControls[iControl$1];
            switch (Self.FAlign$1) {
               case 0 :
               case 2 :
                  dim = Dimensions.GetWidth$9(Dimensions,control$3);
                  break;
               case 1 :
               case 3 :
                  dim = Dimensions.GetHeight$8(Dimensions,control$3);
                  break;
            }
            if (dim == null) {
               sum = null;
               break;
            } else {
               if (controlCount > 0) {
                  sum = sum+Self.FConfig$1.FSpacing;
               }
               ++controlCount;
               sum = sum+dim;
            }
         }
      }
      if (Self.FAlign$1 == 5) {
         sum = Dimensions.GetWidth$9(Dimensions,Self.FControls[0]);
      }
      if (sum != null && Self.FConfig$1.FWidth$3 == null && ((1<<Self.FAlign$1&37)!=0)) {
         sum = sum+Self.FConfig$1.FPadding.Left$3+Self.FConfig$1.FPadding.Right$1+Self.FConfig$1.FMargins.Left$3+Self.FConfig$1.FMargins.Right$1;
         TLayoutConfig.Width$13$(Self.FConfig$1,$VarToInt(sum,""));
      }
      if (Self.FAlign$1 == 5) {
         sum = Dimensions.GetHeight$8(Dimensions,Self.FControls[0]);
      }
      if (sum != null && Self.FConfig$1.FHeight$2 == null && ((1<<Self.FAlign$1&42)!=0)) {
         sum = sum+Self.FConfig$1.FPadding.Top$3+Self.FConfig$1.FPadding.Bottom$1+Self.FConfig$1.FMargins.Top$3+Self.FConfig$1.FMargins.Bottom$1;
         TLayoutConfig.Height$11$(Self.FConfig$1,$VarToInt(sum,""));
      }
   }
   /// procedure TLayoutImpl.SetHorizontal(clientWidth: Variant)
   ///  [line: 970, column: 23, file: SmartCL.Layout]
   ,SetHorizontal$1:function(Self, clientWidth$1) {
      TLayoutRect$SetWidth$8(Self.FClientArea,$VarToInt(clientWidth$1,""));
      if (clientWidth$1 != null) {
         clientWidth$1 = clientWidth$1+Self.FConfig$1.FPadding.Left$3+Self.FConfig$1.FPadding.Right$1;
      }
      TLayoutRect$SetWidth$8(Self.FBounds,$VarToInt(clientWidth$1,""));
   }
   /// procedure TLayoutImpl.SetVertical(clientHeight: Variant)
   ///  [line: 979, column: 23, file: SmartCL.Layout]
   ,SetVertical$1:function(Self, clientHeight$1) {
      TLayoutRect$SetHeight$4(Self.FClientArea,$VarToInt(clientHeight$1,""));
      if (clientHeight$1 != null) {
         clientHeight$1 = clientHeight$1+Self.FConfig$1.FPadding.Top$3+Self.FConfig$1.FPadding.Bottom$1;
      }
      TLayoutRect$SetHeight$4(Self.FBounds,$VarToInt(clientHeight$1,""));
   }
   /// procedure TLayoutImpl.ShrinkClientArea(control: TObject)
   ///  [line: 988, column: 23, file: SmartCL.Layout]
   ,ShrinkClientArea:function(Self, control$3) {
      var align$18 = 0,
         height$24 = undefined,
         width$29 = undefined;
      if ($Is(control$3,TLayoutImpl)) {
         align$18 = $As(control$3,TLayoutImpl).FAlign$1;
      } else {
         align$18 = Self.FAlign$1;
      }
      switch (align$18) {
         case 0 :
            width$29 = Dimensions.GetWidth$9(Dimensions,control$3);
            $Assert(width$29 != null,"width = Null","");
            $Assert(Self.FClientArea.Left$12 != null,"FClientArea.Left = Null","");
            $Assert(Dimensions.GetLeft$4(Dimensions,control$3)+Dimensions.GetOwnerLeft(Dimensions,control$3) == Self.FClientArea.Left$12,("Dimensions.GetLeft("+NameOf(control$3).toString()+")["+VarToString(Dimensions.GetLeft$4(Dimensions,control$3)).toString()+"] + Dimensions.GetOwnerLeft("+NameOf(control$3).toString()+")["+Dimensions.GetOwnerLeft(Dimensions,control$3).toString()+"] <> FClientArea.Left["+VarToString(Self.FClientArea.Left$12).toString()+"]"),"");
            Self.FClientArea.Left$12 = Self.FClientArea.Left$12+width$29+Self.FConfig$1.FSpacing;
            Self.FClientArea.Width$15 = Self.FClientArea.Width$15-width$29-Self.FConfig$1.FSpacing;
            break;
         case 1 :
            height$24 = Dimensions.GetHeight$8(Dimensions,control$3);
            $Assert(height$24 != null,"height = Null","");
            $Assert(Self.FClientArea.Top$12 != null,"FClientArea.Top = Null","");
            $Assert(Dimensions.GetTop$1(Dimensions,control$3)+Dimensions.GetOwnerTop(Dimensions,control$3) == Self.FClientArea.Top$12,("Dimensions.GetTop(["+NameOf(control$3).toString()+"])["+VarToString(Dimensions.GetTop$1(Dimensions,control$3)).toString()+"] + Dimensions.GetOwnerTop("+NameOf(control$3).toString()+")["+Dimensions.GetOwnerTop(Dimensions,control$3).toString()+"] <> FClientArea.Top["+VarToString(Self.FClientArea.Top$12).toString()+"]"),"");
            Self.FClientArea.Top$12 = Self.FClientArea.Top$12+height$24+Self.FConfig$1.FSpacing;
            Self.FClientArea.Height$13 = Self.FClientArea.Height$13-height$24-Self.FConfig$1.FSpacing;
            break;
         case 2 :
            width$29 = Dimensions.GetWidth$9(Dimensions,control$3);
            $Assert(width$29 != null,"width = Null","");
            $Assert(Self.FClientArea.Left$12 != null,"FClientArea.Left = Null","");
            $Assert(Self.FClientArea.Width$15 != null,"FClientArea.Width = Null","");
            $Assert(Dimensions.GetLeft$4(Dimensions,control$3)+Dimensions.GetOwnerLeft(Dimensions,control$3) == Self.FClientArea.Left$12+Self.FClientArea.Width$15-width$29,("Dimensions.GetLeft("+NameOf(control$3).toString()+")["+VarToString(Dimensions.GetLeft$4(Dimensions,control$3)).toString()+"] + Dimensions.GetOwnerLeft("+NameOf(control$3).toString()+")["+Dimensions.GetOwnerLeft(Dimensions,control$3).toString()+"] <> (FClientArea.Left["+VarToString(Self.FClientArea.Left$12).toString()+"] + FClientArea.Width["+VarToString(Self.FClientArea.Width$15).toString()+"] - width["+VarToString(width$29).toString()+"])"),"");
            Self.FClientArea.Right$9 = Self.FClientArea.Right$9-width$29-Self.FConfig$1.FSpacing;
            Self.FClientArea.Width$15 = Self.FClientArea.Width$15-width$29-Self.FConfig$1.FSpacing;
            break;
         case 3 :
            height$24 = Dimensions.GetHeight$8(Dimensions,control$3);
            $Assert(height$24 != null,"height = Null","");
            $Assert(Self.FClientArea.Top$12 != null,"FClientArea.Top = Null","");
            $Assert(Self.FClientArea.Height$13 != null,"FClientArea.Height = Null","");
            $Assert(Dimensions.GetTop$1(Dimensions,control$3)+Dimensions.GetOwnerTop(Dimensions,control$3) == Self.FClientArea.Top$12+Self.FClientArea.Height$13-height$24,("Dimensions.GetTop("+NameOf(control$3).toString()+")["+VarToString(Dimensions.GetTop$1(Dimensions,control$3)).toString()+"] + Dimensions.GetOwnerTop(control) <> (FClientArea.Top["+NameOf(control$3).toString()+"] + FClientArea.Height["+Dimensions.GetOwnerTop(Dimensions,control$3).toString()+"] - height["+VarToString(Self.FClientArea.Top$12).toString()+"])"),"");
            Self.FClientArea.Bottom$8 = Self.FClientArea.Bottom$8-height$24-Self.FConfig$1.FSpacing;
            Self.FClientArea.Height$13 = Self.FClientArea.Height$13-height$24-Self.FConfig$1.FSpacing;
            break;
         case 4 :
            TLayoutRect$SetBounds$11(Self.FClientArea,0,0,0,-1,-1,-1);
            break;
      }
   }
   ,Destroy:TObject.Destroy
   // IGNORED: TLayoutImpl.Resize
   // IGNORED: TLayoutImpl.Resize
   // IGNORED: TLayoutImpl.Config
};
/// TLayoutConfigImpl = class (TLayoutConfig)
///  [line: 133, column: 3, file: SmartCL.Layout]
var TLayoutConfigImpl = {
   $ClassName:"TLayoutConfigImpl",$Parent:TLayoutConfig
   ,$Init:function ($) {
      TLayoutConfig.$Init($);
      $.FHeight$2 = $.FWidth$3 = undefined;
      $.FMargins = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      $.FPadding = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
      $.FSpacing = 0;
      $.FStretch = false;
   }
   /// constructor TLayoutConfigImpl.CreateFrom(conf: TLayoutConfigImpl)
   ///  [line: 539, column: 31, file: SmartCL.Layout]
   ,CreateFrom:function(Self, conf) {
      Self.FHeight$2 = conf.FHeight$2;
      Copy$TRect(conf.FMargins,Self.FMargins);
      Copy$TRect(conf.FPadding,Self.FPadding);
      Self.FSpacing = conf.FSpacing;
      Self.FStretch = conf.FStretch;
      Self.FWidth$3 = conf.FWidth$3;
      return Self
   }
   /// function TLayoutConfigImpl.Height(aHeight: Integer) : TLayoutConfig
   ///  [line: 595, column: 28, file: SmartCL.Layout]
   ,Height$11:function(Self, aHeight$1) {
      var Result = null;
      Self.FHeight$2 = aHeight$1;
      Result = Self;
      return Result
   }
   /// function TLayoutConfigImpl.Margins(left: Integer; top: Integer; right: Integer; bottom: Integer) : TLayoutConfig
   ///  [line: 560, column: 28, file: SmartCL.Layout]
   ,Margins$1:function(Self, left$2, top$4, right$2, bottom$3) {
      var Result = null;
      Self.FMargins = Create$102(left$2,top$4,right$2,bottom$3);
      Result = Self;
      return Result
   }
   // IGNORED: TLayoutConfigImpl.Margins
   /// function TLayoutConfigImpl.Padding(left: Integer; top: Integer; right: Integer; bottom: Integer) : TLayoutConfig
   ///  [line: 571, column: 28, file: SmartCL.Layout]
   ,Padding$3:function(Self, left$2, top$4, right$2, bottom$3) {
      var Result = null;
      Self.FPadding = Create$102(left$2,top$4,right$2,bottom$3);
      Result = Self;
      return Result
   }
   // IGNORED: TLayoutConfigImpl.Padding
   // IGNORED: TLayoutConfigImpl.Spacing
   // IGNORED: TLayoutConfigImpl.Stretch
   /// function TLayoutConfigImpl.Width(aWidth: Integer) : TLayoutConfig
   ///  [line: 589, column: 28, file: SmartCL.Layout]
   ,Width$13:function(Self, aWidth$1) {
      var Result = null;
      Self.FWidth$3 = aWidth$1;
      Result = Self;
      return Result
   }
   ,Destroy:TObject.Destroy
   ,Height$11$:function($){return $.ClassType.Height$11.apply($.ClassType, arguments)}
   ,Margins$1$:function($){return $.ClassType.Margins$1.apply($.ClassType, arguments)}
   // IGNORED: TLayoutConfigImpl.Margins
   ,Padding$3$:function($){return $.ClassType.Padding$3.apply($.ClassType, arguments)}
   // IGNORED: TLayoutConfigImpl.Padding
   // IGNORED: TLayoutConfigImpl.Spacing
   // IGNORED: TLayoutConfigImpl.Stretch
   ,Width$13$:function($){return $.ClassType.Width$13.apply($.ClassType, arguments)}
};
/// TLayoutArea = class (TObject)
///  [line: 79, column: 3, file: SmartCL.Layout]
var TLayoutArea = {
   $ClassName:"TLayoutArea",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FRect = {Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};
   }
   /// constructor TLayoutArea.Create(rect: TRect)
   ///  [line: 228, column: 25, file: SmartCL.Layout]
   ,Create$214:function(Self, rect$4) {
      TObject.Create(Self);
      Copy$TRect(rect$4,Self.FRect);
      return Self
   }
   ,Destroy:TObject.Destroy
};
/// TAlign enumeration
///  [line: 77, column: 3, file: SmartCL.Layout]
var TAlign = [ "Left", "Top", "Right", "Bottom", "Client", "Center" ];
function NameOf(control$3) {
   var Result = "";
   if ($Is(control$3,TLayoutImpl)) {
      Result = $As(control$3,TLayoutImpl).FName$7;
   } else {
      Result = TW3TagContainer.GetComponentName($As(control$3,TW3CustomControl));
   }
   return Result
};
/// Dimensions = class (TObject)
///  [line: 113, column: 3, file: SmartCL.Layout]
var Dimensions = {
   $ClassName:"Dimensions",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
   }
   /// function Dimensions.GetClientArea(control: TObject) : TLayoutRect
   ///  [line: 373, column: 27, file: SmartCL.Layout]
   ,GetClientArea:function(Self, control$3) {
      var Result = {Bottom$8:undefined,Height$13:undefined,Left$12:undefined,Right$9:undefined,Top$12:undefined,Width$15:undefined};
      if ($Is(control$3,TLayoutImpl)) {
         Copy$TLayoutRect($As(control$3,TLayoutImpl).FClientArea,Result);
      } else if ($Is(control$3,TLayoutArea)) {
         TLayoutRect$SetFromRect(Result,Clone$TRect($As(control$3,TLayoutArea).FRect));
      } else {
         TLayoutRect$SetFromControl(Result,$As(control$3,TW3CustomControl));
      }
      return Result
   }
   /// function Dimensions.GetHeight(control: TObject) : Variant
   ///  [line: 383, column: 27, file: SmartCL.Layout]
   ,GetHeight$8:function(Self, control$3) {
      var Result = undefined;
      if ($Is(control$3,TLayoutImpl)) {
         Result = $As(control$3,TLayoutImpl).FBounds.Height$13;
         if (Result == null) {
            Result = $As(control$3,TLayoutImpl).FConfig$1.FHeight$2;
         }
         if (Result != null) {
            Result = Result+$As(control$3,TLayoutImpl).FConfig$1.FMargins.Top$3+$As(control$3,TLayoutImpl).FConfig$1.FMargins.Bottom$1;
         }
      } else if (TW3MovableControl.GetVisible($As(control$3,TW3CustomControl))) {
         Result = TW3MovableControl.GetHeight$($As(control$3,TW3CustomControl));
      } else {
         Result = 0;
      }
      return Result
   }
   /// function Dimensions.GetLeft(control: TObject) : Variant
   ///  [line: 400, column: 27, file: SmartCL.Layout]
   ,GetLeft$4:function(Self, control$3) {
      var Result = undefined;
      if ($Is(control$3,TLayoutImpl)) {
         Result = $As(control$3,TLayoutImpl).FBounds.Left$12-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Left$3;
      } else {
         Result = TW3MovableControl.GetLeft($As(control$3,TW3CustomControl));
      }
      return Result
   }
   /// function Dimensions.GetOwnerLeft(control: TObject) : Variant
   ///  [line: 409, column: 27, file: SmartCL.Layout]
   ,GetOwnerLeft:function(Self, control$3) {
      var Result = undefined;
      Result = 0;
      if ($Is(control$3,TW3MovableControl)) {
         control$3 = TW3TagContainer.a$53($As(control$3,TW3MovableControl));
         if ((control$3!==null) && $Is(control$3,TW3MovableControl)) {
            Result = TW3MovableControl.GetLeft($As(control$3,TW3MovableControl));
         }
      }
      return Result
   }
   /// function Dimensions.GetOwnerTop(control: TObject) : Variant
   ///  [line: 419, column: 27, file: SmartCL.Layout]
   ,GetOwnerTop:function(Self, control$3) {
      var Result = undefined;
      Result = 0;
      if ($Is(control$3,TW3MovableControl)) {
         control$3 = TW3TagContainer.a$53($As(control$3,TW3MovableControl));
         if ((control$3!==null) && $Is(control$3,TW3MovableControl)) {
            Result = TW3MovableControl.GetTop($As(control$3,TW3MovableControl));
         }
      }
      return Result
   }
   /// function Dimensions.GetTop(control: TObject) : Variant
   ///  [line: 434, column: 27, file: SmartCL.Layout]
   ,GetTop$1:function(Self, control$3) {
      var Result = undefined;
      if ($Is(control$3,TLayoutImpl)) {
         Result = $As(control$3,TLayoutImpl).FBounds.Top$12-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Top$3;
      } else {
         Result = TW3MovableControl.GetTop($As(control$3,TW3CustomControl));
      }
      return Result
   }
   /// function Dimensions.GetWidth(control: TObject) : Variant
   ///  [line: 448, column: 27, file: SmartCL.Layout]
   ,GetWidth$9:function(Self, control$3) {
      var Result = undefined;
      if ($Is(control$3,TLayoutImpl)) {
         Result = $As(control$3,TLayoutImpl).FBounds.Width$15;
         if (Result == null) {
            Result = $As(control$3,TLayoutImpl).FConfig$1.FWidth$3;
         }
         if (Result != null) {
            Result = Result+$As(control$3,TLayoutImpl).FConfig$1.FMargins.Left$3+$As(control$3,TLayoutImpl).FConfig$1.FMargins.Right$1;
         }
      } else if (TW3MovableControl.GetVisible($As(control$3,TW3CustomControl))) {
         Result = TW3MovableControl.GetWidth$($As(control$3,TW3CustomControl));
      } else {
         Result = 0;
      }
      return Result
   }
   /// function Dimensions.HasHeight(control: TObject) : Boolean
   ///  [line: 465, column: 27, file: SmartCL.Layout]
   ,HasHeight:function(Self, control$3) {
      var Result = false;
      Result = true;
      if ($Is(control$3,TLayoutImpl)) {
         Result = $As(control$3,TLayoutImpl).FBounds.Height$13 != null;
      }
      return Result
   }
   /// function Dimensions.HasWidth(control: TObject) : Boolean
   ///  [line: 472, column: 27, file: SmartCL.Layout]
   ,HasWidth:function(Self, control$3) {
      var Result = false;
      Result = true;
      if ($Is(control$3,TLayoutImpl)) {
         Result = $As(control$3,TLayoutImpl).FBounds.Width$15 != null;
      }
      return Result
   }
   /// procedure Dimensions.SetBottom(control: TObject; value: Integer)
   ///  [line: 517, column: 28, file: SmartCL.Layout]
   ,SetBottom$1:function(Self, control$3, value$20) {
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutRect$SetTop$2($As(control$3,TLayoutImpl).FBounds,$VarToInt((value$20-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Bottom$1-$As(control$3,TLayoutImpl).FBounds.Height$13),""));
      } else {
         TW3MovableControl.SetTop$($As(control$3,TW3CustomControl),value$20-TW3MovableControl.GetHeight$($As(control$3,TW3CustomControl)));
      }
   }
   /// procedure Dimensions.SetHeight(control: TObject; value: Integer)
   ///  [line: 479, column: 28, file: SmartCL.Layout]
   ,SetHeight$5:function(Self, control$3, value$20) {
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutRect$SetHeight$4($As(control$3,TLayoutImpl).FBounds,value$20-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Top$3-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Bottom$1);
      } else {
         TW3MovableControl.SetHeight$($As(control$3,TW3CustomControl),value$20);
      }
   }
   /// procedure Dimensions.SetLeft(control: TObject; value: Integer)
   ///  [line: 489, column: 28, file: SmartCL.Layout]
   ,SetLeft$6:function(Self, control$3, value$20) {
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutRect$SetLeft$5($As(control$3,TLayoutImpl).FBounds,value$20+$As(control$3,TLayoutImpl).FConfig$1.FMargins.Left$3);
      } else {
         TW3MovableControl.SetLeft$($As(control$3,TW3CustomControl),value$20);
      }
   }
   /// procedure Dimensions.SetRight(control: TObject; value: Integer)
   ///  [line: 498, column: 28, file: SmartCL.Layout]
   ,SetRight$4:function(Self, control$3, value$20) {
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutRect$SetLeft$5($As(control$3,TLayoutImpl).FBounds,$VarToInt((value$20-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Right$1-$As(control$3,TLayoutImpl).FBounds.Width$15),""));
      } else {
         TW3MovableControl.SetLeft$($As(control$3,TW3CustomControl),value$20-TW3MovableControl.GetWidth$($As(control$3,TW3CustomControl)));
      }
   }
   /// procedure Dimensions.SetTop(control: TObject; value: Integer)
   ///  [line: 508, column: 28, file: SmartCL.Layout]
   ,SetTop$3:function(Self, control$3, value$20) {
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutRect$SetTop$2($As(control$3,TLayoutImpl).FBounds,value$20+$As(control$3,TLayoutImpl).FConfig$1.FMargins.Top$3);
      } else {
         TW3MovableControl.SetTop$($As(control$3,TW3CustomControl),value$20);
      }
   }
   /// procedure Dimensions.SetWidth(control: TObject; value: Integer)
   ///  [line: 527, column: 28, file: SmartCL.Layout]
   ,SetWidth$9:function(Self, control$3, value$20) {
      if ($Is(control$3,TLayoutImpl)) {
         TLayoutRect$SetWidth$8($As(control$3,TLayoutImpl).FBounds,value$20-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Left$3-$As(control$3,TLayoutImpl).FConfig$1.FMargins.Right$1);
      } else {
         TW3MovableControl.SetWidth$($As(control$3,TW3CustomControl),value$20);
      }
   }
   ,Destroy:TObject.Destroy
};
function AlignToString(align$18) {
   var Result = "";
   switch (align$18) {
      case 0 :
         Result = "left";
         break;
      case 1 :
         Result = "top";
         break;
      case 2 :
         Result = "right";
         break;
      case 3 :
         Result = "bottom";
         break;
      case 4 :
         Result = "client";
         break;
   }
   return Result
};
/// TW3Slider = class (TW3CustomControl)
///  [line: 18, column: 3, file: SmartCL.Slider]
var TW3Slider = {
   $ClassName:"TW3Slider",$Parent:TW3CustomControl
   ,$Init:function ($) {
      TW3CustomControl.$Init($);
      $.FInner = $.FOnChange = null;
      $.FIsLeftButton = false;
      $.FLogarithmic = false;
      $.FMax = $.FMin = $.FValue$2 = 0;
   }
   /// function TW3Slider.CreationFlags() : TW3CreationFlags
   ///  [line: 74, column: 20, file: SmartCL.Slider]
   ,CreationFlags:function(Self) {
      var Result = [0];
      Result = TW3TagObj.CreationFlags(Self);
      $SetExc(Result,1,0,8);
      return Result
   }
   /// procedure TW3Slider.FinalizeObject()
   ///  [line: 67, column: 21, file: SmartCL.Slider]
   ,FinalizeObject:function(Self) {
      TObject.Free(Self.FInner);
      Self.FInner = null;
      TW3CustomControl.FinalizeObject(Self);
   }
   /// procedure TW3Slider.InitializeObject()
   ///  [line: 51, column: 21, file: SmartCL.Slider]
   ,InitializeObject:function(Self) {
      TW3CustomControl.InitializeObject(Self);
      TW3ControlBackground.FromColor(TW3MovableControl.GetBackGround(Self),16777215);
      Self.FInner = TW3TagContainer.Create$81$($New(TW3CustomControl),Self);
      TW3MovableControl.SetWidth$(Self.FInner,10);
      TW3CustomControl._setMouseDown(Self,function (_implicit_Sender, _implicit_Button, _implicit_Shift, _implicit_X, _implicit_Y) {
         /* null */
      });
      TW3CustomControl._setMouseUp(Self,function (_implicit_Sender, _implicit_Button, _implicit_Shift, _implicit_X, _implicit_Y) {
         /* null */
      });
      TW3CustomControl._setMouseMove(Self,function (_implicit_Sender, _implicit_Shift, _implicit_X, _implicit_Y) {
         /* null */
      });
      Self.SimulateMouseEvents = true;
   }
   /// procedure TW3Slider.MouseDown(Button: TMouseButton; ShiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 161, column: 21, file: SmartCL.Slider]
   ,MouseDown:function(Self, Button$1, ShiftState, X$2, Y$2) {
      var wd = 0;
      Self.FIsLeftButton = (Button$1==0);
      if (Self.FIsLeftButton) {
         TW3CustomControl.SetCapture(Self);
         X$2-=4;
         wd = TW3MovableControl.ClientWidth(Self)-8;
         if (Self.FLogarithmic) {
            TW3Slider.SetValue$2(Self,Math.pow(2,X$2 / wd * (Log2(Self.FMax)-Log2(Self.FMin))+Log2(Self.FMin)));
         } else {
            TW3Slider.SetValue$2(Self,Self.FMin+X$2 / wd * (Self.FMax-Self.FMin));
         }
      }
      TW3CustomControl.MouseDown(Self,Button$1,ShiftState,X$2,Y$2);
   }
   /// procedure TW3Slider.MouseMove(ShiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 187, column: 21, file: SmartCL.Slider]
   ,MouseMove:function(Self, ShiftState, X$2, Y$2) {
      var wd = 0;
      if (Self.FIsLeftButton) {
         X$2-=4;
         wd = TW3MovableControl.ClientWidth(Self)-8;
         if (Self.FLogarithmic) {
            TW3Slider.SetValue$2(Self,Math.pow(2,X$2 / wd * (Log2(Self.FMax)-Log2(Self.FMin))+Log2(Self.FMin)));
         } else {
            TW3Slider.SetValue$2(Self,Self.FMin+(X$2-4) / (TW3MovableControl.ClientWidth(Self)-8) * (Self.FMax-Self.FMin));
         }
      }
      TW3CustomControl.MouseMove(Self,ShiftState,X$2,Y$2);
   }
   /// procedure TW3Slider.MouseUp(Button: TMouseButton; shiftState: TShiftState; X: Integer; Y: Integer)
   ///  [line: 180, column: 21, file: SmartCL.Slider]
   ,MouseUp:function(Self, Button$1, shiftState, X$2, Y$2) {
      Self.FIsLeftButton = !((Button$1==0));
      TW3CustomControl.ReleaseCapture(Self);
      TW3CustomControl.MouseUp(Self,Button$1,shiftState,X$2,Y$2);
   }
   /// procedure TW3Slider.Resize()
   ///  [line: 80, column: 21, file: SmartCL.Slider]
   ,Resize:function(Self) {
      var Scale$2 = 0;
      TW3MovableControl.Resize(Self);
      if (Self.FMax > Self.FMin) {
         if (Self.FLogarithmic) {
            Scale$2 = (Log2(Self.FValue$2)-Log2(Self.FMin)) / (Log2(Self.FMax)-Log2(Self.FMin));
         } else {
            Scale$2 = (Self.FValue$2-Self.FMin) / (Self.FMax-Self.FMin);
         }
         TW3MovableControl.SetBounds$(Self.FInner,4,4,Math.round(Scale$2 * (TW3MovableControl.ClientWidth(Self)-8)),Math.round(TW3MovableControl.ClientHeight(Self)-8));
      } else {
         TW3MovableControl.SetBounds$(Self.FInner,0,0,0,0);
      }
   }
   /// procedure TW3Slider.SetLogarithmic(NewValue: Boolean)
   ///  [line: 131, column: 21, file: SmartCL.Slider]
   ,SetLogarithmic:function(Self, NewValue) {
      if (Self.FLogarithmic != NewValue) {
         TW3TagObj.BeginUpdate(Self);
         Self.FLogarithmic = NewValue;
         TW3TagObj.EndUpdate(Self);
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if (!($SetIn(Self.FComponentState,10,0,11))) {
               TW3MovableControl.Invalidate$(Self);
            }
         }
      }
   }
   /// procedure TW3Slider.SetMaximum(NewValue: Float)
   ///  [line: 146, column: 21, file: SmartCL.Slider]
   ,SetMaximum:function(Self, NewValue) {
      if (NewValue != Self.FMax) {
         TW3TagObj.BeginUpdate(Self);
         Self.FMax = NewValue;
         TW3TagObj.EndUpdate(Self);
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if (!($SetIn(Self.FComponentState,10,0,11))) {
               TW3MovableControl.Invalidate$(Self);
            }
         }
      }
   }
   /// procedure TW3Slider.SetMinimum(NewValue: Float)
   ///  [line: 116, column: 21, file: SmartCL.Slider]
   ,SetMinimum:function(Self, NewValue) {
      if (NewValue != Self.FMin) {
         TW3TagObj.BeginUpdate(Self);
         Self.FMin = NewValue;
         TW3TagObj.EndUpdate(Self);
         if ($SetIn(Self.FComponentState,4,0,11)) {
            if (!($SetIn(Self.FComponentState,10,0,11))) {
               TW3MovableControl.Invalidate$(Self);
            }
         }
      }
   }
   /// procedure TW3Slider.SetValue(NewValue: Float)
   ///  [line: 96, column: 21, file: SmartCL.Slider]
   ,SetValue$2:function(Self, NewValue) {
      if (NewValue < Self.FMin) {
         NewValue = Self.FMin;
      }
      if (NewValue > Self.FMax) {
         NewValue = Self.FMax;
      }
      if (NewValue != Self.FValue$2) {
         TW3TagObj.BeginUpdate(Self);
         try {
            Self.FValue$2 = NewValue;
         } finally {
            TW3TagObj.AddToComponentState(Self,[32]);
            TW3TagObj.EndUpdate(Self);
         }
         if (Self.FOnChange) {
            Self.FOnChange(Self);
         }
      }
   }
   ,Destroy:TW3TagObj.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3MovableControl.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)}
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags$:function($){return $.ClassType.CreationFlags($)}
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3MovableControl.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3TagContainer.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown$:function($){return $.ClassType.MouseDown.apply($.ClassType, arguments)}
   ,MouseMove$:function($){return $.ClassType.MouseMove.apply($.ClassType, arguments)}
   ,MouseUp$:function($){return $.ClassType.MouseUp.apply($.ClassType, arguments)}
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
};
TW3Slider.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TLccMarklinProtocolVersion enumeration
///  [line: 462, column: 3, file: lcc_defines]
var TLccMarklinProtocolVersion = [ "lmpvDefault", "lmvpVer1", "lmvpVer2", "lmvpVer2ExtFunction" ];
/// TLccDccSpeedStep enumeration
///  [line: 461, column: 3, file: lcc_defines]
var TLccDccSpeedStep = [ "ldssDefault", "ldss14", "ldss28", "ldss128" ];
/// TEventState enumeration
///  [line: 122, column: 3, file: lcc_defines]
var TEventState = [ "evs_Unknown", "evs_Valid", "evs_InValid" ];
/// TSearchEncodeStringError enumeration
///  [line: 38, column: 3, file: lcc_node_messages]
var TSearchEncodeStringError = [ "sese_ok", "sese_TooLong", "sese_InvalidCharacters" ];
/// TLccMessage = class (TObject)
///  [line: 60, column: 1, file: lcc_node_messages]
var TLccMessage = {
   $ClassName:"TLccMessage",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAbandonTimeout = $.FDataCount = $.FRetryAttempts = 0;
      $.FCAN = null;
      $.FDataArray = function () {
         for (var r=[],i=0; i<1024; i++) r.push(0);
         return r
      }();
      $.FDestID = [0,0];
      $.FIsCAN = false;
      $.FMTI = 0;
      $.FSourceID = [0,0];
   }
   /// function TLccMessage.Clone() : TLccMessage
   ///  [line: 665, column: 22, file: lcc_node_messages]
   ,Clone$2:function(Self) {
      var Result = null;
      Result = TLccMessage.Create$197($New(TLccMessage));
      Result.FIsCAN = Self.FIsCAN;
      Result.FCAN.FDestAlias = Self.FCAN.FDestAlias;
      Result.FCAN.FFramingBits = Self.FCAN.FFramingBits;
      Result.FCAN.FiTag = Self.FCAN.FiTag;
      Result.FCAN.FMTI$1 = Self.FCAN.FMTI$1;
      Result.FCAN.FSourceAlias = Self.FCAN.FSourceAlias;
      Result.FDataArray = Self.FDataArray.slice(0);
      Result.FDataCount = Self.FDataCount;
      Result.FDestID = Self.FDestID.slice(0);
      Result.FSourceID = Self.FSourceID.slice(0);
      Result.FMTI = Self.FMTI;
      Result.FRetryAttempts = 0;
      return Result
   }
   /// function TLccMessage.ConvertToGridConnectStr(Delimiter: String; Details: Boolean) : String
   ///  [line: 1011, column: 22, file: lcc_node_messages]
   ,ConvertToGridConnectStr:function(Self, Delimiter, Details) {
      var Result = "";
      var i$7 = 0,
         iFrameCount = 0,
         Offset$5 = 0,
         LocalMTI = 0,
         FrameCount = 0;
      Result = "";
      if (Self.FMTI == 7240) {
         if (Self.FIsCAN) {
            LocalMTI = (Self.FCAN.FMTI$1|Self.FCAN.FSourceAlias)|268435456;
            LocalMTI = LocalMTI|(Self.FCAN.FDestAlias<<12);
            Result = ":X" + IntToHex(LocalMTI,8) + "N";
            var $temp143;
            for(i$7=0,$temp143=Self.FDataCount;i$7<$temp143;i$7++) {
               Result += IntToHex2(Self.FDataArray[i$7]);
            }
            Result = Result + ";" + Delimiter;
         } else {
            if (Self.FDataCount < 9) {
               Result = Result + ":X" + IntToHex(((436207616|(Self.FCAN.FDestAlias<<12))|Self.FCAN.FSourceAlias),8) + "N";
               var $temp144;
               for(i$7=0,$temp144=Self.FDataCount;i$7<$temp144;i$7++) {
                  Result += IntToHex2(Self.FDataArray[i$7]);
               }
               Result = Result + ";";
            } else {
               Offset$5 = 0;
               while (Offset$5 < Self.FDataCount) {
                  if (!Offset$5) {
                     Result = Result + ":X" + IntToHex(((452984832|(Self.FCAN.FDestAlias<<12))|Self.FCAN.FSourceAlias),8) + "N";
                  } else if (Offset$5+8 >= Self.FDataCount) {
                     Result = Result + ":X" + IntToHex(((486539264|(Self.FCAN.FDestAlias<<12))|Self.FCAN.FSourceAlias),8) + "N";
                  } else {
                     Result = Result + ":X" + IntToHex(((469762048|(Self.FCAN.FDestAlias<<12))|Self.FCAN.FSourceAlias),8) + "N";
                  }
                  for(i$7=0;i$7<=7;i$7++) {
                     Result += IntToHex2(Self.FDataArray[Offset$5]);
                     ++Offset$5;
                     if (Offset$5 >= Self.FDataCount) {
                        break;
                     }
                  }
                  Result = Result + ";" + Delimiter;
               }
            }
         }
      } else if (Self.FMTI == 8072) {
         if (Self.FIsCAN) {
            /* null */
         }
      } else {
         if (Self.FIsCAN) {
            LocalMTI = (Self.FCAN.FMTI$1|Self.FCAN.FSourceAlias)|268435456;
            switch (Self.FCAN.FMTI$1) {
               case 117440512 :
                  LocalMTI = LocalMTI|(Self.FSourceID[1]&16773120);
                  break;
               case 100663296 :
                  LocalMTI = LocalMTI|((Self.FSourceID[1]<<12)&16773120);
                  break;
               case 83886080 :
                  LocalMTI = LocalMTI|(Self.FSourceID[0]&16773120);
                  break;
               case 67108864 :
                  LocalMTI = LocalMTI|((Self.FSourceID[0]<<12)&16773120);
                  break;
            }
         } else {
            LocalMTI = ((((Self.FMTI<<12)|Self.FCAN.FSourceAlias)|150994944)|268435456);
         }
         if ((LocalMTI&251658240) > 150994944) {
            LocalMTI = LocalMTI|(Self.FCAN.FDestAlias<<12);
            Result = ":X" + IntToHex(LocalMTI,8) + "N";
            var $temp145;
            for(i$7=0,$temp145=Self.FDataCount;i$7<$temp145;i$7++) {
               Result += IntToHex2(Self.FDataArray[i$7]);
            }
         } else {
            if (TLccMessage.GetHasDestination(Self)) {
               if (Self.FDataCount > 6) {
                  Result = "";
                  Offset$5 = 0;
                  FrameCount = $Div(Self.FDataCount,6);
                  if (Self.FDataCount % 6) {
                     ++FrameCount;
                  }
                  var $temp146;
                  for(iFrameCount=0,$temp146=FrameCount;iFrameCount<$temp146;iFrameCount++) {
                     Result = Result + ":X" + IntToHex(LocalMTI,8) + "N";
                     if (Self.FMTI == 2568) {
                        Result += IntToHex2((Self.FCAN.FDestAlias>>>8)&255);
                     } else if (!iFrameCount) {
                        Result += IntToHex2(((Self.FCAN.FDestAlias>>>8)|16)&255);
                     } else if (iFrameCount == FrameCount-1) {
                        Result += IntToHex2(((Self.FCAN.FDestAlias>>>8)|32)&255);
                     } else {
                        Result += IntToHex2(((Self.FCAN.FDestAlias>>>8)|48)&255);
                     }
                     Result += IntToHex2(Self.FCAN.FDestAlias&255);
                     i$7 = Offset$5;
                     while (i$7 < Self.FDataCount) {
                        Result += IntToHex2(Self.FDataArray[i$7]);
                        ++i$7;
                        if (i$7-Offset$5 == 6) {
                           (Offset$5+= 6);
                           break;
                        }
                     }
                     Result = Result + ";" + Delimiter;
                  }
               } else {
                  Result = ":X" + IntToHex(LocalMTI,8) + "N";
                  Result += IntToHex2((Self.FCAN.FDestAlias>>>8)|(Self.FCAN.FFramingBits&255));
                  Result += IntToHex2(Self.FCAN.FDestAlias&255);
                  var $temp147;
                  for(i$7=0,$temp147=Self.FDataCount;i$7<$temp147;i$7++) {
                     Result += IntToHex2(Self.FDataArray[i$7]);
                  }
                  Result = Result + ";";
               }
            } else {
               Result = ":X" + IntToHex(LocalMTI,8) + "N";
               var $temp148;
               for(i$7=0,$temp148=Self.FDataCount;i$7<$temp148;i$7++) {
                  Result += IntToHex2(Self.FDataArray[i$7]);
               }
               Result = Result + ";";
            }
         }
      }
      Result = (Result).toUpperCase();
      return Result
   }
   /// constructor TLccMessage.Create()
   ///  [line: 738, column: 25, file: lcc_node_messages]
   ,Create$197:function(Self) {
      TObject.Create(Self);
      Self.FCAN = TObject.Create($New(TLccCANMessage));
      return Self
   }
   /// destructor TLccMessage.Destroy()
   ///  [line: 744, column: 24, file: lcc_node_messages]
   ,Destroy:function(Self) {
      TObject.Free(Self.FCAN);
      TObject.Destroy(Self);
   }
   /// function TLccMessage.ExtractDataBytesAsEventID(StartIndex: Integer) : TEventID
   ///  [line: 762, column: 22, file: lcc_node_messages]
   ,ExtractDataBytesAsEventID:function(Self, StartIndex$1) {
      var Result = [0,0,0,0,0,0,0,0];
      Result[0] = Self.FDataArray[StartIndex$1];
      Result[1] = Self.FDataArray[StartIndex$1+1];
      Result[2] = Self.FDataArray[StartIndex$1+2];
      Result[3] = Self.FDataArray[StartIndex$1+3];
      Result[4] = Self.FDataArray[StartIndex$1+4];
      Result[5] = Self.FDataArray[StartIndex$1+5];
      Result[6] = Self.FDataArray[StartIndex$1+6];
      Result[7] = Self.FDataArray[StartIndex$1+7];
      return Result
   }
   /// function TLccMessage.ExtractDataBytesAsInt(StartByteIndex: Integer; EndByteIndex: Integer) : DWord
   ///  [line: 774, column: 22, file: lcc_node_messages]
   ,ExtractDataBytesAsInt:function(Self, StartByteIndex, EndByteIndex) {
      var Result = 0;
      var i$7 = 0,
         Offset$5 = 0,
         Shift = 0,
         ByteAsDWORD = 0,
         ShiftedByte = 0;
      Result = 0;
      Offset$5 = EndByteIndex-StartByteIndex;
      $Assert(Offset$5 < 4,"ExtractDataBytesAsInt requested larger than a DWORD result","");
      var $temp149;
      for(i$7=StartByteIndex,$temp149=EndByteIndex;i$7<=$temp149;i$7++) {
         Shift = Offset$5*8;
         ByteAsDWORD = Self.FDataArray[i$7];
         ShiftedByte = ByteAsDWORD<<Shift;
         Result = Result|ShiftedByte;
         --Offset$5;
      }
      return Result
   }
   /// function TLccMessage.ExtractDataBytesAsNodeID(StartIndex: Integer; var ANodeID: TNodeID) : TNodeID
   ///  [line: 795, column: 22, file: lcc_node_messages]
   ,ExtractDataBytesAsNodeID:function(Self, StartIndex$1, ANodeID) {
      var Result = [0,0];
      ANodeID.v[1] = ((Self.FDataArray[StartIndex$1]<<16)|(Self.FDataArray[StartIndex$1+1]<<8))|Self.FDataArray[StartIndex$1+2];
      ANodeID.v[0] = ((Self.FDataArray[StartIndex$1+3]<<16)|(Self.FDataArray[StartIndex$1+4]<<8))|Self.FDataArray[StartIndex$1+5];
      Result = ANodeID.v.slice(0);
      return Result
   }
   /// procedure TLccMessage.ExtractSimpleTrainNodeIdentInfoReply(var Version: Byte; var RoadName: String; var TrainClass: String; var RoadNumber: String; var TrainName: String; var Manufacturer: String; var Owner: String)
   ///  [line: 828, column: 23, file: lcc_node_messages]
   ,ExtractSimpleTrainNodeIdentInfoReply:function(Self, Version$2, RoadName, TrainClass$2, RoadNumber$3, TrainName$2, Manufacturer$2, Owner$13) {
      if (Self.FDataCount > 0) {
         Version$2.v = Self.FDataArray[0];
      }
      RoadName.v = "RoadName";
      TrainClass$2.v = "TrainClass";
      RoadNumber$3.v = "RoadNumber";
      TrainName$2.v = "TrainName";
      Manufacturer$2.v = "Manufacturer";
      Owner$13.v = "Owner";
   }
   /// function TLccMessage.GetDataArrayIndexer(iIndex: DWord) : Byte
   ///  [line: 718, column: 22, file: lcc_node_messages]
   ,GetDataArrayIndexer:function(Self, iIndex) {
      return Self.FDataArray[iIndex];
   }
   /// function TLccMessage.GetHasDestination() : Boolean
   ///  [line: 723, column: 22, file: lcc_node_messages]
   ,GetHasDestination:function(Self) {
      return (Self.FCAN.FDestAlias!=0) || (Self.FDestID[0]!=0) && (Self.FDestID[1]!=0);
   }
   /// procedure TLccMessage.InsertDWordAsDataBytes(DoubleWord: DWord; StartByteIndex: Integer)
   ///  [line: 704, column: 23, file: lcc_node_messages]
   ,InsertDWordAsDataBytes:function(Self, DoubleWord, StartByteIndex) {
      Self.FDataArray[StartByteIndex] = _Highest(DoubleWord);
      Self.FDataArray[StartByteIndex+1] = _Higher(DoubleWord);
      Self.FDataArray[StartByteIndex+2] = _Hi(DoubleWord);
      Self.FDataArray[StartByteIndex+3] = _Lo(DoubleWord);
   }
   /// procedure TLccMessage.InsertEventID(StartIndex: Integer; var AnEventID: TEventID)
   ///  [line: 692, column: 23, file: lcc_node_messages]
   ,InsertEventID:function(Self, StartIndex$1, AnEventID) {
      Self.FDataArray[StartIndex$1] = AnEventID.v[0];
      Self.FDataArray[StartIndex$1+1] = AnEventID.v[1];
      Self.FDataArray[StartIndex$1+2] = AnEventID.v[2];
      Self.FDataArray[StartIndex$1+3] = AnEventID.v[3];
      Self.FDataArray[StartIndex$1+4] = AnEventID.v[4];
      Self.FDataArray[StartIndex$1+5] = AnEventID.v[5];
      Self.FDataArray[StartIndex$1+6] = AnEventID.v[6];
      Self.FDataArray[StartIndex$1+7] = AnEventID.v[7];
   }
   /// procedure TLccMessage.InsertNodeID(StartIndex: Integer; var ANodeID: TNodeID)
   ///  [line: 682, column: 23, file: lcc_node_messages]
   ,InsertNodeID:function(Self, StartIndex$1, ANodeID) {
      Self.FDataArray[StartIndex$1] = _Higher(ANodeID.v[1]);
      Self.FDataArray[StartIndex$1+1] = _Hi(ANodeID.v[1]);
      Self.FDataArray[StartIndex$1+2] = _Lo(ANodeID.v[1]);
      Self.FDataArray[StartIndex$1+3] = _Higher(ANodeID.v[0]);
      Self.FDataArray[StartIndex$1+4] = _Hi(ANodeID.v[0]);
      Self.FDataArray[StartIndex$1+5] = _Lo(ANodeID.v[0]);
   }
   /// procedure TLccMessage.LoadAMD(ASourceID: TNodeID; ASourceAlias: Word)
   ///  [line: 1330, column: 23, file: lcc_node_messages]
   ,LoadAMD:function(Self, ASourceID, ASourceAlias) {
      ASourceID = { v : ASourceID };
      TLccMessage.ZeroFields(Self);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FIsCAN = true;
      Self.FCAN.FMTI$1 = 7344128;
      Self.FSourceID = ASourceID.v.slice(0);
      TLccMessage.InsertNodeID(Self,0,ASourceID);
      Self.FDataCount = 6;
   }
   /// procedure TLccMessage.LoadAME(ASourceID: TNodeID; ASourceAlias: Word; TargetNodeID: TNodeID)
   ///  [line: 1341, column: 23, file: lcc_node_messages]
   ,LoadAME:function(Self, ASourceID, ASourceAlias, TargetNodeID$1) {
      TargetNodeID$1 = { v : TargetNodeID$1 };
      TLccMessage.ZeroFields(Self);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FIsCAN = true;
      Self.FCAN.FMTI$1 = 7348224;
      Self.FSourceID = ASourceID.slice(0);
      if (NullNodeID(TargetNodeID$1.v.slice(0))) {
         Self.FDataCount = 0;
      } else {
         TLccMessage.InsertNodeID(Self,0,TargetNodeID$1);
         Self.FDataCount = 6;
      }
   }
   /// procedure TLccMessage.LoadAMR(ASourceID: TNodeID; ASourceAlias: Word)
   ///  [line: 1359, column: 23, file: lcc_node_messages]
   ,LoadAMR:function(Self, ASourceID, ASourceAlias) {
      ASourceID = { v : ASourceID };
      TLccMessage.ZeroFields(Self);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FIsCAN = true;
      Self.FCAN.FMTI$1 = 7352320;
      Self.FSourceID = ASourceID.v.slice(0);
      TLccMessage.InsertNodeID(Self,0,ASourceID);
      Self.FDataCount = 6;
   }
   /// function TLccMessage.LoadByGridConnectStr(GridConnectStr: String) : Boolean
   ///  [line: 843, column: 22, file: lcc_node_messages]
   ,LoadByGridConnectStr:function(Self, GridConnectStr) {
      var Result = false;
      var DestHi = 0,
         DestLo = 0,
         ZeroIndex = false,
         HeaderStr = "",
         DataStr = "",
         ByteStr = "",
         i$7 = 0,
         i_X = 0,
         i_N = 0,
         i_SemiColon = 0,
         i_Data = 0,
         len_Data = 0,
         i_Data_Count = 0,
         TempNodeID = {v:[0,0]},
         CANFrameType = 0;
      Result = false;
      if (GridConnectStr != "") {
         TLccMessage.ZeroFields(Self);
         ZeroIndex = false;
         GridConnectStr = (GridConnectStr).toUpperCase();
         i_X = (GridConnectStr.indexOf("X")+1);
         i_N = (GridConnectStr.indexOf("N")+1);
         i_SemiColon = (GridConnectStr.indexOf(";")+1);
         i_Data = 1;
         if (ZeroIndex) {
            --i_X;
            --i_N;
            --i_SemiColon;
            --i_Data;
         }
         HeaderStr = "";
         DataStr = "";
         var $temp150;
         for(i$7=i_X+1,$temp150=i_N;i$7<$temp150;i$7++) {
            HeaderStr += GridConnectStr.charAt(i$7-1);
         }
         var $temp151;
         for(i$7=i_N+1,$temp151=i_SemiColon;i$7<$temp151;i$7++) {
            DataStr += GridConnectStr.charAt(i$7-1);
         }
         len_Data = DataStr.length;
         Self.FCAN.FMTI$1 = TDatatype.HexStrToInt("0x" + HeaderStr);
         Self.FCAN.FSourceAlias = (Self.FCAN.FMTI$1&4095);
         Self.FCAN.FMTI$1 = Self.FCAN.FMTI$1&(~268435456);
         Self.FCAN.FMTI$1 = Self.FCAN.FMTI$1&4294963200;
         Self.FIsCAN = (Self.FCAN.FMTI$1&117440512) != 16777216;
         if (Self.FIsCAN) {
            CANFrameType = Self.FCAN.FMTI$1&251658240;
            if (!CANFrameType) {
               Self.FCAN.FMTI$1 = Self.FCAN.FMTI$1&268431360;
            } else if (CANFrameType <= 117440512) {
               Self.FCAN.FMTI$1 = CANFrameType;
            } else if (CANFrameType >= 167772160 && CANFrameType <= 218103808) {
               Self.FCAN.FDestAlias = (Self.FCAN.FMTI$1&16773120)>>>12;
               Self.FCAN.FMTI$1 = Self.FCAN.FMTI$1&251658240;
               Self.FMTI = 7240;
            }
         } else {
            if ((Self.FCAN.FMTI$1&32768) == 32768) {
               $Assert(DataStr.length >= 4,"Malformed message.  Address Present bit set but not enough bytes in the payload","");
               ByteStr = DataStr.charAt(i_Data-1) + DataStr.charAt(i_Data);
               DestHi = TDatatype.HexStrToInt("0x" + ByteStr);
               ByteStr = DataStr.charAt(i_Data+1) + DataStr.charAt(i_Data+2);
               DestLo = TDatatype.HexStrToInt("0x" + ByteStr);
               (i_Data+= 4);
               (len_Data-= 4);
               Self.FCAN.FFramingBits = DestHi&48;
               Self.FCAN.FDestAlias = ((DestHi<<8)&4095)|DestLo;
            } else {
               Self.FCAN.FDestAlias = 0;
               Self.FCAN.FFramingBits = 0;
            }
            Self.FMTI = ((Self.FCAN.FMTI$1>>>12)&4095);
         }
         Self.FDataCount = 0;
         i_Data_Count = len_Data+i_Data;
         while (i_Data < i_Data_Count) {
            ByteStr = DataStr.charAt(i_Data-1) + DataStr.charAt(i_Data);
            Self.FDataArray[Self.FDataCount] = TDatatype.HexStrToInt("0x" + ByteStr);
            (i_Data+= 2);
            ++Self.FDataCount;
         }
         if (Self.FIsCAN) {
            switch (Self.FCAN.FMTI$1) {
               case 7344128 :
                  TempNodeID.v = NULL_NODE_ID.slice(0);
                  TLccMessage.ExtractDataBytesAsNodeID(Self,0,TempNodeID);
                  Self.FSourceID = TempNodeID.v.slice(0);
                  break;
            }
         }
         Result = true;
      }
      return Result
   }
   /// procedure TLccMessage.LoadCID(ASourceID: TNodeID; ASourceAlias: Word; ACID: Byte)
   ///  [line: 1306, column: 23, file: lcc_node_messages]
   ,LoadCID:function(Self, ASourceID, ASourceAlias, ACID) {
      TLccMessage.ZeroFields(Self);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FIsCAN = true;
      Self.FSourceID = ASourceID.slice(0);
      switch (ACID) {
         case 0 :
            Self.FCAN.FMTI$1 = 117440512;
            break;
         case 1 :
            Self.FCAN.FMTI$1 = 100663296;
            break;
         case 2 :
            Self.FCAN.FMTI$1 = 83886080;
            break;
         case 3 :
            Self.FCAN.FMTI$1 = 67108864;
            break;
      }
   }
   /// procedure TLccMessage.LoadConsumerIdentified(ASourceID: TNodeID; ASourceAlias: Word; var Event: TEventID; EventState: TEventState)
   ///  [line: 1774, column: 23, file: lcc_node_messages]
   ,LoadConsumerIdentified:function(Self, ASourceID, ASourceAlias, Event$3, EventState) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      TLccMessage.InsertEventID(Self,0,Event$3);
      Self.FDataCount = 8;
      switch (EventState) {
         case 1 :
            Self.FMTI = 1220;
            break;
         case 2 :
            Self.FMTI = 1221;
            break;
         case 0 :
            Self.FMTI = 1223;
            break;
      }
   }
   /// procedure TLccMessage.LoadDatagram(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word)
   ///  [line: 1798, column: 23, file: lcc_node_messages]
   ,LoadDatagram:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FMTI = 7240;
   }
   /// procedure TLccMessage.LoadDatagramAck(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Ok: Boolean; ReplyPending: Boolean; TimeOutValueN: Byte)
   ///  [line: 2440, column: 23, file: lcc_node_messages]
   ,LoadDatagramAck:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Ok, ReplyPending, TimeOutValueN) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 1;
      if (ReplyPending) {
         TLccMessage.SetDataArrayIndexer(Self,0,128|(TimeOutValueN&15));
      } else {
         TLccMessage.SetDataArrayIndexer(Self,0,0);
      }
      if (Ok) {
         Self.FMTI = 2600;
      } else {
         Self.FMTI = 2632;
      }
   }
   /// procedure TLccMessage.LoadDatagramRejected(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Reason: Word)
   ///  [line: 2460, column: 23, file: lcc_node_messages]
   ,LoadDatagramRejected:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Reason) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 2;
      Self.FMTI = 2632;
      Self.FDataArray[0] = _Hi(Reason);
      Self.FDataArray[1] = _Lo(Reason);
   }
   /// procedure TLccMessage.LoadInitializationComplete(ASourceID: TNodeID; ASourceAlias: Word)
   ///  [line: 1370, column: 23, file: lcc_node_messages]
   ,LoadInitializationComplete:function(Self, ASourceID, ASourceAlias) {
      ASourceID = { v : ASourceID };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.v.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      TLccMessage.InsertNodeID(Self,0,ASourceID);
      Self.FDataCount = 6;
      Self.FMTI = 256;
   }
   /// procedure TLccMessage.LoadOptionalInteractionRejected(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Reason: Word; AnMTI: Word)
   ///  [line: 1380, column: 23, file: lcc_node_messages]
   ,LoadOptionalInteractionRejected:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Reason, AnMTI) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 4;
      Self.FMTI = 104;
      Self.FDataArray[0] = _Hi(Reason);
      Self.FDataArray[1] = _Lo(Reason);
      Self.FDataArray[2] = _Hi(AnMTI);
      Self.FDataArray[3] = _Lo(AnMTI);
   }
   /// procedure TLccMessage.LoadProducerIdentified(ASourceID: TNodeID; ASourceAlias: Word; var Event: TEventID; EventState: TEventState)
   ///  [line: 1408, column: 23, file: lcc_node_messages]
   ,LoadProducerIdentified:function(Self, ASourceID, ASourceAlias, Event$3, EventState) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      TLccMessage.InsertEventID(Self,0,Event$3);
      Self.FDataCount = 8;
      switch (EventState) {
         case 1 :
            Self.FMTI = 1348;
            break;
         case 2 :
            Self.FMTI = 1349;
            break;
         case 0 :
            Self.FMTI = 1351;
            break;
      }
   }
   /// procedure TLccMessage.LoadProtocolIdentifyReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Flags: TLccSupportedProtocolArray)
   ///  [line: 1757, column: 23, file: lcc_node_messages]
   ,LoadProtocolIdentifyReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Flags$2) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataArray[5] = Flags$2[0];
      Self.FDataArray[4] = Flags$2[1];
      Self.FDataArray[3] = Flags$2[2];
      Self.FDataArray[2] = Flags$2[3];
      Self.FDataArray[1] = Flags$2[4];
      Self.FDataArray[0] = Flags$2[5];
      Self.FDataCount = 6;
      Self.FMTI = 1640;
   }
   /// procedure TLccMessage.LoadRID(ASourceID: TNodeID; ASourceAlias: Word)
   ///  [line: 1321, column: 23, file: lcc_node_messages]
   ,LoadRID:function(Self, ASourceID, ASourceAlias) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FIsCAN = true;
      Self.FCAN.FMTI$1 = 7340032;
   }
   /// procedure TLccMessage.LoadSimpleNodeIdentInfoReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; SimplePackedArray: TLccDynamicByteArray)
   ///  [line: 2324, column: 23, file: lcc_node_messages]
   ,LoadSimpleNodeIdentInfoReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, SimplePackedArray) {
      var i$7 = 0;
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      var $temp152;
      for(i$7=0,$temp152=SimplePackedArray.length;i$7<$temp152;i$7++) {
         Self.FDataArray[i$7] = SimplePackedArray[i$7];
      }
      Self.FDataCount = SimplePackedArray.length;
      Self.FMTI = 2568;
   }
   /// procedure TLccMessage.LoadSimpleTrainNodeIdentInfoRequest(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word)
   ///  [line: 2314, column: 23, file: lcc_node_messages]
   ,LoadSimpleTrainNodeIdentInfoRequest:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FMTI = 3496;
   }
   /// procedure TLccMessage.LoadTractionControllerAssign(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ANodeID: TNodeID; AnAlias: Word)
   ///  [line: 1985, column: 23, file: lcc_node_messages]
   ,LoadTractionControllerAssign:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ANodeID, AnAlias) {
      ANodeID = { v : ANodeID };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      if (AnAlias) {
         Self.FDataCount = 11;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 1;
         Self.FDataArray[2] = 1;
         TLccMessage.InsertNodeID(Self,3,ANodeID);
         Self.FDataArray[9] = Hi(AnAlias);
         Self.FDataArray[10] = Lo(AnAlias);
      } else {
         Self.FDataCount = 9;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 1;
         Self.FDataArray[2] = 0;
         TLccMessage.InsertNodeID(Self,3,ANodeID);
      }
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionControllerAssignReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; AResult: Byte)
   ///  [line: 2014, column: 23, file: lcc_node_messages]
   ,LoadTractionControllerAssignReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, AResult) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 3;
      Self.FDataArray[0] = 32;
      Self.FDataArray[1] = 1;
      Self.FDataArray[2] = AResult;
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionControllerChangedReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Allow: Boolean)
   ///  [line: 2134, column: 23, file: lcc_node_messages]
   ,LoadTractionControllerChangedReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Allow) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FMTI = 488;
      Self.FDataCount = 3;
      Self.FDataArray[0] = 32;
      Self.FDataArray[1] = 4;
      if (Allow) {
         Self.FDataArray[2] = 0;
      } else {
         Self.FDataArray[2] = 1;
      }
   }
   /// procedure TLccMessage.LoadTractionControllerChangingNotify(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ANodeID: TNodeID; AnAlias: Word)
   ///  [line: 2105, column: 23, file: lcc_node_messages]
   ,LoadTractionControllerChangingNotify:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ANodeID, AnAlias) {
      ANodeID = { v : ANodeID };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      if (AnAlias) {
         Self.FDataCount = 11;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 4;
         Self.FDataArray[2] = 1;
         TLccMessage.InsertNodeID(Self,3,ANodeID);
         Self.FDataArray[9] = Hi(AnAlias);
         Self.FDataArray[10] = Lo(AnAlias);
      } else {
         Self.FDataCount = 9;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 4;
         Self.FDataArray[2] = 0;
         TLccMessage.InsertNodeID(Self,3,ANodeID);
      }
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionControllerQueryReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; AControllerID: TNodeID; AControllerAlias: Word)
   ///  [line: 2074, column: 23, file: lcc_node_messages]
   ,LoadTractionControllerQueryReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, AControllerID, AControllerAlias) {
      AControllerID = { v : AControllerID };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      if (AControllerAlias) {
         Self.FDataCount = 11;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 3;
         Self.FDataArray[2] = 1;
         TLccMessage.InsertNodeID(Self,3,AControllerID);
         Self.FDataArray[9] = Hi(AControllerAlias);
         Self.FDataArray[10] = Lo(AControllerAlias);
      } else {
         Self.FDataCount = 9;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 3;
         Self.FDataArray[2] = 0;
         TLccMessage.InsertNodeID(Self,3,AControllerID);
      }
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionControllerRelease(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ANodeID: TNodeID; AnAlias: Word)
   ///  [line: 2031, column: 23, file: lcc_node_messages]
   ,LoadTractionControllerRelease:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ANodeID, AnAlias) {
      ANodeID = { v : ANodeID };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      if (AnAlias) {
         Self.FDataCount = 11;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 2;
         Self.FDataArray[2] = 1;
         TLccMessage.InsertNodeID(Self,3,ANodeID);
         Self.FDataArray[9] = Hi(AnAlias);
         Self.FDataArray[10] = Lo(AnAlias);
      } else {
         Self.FDataCount = 9;
         Self.FDataArray[0] = 32;
         Self.FDataArray[1] = 2;
         Self.FDataArray[2] = 0;
         TLccMessage.InsertNodeID(Self,3,ANodeID);
      }
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionEStop(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word)
   ///  [line: 1884, column: 23, file: lcc_node_messages]
   ,LoadTractionEStop:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 1;
      Self.FDataArray[0] = 2;
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionListenerAttach(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ListenerNodeID: TNodeID)
   ///  [line: 2152, column: 23, file: lcc_node_messages]
   ,LoadTractionListenerAttach:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ListenerNodeID$2) {
      ListenerNodeID$2 = { v : ListenerNodeID$2 };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 9;
      Self.FDataArray[0] = 48;
      Self.FDataArray[1] = 1;
      Self.FDataArray[2] = 0;
      TLccMessage.InsertNodeID(Self,3,ListenerNodeID$2);
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionListenerAttachReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ListenerNodeID: TNodeID; ReplyCode: Word)
   ///  [line: 2169, column: 23, file: lcc_node_messages]
   ,LoadTractionListenerAttachReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ListenerNodeID$2, ReplyCode) {
      ListenerNodeID$2 = { v : ListenerNodeID$2 };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 10;
      Self.FDataArray[0] = 48;
      Self.FDataArray[1] = 1;
      Self.FDataArray[2] = 0;
      TLccMessage.InsertNodeID(Self,3,ListenerNodeID$2);
      Self.FDataArray[8] = Hi(ReplyCode);
      Self.FDataArray[9] = Lo(ReplyCode);
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionListenerDetachReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ListenerNodeID: TNodeID; ReplyCode: Word)
   ///  [line: 2204, column: 23, file: lcc_node_messages]
   ,LoadTractionListenerDetachReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ListenerNodeID$2, ReplyCode) {
      ListenerNodeID$2 = { v : ListenerNodeID$2 };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 10;
      Self.FDataArray[0] = 48;
      Self.FDataArray[1] = 2;
      Self.FDataArray[2] = 0;
      TLccMessage.InsertNodeID(Self,3,ListenerNodeID$2);
      Self.FDataArray[8] = Hi(ReplyCode);
      Self.FDataArray[9] = Lo(ReplyCode);
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionListenerQueryReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ListenerCount: Byte; ListenerNodeIndex: Byte; ListenerNodeID: TNodeID; Flags: Byte)
   ///  [line: 2251, column: 23, file: lcc_node_messages]
   ,LoadTractionListenerQueryReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ListenerCount, ListenerNodeIndex, ListenerNodeID$2, Flags$2) {
      ListenerNodeID$2 = { v : ListenerNodeID$2 };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      if (NullNodeID(ListenerNodeID$2.v.slice(0))) {
         Self.FDataCount = 3;
         Self.FDataArray[0] = 48;
         Self.FDataArray[1] = 3;
         Self.FDataArray[2] = ListenerCount;
      } else {
         Self.FDataCount = 10;
         Self.FDataArray[0] = 48;
         Self.FDataArray[1] = 3;
         Self.FDataArray[2] = ListenerCount;
         Self.FDataArray[3] = ListenerNodeIndex;
         Self.FDataArray[4] = Flags$2;
         TLccMessage.InsertNodeID(Self,5,ListenerNodeID$2);
      }
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionListenerQueryReply_NoInfo(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word)
   ///  [line: 2239, column: 23, file: lcc_node_messages]
   ,LoadTractionListenerQueryReply_NoInfo:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 0;
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionManageReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Accepted: Boolean)
   ///  [line: 2296, column: 23, file: lcc_node_messages]
   ,LoadTractionManageReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Accepted) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 3;
      Self.FDataArray[0] = 64;
      Self.FDataArray[1] = 1;
      if (Accepted) {
         Self.FDataArray[2] = 0;
      } else {
         Self.FDataArray[2] = 1;
      }
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionQueryFunction(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Address: Word)
   ///  [line: 1950, column: 23, file: lcc_node_messages]
   ,LoadTractionQueryFunction:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Address$1) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 4;
      Self.FDataArray[0] = 17;
      Self.FDataArray[1] = ((Address$1>>>16)&255);
      Self.FDataArray[2] = ((Address$1>>>8)&255);
      Self.FDataArray[3] = (Address$1&255);
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionQueryFunctionReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; Address: Word; Value: Word)
   ///  [line: 1966, column: 23, file: lcc_node_messages]
   ,LoadTractionQueryFunctionReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, Address$1, Value$5) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 6;
      Self.FDataArray[0] = 17;
      Self.FDataArray[1] = ((Address$1>>>16)&255);
      Self.FDataArray[2] = ((Address$1>>>8)&255);
      Self.FDataArray[3] = (Address$1&255);
      Self.FDataArray[4] = Hi(Value$5);
      Self.FDataArray[5] = Lo(Value$5);
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionQuerySpeed(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word)
   ///  [line: 1897, column: 23, file: lcc_node_messages]
   ,LoadTractionQuerySpeed:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 1;
      Self.FDataArray[0] = 16;
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionQuerySpeedReply(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; SetSpeed: THalfFloat; Status: Byte; CommandedSpeed: THalfFloat; ActualSpeed: THalfFloat)
   ///  [line: 1910, column: 23, file: lcc_node_messages]
   ,LoadTractionQuerySpeedReply:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, SetSpeed$2, Status$1, CommandedSpeed, ActualSpeed) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 8;
      Self.FDataArray[0] = 16;
      Self.FDataArray[1] = Hi(SetSpeed$2);
      Self.FDataArray[2] = Lo(SetSpeed$2);
      Self.FDataArray[3] = Status$1;
      Self.FDataArray[4] = Hi(CommandedSpeed);
      Self.FDataArray[5] = Lo(CommandedSpeed);
      Self.FDataArray[6] = Hi(ActualSpeed);
      Self.FDataArray[7] = Lo(ActualSpeed);
      Self.FMTI = 488;
   }
   /// procedure TLccMessage.LoadTractionSearch(ASourceID: TNodeID; ASourceAlias: Word; SearchData: DWord)
   ///  [line: 1931, column: 23, file: lcc_node_messages]
   ,LoadTractionSearch:function(Self, ASourceID, ASourceAlias, SearchData$1) {
      var i$7 = 0;
      for(i$7=0;i$7<=1023;i$7++) {
         Self.FDataArray[i$7] = 0;
      }
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FDataArray[0] = 9;
      Self.FDataArray[1] = 0;
      Self.FDataArray[2] = 153;
      Self.FDataArray[3] = 255;
      TLccMessage.InsertDWordAsDataBytes(Self,SearchData$1,4);
      Self.FDataCount = 8;
      Self.FMTI = 2324;
   }
   /// procedure TLccMessage.LoadTractionSetFunction(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; AnAddress: DWord; AValue: Word)
   ///  [line: 1865, column: 23, file: lcc_node_messages]
   ,LoadTractionSetFunction:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, AnAddress, AValue) {
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 6;
      Self.FDataArray[0] = 1;
      Self.FDataArray[1] = ((AnAddress>>>16)&255);
      Self.FDataArray[2] = ((AnAddress>>>8)&255);
      Self.FDataArray[3] = (AnAddress&255);
      Self.FDataArray[4] = Hi(AValue);
      Self.FDataArray[5] = Lo(AValue);
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadTractionSetSpeed(ASourceID: TNodeID; ASourceAlias: Word; ADestID: TNodeID; ADestAlias: Word; ASpeed: Single)
   ///  [line: 1837, column: 23, file: lcc_node_messages]
   ,LoadTractionSetSpeed:function(Self, ASourceID, ASourceAlias, ADestID, ADestAlias, ASpeed) {
      var HalfFloatSpeed = 0;
      HalfFloatSpeed = FloatToHalf(ASpeed);
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.slice(0);
      Self.FDestID = ADestID.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      Self.FCAN.FDestAlias = ADestAlias;
      Self.FDataCount = 3;
      Self.FDataArray[0] = 0;
      Self.FDataArray[1] = Hi(HalfFloatSpeed);
      Self.FDataArray[2] = Lo(HalfFloatSpeed);
      Self.FMTI = 1512;
   }
   /// procedure TLccMessage.LoadVerifiedNodeID(ASourceID: TNodeID; ASourceAlias: Word)
   ///  [line: 1855, column: 23, file: lcc_node_messages]
   ,LoadVerifiedNodeID:function(Self, ASourceID, ASourceAlias) {
      ASourceID = { v : ASourceID };
      TLccMessage.ZeroFields(Self);
      Self.FSourceID = ASourceID.v.slice(0);
      Self.FCAN.FSourceAlias = ASourceAlias;
      TLccMessage.InsertNodeID(Self,0,ASourceID);
      Self.FDataCount = 6;
      Self.FMTI = 368;
   }
   /// procedure TLccMessage.SetDataArrayIndexer(iIndex: DWord; const Value: Byte)
   ///  [line: 1432, column: 23, file: lcc_node_messages]
   ,SetDataArrayIndexer:function(Self, iIndex, Value$5) {
      Self.FDataArray[iIndex] = Value$5;
   }
   /// function TLccMessage.TractionExtractActualSpeed() : THalfFloat
   ///  [line: 1450, column: 22, file: lcc_node_messages]
   ,TractionExtractActualSpeed:function(Self) {
      var Result = 0;
      Result = 0;
      Result = Self.FDataArray[6];
      Result = Result<<8;
      Result = Result|Self.FDataArray[7];
      return Result
   }
   /// function TLccMessage.TractionExtractCommandedSpeed() : THalfFloat
   ///  [line: 1458, column: 22, file: lcc_node_messages]
   ,TractionExtractCommandedSpeed:function(Self) {
      var Result = 0;
      Result = 0;
      Result = Self.FDataArray[4];
      Result = Result<<8;
      Result = Result|Self.FDataArray[5];
      return Result
   }
   /// function TLccMessage.TractionExtractFunctionAddress() : Longword
   ///  [line: 1466, column: 22, file: lcc_node_messages]
   ,TractionExtractFunctionAddress:function(Self) {
      var Result = 0;
      Result = 0;
      Result = Self.FDataArray[1];
      Result = Result<<8;
      Result = Result|Self.FDataArray[2];
      Result = Result<<8;
      Result = Result|Self.FDataArray[3];
      return Result
   }
   /// function TLccMessage.TractionExtractFunctionValue() : Word
   ///  [line: 1476, column: 22, file: lcc_node_messages]
   ,TractionExtractFunctionValue:function(Self) {
      var Result = 0;
      Result = 0;
      Result = Self.FDataArray[4];
      Result = Result<<8;
      Result = Result|Self.FDataArray[5];
      return Result
   }
   /// function TLccMessage.TractionExtractSetSpeed() : THalfFloat
   ///  [line: 1484, column: 22, file: lcc_node_messages]
   ,TractionExtractSetSpeed:function(Self) {
      var Result = 0;
      var Speed$3 = 0;
      Speed$3 = Self.FDataArray[1];
      Speed$3 = Speed$3<<8;
      Speed$3 = Speed$3|Self.FDataArray[2];
      Result = Speed$3;
      return Result
   }
   /// function TLccMessage.TractionExtractSpeedStatus() : Byte
   ///  [line: 1494, column: 22, file: lcc_node_messages]
   ,TractionExtractSpeedStatus:function(Self) {
      return Self.FDataArray[3];
   }
   /// function TLccMessage.TractionSearchDecodeSearchString() : String
   ///  [line: 1499, column: 22, file: lcc_node_messages]
   ,TractionSearchDecodeSearchString:function(Self) {
      var Result = "";
      var Nibble = 0,
         Snippit = 0,
         i$7 = 0;
      Result = "";
      for(i$7=4;i$7<=6;i$7++) {
         Nibble = Self.FDataArray[i$7];
         Snippit = Nibble>>>4;
         switch (Snippit) {
            case 15 :
               /* null */
break;
            case 0 :
               Result = Result + "0";
               break;
            case 1 :
               Result = Result + "1";
               break;
            case 2 :
               Result = Result + "2";
               break;
            case 3 :
               Result = Result + "3";
               break;
            case 4 :
               Result = Result + "4";
               break;
            case 5 :
               Result = Result + "5";
               break;
            case 6 :
               Result = Result + "6";
               break;
            case 7 :
               Result = Result + "7";
               break;
            case 8 :
               Result = Result + "8";
               break;
            case 9 :
               Result = Result + "9";
               break;
         }
         Snippit = Nibble&15;
         switch (Snippit) {
            case 15 :
               /* null */
break;
            case 0 :
               Result = Result + "0";
               break;
            case 1 :
               Result = Result + "1";
               break;
            case 2 :
               Result = Result + "2";
               break;
            case 3 :
               Result = Result + "3";
               break;
            case 4 :
               Result = Result + "4";
               break;
            case 5 :
               Result = Result + "5";
               break;
            case 6 :
               Result = Result + "6";
               break;
            case 7 :
               Result = Result + "7";
               break;
            case 8 :
               Result = Result + "8";
               break;
            case 9 :
               Result = Result + "9";
               break;
         }
      }
      return Result
   }
   /// function TLccMessage.TractionSearchEncodeNMRA(ForceLongAddress: Boolean; SpeedStep: TLccDccSpeedStep; ForceAllocate: Boolean; ExactMatchOnly: Boolean; MatchAddressOnly: Boolean) : Byte
   ///  [line: 1721, column: 28, file: lcc_node_messages]
   ,TractionSearchEncodeNMRA:function(Self, ForceLongAddress, SpeedStep$1, ForceAllocate, ExactMatchOnly, MatchAddressOnly) {
      var Result = 0;
      Result = 0;
      if (ForceAllocate) {
         Result = Result|128;
      }
      if (ExactMatchOnly) {
         Result = Result|64;
      }
      if (MatchAddressOnly) {
         Result = Result|32;
      }
      Result = Result|8;
      if (ForceLongAddress) {
         Result = Result|4;
      }
      switch (SpeedStep$1) {
         case 0 :
            /* null */
break;
         case 1 :
            Result = Result|1;
            break;
         case 2 :
            Result = Result|2;
            break;
         case 3 :
            Result = Result|3;
            break;
      }
      return Result
   }
   /// function TLccMessage.TractionSearchEncodeSearchString(SearchString: String; TrackProtocolFlags: Byte; var SearchData: DWord) : TSearchEncodeStringError
   ///  [line: 1539, column: 28, file: lcc_node_messages]
   ,TractionSearchEncodeSearchString:function(Self, SearchString$1, TrackProtocolFlags, SearchData$1) {
      var Result = 0;
      var i$7 = 0,
         iFiller = 0;
      Result = 0;
      if (SearchString$1.length > 6) {
         Result = 1;
         return Result;
      }
      SearchData$1.v = 0;
      var $temp153;
      for(i$7=1,$temp153=SearchString$1.length;i$7<=$temp153;i$7++) {
         {var $temp154 = SearchString$1.charAt(i$7-1);
            if ($temp154=="0") {
               SearchData$1.v = SearchData$1.v|0;
            }
             else if ($temp154=="1") {
               SearchData$1.v = SearchData$1.v|1;
            }
             else if ($temp154=="2") {
               SearchData$1.v = SearchData$1.v|2;
            }
             else if ($temp154=="3") {
               SearchData$1.v = SearchData$1.v|3;
            }
             else if ($temp154=="4") {
               SearchData$1.v = SearchData$1.v|4;
            }
             else if ($temp154=="5") {
               SearchData$1.v = SearchData$1.v|5;
            }
             else if ($temp154=="6") {
               SearchData$1.v = SearchData$1.v|6;
            }
             else if ($temp154=="7") {
               SearchData$1.v = SearchData$1.v|7;
            }
             else if ($temp154=="8") {
               SearchData$1.v = SearchData$1.v|8;
            }
             else if ($temp154=="9") {
               SearchData$1.v = SearchData$1.v|9;
            }
             else if ($temp154=="F") {
               SearchData$1.v = SearchData$1.v|15;
            }
             else {
               SearchData$1.v = 0;
               Result = 2;
               return Result;
            }
         }
         SearchData$1.v = SearchData$1.v<<4;
      }
      iFiller = 6-SearchString$1.length;
      var $temp155;
      for(i$7=0,$temp155=iFiller;i$7<$temp155;i$7++) {
         SearchData$1.v = SearchData$1.v|15;
         SearchData$1.v = SearchData$1.v<<4;
      }
      SearchData$1.v = SearchData$1.v<<4;
      SearchData$1.v = SearchData$1.v|TrackProtocolFlags;
      return Result
   }
   /// function TLccMessage.TractionSearchExtractSearchData() : DWord
   ///  [line: 1617, column: 22, file: lcc_node_messages]
   ,TractionSearchExtractSearchData:function(Self) {
      return TLccMessage.ExtractDataBytesAsInt(Self,4,7);
   }
   /// function TLccMessage.TractionSearchIsAddressMatchOnly() : Boolean
   ///  [line: 1622, column: 22, file: lcc_node_messages]
   ,TractionSearchIsAddressMatchOnly:function(Self) {
      return (Self.FDataArray[7]&32) == 32;
   }
   /// function TLccMessage.TractionSearchIsEvent() : Boolean
   ///  [line: 1627, column: 22, file: lcc_node_messages]
   ,TractionSearchIsEvent:function(Self) {
      return Self.FDataArray[0] == 9 && (Self.FDataArray[1]==0) && Self.FDataArray[2] == 153 && Self.FDataArray[3] == 255;
   }
   /// function TLccMessage.TractionSearchIsExactMatchOnly() : Boolean
   ///  [line: 1632, column: 22, file: lcc_node_messages]
   ,TractionSearchIsExactMatchOnly:function(Self) {
      return (Self.FDataArray[7]&64) == 64;
   }
   /// function TLccMessage.TractionSearchIsForceAllocate() : Boolean
   ///  [line: 1637, column: 22, file: lcc_node_messages]
   ,TractionSearchIsForceAllocate:function(Self) {
      return (Self.FDataArray[7]&128) == 128;
   }
   /// function TLccMessage.TractionSearchIsProtocolAny() : Boolean
   ///  [line: 1642, column: 22, file: lcc_node_messages]
   ,TractionSearchIsProtocolAny:function(Self) {
      return ((Self.FDataArray[7]&31)==0);
   }
   /// function TLccMessage.TractionSearchIsProtocolDCC(var ForceLongAddress: Boolean; var SpeedStep: TLccDccSpeedStep) : Boolean
   ///  [line: 1647, column: 22, file: lcc_node_messages]
   ,TractionSearchIsProtocolDCC:function(Self, ForceLongAddress, SpeedStep$1) {
      var Result = false;
      Result = (Self.FDataArray[7]&24) == 8;
      if (Result) {
         switch ((Self.FDataArray[7]&3)) {
            case 0 :
               SpeedStep$1.v = 0;
               break;
            case 1 :
               SpeedStep$1.v = 1;
               break;
            case 2 :
               SpeedStep$1.v = 2;
               break;
            case 3 :
               SpeedStep$1.v = 3;
               break;
         }
         ForceLongAddress.v = (Self.FDataArray[7]&4) == 4;
      }
      return Result
   }
   /// procedure TLccMessage.ZeroFields()
   ///  [line: 1292, column: 23, file: lcc_node_messages]
   ,ZeroFields:function(Self) {
      Self.FIsCAN = false;
      Self.FDataCount = 0;
      Self.FDestID = NULL_NODE_ID.slice(0);
      Self.FSourceID = NULL_NODE_ID.slice(0);
      Self.FCAN.FSourceAlias = 0;
      Self.FCAN.FDestAlias = 0;
      Self.FCAN.FFramingBits = 0;
      Self.FCAN.FiTag = 0;
      Self.FMTI = 0;
      Self.FCAN.FMTI$1 = 0;
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TLccCANMessage = class (TObject)
///  [line: 42, column: 3, file: lcc_node_messages]
var TLccCANMessage = {
   $ClassName:"TLccCANMessage",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FDestAlias = 0;
      $.FFramingBits = 0;
      $.FiTag = 0;
      $.FMTI$1 = 0;
      $.FSourceAlias = 0;
   }
   ,Destroy:TObject.Destroy
};
function HalfToFloat(Half) {
   var Result = 0;
   var Dst = 0,
      Sign$4 = 0,
      Mantissa = 0,
      Exp$2 = 0,
      Bytes$1 = [];
   Sign$4 = Half>>>15;
   Exp$2 = (Half&31744)>>>10;
   Mantissa = Half&1023;
   if (Exp$2 > 0 && Exp$2 < 31) {
      Exp$2+=112;
      Mantissa = Mantissa<<13;
      Dst = ((Sign$4<<31)|(Exp$2<<23))|Mantissa;
   } else if ((Exp$2==0) && (Mantissa==0)) {
      Dst = Sign$4<<31;
   } else if ((Exp$2==0) && (Mantissa!=0)) {
      while (((Mantissa&1024)==0)) {
         Mantissa = Mantissa<<1;
         --Exp$2;
      }
      ++Exp$2;
      Mantissa = Mantissa&(~1024);
      Exp$2+=112;
      Mantissa = Mantissa<<13;
      Dst = ((Sign$4<<31)|(Exp$2<<23))|Mantissa;
   } else if (Exp$2 == 31 && (Mantissa==0)) {
      Dst = (Sign$4<<31)|2139095040;
   } else {
      Dst = ((Sign$4<<31)|2139095040)|(Mantissa<<13);
   }
   Bytes$1 = TDatatype.Int32ToBytes(TDatatype,Dst);
   Result = TDatatype.BytesToFloat32(TDatatype,Bytes$1);
   return Result
};
function HalfIsNegative(Half) {
   return (Half&32768) == 32768;
};
function FloatToHalf(Float) {
   var Result = 0;
   var Src = 0,
      Sign$5 = 0,
      Exp$3 = 0,
      Mantissa$1 = 0,
      Bytes$2 = [];
   Bytes$2 = TDatatype.Float32ToBytes(TDatatype,Float);
   Src = TDatatype.BytesToInt32(TDatatype,Bytes$2);
   Sign$5 = Src>>>31;
   Exp$3 = ((Src&2139095040)>>>23)-127+15;
   Mantissa$1 = Src&8388607;
   if (Exp$3 > 0 && Exp$3 < 30) {
      Result = ((Sign$5<<15)|(Exp$3<<10))|((Mantissa$1+4096)>>>13);
   } else if (!Mantissa$1) {
      if (Sign$5 == 1) {
         Result = 32768;
      } else {
         Result = 0;
      }
   } else {
      if (Exp$3 <= 0) {
         if (Exp$3 < -10) {
            Result = 0;
         } else {
            Mantissa$1 = (Mantissa$1|8388608)>>>(1-Exp$3);
            if ((Mantissa$1&4096) > 0) {
               Mantissa$1+=8192;
            }
            Result = (Sign$5<<15)|(Mantissa$1>>>13);
         }
      } else if (Exp$3 == 143) {
         if (!Mantissa$1) {
            Result = (Sign$5<<15)|31744;
         } else {
            Result = ((Sign$5<<15)|31744)|(Mantissa$1>>>13);
         }
      } else {
         if ((Mantissa$1&4096) > 0) {
            Mantissa$1+=8192;
            if ((Mantissa$1&8388608) > 0) {
               Mantissa$1 = 0;
               Exp$3+=1;
            }
         }
         if (Exp$3 > 30) {
            Result = (Sign$5<<15)|31744;
         } else {
            Result = ((Sign$5<<15)|(Exp$3<<10))|(Mantissa$1>>>13);
         }
      }
   }
   return Result
};
function _Lo(Data$8) {
   return Data$8&255;
};
function _Highest(Data$8) {
   return ((Data$8>>>24)&255);
};
function _Higher(Data$8) {
   return ((Data$8>>>16)&255);
};
function _Hi(Data$8) {
   return ((Data$8>>>8)&255);
};
function StrToEventID(Event$3) {
   var Result = [0,0,0,0,0,0,0,0];
   var TempEvent = "",
      TempChar = "",
      i$1 = 0;
   Event$3 = Trim$_String_(Event$3);
   if (Event$3.length == 23) {
      TempEvent = "";
      for(i$1=1;i$1<=23;i$1++) {
         TempChar = Event$3.charAt(i$1-1);
         if (TempChar != ".") {
            TempEvent += TempChar;
         }
      }
      Event$3 = TempEvent;
   }
   if (Event$3.length == 16) {
      Result[0] = parseInt("0x" + Event$3.charAt(0) + Event$3.charAt(1),10);
      Result[1] = parseInt("0x" + Event$3.charAt(2) + Event$3.charAt(3),10);
      Result[2] = parseInt("0x" + Event$3.charAt(4) + Event$3.charAt(5),10);
      Result[3] = parseInt("0x" + Event$3.charAt(6) + Event$3.charAt(7),10);
      Result[4] = parseInt("0x" + Event$3.charAt(8) + Event$3.charAt(9),10);
      Result[5] = parseInt("0x" + Event$3.charAt(10) + Event$3.charAt(11),10);
      Result[6] = parseInt("0x" + Event$3.charAt(12) + Event$3.charAt(13),10);
      Result[7] = parseInt("0x" + Event$3.charAt(14) + Event$3.charAt(15),10);
   } else {
      for(i$1=0;i$1<=7;i$1++) {
         Result[i$1] = 0;
      }
   }
   return Result
};
function StreamWriteByte(AStream, AByte) {
   FOneByteArray[0]=AByte;
   TStream.Write(AStream,FOneByteArray);
};
function StreamReadByte(AStream) {
   var Result = 0;
   Result = 0;
   FOneByteArray = TStream.Read(AStream,1);
   Result = FOneByteArray[0];
   return Result
};
function NullNodeID(ANodeID) {
   return (ANodeID[0]==0) && (ANodeID[1]==0);
};
function NodeIDToEventID(NodeID$8, LowBytes, EventID) {
   EventID.v[0] = _Higher(NodeID$8[1]);
   EventID.v[1] = _Hi(NodeID$8[1]);
   EventID.v[2] = _Lo(NodeID$8[1]);
   EventID.v[3] = _Higher(NodeID$8[0]);
   EventID.v[4] = _Hi(NodeID$8[0]);
   EventID.v[5] = _Lo(NodeID$8[0]);
   EventID.v[6] = _Hi(LowBytes);
   EventID.v[7] = _Lo(LowBytes);
};
function Lo(Data$8) {
   return Data$8&255;
};
function Hi(Data$8) {
   return ((Data$8>>>8)&255);
};
function FreeAndNil(AnObject) {
   TObject.Free(AnObject);
};
function EventIDToString(EventID, InsertDots) {
   var Result = "";
   var i$4 = 0;
   Result = "";
   if (InsertDots) {
      for(i$4=0;i$4<=7;i$4++) {
         if (i$4 < 7) {
            Result = Result + IntToHex2(EventID[i$4]) + ".";
         } else {
            Result += IntToHex2(EventID[i$4]);
         }
      }
   } else {
      for(i$4=0;i$4<=7;i$4++) {
         Result += IntToHex2(EventID[i$4]);
      }
   }
   return Result
};
function EqualNodeID(NodeID1, NodeID2, IncludeNullNode) {
   var Result = false;
   if (IncludeNullNode) {
      Result = NodeID1[0] == NodeID2[0] && NodeID1[1] == NodeID2[1];
   } else {
      Result = (!(NullNodeID(NodeID1.slice(0)))) && (!(NullNodeID(NodeID2.slice(0)))) && NodeID1[0] == NodeID2[0] && NodeID1[1] == NodeID2[1];
   }
   return Result
};
function EqualNode(NodeID1, Node1AliasID, NodeID2, Node2AliasID) {
   return NodeID1[0] == NodeID2[0] && NodeID1[1] == NodeID2[1] && Node1AliasID == Node2AliasID;
};
function EqualEventID(EventID1, EventID2) {
   return EventID1[0] == EventID2[0] && EventID1[1] == EventID2[1] && EventID1[2] == EventID2[2] && EventID1[3] == EventID2[3] && EventID1[4] == EventID2[4] && EventID1[5] == EventID2[5] && EventID1[6] == EventID2[6] && EventID1[7] == EventID2[7];
};
/// TLccNode = class (TObject)
///  [line: 215, column: 3, file: lcc_node]
var TLccNode = {
   $ClassName:"TLccNode",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FACDIMfg = $.FACDIUser = $.FDatagramResendQueue = $.FLccActions = $.FNodeManager = $.FProtocolEventConsumed = $.FProtocolEventsProduced = $.FProtocolMemoryConfiguration = $.FProtocolMemoryInfo = $.FProtocolMemoryOptions = $.FProtocolSimpleNodeInfo = $.FProtocolSupportedProtocols = $.FProtocolTraction = $.FProtocolTractionFunctionDefinitionInfo = $.FProtocolTractionMemoryFunctionConfiguration = $.FProtocolTractionSimpleTrainNodeInfo = $.FSendMessageFunc$1 = $.FStreamCdi = $.FStreamConfig = $.FStreamManufacturerData = $.FStreamTractionConfig = $.FStreamTractionFdi = $.FTProtocolMemoryConfigurationDefinitionInfo = $.FWorkerMessage$2 = $.FWorkerMessageDatagram = null;
      $.FInitialized$2 = false;
      $.FNodeID$1 = [0,0];
      $.F_800msTimer = null;
   }
   /// procedure TLccNode.AutoGenerateEvents()
   ///  [line: 1107, column: 20, file: lcc_node]
   ,AutoGenerateEvents:function(Self) {
      var i$7 = 0,
         TempEventID = {v:[0,0,0,0,0,0,0,0]};
      TempEventID.v = NULL_EVENT_ID.slice(0);
      if (Self.FProtocolEventConsumed.FAutoGenerate.FCount$1 > 0) {
         var $temp156;
         for(i$7=0,$temp156=Self.FProtocolEventConsumed.FAutoGenerate.FCount$1;i$7<$temp156;i$7++) {
            NodeIDToEventID(Self.FNodeID$1.slice(0),Self.FProtocolEventConsumed.FAutoGenerate.FStartIndex+i$7,TempEventID);
            TProtocolEvents.Add$22(Self.FProtocolEventConsumed,TempEventID.v.slice(0),Self.FProtocolEventConsumed.FAutoGenerate.FDefaultState);
         }
         TNodeProtocolBase.SetValid(Self.FProtocolEventConsumed,true);
      }
      if (Self.FProtocolEventsProduced.FAutoGenerate.FCount$1 > 0) {
         var $temp157;
         for(i$7=0,$temp157=Self.FProtocolEventsProduced.FAutoGenerate.FCount$1;i$7<$temp157;i$7++) {
            NodeIDToEventID(Self.FNodeID$1.slice(0),Self.FProtocolEventsProduced.FAutoGenerate.FStartIndex+i$7,TempEventID);
            TProtocolEvents.Add$22(Self.FProtocolEventsProduced,TempEventID.v.slice(0),Self.FProtocolEventsProduced.FAutoGenerate.FDefaultState);
         }
         TNodeProtocolBase.SetValid(Self.FProtocolEventsProduced,true);
      }
   }
   /// procedure TLccNode.BeforeLogin()
   ///  [line: 1134, column: 20, file: lcc_node]
   ,BeforeLogin:function(Self) {
      Self.FProtocolSupportedProtocols.FConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FDatagram = true;
      Self.FProtocolSupportedProtocols.FEventExchange = true;
      Self.FProtocolSupportedProtocols.FSimpleNodeInfo = true;
      Self.FProtocolSupportedProtocols.FAbbreviatedConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FTractionControl = true;
      Self.FProtocolSupportedProtocols.FTractionSimpleTrainNodeInfo = true;
      Self.FProtocolSupportedProtocols.FTractionFunctionDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FTractionFunctionConfiguration = true;
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,255,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,254,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,253,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,252,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,251,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,250,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,249,true,false,true,0,4294967295);
      Self.FProtocolMemoryOptions.FWriteUnderMask = true;
      Self.FProtocolMemoryOptions.FUnAlignedReads = true;
      Self.FProtocolMemoryOptions.FUnAlignedWrites = true;
      Self.FProtocolMemoryOptions.FSupportACDIMfgRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserWrite = true;
      Self.FProtocolMemoryOptions.FWriteLenOneByte = true;
      Self.FProtocolMemoryOptions.FWriteLenTwoBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenSixyFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteArbitraryBytes = true;
      Self.FProtocolMemoryOptions.FWriteStream = false;
      Self.FProtocolMemoryOptions.FHighSpace = 255;
      Self.FProtocolMemoryOptions.FLowSpace = 249;
      TLccEventAutoGenerate.SetCount$1(Self.FProtocolEventConsumed.FAutoGenerate,5);
      TLccEventAutoGenerate.SetStartIndex(Self.FProtocolEventConsumed.FAutoGenerate,0);
      TLccEventAutoGenerate.SetCount$1(Self.FProtocolEventsProduced.FAutoGenerate,5);
      TLccEventAutoGenerate.SetStartIndex(Self.FProtocolEventsProduced.FAutoGenerate,0);
   }
   /// constructor TLccNode.Create(ASendMessageFunc: TOnMessageEvent; ANodeManager: TObject; CdiXML: String)
   ///  [line: 1033, column: 22, file: lcc_node]
   ,Create$201:function(Self, ASendMessageFunc, ANodeManager, CdiXML) {
      var i$7 = 0,
         Counter = 0;
      TObject.Create(Self);
      Self.FProtocolSupportedProtocols = TNodeProtocolBase.Create$196$($New(TProtocolSupportedProtocols),ASendMessageFunc);
      Self.FProtocolSimpleNodeInfo = TNodeProtocolBase.Create$196$($New(TProtocolSimpleNodeInfo),ASendMessageFunc);
      Self.FTProtocolMemoryConfigurationDefinitionInfo = TNodeProtocolBase.Create$196$($New(TProtocolMemoryConfigurationDefinitionInfo),ASendMessageFunc);
      Self.FProtocolMemoryOptions = TNodeProtocolBase.Create$196$($New(TProtocolMemoryOptions),ASendMessageFunc);
      Self.FProtocolMemoryConfiguration = TNodeProtocolBase.Create$196$($New(TProtocolMemoryConfiguration),Self.FSendMessageFunc$1);
      Self.FProtocolMemoryInfo = TNodeProtocolBase.Create$196$($New(TProtocolMemoryInfo),ASendMessageFunc);
      Self.FProtocolEventConsumed = TNodeProtocolBase.Create$196$($New(TProtocolEvents),ASendMessageFunc);
      Self.FProtocolEventsProduced = TNodeProtocolBase.Create$196$($New(TProtocolEvents),ASendMessageFunc);
      Self.FProtocolTraction = TNodeProtocolBase.Create$196$($New(TProtocolTraction),ASendMessageFunc);
      Self.FProtocolTractionFunctionDefinitionInfo = TNodeProtocolBase.Create$196$($New(TTractionFunctionDefinitionInfo),ASendMessageFunc);
      Self.FProtocolTractionMemoryFunctionConfiguration = TNodeProtocolBase.Create$196$($New(TTractionFunctionConfiguration),ASendMessageFunc);
      Self.FProtocolTractionSimpleTrainNodeInfo = TNodeProtocolBase.Create$196$($New(TTractionProtocolSimpleTrainNodeInfo),ASendMessageFunc);
      Self.FACDIMfg = TNodeProtocolBase.Create$196$($New(TACDIMfg),ASendMessageFunc);
      Self.FACDIUser = TNodeProtocolBase.Create$196$($New(TACDIUser),ASendMessageFunc);
      Self.FStreamCdi = TMemoryStream.Create$72($New(TMemoryStream));
      Self.FStreamConfig = TMemoryStream.Create$72($New(TMemoryStream));
      Self.FStreamManufacturerData = TMemoryStream.Create$72($New(TMemoryStream));
      Self.FStreamTractionConfig = TMemoryStream.Create$72($New(TMemoryStream));
      Self.FStreamTractionFdi = TMemoryStream.Create$72($New(TMemoryStream));
      Self.FDatagramResendQueue = TDatagramQueue.Create$209($New(TDatagramQueue),ASendMessageFunc);
      Self.FWorkerMessageDatagram = TLccMessage.Create$197($New(TLccMessage));
      Self.FWorkerMessage$2 = TLccMessage.Create$197($New(TLccMessage));
      Self.FSendMessageFunc$1 = ASendMessageFunc;
      Self.FNodeManager = ANodeManager;
      Self.F_800msTimer = TW3OwnedObject.Create$11$($New(TW3Timer),null);
      TW3Timer.SetEnabled(Self.F_800msTimer,false);
      Self.F_800msTimer.OnTime = $Event1(Self,TLccNode.On_800msTimer$);
      TW3Timer.SetDelay(Self.F_800msTimer,800);
      if (CdiXML == "") {
         CdiXML = TLccNode.GetCdiFile$(Self);
      }
      TStream.SetSize$(Self.FStreamCdi,CdiXML.length+1);
      i$7 = 1;
      var $temp158;
      for(Counter=0,$temp158=CdiXML.length;Counter<$temp158;Counter++) {
         StreamWriteByte(Self.FStreamCdi,CdiXML.charCodeAt(i$7-1));
         ++i$7;
      }
      StreamWriteByte(Self.FStreamCdi,0);
      TLccNode.LoadManufacturerDataStream(Self,CdiXML);
      TStream.SetSize$(Self.FStreamConfig,128);
      TStream.SetPosition$(Self.FStreamConfig,0);
      StreamWriteByte(Self.FStreamConfig,1);
      while (TStream.GetPosition$(Self.FStreamConfig) < TStream.GetSize$(Self.FStreamConfig)) {
         StreamWriteByte(Self.FStreamConfig,0)      }
      Self.FLccActions = TLccActionHub.Create$205($New(TLccActionHub),Self,ASendMessageFunc);
      return Self
   }
   /// procedure TLccNode.CreateNodeID(var Seed: TNodeID)
   ///  [line: 1176, column: 20, file: lcc_node]
   ,CreateNodeID:function(Self, Seed) {
      Seed.v[1] = 131346;
      Seed.v[0] = RandomInt(16777215);
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[17](Self);
   }
   /// destructor TLccNode.Destroy()
   ///  [line: 1187, column: 21, file: lcc_node]
   ,Destroy:function(Self) {
      Self.FNodeID$1[0] = 0;
      Self.FNodeID$1[1] = 0;
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[17](Self);
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[11](Self);
      TW3Timer.SetEnabled(Self.F_800msTimer,false);
      TObject.Free(Self.F_800msTimer);
      TObject.Free(Self.FProtocolSupportedProtocols);
      TObject.Free(Self.FProtocolSimpleNodeInfo);
      TObject.Free(Self.FTProtocolMemoryConfigurationDefinitionInfo);
      TObject.Free(Self.FProtocolEventConsumed);
      TObject.Free(Self.FProtocolEventsProduced);
      TObject.Free(Self.FProtocolMemoryOptions);
      TObject.Free(Self.FProtocolMemoryInfo);
      TObject.Free(Self.FProtocolTraction);
      TObject.Free(Self.FProtocolTractionFunctionDefinitionInfo);
      TObject.Free(Self.FProtocolTractionMemoryFunctionConfiguration);
      TObject.Free(Self.FProtocolTractionSimpleTrainNodeInfo);
      TObject.Free(Self.FACDIMfg);
      TObject.Free(Self.FACDIUser);
      TObject.Free(Self.FProtocolMemoryConfiguration);
      TObject.Free(Self.FDatagramResendQueue);
      TObject.Free(Self.FWorkerMessageDatagram);
      TObject.Free(Self.FWorkerMessage$2);
      TObject.Free(Self.FStreamCdi);
      TObject.Free(Self.FStreamConfig);
      TObject.Free(Self.FStreamManufacturerData);
      TObject.Free(Self.FStreamTractionConfig);
      TObject.Free(Self.FStreamTractionFdi);
      TObject.Free(Self.FLccActions);
      TObject.Destroy(Self);
   }
   /// function TLccNode.FindCdiElement(TestXML: String; Element: String; var Offset: Integer; var ALength: Integer) : Boolean
   ///  [line: 1221, column: 19, file: lcc_node]
   ,FindCdiElement:function(Self, TestXML, Element$2, Offset$5, ALength) {
      var Result = false;
      var OffsetEnd = 0;
      Result = false;
      TestXML = (TestXML).toLowerCase();
      Element$2 = (Element$2).toLowerCase();
      Offset$5.v = (TestXML.indexOf(Element$2)+1);
      if (Offset$5.v > -1) {
         (Offset$5.v+= Element$2.length);
         Element$2 = StringReplace(Element$2,"<","<\/",[1]);
         OffsetEnd = (TestXML.indexOf(Element$2)+1);
         if (OffsetEnd > -1 && OffsetEnd > Offset$5.v) {
            ALength.v = OffsetEnd-Offset$5.v;
            Result = true;
            OffsetEnd = 1;
            if (!OffsetEnd) {
               --Offset$5.v;
            }
         } else {
            return Result;
         }
      }
      return Result
   }
   /// function TLccNode.GetAlias() : Word
   ///  [line: 1246, column: 19, file: lcc_node]
   ,GetAlias:function(Self) {
      return 0;
   }
   /// function TLccNode.GetCdiFile() : String
   ///  [line: 1251, column: 19, file: lcc_node]
   ,GetCdiFile:function(Self) {
      return "<?xml version=\"1.0\" encoding=\"utf-8\"?><?xml-stylesheet type=\"text\/xsl\" href=\"http:\/\/openlcb.org\/trunk\/prototypes\/xml\/xslt\/cdi.xsl\"?><cdi xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http:\/\/openlcb.org\/trunk\/specs\/schema\/cdi.xsd\"><identification><manufacturer>Mustangpeak<\/manufacturer><model>TC1000<\/model><hardwareVersion>1.0.0.0<\/hardwareVersion><softwareVersion>1.0.0.0<\/softwareVersion><\/identification><segment origin=\"1\" space=\"253\"><name>User<\/name><description>User defined information<\/description><group><name>User Data<\/name><description>Add your own unique node info here<\/description><string size=\"63\"><name>User Name<\/name><\/string><string size=\"64\"><name>User Description<\/name><\/string><\/group><\/segment><\/cdi>";
   }
   /// function TLccNode.GetNodeIDStr() : String
   ///  [line: 967, column: 19, file: lcc_node]
   ,GetNodeIDStr:function(Self) {
      var Result = "";
      Result = IntToHex(Self.FNodeID$1[1],6);
      Result += IntToHex(Self.FNodeID$1[0],6);
      Result = "0x" + Result;
      return Result
   }
   /// function TLccNode.IsDestinationEqual(LccMessage: TLccMessage) : Boolean
   ///  [line: 974, column: 19, file: lcc_node]
   ,IsDestinationEqual:function(Self, LccMessage) {
      return EqualNodeID(Self.FNodeID$1.slice(0),LccMessage.FDestID.slice(0),false);
   }
   /// function TLccNode.LoadManufacturerDataStream(ACdi: String) : Boolean
   ///  [line: 979, column: 19, file: lcc_node]
   ,LoadManufacturerDataStream:function(Self, ACdi) {
      var Result = false;
      var AnOffset = { v : 0 },
         ALength = { v : 0 },
         i$7 = 0;
      Result = false;
      TStream.SetSize$(Self.FStreamManufacturerData,125);
      var $temp159;
      for(i$7=0,$temp159=TStream.GetSize$(Self.FStreamManufacturerData);i$7<$temp159;i$7++) {
         StreamWriteByte(Self.FStreamManufacturerData,0);
      }
      TStream.SetPosition$(Self.FStreamManufacturerData,0);
      StreamWriteByte(Self.FStreamManufacturerData,1);
      AnOffset.v = 0;
      ALength.v = 0;
      if (TLccNode.FindCdiElement(Self,ACdi,"<manufacturer>",AnOffset,ALength)) {
         if (ALength.v < 41) {
            TStream.SetPosition$(Self.FStreamManufacturerData,1);
            var $temp160;
            for(i$7=AnOffset.v,$temp160=(AnOffset.v+ALength.v);i$7<$temp160;i$7++) {
               StreamWriteByte(Self.FStreamManufacturerData,ACdi.charCodeAt(i$7-1));
            }
         } else {
            return Result;
         }
      } else {
         return Result;
      }
      if (TLccNode.FindCdiElement(Self,ACdi,"<model>",AnOffset,ALength)) {
         if (ALength.v < 41) {
            TStream.SetPosition$(Self.FStreamManufacturerData,42);
            var $temp161;
            for(i$7=AnOffset.v,$temp161=(AnOffset.v+ALength.v);i$7<$temp161;i$7++) {
               StreamWriteByte(Self.FStreamManufacturerData,ACdi.charCodeAt(i$7-1));
            }
         } else {
            return Result;
         }
      } else {
         return Result;
      }
      if (TLccNode.FindCdiElement(Self,ACdi,"<hardwareVersion>",AnOffset,ALength)) {
         if (ALength.v < 21) {
            TStream.SetPosition$(Self.FStreamManufacturerData,83);
            var $temp162;
            for(i$7=AnOffset.v,$temp162=(AnOffset.v+ALength.v);i$7<$temp162;i$7++) {
               StreamWriteByte(Self.FStreamManufacturerData,ACdi.charCodeAt(i$7-1));
            }
         } else {
            return Result;
         }
      } else {
         return Result;
      }
      if (TLccNode.FindCdiElement(Self,ACdi,"<softwareVersion>",AnOffset,ALength)) {
         if (ALength.v < 21) {
            TStream.SetPosition$(Self.FStreamManufacturerData,104);
            var $temp163;
            for(i$7=AnOffset.v,$temp163=(AnOffset.v+ALength.v);i$7<$temp163;i$7++) {
               StreamWriteByte(Self.FStreamManufacturerData,ACdi.charCodeAt(i$7-1));
            }
         } else {
            return Result;
         }
      } else {
         return Result;
      }
      Result = true;
      return Result
   }
   /// procedure TLccNode.Login(ANodeID: TNodeID)
   ///  [line: 1256, column: 20, file: lcc_node]
   ,Login:function(Self, ANodeID) {
      ANodeID = { v : ANodeID };
      TLccNode.BeforeLogin$(Self);
      if (NullNodeID(ANodeID.v.slice(0))) {
         TLccNode.CreateNodeID(Self,ANodeID);
      }
      Self.FNodeID$1 = ANodeID.v.slice(0);
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[17](Self);
      Self.FInitialized$2 = true;
      TLccNode.SendInitializeComplete(Self);
      TLccNode.AutoGenerateEvents(Self);
      TLccNode.SendEvents(Self);
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[12](Self);
   }
   /// procedure TLccNode.Logout()
   ///  [line: 1270, column: 20, file: lcc_node]
   ,Logout:function(Self) {
      Self.FInitialized$2 = false;
      TW3Timer.SetEnabled(Self.F_800msTimer,false);
      TDatagramQueue.Clear$33(Self.FDatagramResendQueue);
   }
   /// procedure TLccNode.On_800msTimer(Sender: TObject)
   ///  [line: 1277, column: 20, file: lcc_node]
   ,On_800msTimer:function(Self, Sender) {
      TDatagramQueue.TickTimeout(Self.FDatagramResendQueue);
      TLccActionHub.TimeTick$1(Self.FLccActions);
   }
   /// function TLccNode.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 1283, column: 19, file: lcc_node]
   ,ProcessMessage$1:function(Self, SourceMessage) {
      var Result = false;
      var TestNodeID = {v:[0,0]},
         Temp$1 = {v:[0,0,0,0,0,0,0,0]},
         AddressSpace$2 = 0,
         OperationType = 0,
         TractionCode = 0,
         DoDefault = { v : false };
      Result = false;
      TestNodeID.v[0] = 0;
      TestNodeID.v[1] = 0;
      if (EqualNodeID(Self.FNodeID$1.slice(0),SourceMessage.FSourceID.slice(0),false)) {
         TLccNode.Logout$(Self);
         return Result;
      }
      TLccActionHub.ProcessMessage$5(Self.FLccActions,SourceMessage);
      if (TLccMessage.GetHasDestination(SourceMessage)) {
         if (!(TLccNode.IsDestinationEqual$(Self,SourceMessage))) {
            return Result;
         }
      }
      switch (SourceMessage.FMTI) {
         case 104 :
            /* null */
break;
         case 1168 :
            if (SourceMessage.FDataCount == 6) {
               TLccMessage.ExtractDataBytesAsNodeID(SourceMessage,0,TestNodeID);
               if (EqualNodeID(TestNodeID.v.slice(0),Self.FNodeID$1.slice(0),false)) {
                  TLccMessage.LoadVerifiedNodeID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self));
                  Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
               }
            } else {
               TLccMessage.LoadVerifiedNodeID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self));
               Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            }
            Result = true;
            break;
         case 1160 :
            TLccMessage.LoadVerifiedNodeID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self));
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            Result = true;
            break;
         case 368 :
            /* null */
break;
         case 3560 :
            TLccMessage.LoadSimpleNodeIdentInfoReply(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,TProtocolSimpleNodeInfo.PackedFormat(Self.FProtocolSimpleNodeInfo,Self.FStreamManufacturerData,Self.FStreamConfig));
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            Result = true;
            break;
         case 2568 :
            Result = true;
            break;
         case 2088 :
            TLccMessage.LoadProtocolIdentifyReply(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,TProtocolSupportedProtocols.EncodeFlags$1(Self.FProtocolSupportedProtocols));
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            Result = true;
            break;
         case 1640 :
            Result = true;
            break;
         case 2416 :
            TLccNode.SendConsumedEvents(Self);
            TLccNode.SendProducedEvents(Self);
            Result = true;
            break;
         case 2408 :
            TLccNode.SendConsumedEvents(Self);
            TLccNode.SendProducedEvents(Self);
            Result = true;
            break;
         case 2324 :
            DoDefault.v = true;
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[19](Self,SourceMessage,DoDefault);
            if (DoDefault.v) {
               Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
               TLccNode.SendProducerIdentify(Self,Temp$1);
            }
            Result = true;
            break;
         case 2292 :
            DoDefault.v = true;
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[19](Self,SourceMessage,DoDefault);
            if (DoDefault.v) {
               Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
               TLccNode.SendConsumerIdentify(Self,Temp$1);
            }
            Result = true;
            break;
         case 1221 :
            Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[9](Self,SourceMessage,Temp$1,2);
            break;
         case 1220 :
            Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[9](Self,SourceMessage,Temp$1,1);
            break;
         case 1223 :
            Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[9](Self,SourceMessage,Temp$1,0);
            break;
         case 1349 :
            Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[20](Self,SourceMessage,Temp$1,2);
            break;
         case 1348 :
            Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[20](Self,SourceMessage,Temp$1,1);
            break;
         case 1351 :
            Temp$1.v = TLccMessage.ExtractDataBytesAsEventID(SourceMessage,0);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[20](Self,SourceMessage,Temp$1,0);
            break;
         case 3496 :
            Result = true;
            break;
         case 2504 :
            Result = true;
            break;
         case 1512 :
            TractionCode = TLccMessage.GetDataArrayIndexer(SourceMessage,0);
            switch (TractionCode) {
               case 0 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[26](Self,SourceMessage,false);
                  break;
               case 1 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[27](Self,SourceMessage,false);
                  break;
               case 2 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[25](Self,SourceMessage,false);
                  break;
               case 16 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[28](Self,SourceMessage,false);
                  break;
               case 17 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[29](Self,SourceMessage,false);
                  break;
               case 32 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[30](Self,SourceMessage,false);
                  break;
               case 48 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[31](Self,SourceMessage,false);
                  break;
               case 64 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[32](Self,SourceMessage,false);
                  break;
            }
            Result = true;
            break;
         case 488 :
            TractionCode = TLccMessage.GetDataArrayIndexer(SourceMessage,0);
            switch (TractionCode) {
               case 16 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[28](Self,SourceMessage,true);
                  break;
               case 17 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[29](Self,SourceMessage,true);
                  break;
               case 32 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[30](Self,SourceMessage,true);
                  break;
               case 48 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[31](Self,SourceMessage,true);
                  break;
               case 64 :
                  $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[32](Self,SourceMessage,true);
                  break;
            }
            Result = true;
            break;
         case 2632 :
            TDatagramQueue.Resend(Self.FDatagramResendQueue,SourceMessage);
            break;
         case 2600 :
            TDatagramQueue.Remove$10(Self.FDatagramResendQueue,SourceMessage);
            break;
         case 7240 :
            switch (TLccMessage.GetDataArrayIndexer(SourceMessage,0)) {
               case 1 :
                  TLccNode.SendDatagramAckReply(Self,SourceMessage,false,0);
                  break;
               case 32 :
                  AddressSpace$2 = 0;
                  switch ((TLccMessage.GetDataArrayIndexer(SourceMessage,1)&3)) {
                     case 0 :
                        AddressSpace$2 = TLccMessage.GetDataArrayIndexer(SourceMessage,6);
                        break;
                     case 3 :
                        AddressSpace$2 = 255;
                        break;
                     case 2 :
                        AddressSpace$2 = 254;
                        break;
                     case 1 :
                        AddressSpace$2 = 253;
                        break;
                  }
                  switch ((TLccMessage.GetDataArrayIndexer(SourceMessage,1)&240)) {
                     case 0 :
                        switch (AddressSpace$2) {
                           case 255 :
                              /* null */
break;
                           case 254 :
                              /* null */
break;
                           case 253 :
                              TLccNode.SendDatagramAckReply(Self,SourceMessage,false,0);
                              TNodeProtocolBase.DatagramWriteRequest$(Self.FProtocolMemoryConfiguration,SourceMessage,Self.FStreamConfig);
                              Result = true;
                              break;
                           case 252 :
                              /* null */
break;
                           case 251 :
                              TLccNode.SendDatagramAckReply(Self,SourceMessage,false,0);
                              TNodeProtocolBase.DatagramWriteRequest$(Self.FACDIUser,SourceMessage,Self.FStreamConfig);
                              Result = true;
                              break;
                           case 250 :
                              /* null */
break;
                           case 249 :
                              TLccNode.SendDatagramAckReply(Self,SourceMessage,false,0);
                              TNodeProtocolBase.DatagramWriteRequest$(Self.FProtocolMemoryConfiguration,SourceMessage,Self.FStreamTractionConfig);
                              Result = true;
                              break;
                        }
                        break;
                     case 64 :
                        switch (AddressSpace$2) {
                           case 255 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TNodeProtocolBase.DatagramReadRequest(Self.FTProtocolMemoryConfigurationDefinitionInfo,SourceMessage,Self.FWorkerMessage$2,Self.FStreamCdi);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 254 :
                              TLccNode.SendDatagramAckReply(Self,SourceMessage,false,0);
                              break;
                           case 253 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TNodeProtocolBase.DatagramReadRequest(Self.FProtocolMemoryConfiguration,SourceMessage,Self.FWorkerMessage$2,Self.FStreamConfig);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 252 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TNodeProtocolBase.DatagramReadRequest(Self.FACDIMfg,SourceMessage,Self.FWorkerMessage$2,Self.FStreamManufacturerData);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 251 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TNodeProtocolBase.DatagramReadRequest(Self.FACDIUser,SourceMessage,Self.FWorkerMessage$2,Self.FStreamConfig);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 250 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TNodeProtocolBase.DatagramReadRequest(Self.FTProtocolMemoryConfigurationDefinitionInfo,SourceMessage,Self.FWorkerMessage$2,Self.FStreamTractionFdi);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 249 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TNodeProtocolBase.DatagramReadRequest(Self.FProtocolMemoryConfiguration,SourceMessage,Self.FWorkerMessage$2,Self.FStreamTractionConfig);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                        }
                        break;
                     case 32 :
                        /* null */
break;
                     case 96 :
                        /* null */
break;
                     case 128 :
                        OperationType = TLccMessage.GetDataArrayIndexer(SourceMessage,1);
                        switch (OperationType) {
                           case 128 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TProtocolMemoryOptions.LoadReply(Self.FProtocolMemoryOptions,Self.FWorkerMessage$2);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 132 :
                              TLccMessage.LoadDatagram(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
                              TProtocolMemoryInfo.LoadReply$1(Self.FProtocolMemoryInfo,SourceMessage,Self.FWorkerMessage$2);
                              TLccNode.SendDatagramRequiredReply(Self,SourceMessage,Self.FWorkerMessage$2);
                              Result = true;
                              break;
                           case 136 :
                              /* null */
break;
                           case 140 :
                              /* null */
break;
                           case 160 :
                              /* null */
break;
                           case 164 :
                              /* null */
break;
                           case 168 :
                              /* null */
break;
                        }
                        break;
                  }
                  break;
               default :
                  TLccMessage.LoadDatagramRejected(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,4162);
                  Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
                  Result = true;
            }
            break;
         default :
            if (TLccMessage.GetHasDestination(SourceMessage)) {
               TLccMessage.LoadOptionalInteractionRejected(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,4163,SourceMessage.FMTI);
               Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
               Result = true;
            }
      }
      return Result
   }
   /// procedure TLccNode.SendConsumedEvents()
   ///  [line: 1734, column: 20, file: lcc_node]
   ,SendConsumedEvents:function(Self) {
      var i$7 = 0,
         Temp$1 = {v:[0,0,0,0,0,0,0,0]};
      var $temp164;
      for(i$7=0,$temp164=TProtocolEvents.GetCount$9(Self.FProtocolEventConsumed);i$7<$temp164;i$7++) {
         Temp$1.v = TProtocolEvents.GetEvent(Self.FProtocolEventConsumed,i$7).FID.slice(0);
         TLccMessage.LoadConsumerIdentified(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),Temp$1,TProtocolEvents.GetEvent(Self.FProtocolEventConsumed,i$7).FState$1);
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      }
   }
   /// procedure TLccNode.SendConsumerIdentify(var Event: TEventID)
   ///  [line: 1747, column: 20, file: lcc_node]
   ,SendConsumerIdentify:function(Self, Event$3) {
      var EventObj = null,
         Temp$1 = {v:[0,0,0,0,0,0,0,0]};
      EventObj = TProtocolEvents.Supports(Self.FProtocolEventConsumed,Event$3.v.slice(0));
      if (EventObj) {
         Temp$1.v = EventObj.FID.slice(0);
         TLccMessage.LoadConsumerIdentified(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),Temp$1,EventObj.FState$1);
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      }
   }
   /// procedure TLccNode.SendDatagramAckReply(SourceMessage: TLccMessage; ReplyPending: Boolean; TimeOutValueN: Byte)
   ///  [line: 1725, column: 20, file: lcc_node]
   ,SendDatagramAckReply:function(Self, SourceMessage, ReplyPending, TimeOutValueN) {
      TLccMessage.LoadDatagramAck(Self.FWorkerMessageDatagram,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,true,ReplyPending,TimeOutValueN);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessageDatagram);
   }
   /// procedure TLccNode.SendDatagramRejectedReply(SourceMessage: TLccMessage; Reason: Word)
   ///  [line: 1761, column: 20, file: lcc_node]
   ,SendDatagramRejectedReply:function(Self, SourceMessage, Reason) {
      TLccMessage.LoadDatagramRejected(Self.FWorkerMessageDatagram,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,Reason);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessageDatagram);
   }
   /// procedure TLccNode.SendDatagramRequiredReply(SourceMessage: TLccMessage; ReplyLccMessage: TLccMessage)
   ///  [line: 1769, column: 20, file: lcc_node]
   ,SendDatagramRequiredReply:function(Self, SourceMessage, ReplyLccMessage) {
      if (TDatagramQueue.Add$23(Self.FDatagramResendQueue,TLccMessage.Clone$2(ReplyLccMessage))) {
         TLccNode.SendDatagramAckReply(Self,SourceMessage,false,0);
         Self.FSendMessageFunc$1(Self,ReplyLccMessage);
      } else {
         TLccNode.SendDatagramRejectedReply(Self,SourceMessage,8224);
      }
   }
   /// procedure TLccNode.SendEvents()
   ///  [line: 1779, column: 20, file: lcc_node]
   ,SendEvents:function(Self) {
      TLccNode.SendConsumedEvents(Self);
      TLccNode.SendProducedEvents(Self);
   }
   /// procedure TLccNode.SendInitializeComplete()
   ///  [line: 1785, column: 20, file: lcc_node]
   ,SendInitializeComplete:function(Self) {
      TLccMessage.LoadInitializationComplete(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self));
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[16](Self);
   }
   /// procedure TLccNode.SendProducedEvents()
   ///  [line: 1792, column: 20, file: lcc_node]
   ,SendProducedEvents:function(Self) {
      var i$7 = 0,
         Temp$1 = {v:[0,0,0,0,0,0,0,0]};
      var $temp165;
      for(i$7=0,$temp165=TProtocolEvents.GetCount$9(Self.FProtocolEventsProduced);i$7<$temp165;i$7++) {
         Temp$1.v = TProtocolEvents.GetEvent(Self.FProtocolEventsProduced,i$7).FID.slice(0);
         TLccMessage.LoadProducerIdentified(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),Temp$1,TProtocolEvents.GetEvent(Self.FProtocolEventsProduced,i$7).FState$1);
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      }
   }
   /// procedure TLccNode.SendProducerIdentify(var Event: TEventID)
   ///  [line: 1805, column: 20, file: lcc_node]
   ,SendProducerIdentify:function(Self, Event$3) {
      var EventObj = null,
         Temp$1 = {v:[0,0,0,0,0,0,0,0]};
      EventObj = TProtocolEvents.Supports(Self.FProtocolEventsProduced,Event$3.v.slice(0));
      if (EventObj) {
         Temp$1.v = EventObj.FID.slice(0);
         TLccMessage.LoadProducerIdentified(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),TLccNode.GetAlias$(Self),Temp$1,EventObj.FState$1);
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,BeforeLogin$:function($){return $.ClassType.BeforeLogin($)}
   ,Create$201$:function($){return $.ClassType.Create$201.apply($.ClassType, arguments)}
   ,GetAlias$:function($){return $.ClassType.GetAlias($)}
   ,GetCdiFile$:function($){return $.ClassType.GetCdiFile($)}
   ,IsDestinationEqual$:function($){return $.ClassType.IsDestinationEqual.apply($.ClassType, arguments)}
   ,Login$:function($){return $.ClassType.Login.apply($.ClassType, arguments)}
   ,Logout$:function($){return $.ClassType.Logout($)}
   ,On_800msTimer$:function($){return $.ClassType.On_800msTimer.apply($.ClassType, arguments)}
   ,ProcessMessage$1$:function($){return $.ClassType.ProcessMessage$1.apply($.ClassType, arguments)}
};
/// TLccCanNode = class (TLccNode)
///  [line: 325, column: 3, file: lcc_node]
var TLccCanNode = {
   $ClassName:"TLccCanNode",$Parent:TLccNode
   ,$Init:function ($) {
      TLccNode.$Init($);
      $.FAliasID = 0;
      $.FDuplicateAliasDetected = $.FPermitted = false;
      $.FInProcessMultiFrameMessage = null;
      $.FSeedNodeID = [0,0];
   }
   /// constructor TLccCanNode.Create(ASendMessageFunc: TOnMessageEvent; ANodeManager: TObject; CdiXML: String)
   ///  [line: 622, column: 25, file: lcc_node]
   ,Create$201:function(Self, ASendMessageFunc, ANodeManager, CdiXML) {
      TLccNode.Create$201(Self,ASendMessageFunc,ANodeManager,CdiXML);
      Self.FInProcessMultiFrameMessage = TObjectList.Create$127($New(TObjectList));
      TLccCanNode.Creating$(Self);
      return Self
   }
   /// procedure TLccCanNode.Creating()
   ///  [line: 636, column: 23, file: lcc_node]
   ,Creating:function(Self) {
      /* null */
   }
   /// destructor TLccCanNode.Destroy()
   ///  [line: 641, column: 24, file: lcc_node]
   ,Destroy:function(Self) {
      TLccCanNode.InProcessMessageClear(Self);
      TObject.Free(Self.FInProcessMultiFrameMessage);
      Self.FAliasID = 0;
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[0](Self);
      TLccNode.Destroy(Self);
   }
   /// function TLccCanNode.GenerateID_Alias_From_Seed(var Seed: TNodeID) : Word
   ///  [line: 918, column: 22, file: lcc_node]
   ,GenerateID_Alias_From_Seed:function(Self, Seed) {
      return (((Seed.v[0]^Seed.v[1])^(Seed.v[0]>>>12))^(Seed.v[1]>>>12))&4095;
   }
   /// procedure TLccCanNode.GenerateNewSeed(var Seed: TNodeID)
   ///  [line: 923, column: 23, file: lcc_node]
   ,GenerateNewSeed:function(Self, Seed) {
      var temp1 = 0,
         temp2 = 0;
      temp1 = ((Seed.v[1]<<9)|((Seed.v[0]>>>15)&511))&16777215;
      temp2 = (Seed.v[0]<<9)&16777215;
      Seed.v[0] = Seed.v[0]+temp2+8014761;
      Seed.v[1] = Seed.v[1]+temp1+1772707;
      Seed.v[1] = (Seed.v[1]&16777215)|((Seed.v[0]&4278190080)>>>24);
      Seed.v[0] = Seed.v[0]&16777215;
   }
   /// function TLccCanNode.GetAlias() : Word
   ///  [line: 938, column: 22, file: lcc_node]
   ,GetAlias:function(Self) {
      return Self.FAliasID;
   }
   /// function TLccCanNode.GetAliasIDStr() : String
   ///  [line: 650, column: 22, file: lcc_node]
   ,GetAliasIDStr:function(Self) {
      return "0x" + IntToHex(Self.FAliasID,4);
   }
   /// procedure TLccCanNode.InProcessMessageClear()
   ///  [line: 655, column: 23, file: lcc_node]
   ,InProcessMessageClear:function(Self) {
      var i$7 = 0,
         AMessage = null;
      for(i$7=TObjectList.GetCount$1(Self.FInProcessMultiFrameMessage)-1;i$7>=0;i$7--) {
         AMessage = $As(TObjectList.GetItem$14(Self.FInProcessMultiFrameMessage,i$7),TLccMessage);
         TObjectList.Remove$1(Self.FInProcessMultiFrameMessage,i$7);
         --InprocessMessageAllocated;
         TObject.Free(AMessage);
      }
   }
   /// procedure TLccCanNode.InProcessMessageFlushBySourceAlias(TestMessage: TLccMessage)
   ///  [line: 702, column: 23, file: lcc_node]
   ,InProcessMessageFlushBySourceAlias:function(Self, TestMessage) {
      var i$7 = 0,
         AMessage = null;
      for(i$7=TObjectList.GetCount$1(Self.FInProcessMultiFrameMessage)-1;i$7>=0;i$7--) {
         AMessage = $As(TObjectList.GetItem$14(Self.FInProcessMultiFrameMessage,i$7),TLccMessage);
         if (AMessage.FCAN.FSourceAlias == TestMessage.FCAN.FSourceAlias) {
            TObjectList.Remove$1(Self.FInProcessMultiFrameMessage,i$7);
            --InprocessMessageAllocated;
            TObject.Free(AMessage);
         }
      }
   }
   /// function TLccCanNode.IsDestinationEqual(LccMessage: TLccMessage) : Boolean
   ///  [line: 748, column: 22, file: lcc_node]
   ,IsDestinationEqual:function(Self, LccMessage) {
      return Self.FAliasID == LccMessage.FCAN.FDestAlias;
   }
   /// procedure TLccCanNode.Login(ANodeID: TNodeID)
   ///  [line: 753, column: 23, file: lcc_node]
   ,Login:function(Self, ANodeID) {
      ANodeID = { v : ANodeID };
      var Temp$1 = {v:[0,0]};
      if (NullNodeID(ANodeID.v.slice(0))) {
         TLccNode.CreateNodeID(Self,ANodeID);
      }
      Self.FSeedNodeID = ANodeID.v.slice(0);
      Temp$1.v = Self.FSeedNodeID.slice(0);
      Self.FAliasID = TLccCanNode.GenerateID_Alias_From_Seed(Self,Temp$1);
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[17](Self);
      Self.FNodeID$1 = ANodeID.v.slice(0);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,0);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,1);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,2);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,3);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TW3Timer.SetEnabled(Self.F_800msTimer,true);
   }
   /// procedure TLccCanNode.Logout()
   ///  [line: 777, column: 23, file: lcc_node]
   ,Logout:function(Self) {
      $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[13](Self);
      TLccCanNode.SendAMR(Self);
      Self.FPermitted = false;
      TLccCanNode.InProcessMessageClear(Self);
      TLccNode.Logout(Self);
   }
   /// procedure TLccCanNode.On_800msTimer(Sender: TObject)
   ///  [line: 786, column: 23, file: lcc_node]
   ,On_800msTimer:function(Self, Sender) {
      var Temp$1 = {v:[0,0]};
      if (!(Self.FPermitted)) {
         if (Self.FDuplicateAliasDetected) {
            Self.FDuplicateAliasDetected = false;
            Temp$1.v = Self.FSeedNodeID.slice(0);
            TLccCanNode.GenerateNewSeed(Self,Temp$1);
            Self.FSeedNodeID = Temp$1.v.slice(0);
            Self.FAliasID = TLccCanNode.GenerateID_Alias_From_Seed(Self,Temp$1);
            TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,0);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,1);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,2);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,3);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
         } else {
            Self.FPermitted = true;
            TLccMessage.LoadRID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            TLccMessage.LoadAMD(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[0](Self);
            TLccNode.Login(Self,Self.FNodeID$1.slice(0));
         }
      }
      if (Self.FPermitted) {
         TLccNode.On_800msTimer(Self,Sender);
      }
   }
   /// function TLccCanNode.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 823, column: 22, file: lcc_node]
   ,ProcessMessage$1:function(Self, SourceMessage) {
      var Result = false;
      var TestNodeID = {v:[0,0]};
      Result = false;
      if ((Self.FAliasID!=0) && SourceMessage.FCAN.FSourceAlias == Self.FAliasID) {
         if ((SourceMessage.FCAN.FMTI$1&251658240) >= 16777216 && (SourceMessage.FCAN.FMTI$1&251658240) <= 117440512) {
            TLccMessage.LoadRID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
            Result = true;
         } else if (Self.FPermitted) {
            TLccNode.Logout$(Self);
            TLccCanNode.Relogin(Self);
            Result = true;
         }
      }
      if (Self.FPermitted) {
         TestNodeID.v[0] = 0;
         TestNodeID.v[1] = 0;
         if (SourceMessage.FIsCAN) {
            switch (SourceMessage.FCAN.FMTI$1) {
               case 7348224 :
                  if (SourceMessage.FDataCount == 6) {
                     TLccMessage.ExtractDataBytesAsNodeID(SourceMessage,0,TestNodeID);
                     if (EqualNodeID(TestNodeID.v.slice(0),Self.FNodeID$1.slice(0),false)) {
                        TLccMessage.LoadAMD(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID);
                        Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
                     }
                  } else {
                     TLccMessage.LoadAMD(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID);
                     Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
                  }
                  Result = true;
                  break;
               case 7352320 :
                  TLccCanNode.InProcessMessageFlushBySourceAlias(Self,SourceMessage);
                  break;
               case 7344128 :
                  /* null */
break;
            }
         }
         if (!(Result)) {
            Result = TLccNode.ProcessMessage$1(Self,SourceMessage);
         }
      } else if (SourceMessage.FCAN.FSourceAlias == Self.FAliasID) {
         Self.FDuplicateAliasDetected = true;
      }
      return Result
   }
   /// procedure TLccCanNode.Relogin()
   ///  [line: 897, column: 23, file: lcc_node]
   ,Relogin:function(Self) {
      var Temp$1 = {v:[0,0]};
      Temp$1.v = Self.FSeedNodeID.slice(0);
      TLccCanNode.GenerateNewSeed(Self,Temp$1);
      Self.FSeedNodeID = Temp$1.v.slice(0);
      Self.FAliasID = TLccCanNode.GenerateID_Alias_From_Seed(Self,Temp$1);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,0);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,1);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,2);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TLccMessage.LoadCID(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,3);
      Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      TW3Timer.SetEnabled(Self.F_800msTimer,true);
   }
   /// procedure TLccCanNode.SendAMR()
   ///  [line: 952, column: 23, file: lcc_node]
   ,SendAMR:function(Self) {
      if (Self.FPermitted) {
         Self.FPermitted = false;
         TLccMessage.LoadAMR(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID);
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
         $AsIntf(Self.FNodeManager,"INodeManagerCallbacks")[1](Self);
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,BeforeLogin:TLccNode.BeforeLogin
   ,Create$201$:function($){return $.ClassType.Create$201.apply($.ClassType, arguments)}
   ,GetAlias$:function($){return $.ClassType.GetAlias($)}
   ,GetCdiFile:TLccNode.GetCdiFile
   ,IsDestinationEqual$:function($){return $.ClassType.IsDestinationEqual.apply($.ClassType, arguments)}
   ,Login$:function($){return $.ClassType.Login.apply($.ClassType, arguments)}
   ,Logout$:function($){return $.ClassType.Logout($)}
   ,On_800msTimer$:function($){return $.ClassType.On_800msTimer.apply($.ClassType, arguments)}
   ,ProcessMessage$1$:function($){return $.ClassType.ProcessMessage$1.apply($.ClassType, arguments)}
   ,Creating$:function($){return $.ClassType.Creating($)}
};
/// TLccActionHub = class (TObject)
///  [line: 175, column: 2, file: lcc_node]
var TLccActionHub = {
   $ClassName:"TLccActionHub",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FLccActiveActions = $.FLccCompletedActions = $.FOwner$6 = $.FSendMessageFunc$2 = $.FWorkerMessage$4 = null;
   }
   /// procedure TLccActionHub.ClearCompletedActions()
   ///  [line: 537, column: 25, file: lcc_node]
   ,ClearCompletedActions:function(Self) {
      var i$7 = 0;
      try {
         var $temp166;
         for(i$7=0,$temp166=TObjectList.GetCount$1(Self.FLccCompletedActions);i$7<$temp166;i$7++) {
            TObject.Free(TObjectList.GetItem$14(Self.FLccCompletedActions,i$7));
         }
      } finally {
         TObjectList.Clear$8(Self.FLccCompletedActions);
      }
   }
   /// constructor TLccActionHub.Create(AnOwner: TLccNode; ASendMessageFunc: TOnMessageEvent)
   ///  [line: 505, column: 27, file: lcc_node]
   ,Create$205:function(Self, AnOwner, ASendMessageFunc) {
      Self.FLccActiveActions = TObjectList.Create$127($New(TObjectList));
      Self.FLccCompletedActions = TObjectList.Create$127($New(TObjectList));
      Self.FWorkerMessage$4 = TLccMessage.Create$197($New(TLccMessage));
      Self.FOwner$6 = AnOwner;
      Self.FSendMessageFunc$2 = ASendMessageFunc;
      return Self
   }
   /// destructor TLccActionHub.Destory()
   ,Destory:function(Self) {
      TLccActionHub.ClearActions(Self);
      TLccActionHub.ClearCompletedActions(Self);
      TObject.Free(Self.FLccActiveActions);
      TObject.Free(Self.FLccCompletedActions);
      TObject.Free(Self.FWorkerMessage$4);
   }
   /// function TLccActionHub.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 564, column: 24, file: lcc_node]
   ,ProcessMessage$5:function(Self, SourceMessage) {
      var Result = false;
      var i$7 = 0;
      Result = false;
      for(i$7=TObjectList.GetCount$1(Self.FLccActiveActions)-1;i$7>=0;i$7--) {
         Result = TLccAction.ProcessMessage$4($As(TObjectList.GetItem$14(Self.FLccActiveActions,i$7),TLccAction),SourceMessage);
      }
      return Result
   }
   /// function TLccActionHub.RegisterAction(ANode: TLccNode; ATargetNodeID: TNodeID; ATargetAliasID: Word; AnAction: TLccAction) : Boolean
   ///  [line: 584, column: 24, file: lcc_node]
   ,RegisterAction$1:function(Self, ANode, ATargetNodeID, ATargetAliasID, AnAction) {
      var Result = false;
      Result = true;
      AnAction.FTargetNodeID = ATargetNodeID.slice(0);
      AnAction.FTargetAliasID = ATargetAliasID;
      TLccActionHub.RegisterAction(Self,ANode,null,AnAction);
      return Result
   }
   /// function TLccActionHub.RegisterAction(ANode: TLccNode; SourceMessage: TLccMessage; AnAction: TLccAction) : Boolean
   ///  [line: 573, column: 24, file: lcc_node]
   ,RegisterAction:function(Self, ANode, SourceMessage, AnAction) {
      var Result = false;
      TObjectList.Add$1(Self.FLccActiveActions,AnAction);
      AnAction.FNodeID$2 = ANode.FNodeID$1.slice(0);
      AnAction.FAliasID$1 = $As(ANode,TLccCanNode).FAliasID;
      AnAction.FOwner$5 = ANode;
      AnAction.FSendMessage = ANode.FSendMessageFunc$1;
      AnAction.FActionHub = Self;
      Result = TLccAction._0ReceiveFirstMessage$(AnAction,ANode,SourceMessage);
      return Result
   }
   /// procedure TLccActionHub.TimeTick()
   ///  [line: 593, column: 25, file: lcc_node]
   ,TimeTick$1:function(Self) {
      var i$7 = 0;
      for(i$7=TObjectList.GetCount$1(Self.FLccActiveActions)-1;i$7>=0;i$7--) {
         TLccAction.TimeTick($As(TObjectList.GetItem$14(Self.FLccActiveActions,i$7),TLccAction));
      }
      TLccActionHub.ClearCompletedActions(Self);
   }
   /// procedure TLccActionHub.UnregisterActionAndMarkForFree(AnAction: TLccAction)
   ///  [line: 602, column: 25, file: lcc_node]
   ,UnregisterActionAndMarkForFree:function(Self, AnAction) {
      var i$7 = 0;
      i$7 = TObjectList.IndexOf$1(Self.FLccActiveActions,AnAction);
      if (i$7 > -1) {
         TObjectList.Add$1(Self.FLccCompletedActions,TObjectList.GetItem$14(Self.FLccActiveActions,i$7));
         TObjectList.Remove$1(Self.FLccActiveActions,i$7);
      }
   }
   ,Destroy:TObject.Destroy
};
/// TLccAction = class (TObject)
///  [line: 105, column: 2, file: lcc_node]
var TLccAction = {
   $ClassName:"TLccAction",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FActionHub = $.FOwner$5 = $.FSendMessage = $.FWorkerMessage$3 = null;
      $.FActionStateIndex = $.FTimeoutCounts = $.FTimeoutCountThreshold = 0;
      $.FAliasID$1 = 0;
      $.FCancel = $.FIgnoreTimer = false;
      $.FNodeID$2 = [0,0];
      $.FStates = [];
      $.FTargetAliasID = 0;
      $.FTargetNodeID = [0,0];
   }
   /// function TLccAction.AdvanceToNextState(JumpCount: Integer = 1) : Integer
   ///  [line: 401, column: 21, file: lcc_node]
   ,AdvanceToNextState:function(Self, JumpCount) {
      var Result = 0;
      (Self.FActionStateIndex+= JumpCount);
      Result = Self.FActionStateIndex;
      return Result
   }
   /// procedure TLccAction.AssignTargetNode(ATargetNodeID: TNodeID; ATargetAliasID: Word)
   ///  [line: 496, column: 22, file: lcc_node]
   ,AssignTargetNode:function(Self, ATargetNodeID, ATargetAliasID) {
      Self.FTargetNodeID = ATargetNodeID.slice(0);
      Self.FTargetAliasID = ATargetAliasID;
   }
   /// constructor TLccAction.Create(AnOwner: TLccNode; ANodeID: TNodeID; AnAliasID: Word)
   ///  [line: 389, column: 24, file: lcc_node]
   ,Create$204:function(Self, AnOwner, ANodeID, AnAliasID) {
      ++ActionObjectsAllocated;
      Self.FOwner$5 = AnOwner;
      Self.FWorkerMessage$3 = TLccMessage.Create$197($New(TLccMessage));
      Self.FNodeID$2 = ANodeID.slice(0);
      Self.FAliasID$1 = AnAliasID;
      TLccAction.SetTimoutCountThreshold(Self,5000,true);
      TLccAction.LoadStateArray$(Self);
      return Self
   }
   /// destructor TLccAction.Destroy()
   ///  [line: 407, column: 23, file: lcc_node]
   ,Destroy:function(Self) {
      --ActionObjectsAllocated;
      TObject.Free(Self.FWorkerMessage$3);
      TObject.Destroy(Self);
   }
   /// procedure TLccAction.LoadStateArray()
   ///  [line: 440, column: 22, file: lcc_node]
   ,LoadStateArray:function(Self) {
      TLccAction.SetStateArrayLength(Self,2);
      Self.FStates[0]=$Event2(Self,TLccAction._0ReceiveFirstMessage$);
      Self.FStates[1]=$Event2(Self,TLccAction._NFinalStateCleanup);
   }
   /// function TLccAction.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 447, column: 21, file: lcc_node]
   ,ProcessMessage$4:function(Self, SourceMessage) {
      var Result = false;
      Result = false;
      if (Self.FActionStateIndex > -1 && Self.FActionStateIndex < Self.FStates.length) {
         Result = Self.FStates[Self.FActionStateIndex](Self.FOwner$5,SourceMessage);
      }
      return Result
   }
   /// procedure TLccAction.SetStateArrayLength(NewLength: Integer)
   ///  [line: 460, column: 22, file: lcc_node]
   ,SetStateArrayLength:function(Self, NewLength) {
      $ArraySetLenC(Self.FStates,NewLength,function (){return null});
   }
   /// procedure TLccAction.SetTimoutCountThreshold(NewThreshold_ms: Integer; ResetCounter: Boolean = True)
   ///  [line: 469, column: 22, file: lcc_node]
   ,SetTimoutCountThreshold:function(Self, NewThreshold_ms, ResetCounter) {
      Self.FTimeoutCountThreshold = Trunc(NewThreshold_ms / 800)+1;
      if (ResetCounter) {
         Self.FTimeoutCounts = 0;
      }
   }
   /// function TLccAction.TimeoutExpired() : Boolean
   ///  [line: 491, column: 21, file: lcc_node]
   ,TimeoutExpired:function(Self) {
      return Self.FTimeoutCounts > Self.FTimeoutCountThreshold;
   }
   /// procedure TLccAction.TimeTick()
   ///  [line: 476, column: 22, file: lcc_node]
   ,TimeTick:function(Self) {
      if (!(Self.FIgnoreTimer)) {
         ++Self.FTimeoutCounts;
         TLccAction.ProcessMessage$4(Self,null);
      }
   }
   /// procedure TLccAction.UnRegisterSelf()
   ///  [line: 485, column: 22, file: lcc_node]
   ,UnRegisterSelf:function(Self) {
      if (Self.FActionHub) {
         TLccActionHub.UnregisterActionAndMarkForFree(Self.FActionHub,Self);
      }
   }
   /// function TLccAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 424, column: 21, file: lcc_node]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      Result = false;
      Self.FActionStateIndex = 0;
      if (SourceMessage) {
         TLccAction.AssignTargetNode(Self,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias);
      }
      return Result
   }
   /// function TLccAction._NFinalStateCleanup(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 432, column: 21, file: lcc_node]
   ,_NFinalStateCleanup:function(Self, Sender, SourceMessage) {
      var Result = false;
      Result = false;
      SourceMessage = SourceMessage;
      Self.FActionStateIndex = Self.FStates.length-1;
      TLccAction.UnRegisterSelf(Self);
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,LoadStateArray$:function($){return $.ClassType.LoadStateArray($)}
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TNodeProtocolBase = class (TObject)
///  [line: 34, column: 1, file: lcc_protocol_base]
var TNodeProtocolBase = {
   $ClassName:"TNodeProtocolBase",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FSendMessageFunc = null;
      $.FValid = false;
      $.FWorkerMessage = null;
   }
   /// constructor TNodeProtocolBase.Create(ASendMessageFunc: TOnMessageEvent)
   ///  [line: 92, column: 31, file: lcc_protocol_base]
   ,Create$196:function(Self, ASendMessageFunc) {
      TObject.Create(Self);
      Self.FSendMessageFunc = ASendMessageFunc;
      Self.FWorkerMessage = TLccMessage.Create$197($New(TLccMessage));
      return Self
   }
   /// procedure TNodeProtocolBase.DatagramReadRequest(LccMessage: TLccMessage; OutMessage: TLccMessage; AStream: TStream)
   ///  [line: 130, column: 29, file: lcc_protocol_base]
   ,DatagramReadRequest:function(Self, LccMessage, OutMessage, AStream) {
      var i$7 = 0,
         FirstDataByte = 0,
         BytesToRead = 0,
         AddressStart = 0;
      if (!(TLccMessage.GetDataArrayIndexer(LccMessage,1)&3)) {
         FirstDataByte = 7;
      } else {
         FirstDataByte = 6;
      }
      BytesToRead = TLccMessage.GetDataArrayIndexer(LccMessage,FirstDataByte);
      TLccMessage.SetDataArrayIndexer(OutMessage,0,TLccMessage.GetDataArrayIndexer(LccMessage,0));
      TLccMessage.SetDataArrayIndexer(OutMessage,1,TLccMessage.GetDataArrayIndexer(LccMessage,1)|16);
      TLccMessage.SetDataArrayIndexer(OutMessage,2,TLccMessage.GetDataArrayIndexer(LccMessage,2));
      TLccMessage.SetDataArrayIndexer(OutMessage,3,TLccMessage.GetDataArrayIndexer(LccMessage,3));
      TLccMessage.SetDataArrayIndexer(OutMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4));
      TLccMessage.SetDataArrayIndexer(OutMessage,5,TLccMessage.GetDataArrayIndexer(LccMessage,5));
      if (FirstDataByte == 7) {
         TLccMessage.SetDataArrayIndexer(OutMessage,6,TLccMessage.GetDataArrayIndexer(LccMessage,6));
      }
      AddressStart = TLccMessage.ExtractDataBytesAsInt(LccMessage,2,5);
      if ((TStream.GetSize$(AStream)==0) || AddressStart > TStream.GetSize$(AStream)) {
         OutMessage.FDataCount = FirstDataByte-1;
      } else {
         TStream.SetPosition$(AStream,AddressStart);
         i$7 = 0;
         while (TStream.GetPosition$(AStream) < TStream.GetSize$(AStream) && i$7 < BytesToRead) {
            TLccMessage.SetDataArrayIndexer(OutMessage,FirstDataByte+i$7,StreamReadByte(AStream));
            ++i$7;
         }
         OutMessage.FDataCount = FirstDataByte+i$7;
      }
   }
   /// procedure TNodeProtocolBase.DatagramWriteRequest(LccMessage: TLccMessage; AStream: TStream)
   ///  [line: 68, column: 29, file: lcc_protocol_base]
   ,DatagramWriteRequest:function(Self, LccMessage, AStream) {
      var i$7 = 0,
         iStart$1 = 0,
         WriteCount = 0,
         Address$1 = 0;
      if (!(TLccMessage.GetDataArrayIndexer(LccMessage,1)&3)) {
         iStart$1 = 7;
      } else {
         iStart$1 = 6;
      }
      WriteCount = LccMessage.FDataCount-iStart$1;
      Address$1 = TLccMessage.ExtractDataBytesAsInt(LccMessage,2,5);
      if (Address$1+WriteCount > TStream.GetSize$(AStream)) {
         TStream.SetSize$(AStream,Address$1+WriteCount);
      }
      TStream.SetPosition$(AStream,Address$1);
      var $temp167;
      for(i$7=iStart$1,$temp167=LccMessage.FDataCount;i$7<$temp167;i$7++) {
         StreamWriteByte(AStream,TLccMessage.GetDataArrayIndexer(LccMessage,i$7));
      }
   }
   /// destructor TNodeProtocolBase.Destroy()
   ///  [line: 100, column: 30, file: lcc_protocol_base]
   ,Destroy:function(Self) {
      TObject.Free(Self.FWorkerMessage);
      TObject.Destroy(Self);
   }
   /// procedure TNodeProtocolBase.SetValid(AValue: Boolean)
   ///  [line: 62, column: 29, file: lcc_protocol_base]
   ,SetValid:function(Self, AValue) {
      if (Self.FValid == AValue) {
         return;
      }
      Self.FValid = AValue;
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$196$:function($){return $.ClassType.Create$196.apply($.ClassType, arguments)}
   ,DatagramWriteRequest$:function($){return $.ClassType.DatagramWriteRequest.apply($.ClassType, arguments)}
};
/// TProtocolTraction = class (TNodeProtocolBase)
///  [line: 33, column: 3, file: lcc_protocol_traction]
var TProtocolTraction = {
   $ClassName:"TProtocolTraction",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TTractionProtocolSimpleTrainNodeInfo = class (TNodeProtocolBase)
///  [line: 31, column: 3, file: lcc_protocol_traction_simpletrainnodeinfo]
var TTractionProtocolSimpleTrainNodeInfo = {
   $ClassName:"TTractionProtocolSimpleTrainNodeInfo",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TTractionFunctionDefinitionInfo = class (TNodeProtocolBase)
///  [line: 31, column: 1, file: lcc_protocol_traction_configuation_functiondefinitioninfo]
var TTractionFunctionDefinitionInfo = {
   $ClassName:"TTractionFunctionDefinitionInfo",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TTractionFunctionConfiguration = class (TNodeProtocolBase)
///  [line: 31, column: 1, file: lcc_protocol_traction_configuration_functions]
var TTractionFunctionConfiguration = {
   $ClassName:"TTractionFunctionConfiguration",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TProtocolMemoryConfiguration = class (TNodeProtocolBase)
///  [line: 35, column: 1, file: lcc_protocol_memory_configuration]
var TProtocolMemoryConfiguration = {
   $ClassName:"TProtocolMemoryConfiguration",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   /// constructor TProtocolMemoryConfiguration.Create(ASendMessageFunc: TOnMessageEvent)
   ///  [line: 59, column: 42, file: lcc_protocol_memory_configuration]
   ,Create$196:function(Self, ASendMessageFunc) {
      TNodeProtocolBase.Create$196(Self,ASendMessageFunc);
      return Self
   }
   /// destructor TProtocolMemoryConfiguration.Destroy()
   ///  [line: 66, column: 41, file: lcc_protocol_memory_configuration]
   ,Destroy:function(Self) {
      TNodeProtocolBase.Destroy(Self);
   }
   /// procedure TProtocolMemoryConfiguration.DatagramWriteRequest(LccMessage: TLccMessage; AStream: TStream)
   ///  [line: 81, column: 40, file: lcc_protocol_memory_configuration]
   ,DatagramWriteRequest:function(Self, LccMessage, AStream) {
      TNodeProtocolBase.DatagramWriteRequest(Self,LccMessage,AStream);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$196$:function($){return $.ClassType.Create$196.apply($.ClassType, arguments)}
   ,DatagramWriteRequest$:function($){return $.ClassType.DatagramWriteRequest.apply($.ClassType, arguments)}
};
/// TProtocolMemoryConfigurationDefinitionInfo = class (TNodeProtocolBase)
///  [line: 91, column: 1, file: lcc_protocol_memory_configurationdefinitioninfo]
var TProtocolMemoryConfigurationDefinitionInfo = {
   $ClassName:"TProtocolMemoryConfigurationDefinitionInfo",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
var CDI_ARRAY = [60,63,120,109,108,32,118,101,114,115,105,111,110,61,34,49,46,48,34,32,101,110,99,111,100,105,110,103,61,34,117,116,102,45,56,34,63,62,60,63,120,109,108,45,115,116,121,108,101,115,104,101,101,116,32,116,121,112,101,61,34,116,101,120,116,47,120,115,108,34,32,104,114,101,102,61,34,104,116,116,112,58,47,47,111,112,101,110,108,99,98,46,111,114,103,47,116,114,117,110,107,47,112,114,111,116,111,116,121,112,101,115,47,120,109,108,47,120,115,108,116,47,99,100,105,46,120,115,108,34,63,62,60,99,100,105,32,120,109,108,110,115,58,120,115,105,61,34,104,116,116,112,58,47,47,119,119,119,46,119,51,46,111,114,103,47,50,48,48,49,47,88,77,76,83,99,104,101,109,97,45,105,110,115,116,97,110,99,101,34,32,120,115,105,58,110,111,78,97,109,101,115,112,97,99,101,83,99,104,101,109,97,76,111,99,97,116,105,111,110,61,34,104,116,116,112,58,47,47,111,112,101,110,108,99,98,46,111,114,103,47,116,114,117,110,107,47,115,112,101,99,115,47,115,99,104,101,109,97,47,99,100,105,46,120,115,100,34,62,60,105,100,101,110,116,105,102,105,99,97,116,105,111,110,62,60,109,97,110,117,102,97,99,116,117,114,101,114,62,77,117,115,116,97,110,103,112,101,97,107,60,47,109,97,110,117,102,97,99,116,117,114,101,114,62,60,109,111,100,101,108,62,83,87,49,48,48,60,47,109,111,100,101,108,62,60,104,97,114,100,119,97,114,101,86,101,114,115,105,111,110,62,49,46,48,46,48,46,48,60,47,104,97,114,100,119,97,114,101,86,101,114,115,105,111,110,62,60,115,111,102,116,119,97,114,101,86,101,114,115,105,111,110,62,49,46,48,46,48,46,48,60,47,115,111,102,116,119,97,114,101,86,101,114,115,105,111,110,62,60,47,105,100,101,110,116,105,102,105,99,97,116,105,111,110,62,60,115,101,103,109,101,110,116,32,111,114,105,103,105,110,61,34,49,34,32,115,112,97,99,101,61,34,50,53,51,34,62,60,110,97,109,101,62,85,115,101,114,60,47,110,97,109,101,62,60,100,101,115,99,114,105,112,116,105,111,110,62,85,115,101,114,32,100,101,102,105,110,101,100,32,105,110,102,111,114,109,97,116,105,111,110,60,47,100,101,115,99,114,105,112,116,105,111,110,62,60,103,114,111,117,112,62,60,110,97,109,101,62,85,115,101,114,32,68,97,116,97,60,47,110,97,109,101,62,60,100,101,115,99,114,105,112,116,105,111,110,62,65,100,100,32,121,111,117,114,32,111,119,110,32,117,110,105,113,117,101,32,110,111,100,101,32,105,110,102,111,32,104,101,114,101,60,47,100,101,115,99,114,105,112,116,105,111,110,62,60,115,116,114,105,110,103,32,115,105,122,101,61,34,54,51,34,62,60,110,97,109,101,62,85,115,101,114,32,78,97,109,101,60,47,110,97,109,101,62,60,47,115,116,114,105,110,103,62,60,115,116,114,105,110,103,32,115,105,122,101,61,34,54,52,34,62,60,110,97,109,101,62,85,115,101,114,32,68,101,115,99,114,105,112,116,105,111,110,60,47,110,97,109,101,62,60,47,115,116,114,105,110,103,62,60,47,103,114,111,117,112,62,60,47,115,101,103,109,101,110,116,62,60,47,99,100,105,62,0];
/// TProtocolMemoryOptions = class (TNodeProtocolBase)
///  [line: 36, column: 1, file: lcc_protocol_memory_options]
var TProtocolMemoryOptions = {
   $ClassName:"TProtocolMemoryOptions",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
      $.FHighSpace = 0;
      $.FLowSpace = 0;
      $.FSupportACDIMfgRead = $.FSupportACDIUserRead = $.FSupportACDIUserWrite = $.FUnAlignedReads = $.FUnAlignedWrites = $.FWriteArbitraryBytes = $.FWriteLenFourBytes = $.FWriteLenOneByte = $.FWriteLenSixyFourBytes = $.FWriteLenTwoBytes = $.FWriteStream = $.FWriteUnderMask = false;
   }
   /// procedure TProtocolMemoryOptions.LoadReply(LccMessage: TLccMessage)
   ///  [line: 76, column: 34, file: lcc_protocol_memory_options]
   ,LoadReply:function(Self, LccMessage) {
      var OpsMask = 0;
      TLccMessage.SetDataArrayIndexer(LccMessage,0,32);
      TLccMessage.SetDataArrayIndexer(LccMessage,1,130);
      TLccMessage.SetDataArrayIndexer(LccMessage,5,Self.FHighSpace);
      TLccMessage.SetDataArrayIndexer(LccMessage,6,Self.FLowSpace);
      TLccMessage.SetDataArrayIndexer(LccMessage,4,0);
      if (Self.FWriteLenOneByte) {
         TLccMessage.SetDataArrayIndexer(LccMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4)|128);
      }
      if (Self.FWriteLenTwoBytes) {
         TLccMessage.SetDataArrayIndexer(LccMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4)|64);
      }
      if (Self.FWriteLenFourBytes) {
         TLccMessage.SetDataArrayIndexer(LccMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4)|32);
      }
      if (Self.FWriteLenSixyFourBytes) {
         TLccMessage.SetDataArrayIndexer(LccMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4)|16);
      }
      if (Self.FWriteArbitraryBytes) {
         TLccMessage.SetDataArrayIndexer(LccMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4)|2);
      }
      if (Self.FWriteStream) {
         TLccMessage.SetDataArrayIndexer(LccMessage,4,TLccMessage.GetDataArrayIndexer(LccMessage,4)|1);
      }
      OpsMask = 0;
      if (Self.FWriteUnderMask) {
         OpsMask = OpsMask|32768;
      }
      if (Self.FUnAlignedReads) {
         OpsMask = OpsMask|16384;
      }
      if (Self.FUnAlignedWrites) {
         OpsMask = OpsMask|8192;
      }
      if (Self.FSupportACDIMfgRead) {
         OpsMask = OpsMask|2048;
      }
      if (Self.FSupportACDIUserRead) {
         OpsMask = OpsMask|1024;
      }
      if (Self.FSupportACDIUserWrite) {
         OpsMask = OpsMask|512;
      }
      TLccMessage.SetDataArrayIndexer(LccMessage,2,_Hi(OpsMask));
      TLccMessage.SetDataArrayIndexer(LccMessage,3,_Lo(OpsMask));
      LccMessage.FDataCount = 7;
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TProtocolMemoryInfo = class (TNodeProtocolBase)
///  [line: 62, column: 3, file: lcc_protocol_memory_information]
var TProtocolMemoryInfo = {
   $ClassName:"TProtocolMemoryInfo",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
      $.FList$1 = null;
   }
   /// procedure TProtocolMemoryInfo.Add(_Space: Byte; _IsPresent: Boolean; _IsReadOnly: Boolean; _ImpliedZeroLowAddress: Boolean; _LowAddress: DWord; _HighAddress: DWord)
   ///  [line: 95, column: 31, file: lcc_protocol_memory_information]
   ,Add$21:function(Self, _Space, _IsPresent, _IsReadOnly, _ImpliedZeroLowAddress, _LowAddress, _HighAddress) {
      var Info$1 = null;
      Info$1 = TObject.Create($New(TConfigMemAddressSpaceInfoObject));
      Info$1.FAddressSpace = _Space;
      Info$1.FIsPresent = _IsPresent;
      Info$1.FIsReadOnly = _IsReadOnly;
      Info$1.FImpliedZeroLowAddress = _ImpliedZeroLowAddress;
      Info$1.FLowAddress = _LowAddress;
      Info$1.FHighAddress = _HighAddress;
      TObjectList.Add$1(Self.FList$1,Info$1);
   }
   /// procedure TProtocolMemoryInfo.Clear()
   ///  [line: 109, column: 31, file: lcc_protocol_memory_information]
   ,Clear$31:function(Self) {
      var i$7 = 0;
      try {
         var $temp168;
         for(i$7=0,$temp168=TObjectList.GetCount$1(Self.FList$1);i$7<$temp168;i$7++) {
            TObject.Free(TObjectList.GetItem$14(Self.FList$1,i$7));
         }
      } finally {
         TObjectList.Clear$8(Self.FList$1);
      }
   }
   /// constructor TProtocolMemoryInfo.Create(ASendMessageFunc: TOnMessageEvent)
   ///  [line: 121, column: 33, file: lcc_protocol_memory_information]
   ,Create$196:function(Self, ASendMessageFunc) {
      TNodeProtocolBase.Create$196(Self,ASendMessageFunc);
      Self.FList$1 = TObjectList.Create$127($New(TObjectList));
      return Self
   }
   /// destructor TProtocolMemoryInfo.Destroy()
   ///  [line: 134, column: 32, file: lcc_protocol_memory_information]
   ,Destroy:function(Self) {
      TProtocolMemoryInfo.Clear$31(Self);
      TObject.Free(Self.FList$1);
      TNodeProtocolBase.Destroy(Self);
   }
   /// function TProtocolMemoryInfo.FindByAddressSpace(Space: Byte) : TConfigMemAddressSpaceInfoObject
   ///  [line: 141, column: 30, file: lcc_protocol_memory_information]
   ,FindByAddressSpace:function(Self, Space) {
      var Result = null;
      var i$7 = 0;
      i$7 = 0;
      Result = null;
      while (i$7 < TProtocolMemoryInfo.GetCount$8(Self) && (!(Result!==null))) {
         if (TProtocolMemoryInfo.GetAddressSpace(Self,i$7).FAddressSpace == Space) {
            Result = TProtocolMemoryInfo.GetAddressSpace(Self,i$7);
         }
         ++i$7;
      }
      return Result
   }
   /// function TProtocolMemoryInfo.GetAddressSpace(Index: Integer) : TConfigMemAddressSpaceInfoObject
   ///  [line: 155, column: 30, file: lcc_protocol_memory_information]
   ,GetAddressSpace:function(Self, Index$6) {
      return $As(TObjectList.GetItem$14(Self.FList$1,Index$6),TConfigMemAddressSpaceInfoObject);
   }
   /// function TProtocolMemoryInfo.GetCount() : Integer
   ///  [line: 160, column: 30, file: lcc_protocol_memory_information]
   ,GetCount$8:function(Self) {
      return TObjectList.GetCount$1(Self.FList$1);
   }
   /// procedure TProtocolMemoryInfo.LoadReply(LccMessage: TLccMessage; OutMessage: TLccMessage)
   ///  [line: 165, column: 31, file: lcc_protocol_memory_information]
   ,LoadReply$1:function(Self, LccMessage, OutMessage) {
      var Info$1 = null;
      Info$1 = TProtocolMemoryInfo.FindByAddressSpace(Self,TLccMessage.GetDataArrayIndexer(LccMessage,2));
      TLccMessage.SetDataArrayIndexer(OutMessage,0,32);
      if (Info$1) {
         if (Info$1.FIsPresent) {
            TLccMessage.SetDataArrayIndexer(OutMessage,1,135);
         } else {
            TLccMessage.SetDataArrayIndexer(OutMessage,1,134);
         }
         TLccMessage.SetDataArrayIndexer(OutMessage,2,TLccMessage.GetDataArrayIndexer(LccMessage,2));
         TLccMessage.SetDataArrayIndexer(OutMessage,3,_Highest(Info$1.FHighAddress));
         TLccMessage.SetDataArrayIndexer(OutMessage,4,_Higher(Info$1.FHighAddress));
         TLccMessage.SetDataArrayIndexer(OutMessage,5,_Hi(Info$1.FHighAddress));
         TLccMessage.SetDataArrayIndexer(OutMessage,6,_Lo(Info$1.FHighAddress));
         TLccMessage.SetDataArrayIndexer(OutMessage,7,0);
         if (Info$1.FIsReadOnly) {
            TLccMessage.SetDataArrayIndexer(OutMessage,7,TLccMessage.GetDataArrayIndexer(OutMessage,7)|1);
         }
         OutMessage.FDataCount = 8;
         if (!(Info$1.FImpliedZeroLowAddress)) {
            TLccMessage.SetDataArrayIndexer(OutMessage,8,_Highest(Info$1.FLowAddress));
            TLccMessage.SetDataArrayIndexer(OutMessage,9,_Higher(Info$1.FLowAddress));
            TLccMessage.SetDataArrayIndexer(OutMessage,10,_Hi(Info$1.FLowAddress));
            TLccMessage.SetDataArrayIndexer(OutMessage,11,_Lo(Info$1.FLowAddress));
            OutMessage.FDataCount = 12;
         }
      } else {
         TLccMessage.SetDataArrayIndexer(OutMessage,1,134);
         TLccMessage.SetDataArrayIndexer(OutMessage,2,TLccMessage.GetDataArrayIndexer(LccMessage,2));
         TLccMessage.SetDataArrayIndexer(OutMessage,3,0);
         TLccMessage.SetDataArrayIndexer(OutMessage,4,0);
         TLccMessage.SetDataArrayIndexer(OutMessage,5,0);
         TLccMessage.SetDataArrayIndexer(OutMessage,6,0);
         TLccMessage.SetDataArrayIndexer(OutMessage,7,1);
         OutMessage.FDataCount = 8;
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$196$:function($){return $.ClassType.Create$196.apply($.ClassType, arguments)}
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TConfigMemAddressSpaceInfoObject = class (TObject)
///  [line: 43, column: 3, file: lcc_protocol_memory_information]
var TConfigMemAddressSpaceInfoObject = {
   $ClassName:"TConfigMemAddressSpaceInfoObject",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAddressSpace = 0;
      $.FHighAddress = 0;
      $.FImpliedZeroLowAddress = $.FIsPresent = $.FIsReadOnly = false;
      $.FLowAddress = 0;
   }
   ,Destroy:TObject.Destroy
};
/// TProtocolSimpleNodeInfo = class (TNodeProtocolBase)
///  [line: 34, column: 3, file: lcc_protocol_simplenodeinfo]
var TProtocolSimpleNodeInfo = {
   $ClassName:"TProtocolSimpleNodeInfo",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   /// function TProtocolSimpleNodeInfo.PackedFormat(StreamManufacturerInfo: TStream; StreamConfiguration: TStream) : TLccDynamicByteArray
   ///  [line: 43, column: 34, file: lcc_protocol_simplenodeinfo]
   ,PackedFormat:function(Self, StreamManufacturerInfo, StreamConfiguration) {
      var Result = [];
      var Len$1 = 0,
         i$7 = 0,
         AByte = 0,
         BinaryData = null;
      Result = [];
      Len$1 = 1;
      TStream.SetPosition$(StreamManufacturerInfo,1);
      while ((StreamReadByte(StreamManufacturerInfo)!=0)) {
         ++Len$1      }
      TStream.SetPosition$(StreamManufacturerInfo,42);
      while ((StreamReadByte(StreamManufacturerInfo)!=0)) {
         ++Len$1      }
      TStream.SetPosition$(StreamManufacturerInfo,83);
      while ((StreamReadByte(StreamManufacturerInfo)!=0)) {
         ++Len$1      }
      TStream.SetPosition$(StreamManufacturerInfo,104);
      while ((StreamReadByte(StreamManufacturerInfo)!=0)) {
         ++Len$1      }
      ++Len$1;
      TStream.SetPosition$(StreamConfiguration,1);
      while ((StreamReadByte(StreamConfiguration)!=0)) {
         ++Len$1      }
      TStream.SetPosition$(StreamConfiguration,64);
      while ((StreamReadByte(StreamConfiguration)!=0)) {
         ++Len$1      }
      (Len$1+= 6);
      BinaryData = TAllocation.Create$79($New(TBinaryData),Len$1);
      Result = TBinaryData.ToBytes(BinaryData);
      i$7 = 0;
      Result[i$7]=1;
      ++i$7;
      TStream.SetPosition$(StreamManufacturerInfo,1);
      AByte = StreamReadByte(StreamManufacturerInfo);
      while ((AByte!=0)) {
         Result[i$7]=AByte;
         AByte = StreamReadByte(StreamManufacturerInfo);
         ++i$7;
      }
      Result[i$7]=0;
      ++i$7;
      TStream.SetPosition$(StreamManufacturerInfo,42);
      AByte = StreamReadByte(StreamManufacturerInfo);
      while ((AByte!=0)) {
         Result[i$7]=AByte;
         AByte = StreamReadByte(StreamManufacturerInfo);
         ++i$7;
      }
      Result[i$7]=0;
      ++i$7;
      TStream.SetPosition$(StreamManufacturerInfo,83);
      AByte = StreamReadByte(StreamManufacturerInfo);
      while ((AByte!=0)) {
         Result[i$7]=AByte;
         AByte = StreamReadByte(StreamManufacturerInfo);
         ++i$7;
      }
      Result[i$7]=0;
      ++i$7;
      TStream.SetPosition$(StreamManufacturerInfo,104);
      AByte = StreamReadByte(StreamManufacturerInfo);
      while ((AByte!=0)) {
         Result[i$7]=AByte;
         AByte = StreamReadByte(StreamManufacturerInfo);
         ++i$7;
      }
      Result[i$7]=0;
      ++i$7;
      Result[i$7]=1;
      ++i$7;
      TStream.SetPosition$(StreamConfiguration,1);
      AByte = StreamReadByte(StreamConfiguration);
      while ((AByte!=0)) {
         Result[i$7]=AByte;
         AByte = StreamReadByte(StreamConfiguration);
         ++i$7;
      }
      Result[i$7]=0;
      ++i$7;
      TStream.SetPosition$(StreamConfiguration,64);
      AByte = StreamReadByte(StreamConfiguration);
      while ((AByte!=0)) {
         Result[i$7]=AByte;
         AByte = StreamReadByte(StreamConfiguration);
         ++i$7;
      }
      Result[i$7]=0;
      return Result
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TACDIUser = class (TNodeProtocolBase)
///  [line: 45, column: 1, file: lcc_protocol_acdi]
var TACDIUser = {
   $ClassName:"TACDIUser",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TACDIMfg = class (TNodeProtocolBase)
///  [line: 39, column: 1, file: lcc_protocol_acdi]
var TACDIMfg = {
   $ClassName:"TACDIMfg",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TProtocolEvents = class (TNodeProtocolBase)
///  [line: 73, column: 1, file: lcc_protocol_events]
var TProtocolEvents = {
   $ClassName:"TProtocolEvents",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
      $.FAutoGenerate = $.FEventList = null;
   }
   /// procedure TProtocolEvents.Add(Event: TEventID; State: TEventState)
   ///  [line: 185, column: 27, file: lcc_protocol_events]
   ,Add$22:function(Self, Event$3, State$2) {
      var LccEvent = null;
      LccEvent = TProtocolEvents.Supports(Self,Event$3.slice(0));
      if (LccEvent) {
         LccEvent.FState$1 = State$2;
      } else {
         LccEvent = TObject.Create($New(TLccEvent));
         TLccEvent.SetID(LccEvent,Event$3.slice(0));
         LccEvent.FState$1 = State$2;
         TObjectList.Add$1(Self.FEventList,LccEvent);
      }
   }
   /// procedure TProtocolEvents.Clear()
   ///  [line: 200, column: 27, file: lcc_protocol_events]
   ,Clear$32:function(Self) {
      var i$7 = 0;
      try {
         var $temp169;
         for(i$7=0,$temp169=TObjectList.GetCount$1(Self.FEventList);i$7<$temp169;i$7++) {
            TObject.Free(TObjectList.GetItem$14(Self.FEventList,i$7));
         }
      } finally {
         TObjectList.Clear$8(Self.FEventList);
      }
   }
   /// constructor TProtocolEvents.Create(ASendMessageFunc: TOnMessageEvent)
   ///  [line: 150, column: 29, file: lcc_protocol_events]
   ,Create$196:function(Self, ASendMessageFunc) {
      TNodeProtocolBase.Create$196(Self,ASendMessageFunc);
      Self.FEventList = TObjectList.Create$127($New(TObjectList));
      Self.FAutoGenerate = TObject.Create($New(TLccEventAutoGenerate));
      return Self
   }
   /// destructor TProtocolEvents.Destroy()
   ///  [line: 162, column: 28, file: lcc_protocol_events]
   ,Destroy:function(Self) {
      TProtocolEvents.Clear$32(Self);
      TObject.Free(Self.FEventList);
      TObject.Free(Self.FAutoGenerate);
      TNodeProtocolBase.Destroy(Self);
   }
   /// function TProtocolEvents.GetCount() : Integer
   ///  [line: 180, column: 26, file: lcc_protocol_events]
   ,GetCount$9:function(Self) {
      return TObjectList.GetCount$1(Self.FEventList);
   }
   /// function TProtocolEvents.GetEvent(Index: Integer) : TLccEvent
   ///  [line: 170, column: 26, file: lcc_protocol_events]
   ,GetEvent:function(Self, Index$6) {
      return $As(TObjectList.GetItem$14(Self.FEventList,Index$6),TLccEvent);
   }
   /// function TProtocolEvents.Supports(Event: TEventID) : TLccEvent
   ///  [line: 216, column: 26, file: lcc_protocol_events]
   ,Supports:function(Self, Event$3) {
      var Result = null;
      var i$7 = 0;
      Result = null;
      i$7 = 0;
      while ((!(Result!==null)) && i$7 < TObjectList.GetCount$1(Self.FEventList)) {
         if (EqualEventID(Event$3.slice(0),$As(TObjectList.GetItem$14(Self.FEventList,i$7),TLccEvent).FID.slice(0))) {
            Result = $As(TObjectList.GetItem$14(Self.FEventList,i$7),TLccEvent);
         }
         ++i$7;
      }
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$196$:function($){return $.ClassType.Create$196.apply($.ClassType, arguments)}
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TLccEventAutoGenerate = class (TObject)
///  [line: 57, column: 1, file: lcc_protocol_events]
var TLccEventAutoGenerate = {
   $ClassName:"TLccEventAutoGenerate",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FCount$1 = $.FStartIndex = 0;
      $.FDefaultState = 0;
   }
   /// procedure TLccEventAutoGenerate.SetCount(AValue: Integer)
   ///  [line: 130, column: 33, file: lcc_protocol_events]
   ,SetCount$1:function(Self, AValue) {
      if (Self.FCount$1 == AValue) {
         return;
      }
      Self.FCount$1 = AValue;
   }
   /// procedure TLccEventAutoGenerate.SetDefaultState(AValue: TEventState)
   ///  [line: 136, column: 33, file: lcc_protocol_events]
   ,SetDefaultState:function(Self, AValue) {
      if (Self.FDefaultState == AValue) {
         return;
      }
      Self.FDefaultState = AValue;
   }
   /// procedure TLccEventAutoGenerate.SetStartIndex(AValue: Integer)
   ///  [line: 142, column: 33, file: lcc_protocol_events]
   ,SetStartIndex:function(Self, AValue) {
      if (Self.FStartIndex == AValue) {
         return;
      }
      Self.FStartIndex = AValue;
   }
   ,Destroy:TObject.Destroy
};
/// TLccEvent = class (TObject)
///  [line: 42, column: 1, file: lcc_protocol_events]
var TLccEvent = {
   $ClassName:"TLccEvent",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FID = [0,0,0,0,0,0,0,0];
      $.FIDStr = "";
      $.FState$1 = 0;
   }
   /// procedure TLccEvent.SetID(AValue: TEventID)
   ///  [line: 108, column: 21, file: lcc_protocol_events]
   ,SetID:function(Self, AValue) {
      Self.FID[0] = AValue[0];
      Self.FID[1] = AValue[1];
      Self.FID[2] = AValue[2];
      Self.FID[3] = AValue[3];
      Self.FID[4] = AValue[4];
      Self.FID[5] = AValue[5];
      Self.FID[6] = AValue[6];
      Self.FID[7] = AValue[7];
      Self.FIDStr = EventIDToString(Self.FID.slice(0),false);
   }
   ,Destroy:TObject.Destroy
};
/// TProtocolSupportedProtocols = class (TNodeProtocolBase)
///  [line: 34, column: 1, file: lcc_protocol_supportedprotocols]
var TProtocolSupportedProtocols = {
   $ClassName:"TProtocolSupportedProtocols",$Parent:TNodeProtocolBase
   ,$Init:function ($) {
      TNodeProtocolBase.$Init($);
      $.FAbbreviatedConfigurationDefinitionInfo = $.FConfigurationDefinitionInfo = $.FDatagram = $.FDisplay$1 = $.FEventExchange = $.FFirmwareUpgrade = $.FFirmwareUpgradeActive = $.FIdentification = $.FMemConfig = $.FRemoteButton = $.FReservation = $.FSimpleNodeInfo = $.FStream = $.FTeach_Learn = $.FTractionControl = $.FTractionFunctionConfiguration = $.FTractionFunctionDefinitionInfo = $.FTractionSimpleTrainNodeInfo = false;
   }
   /// function TProtocolSupportedProtocols.EncodeFlags() : TLccSupportedProtocolArray
   ///  [line: 120, column: 38, file: lcc_protocol_supportedprotocols]
   ,EncodeFlags$1:function(Self) {
      var Result = [0,0,0,0,0,0,0];
      var i$7 = 0;
      for(i$7=0;i$7<=5;i$7++) {
         Result[i$7] = 0;
      }
      if (Self.FDatagram) {
         Result[5] = Result[5]|64;
      }
      if (Self.FStream) {
         Result[5] = Result[5]|32;
      }
      if (Self.FMemConfig) {
         Result[5] = Result[5]|16;
      }
      if (Self.FReservation) {
         Result[5] = Result[5]|8;
      }
      if (Self.FEventExchange) {
         Result[5] = Result[5]|4;
      }
      if (Self.FIdentification) {
         Result[5] = Result[5]|2;
      }
      if (Self.FTeach_Learn) {
         Result[5] = Result[5]|1;
      }
      if (Self.FRemoteButton) {
         Result[4] = Result[4]|128;
      }
      if (Self.FAbbreviatedConfigurationDefinitionInfo) {
         Result[4] = Result[4]|64;
      }
      if (Self.FDisplay$1) {
         Result[4] = Result[4]|32;
      }
      if (Self.FSimpleNodeInfo) {
         Result[4] = Result[4]|16;
      }
      if (Self.FConfigurationDefinitionInfo) {
         Result[4] = Result[4]|8;
      }
      if (Self.FTractionControl) {
         Result[4] = Result[4]|4;
      }
      if (Self.FTractionFunctionDefinitionInfo) {
         Result[4] = Result[4]|2;
      }
      if (Self.FTractionSimpleTrainNodeInfo) {
         Result[3] = Result[3]|128;
      }
      if (Self.FTractionFunctionConfiguration) {
         Result[3] = Result[3]|64;
      }
      if (Self.FFirmwareUpgrade) {
         Result[3] = Result[3]|32;
      }
      if (Self.FFirmwareUpgradeActive) {
         Result[3] = Result[3]|16;
      }
      return Result
   }
   ,Destroy:TNodeProtocolBase.Destroy
   ,Create$196:TNodeProtocolBase.Create$196
   ,DatagramWriteRequest:TNodeProtocolBase.DatagramWriteRequest
};
/// TDatagramQueue = class (TObject)
///  [line: 52, column: 1, file: lcc_protocol_datagram]
var TDatagramQueue = {
   $ClassName:"TDatagramQueue",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FQueue = $.FSendMessageFunc$3 = null;
   }
   /// function TDatagramQueue.Add(LccMessage: TLccMessage) : Boolean
   ///  [line: 98, column: 25, file: lcc_protocol_datagram]
   ,Add$23:function(Self, LccMessage) {
      var Result = false;
      Result = true;
      TObjectList.Add$1(Self.FQueue,LccMessage);
      LccMessage.FRetryAttempts = 0;
      LccMessage.FAbandonTimeout = 0;
      return Result
   }
   /// procedure TDatagramQueue.Clear()
   ///  [line: 166, column: 26, file: lcc_protocol_datagram]
   ,Clear$33:function(Self) {
      TObjectList.Clear$8(Self.FQueue);
   }
   /// constructor TDatagramQueue.Create(ASendMessageFunc: TOnMessageEvent)
   ///  [line: 106, column: 28, file: lcc_protocol_datagram]
   ,Create$209:function(Self, ASendMessageFunc) {
      TObject.Create(Self);
      Self.FSendMessageFunc$3 = ASendMessageFunc;
      Self.FQueue = TObjectList.Create$127($New(TObjectList));
      return Self
   }
   /// destructor TDatagramQueue.Destroy()
   ///  [line: 120, column: 27, file: lcc_protocol_datagram]
   ,Destroy:function(Self) {
      TObject.Free(Self.FQueue);
      TObject.Destroy(Self);
   }
   /// function TDatagramQueue.FindBySourceNode(LccMessage: TLccMessage) : Integer
   ///  [line: 134, column: 25, file: lcc_protocol_datagram]
   ,FindBySourceNode:function(Self, LccMessage) {
      var Result = 0;
      var i$7 = 0,
         QueueAlias = 0,
         QueueNodeID = [0,0];
      Result = -1;
      i$7 = 0;
      while (i$7 < TObjectList.GetCount$1(Self.FQueue)) {
         QueueAlias = $As(TObjectList.GetItem$14(Self.FQueue,i$7),TLccMessage).FCAN.FDestAlias;
         QueueNodeID = $As(TObjectList.GetItem$14(Self.FQueue,i$7),TLccMessage).FDestID.slice(0);
         if ((QueueAlias!=0) && (LccMessage.FCAN.FSourceAlias!=0)) {
            if (QueueAlias == LccMessage.FCAN.FSourceAlias) {
               Result = i$7;
               break;
            }
         } else if ((!(NullNodeID(QueueNodeID.slice(0)))) && (!(NullNodeID(LccMessage.FSourceID.slice(0))))) {
            if (EqualNodeID(QueueNodeID.slice(0),LccMessage.FSourceID.slice(0),false)) {
               Result = i$7;
               break;
            }
         }
         ++i$7;
      }
      return Result
   }
   /// procedure TDatagramQueue.Remove(LccMessage: TLccMessage)
   ///  [line: 85, column: 26, file: lcc_protocol_datagram]
   ,Remove$10:function(Self, LccMessage) {
      var iLocalMessage = 0;
      iLocalMessage = TDatagramQueue.FindBySourceNode(Self,LccMessage);
      if (iLocalMessage > -1) {
         TObjectList.Remove$1(Self.FQueue,TObjectList.IndexOf$1(Self.FQueue,LccMessage));
      }
   }
   /// procedure TDatagramQueue.Resend(LccMessage: TLccMessage)
   ///  [line: 171, column: 26, file: lcc_protocol_datagram]
   ,Resend:function(Self, LccMessage) {
      var iLocalMessage = 0,
         LocalMessage = null;
      iLocalMessage = TDatagramQueue.FindBySourceNode(Self,LccMessage);
      if (iLocalMessage > -1) {
         LocalMessage = $As(TObjectList.GetItem$14(Self.FQueue,iLocalMessage),TLccMessage);
         if (LocalMessage.FRetryAttempts < 5) {
            LocalMessage = $As(TObjectList.GetItem$14(Self.FQueue,iLocalMessage),TLccMessage);
            Self.FSendMessageFunc$3(Self,LocalMessage);
            LocalMessage.FRetryAttempts += 1;
         } else {
            TObjectList.Remove$1(Self.FQueue,TObjectList.IndexOf$1(Self.FQueue,LocalMessage));
         }
      }
   }
   /// procedure TDatagramQueue.TickTimeout()
   ///  [line: 194, column: 26, file: lcc_protocol_datagram]
   ,TickTimeout:function(Self) {
      var LocalMessage = null,
         i$7 = 0;
      for(i$7=TObjectList.GetCount$1(Self.FQueue)-1;i$7>=0;i$7--) {
         LocalMessage = $As(TObjectList.GetItem$14(Self.FQueue,i$7),TLccMessage);
         if (LocalMessage.FAbandonTimeout < 6) {
            LocalMessage.FAbandonTimeout += 1;
         } else {
            TObjectList.Remove$1(Self.FQueue,TObjectList.IndexOf$1(Self.FQueue,LocalMessage));
         }
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TListenerNode = class (TObject)
///  [line: 320, column: 3, file: lcc_node_train]
var TListenerNode = {
   $ClassName:"TListenerNode",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FHidden$1 = $.FLinkF0 = $.FLinkFn = $.FReverseDirection = false;
      $.FNodeID = [0,0];
   }
   /// procedure TListenerNode.DecodeFlags(Flags: Byte)
   ///  [line: 518, column: 25, file: lcc_node_train]
   ,DecodeFlags:function(Self, Flags$2) {
      Self.FReverseDirection = (Flags$2&2) == 2;
      Self.FLinkF0 = (Flags$2&4) == 4;
      Self.FLinkFn = (Flags$2&8) == 8;
      Self.FHidden$1 = (Flags$2&16) == 16;
   }
   /// function TListenerNode.EncodeFlags() : Byte
   ///  [line: 526, column: 24, file: lcc_node_train]
   ,EncodeFlags:function(Self) {
      var Result = 0;
      Result = 0;
      if (Self.FReverseDirection) {
         Result = Result|2;
      }
      if (Self.FReverseDirection) {
         Result = Result|4;
      }
      if (Self.FReverseDirection) {
         Result = Result|8;
      }
      if (Self.FReverseDirection) {
         Result = Result|16;
      }
      return Result
   }
   ,Destroy:TObject.Destroy
};
/// TListenerList = class (TObject)
///  [line: 340, column: 3, file: lcc_node_train]
var TListenerList = {
   $ClassName:"TListenerList",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FListenerList = null;
   }
   /// function TListenerList.Add(NodeID: TNodeID; Flags: Byte; AliasID: Word = 0) : TListenerNode
   ///  [line: 550, column: 24, file: lcc_node_train]
   ,Add$20:function(Self, NodeID$8, Flags$2, AliasID$5) {
      var Result = null;
      AliasID$5 = AliasID$5;
      Result = TObject.Create($New(TListenerNode));
      Result.FNodeID = NodeID$8.slice(0);
      TListenerNode.DecodeFlags(Result,Flags$2);
      return Result
   }
   /// constructor TListenerList.Create()
   ///  [line: 537, column: 27, file: lcc_node_train]
   ,Create$200:function(Self) {
      TObject.Create(Self);
      Self.FListenerList = TObjectList.Create$127($New(TObjectList));
      return Self
   }
   /// function TListenerList.Delete(NodeID: TNodeID) : Boolean
   ///  [line: 558, column: 24, file: lcc_node_train]
   ,Delete$8:function(Self, NodeID$8) {
      var Result = false;
      var Index$6 = 0;
      Result = false;
      Index$6 = TListenerList.FindNodeIndex(Self,NodeID$8.slice(0));
      if (Index$6 > 0) {
         TObjectList.Remove$1(Self.FListenerList,Index$6);
         Result = true;
      }
      return Result
   }
   /// destructor TListenerList.Destroy()
   ///  [line: 575, column: 26, file: lcc_node_train]
   ,Destroy:function(Self) {
      TObject.Free(Self.FListenerList);
      TObject.Destroy(Self);
   }
   /// function TListenerList.FindByIndex(Index: Byte) : TListenerNode
   ///  [line: 601, column: 24, file: lcc_node_train]
   ,FindByIndex:function(Self, Index$6) {
      var Result = null;
      if (Index$6 < TListenerList.GetCount$7(Self)) {
         Result = $As(TObjectList.GetItem$14(Self.FListenerList,Index$6),TListenerNode);
      } else {
         Result = null;
      }
      return Result
   }
   /// function TListenerList.FindNode(NodeID: TNodeID) : TListenerNode
   ///  [line: 585, column: 24, file: lcc_node_train]
   ,FindNode:function(Self, NodeID$8) {
      var Result = null;
      var i$7 = 0,
         ListenerNode = null;
      Result = null;
      i$7 = 0;
      while (Result === null && i$7 < TObjectList.GetCount$1(Self.FListenerList)) {
         ListenerNode = $As(TObjectList.GetItem$14(Self.FListenerList,i$7),TListenerNode);
         if (ListenerNode.FNodeID[0] == NodeID$8[0] && ListenerNode.FNodeID[1] == NodeID$8[1]) {
            Result = ListenerNode;
         }
         ++i$7;
      }
      return Result
   }
   /// function TListenerList.FindNodeIndex(NodeID: TNodeID) : Integer
   ///  [line: 609, column: 24, file: lcc_node_train]
   ,FindNodeIndex:function(Self, NodeID$8) {
      var Result = 0;
      var i$7 = 0,
         ListenerNode = null;
      Result = -1;
      i$7 = 0;
      while (Result < 0 && i$7 < TObjectList.GetCount$1(Self.FListenerList)) {
         ListenerNode = $As(TObjectList.GetItem$14(Self.FListenerList,i$7),TListenerNode);
         if (ListenerNode.FNodeID[0] == NodeID$8[0] && ListenerNode.FNodeID[1] == NodeID$8[1]) {
            Result = i$7;
         }
         ++i$7;
      }
      return Result
   }
   /// function TListenerList.GetCount() : Integer
   ///  [line: 626, column: 24, file: lcc_node_train]
   ,GetCount$7:function(Self) {
      return TObjectList.GetCount$1(Self.FListenerList);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TLccTrainDirection enumeration
///  [line: 305, column: 3, file: lcc_node_train]
var TLccTrainDirection = [ "tdForward", "tdReverse" ];
/// TLccTrainCanNode = class (TLccCanNode)
///  [line: 366, column: 3, file: lcc_node_train]
var TLccTrainCanNode = {
   $ClassName:"TLccTrainCanNode",$Parent:TLccCanNode
   ,$Init:function ($) {
      TLccCanNode.$Init($);
      $.FAttachedController = {NodeID$4:[0,0],AliasID$2:0,ReservationNodeID:[0,0],ReservationAliasID:0,AttatchNotifyNodeID:[0,0],AttachNotifyAliasID:0};
      $.FDccAddress = 0;
      $.FDccLongAddress = false;
      $.FFunctions = function () {
         for (var r=[],i=0; i<29; i++) r.push(0);
         return r
      }();
      $.FListeners = $.FOnSendMessageComPort = null;
      $.FName$6 = $.FRoadNumber = "";
      $.FSearchEvent = [0,0,0,0,0,0,0,0];
      $.FSpeed = 0;
      $.FSpeedStep = 0;
   }
   /// procedure TLccTrainCanNode.BeforeLogin()
   ///  [line: 1071, column: 28, file: lcc_node_train]
   ,BeforeLogin:function(Self) {
      Self.FProtocolSupportedProtocols.FConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FDatagram = true;
      Self.FProtocolSupportedProtocols.FEventExchange = true;
      Self.FProtocolSupportedProtocols.FSimpleNodeInfo = true;
      Self.FProtocolSupportedProtocols.FAbbreviatedConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FTractionControl = true;
      Self.FProtocolSupportedProtocols.FTractionSimpleTrainNodeInfo = true;
      Self.FProtocolSupportedProtocols.FTractionFunctionDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FTractionFunctionConfiguration = true;
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,255,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,254,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,253,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,252,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,251,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,250,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,249,true,false,true,0,4294967295);
      Self.FProtocolMemoryOptions.FWriteUnderMask = true;
      Self.FProtocolMemoryOptions.FUnAlignedReads = true;
      Self.FProtocolMemoryOptions.FUnAlignedWrites = true;
      Self.FProtocolMemoryOptions.FSupportACDIMfgRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserWrite = true;
      Self.FProtocolMemoryOptions.FWriteLenOneByte = true;
      Self.FProtocolMemoryOptions.FWriteLenTwoBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenSixyFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteArbitraryBytes = true;
      Self.FProtocolMemoryOptions.FWriteStream = false;
      Self.FProtocolMemoryOptions.FHighSpace = 255;
      Self.FProtocolMemoryOptions.FLowSpace = 249;
   }
   /// procedure TLccTrainCanNode.ClearAttachedController()
   ///  [line: 1292, column: 28, file: lcc_node_train]
   ,ClearAttachedController:function(Self) {
      Self.FAttachedController.NodeID$4 = NULL_NODE_ID.slice(0);
      Self.FAttachedController.AliasID$2 = 0;
      Self.FAttachedController.NodeID$4 = NULL_NODE_ID.slice(0);
      Self.FAttachedController.ReservationAliasID = 0;
      Self.FAttachedController.AttatchNotifyNodeID = NULL_NODE_ID.slice(0);
      Self.FAttachedController.AttachNotifyAliasID = 0;
   }
   /// function TLccTrainCanNode.ControllerAssigned() : Boolean
   ///  [line: 1302, column: 27, file: lcc_node_train]
   ,ControllerAssigned:function(Self) {
      return (Self.FAttachedController.NodeID$4[0]!=0) && (Self.FAttachedController.NodeID$4[1]!=0) || (Self.FAttachedController.AliasID$2!=0);
   }
   /// function TLccTrainCanNode.ControllerEquals(ATestNodeID: TNodeID; ATestAlias: Word) : Boolean
   ///  [line: 1307, column: 27, file: lcc_node_train]
   ,ControllerEquals:function(Self, ATestNodeID, ATestAlias) {
      return Self.FAttachedController.NodeID$4[0] == ATestNodeID[0] && Self.FAttachedController.NodeID$4[1] == ATestNodeID[1] && ATestAlias == Self.FAttachedController.AliasID$2;
   }
   /// constructor TLccTrainCanNode.Create(ASendMessageFunc: TOnMessageEvent; ANodeManager: TObject; CdiXML: String)
   ///  [line: 1065, column: 30, file: lcc_node_train]
   ,Create$201:function(Self, ASendMessageFunc, ANodeManager, CdiXML) {
      TLccCanNode.Create$201(Self,ASendMessageFunc,ANodeManager,CdiXML);
      Self.FListeners = TListenerList.Create$200($New(TListenerList));
      return Self
   }
   /// function TLccTrainCanNode.DccFunctionHandler(DccAddress: Word; LongAddress: Boolean; FunctionAddress: DWord; AllDccFunctionBitsEncoded: DWord) : TDCCPacket
   ///  [line: 1137, column: 27, file: lcc_node_train]
   ,DccFunctionHandler:function(Self, DccAddress$1, LongAddress, FunctionAddress, AllDccFunctionBitsEncoded) {
      var Result = {PacketBytes:[0,0,0,0,0],Flags:0};
      var FunctionMask = 0,
         FunctionExtendedCode = 0,
         AddressHi = 0,
         AddressLo = 0;
      Result.Flags = 0;
      AddressHi = (DccAddress$1>>>8)&255;
      if (LongAddress) {
         AddressHi = AddressHi|192;
      }
      AddressLo = DccAddress$1&255;
      if (FunctionAddress < 29) {
         if (FunctionAddress < 5) {
            FunctionMask = (AllDccFunctionBitsEncoded&15)>>>1;
            if (!(AllDccFunctionBitsEncoded&1)) {
               FunctionMask = FunctionMask&(~16);
            } else {
               FunctionMask = FunctionMask|16;
            }
            FunctionMask = FunctionMask|128;
         } else if (FunctionAddress < 9) {
            FunctionMask = (AllDccFunctionBitsEncoded>>>5)&15;
            FunctionMask = FunctionMask|176;
         } else if (FunctionAddress < 13) {
            FunctionMask = (AllDccFunctionBitsEncoded>>>9)&15;
            FunctionMask = FunctionMask|160;
         } else if (FunctionAddress < 21) {
            FunctionMask = AllDccFunctionBitsEncoded>>>13;
            FunctionExtendedCode = 222;
         }
      } else {
         FunctionMask = AllDccFunctionBitsEncoded>>>21;
         FunctionExtendedCode = 223;
      }
      if ((AddressHi&192) == 192) {
         if (FunctionAddress < 13) {
            TLccTrainCanNode.DccLoadPacket(Self,Result,AddressHi,AddressLo,FunctionMask,0,0,3);
         } else {
            TLccTrainCanNode.DccLoadPacket(Self,Result,AddressHi,AddressLo,FunctionExtendedCode,FunctionMask,0,4);
         }
      } else if (FunctionAddress < 13) {
         TLccTrainCanNode.DccLoadPacket(Self,Result,AddressLo,FunctionMask,0,0,0,2);
      } else {
         TLccTrainCanNode.DccLoadPacket(Self,Result,AddressLo,FunctionExtendedCode,FunctionMask,0,0,3);
      }
      return Result
   }
   /// procedure TLccTrainCanNode.DccLoadPacket(var NewMessage: TDCCPacket; Data1: Byte; Data2: Byte; Data3: Byte; Data4: Byte; Data5: Byte; ValidDataByes: Byte)
   ///  [line: 1281, column: 28, file: lcc_node_train]
   ,DccLoadPacket:function(Self, NewMessage, Data1, Data2, Data3, Data4, Data5, ValidDataByes) {
      NewMessage.PacketBytes[0] = Data1;
      NewMessage.PacketBytes[1] = Data2;
      NewMessage.PacketBytes[2] = Data3;
      NewMessage.PacketBytes[3] = Data4;
      NewMessage.PacketBytes[4] = Data5;
      NewMessage.Flags = ValidDataByes;
   }
   /// function TLccTrainCanNode.DccSpeedDirHandler(DccAddress: Word; LongAddress: Boolean; SpeedDir: THalfFloat; DccSpeedStep: TLccDccSpeedStep) : TDCCPacket
   ///  [line: 1201, column: 27, file: lcc_node_train]
   ,DccSpeedDirHandler:function(Self, DccAddress$1, LongAddress, SpeedDir, DccSpeedStep) {
      var Result = {PacketBytes:[0,0,0,0,0],Flags:0};
      var IsForward = false,
         AbsoluteSpeed = 0,
         LocalSpeedStep = 0,
         AddressHi = 0,
         AddressLo = 0;
      Result.Flags = 0;
      IsForward = (SpeedDir&32768) != 32768;
      AbsoluteSpeed = HalfToFloat(SpeedDir&(~32768));
      if (LongAddress) {
         DccAddress$1 = DccAddress$1|49152;
      }
      AddressHi = Hi(DccAddress$1);
      AddressLo = Lo(DccAddress$1);
      switch (DccSpeedStep) {
         case 0 :
         case 1 :
            AbsoluteSpeed = 0.14 * AbsoluteSpeed;
            LocalSpeedStep = Trunc(AbsoluteSpeed);
            LocalSpeedStep = _14_STEP_TABLE[LocalSpeedStep];
            if (IsForward) {
               LocalSpeedStep = LocalSpeedStep|96;
            } else {
               LocalSpeedStep = LocalSpeedStep|64;
            }
            if ((AddressHi&192) == 192) {
               TLccTrainCanNode.DccLoadPacket(Self,Result,AddressHi,AddressLo,LocalSpeedStep,0,0,3);
            } else {
               TLccTrainCanNode.DccLoadPacket(Self,Result,AddressLo,LocalSpeedStep,0,0,0,2);
            }
            break;
         case 2 :
            AbsoluteSpeed = 0.28 * AbsoluteSpeed;
            LocalSpeedStep = Trunc(AbsoluteSpeed);
            LocalSpeedStep = _28_STEP_TABLE[LocalSpeedStep];
            if (IsForward) {
               LocalSpeedStep = LocalSpeedStep|96;
            } else {
               LocalSpeedStep = LocalSpeedStep|64;
            }
            if ((AddressHi&192) == 192) {
               TLccTrainCanNode.DccLoadPacket(Self,Result,AddressHi,AddressLo,LocalSpeedStep,0,0,3);
            } else {
               TLccTrainCanNode.DccLoadPacket(Self,Result,AddressLo,LocalSpeedStep,0,0,0,2);
            }
            break;
         case 3 :
            AddressHi = AddressHi|192;
            AbsoluteSpeed = 1.27 * AbsoluteSpeed;
            LocalSpeedStep = Trunc(AbsoluteSpeed);
            if (LocalSpeedStep > 0) {
               ++LocalSpeedStep;
            }
            if (IsForward) {
               LocalSpeedStep = LocalSpeedStep|128;
            }
            TLccTrainCanNode.DccLoadPacket(Self,Result,AddressHi,AddressLo,63,LocalSpeedStep,0,4);
            break;
      }
      return Result
   }
   /// destructor TLccTrainCanNode.Destroy()
   ///  [line: 1271, column: 29, file: lcc_node_train]
   ,Destroy:function(Self) {
      TObject.Free(Self.FListeners);
      TLccCanNode.Destroy(Self);
   }
   /// procedure TLccTrainCanNode.DoSendMessageComPort(GridConnectString: String)
   ///  [line: 1131, column: 28, file: lcc_node_train]
   ,DoSendMessageComPort:function(Self, GridConnectString) {
      GridConnectString = { v : GridConnectString };
      if (Self.FOnSendMessageComPort) {
         Self.FOnSendMessageComPort(Self,GridConnectString);
      }
   }
   /// function TLccTrainCanNode.EncodeFunctionValuesDccStyle() : DWord
   ///  [line: 1107, column: 27, file: lcc_node_train]
   ,EncodeFunctionValuesDccStyle:function(Self) {
      var Result = 0;
      var i$7 = 0;
      Result = 0;
      for(i$7=28;i$7>=0;i$7--) {
         if (TLccTrainCanNode.GetFunctions(Self,i$7) > 0) {
            Result = Result|1;
         }
         if (i$7 > 0) {
            Result = Result<<1;
         }
      }
      return Result
   }
   /// function TLccTrainCanNode.EncodeToDccGridConnect(DccPacket: TDCCPacket) : String
   ///  [line: 1121, column: 27, file: lcc_node_train]
   ,EncodeToDccGridConnect:function(Self, DccPacket) {
      var Result = "";
      var i$7 = 0;
      Result = ":R" + IntToHex(DccPacket.Flags,8) + "N";
      var $temp170;
      for(i$7=0,$temp170=DccPacket.Flags;i$7<$temp170;i$7++) {
         Result += IntToHex2(DccPacket.PacketBytes[i$7]);
      }
      Result = Result + ";";
      return Result
   }
   /// function TLccTrainCanNode.GetCdiFile() : String
   ///  [line: 1312, column: 27, file: lcc_node_train]
   ,GetCdiFile:function(Self) {
      return "<?xml version=\"1.0\" encoding=\"utf-8\"?><?xml-stylesheet type=\"text\/xsl\" href=\"http:\/\/openlcb.org\/trunk\/prototypes\/xml\/xslt\/cdi.xsl\"?><cdi xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http:\/\/openlcb.org\/trunk\/specs\/schema\/cdi.xsd\"><identification><manufacturer>Mustangpeak<\/manufacturer><model>VTN1000<\/model><hardwareVersion>1.0.0.0<\/hardwareVersion><softwareVersion>1.0.0.0<\/softwareVersion><\/identification><segment origin=\"1\" space=\"253\"><name>User<\/name><description>User defined information<\/description><group><name>User Data<\/name><description>Add your own unique node info here<\/description><string size=\"63\"><name>User Name<\/name><\/string><string size=\"64\"><name>User Description<\/name><\/string><\/group><\/segment><\/cdi>";
   }
   /// function TLccTrainCanNode.GetFunctions(Index: Integer) : Word
   ///  [line: 1325, column: 27, file: lcc_node_train]
   ,GetFunctions:function(Self, Index$6) {
      var Result = 0;
      if (Index$6 >= 0 && Index$6 < 29) {
         Result = Self.FFunctions[Index$6];
      } else {
         Result = 65535;
      }
      return Result
   }
   /// function TLccTrainCanNode.IsReservedBy(SourceMessage: TLccMessage) : Boolean
   ///  [line: 1338, column: 27, file: lcc_node_train]
   ,IsReservedBy:function(Self, SourceMessage) {
      return EqualNode(SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,Self.FAttachedController.ReservationNodeID.slice(0),Self.FAttachedController.ReservationAliasID);
   }
   /// function TLccTrainCanNode.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 1350, column: 27, file: lcc_node_train]
   ,ProcessMessage$1:function(Self, SourceMessage) {
      var Result = false;
      Result = TLccCanNode.ProcessMessage$1(Self,SourceMessage);
      if (TLccMessage.GetHasDestination(SourceMessage)) {
         if (!(TLccNode.IsDestinationEqual$(Self,SourceMessage))) {
            return Result;
         }
      }
      switch (SourceMessage.FMTI) {
         case 1512 :
            switch (SourceMessage.FDataArray[0]) {
               case 0 :
                  Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionSetSpeedAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                  break;
               case 1 :
                  Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionSetFunctionAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                  break;
               case 2 :
                  Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionEmergencyStopAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                  break;
               case 16 :
                  Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionQuerySpeedReplyAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                  break;
               case 17 :
                  Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionQueryFunctionReplyAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                  break;
               case 32 :
                  switch (SourceMessage.FDataArray[1]) {
                     case 1 :
                        Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionAssignControllerReplyAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                        break;
                     case 2 :
                        Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionReleaseControllerAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                        break;
                     case 3 :
                        Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionQueryControllerAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                        break;
                  }
                  break;
               case 48 :
                  if (TLccTrainCanNode.IsReservedBy(Self,SourceMessage)) {
                     switch (SourceMessage.FDataArray[1]) {
                        case 1 :
                           Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionAttachListenerReplyAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                           break;
                        case 2 :
                           Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionDetachListenerReplyAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                           break;
                        case 3 :
                           Result = TLccActionHub.RegisterAction(Self.FLccActions,Self,SourceMessage,TLccAction.Create$204($New(TLccTractionQueryListenerReplyAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
                           break;
                     }
                  }
                  break;
               case 64 :
                  switch (SourceMessage.FDataArray[1]) {
                     case 1 :
                        TLccMessage.LoadTractionManageReply(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,true);
                        Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
                        break;
                     case 2 :
                        /* null */
break;
                  }
                  break;
            }
            break;
      }
      return Result
   }
   /// procedure TLccTrainCanNode.SetDccAddress(AValue: Word)
   ///  [line: 1406, column: 28, file: lcc_node_train]
   ,SetDccAddress:function(Self, AValue) {
      if (Self.FDccAddress == AValue) {
         return;
      }
      Self.FDccAddress = AValue;
   }
   /// procedure TLccTrainCanNode.SetDccLongAddress(AValue: Boolean)
   ///  [line: 1412, column: 28, file: lcc_node_train]
   ,SetDccLongAddress:function(Self, AValue) {
      if (Self.FDccLongAddress == AValue) {
         return;
      }
      Self.FDccLongAddress = AValue;
   }
   /// procedure TLccTrainCanNode.SetFunctions(Index: Integer; AValue: Word)
   ///  [line: 1426, column: 28, file: lcc_node_train]
   ,SetFunctions:function(Self, Index$6, AValue) {
      var DccPacket = {PacketBytes:[0,0,0,0,0],Flags:0},
         DccGridConnect = "";
      if (Index$6 >= 0 && Index$6 < 29) {
         Self.FFunctions[Index$6] = AValue;
         DccPacket = TLccTrainCanNode.DccFunctionHandler(Self,Self.FDccAddress,Self.FDccLongAddress,Index$6,TLccTrainCanNode.EncodeFunctionValuesDccStyle(Self));
         DccGridConnect = TLccTrainCanNode.EncodeToDccGridConnect(Self,Clone$TDCCPacket(DccPacket));
         TLccTrainCanNode.DoSendMessageComPort(Self,DccGridConnect);
      }
   }
   /// procedure TLccTrainCanNode.SetName(AValue: String)
   ///  [line: 1440, column: 28, file: lcc_node_train]
   ,SetName$6:function(Self, AValue) {
      if (Self.FName$6 == AValue) {
         return;
      }
      Self.FName$6 = AValue;
   }
   /// procedure TLccTrainCanNode.SetRoadNumber(AValue: String)
   ///  [line: 1446, column: 28, file: lcc_node_train]
   ,SetRoadNumber:function(Self, AValue) {
      if (Self.FRoadNumber == AValue) {
         return;
      }
      Self.FRoadNumber = AValue;
   }
   /// procedure TLccTrainCanNode.SetSpeed(AValue: THalfFloat)
   ///  [line: 1452, column: 28, file: lcc_node_train]
   ,SetSpeed:function(Self, AValue) {
      var DccPacket = {PacketBytes:[0,0,0,0,0],Flags:0},
         DccGridConnect = "";
      if (AValue == Self.FSpeed) {
         return;
      }
      Self.FSpeed = AValue;
      DccPacket = TLccTrainCanNode.DccSpeedDirHandler(Self,Self.FDccAddress,Self.FDccLongAddress,Self.FSpeed,Self.FSpeedStep);
      DccGridConnect = TLccTrainCanNode.EncodeToDccGridConnect(Self,Clone$TDCCPacket(DccPacket));
      TLccTrainCanNode.DoSendMessageComPort(Self,DccGridConnect);
   }
   /// procedure TLccTrainCanNode.SetSpeedStep(AValue: TLccDccSpeedStep)
   ///  [line: 1464, column: 28, file: lcc_node_train]
   ,SetSpeedStep:function(Self, AValue) {
      if (Self.FSpeedStep == AValue) {
         return;
      }
      Self.FSpeedStep = AValue;
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,BeforeLogin$:function($){return $.ClassType.BeforeLogin($)}
   ,Create$201$:function($){return $.ClassType.Create$201.apply($.ClassType, arguments)}
   ,GetAlias:TLccCanNode.GetAlias
   ,GetCdiFile$:function($){return $.ClassType.GetCdiFile($)}
   ,IsDestinationEqual:TLccCanNode.IsDestinationEqual
   ,Login:TLccCanNode.Login
   ,Logout:TLccCanNode.Logout
   ,On_800msTimer:TLccCanNode.On_800msTimer
   ,ProcessMessage$1$:function($){return $.ClassType.ProcessMessage$1.apply($.ClassType, arguments)}
   ,Creating:TLccCanNode.Creating
};
/// TLccTractionSetSpeedAction = class (TLccAction)
///  [line: 257, column: 4, file: lcc_node_train]
var TLccTractionSetSpeedAction = {
   $ClassName:"TLccTractionSetSpeedAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionSetSpeedAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 885, column: 37, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      if (TLccTrainCanNode.ControllerAssigned(OwnerTrain)) {
         if (TLccTrainCanNode.ControllerEquals(OwnerTrain,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias)) {
            TLccTrainCanNode.SetSpeed(OwnerTrain,TLccMessage.TractionExtractSetSpeed(SourceMessage));
         }
      }
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionSetFunctionAction = class (TLccAction)
///  [line: 263, column: 4, file: lcc_node_train]
var TLccTractionSetFunctionAction = {
   $ClassName:"TLccTractionSetFunctionAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionSetFunctionAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 862, column: 40, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null,
         FunctionAddress = 0;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      if (TLccTrainCanNode.ControllerAssigned(OwnerTrain)) {
         if (TLccTrainCanNode.ControllerEquals(OwnerTrain,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias)) {
            FunctionAddress = TLccMessage.TractionExtractFunctionAddress(SourceMessage);
            TLccTrainCanNode.SetFunctions(OwnerTrain,FunctionAddress,TLccMessage.TractionExtractFunctionValue(SourceMessage));
         }
      }
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionReleaseControllerAction = class (TLccAction)
///  [line: 230, column: 4, file: lcc_node_train]
var TLccTractionReleaseControllerAction = {
   $ClassName:"TLccTractionReleaseControllerAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionReleaseControllerAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 828, column: 46, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      if (TLccTrainCanNode.ControllerEquals(OwnerTrain,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias)) {
         TLccTrainCanNode.ClearAttachedController(OwnerTrain);
      }
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionQuerySpeedReplyAction = class (TLccAction)
///  [line: 250, column: 4, file: lcc_node_train]
var TLccTractionQuerySpeedReplyAction = {
   $ClassName:"TLccTractionQuerySpeedReplyAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionQuerySpeedReplyAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 920, column: 44, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      TLccMessage.LoadTractionQuerySpeedReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,OwnerTrain.FSpeed,0,65535,65535);
      Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionQueryListenerReplyAction = class (TLccAction)
///  [line: 300, column: 4, file: lcc_node_train]
var TLccTractionQueryListenerReplyAction = {
   $ClassName:"TLccTractionQueryListenerReplyAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionQueryListenerReplyAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 634, column: 47, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null,
         Listener = null,
         RequestedIndex = 0;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      if (SourceMessage.FDataCount == 2) {
         TLccMessage.LoadTractionListenerQueryReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,TListenerList.GetCount$7(OwnerTrain.FListeners),0,NULL_NODE_ID.slice(0),0);
      } else {
         RequestedIndex = SourceMessage.FDataArray[2];
         if (RequestedIndex < TListenerList.GetCount$7(OwnerTrain.FListeners)) {
            Listener = TListenerList.FindByIndex(OwnerTrain.FListeners,RequestedIndex);
            TLccMessage.LoadTractionListenerQueryReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,TListenerList.GetCount$7(OwnerTrain.FListeners),RequestedIndex,Listener.FNodeID.slice(0),TListenerNode.EncodeFlags(Listener));
         } else {
            TLccMessage.LoadTractionListenerQueryReply_NoInfo(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID);
         }
      }
      Self.FSendMessage(Self,Self.FWorkerMessage$3);
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionQueryFunctionReplyAction = class (TLccAction)
///  [line: 243, column: 4, file: lcc_node_train]
var TLccTractionQueryFunctionReplyAction = {
   $ClassName:"TLccTractionQueryFunctionReplyAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionQueryFunctionReplyAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 903, column: 47, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var FunctionAddress = 0;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      FunctionAddress = TLccMessage.TractionExtractFunctionAddress(SourceMessage);
      TLccMessage.LoadTractionQueryFunctionReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,FunctionAddress,TLccTrainCanNode.GetFunctions($As(Self.FOwner$5,TLccTrainCanNode),FunctionAddress));
      Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionQueryControllerAction = class (TLccAction)
///  [line: 237, column: 4, file: lcc_node_train]
var TLccTractionQueryControllerAction = {
   $ClassName:"TLccTractionQueryControllerAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionQueryControllerAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 807, column: 44, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var AttachedController$1 = {NodeID$4:[0,0],AliasID$2:0,ReservationNodeID:[0,0],ReservationAliasID:0,AttatchNotifyNodeID:[0,0],AttachNotifyAliasID:0};
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      Copy$TAttachedController($As(Self.FOwner$5,TLccTrainCanNode).FAttachedController,AttachedController$1);
      if ((AttachedController$1.NodeID$4[0]==0) && (AttachedController$1.NodeID$4[1]==0) && (AttachedController$1.AliasID$2==0)) {
         TLccMessage.LoadTractionControllerQueryReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,NULL_NODE_ID.slice(0),0);
      } else {
         TLccMessage.LoadTractionControllerQueryReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,AttachedController$1.NodeID$4.slice(0),AttachedController$1.AliasID$2);
      }
      Self.FSendMessage(Self,Self.FWorkerMessage$3);
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionEmergencyStopAction = class (TLccAction)
///  [line: 269, column: 4, file: lcc_node_train]
var TLccTractionEmergencyStopAction = {
   $ClassName:"TLccTractionEmergencyStopAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionEmergencyStopAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 846, column: 42, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      TLccTrainCanNode.SetSpeed(OwnerTrain,0);
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionDetachListenerReplyAction = class (TLccAction)
///  [line: 294, column: 4, file: lcc_node_train]
var TLccTractionDetachListenerReplyAction = {
   $ClassName:"TLccTractionDetachListenerReplyAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionDetachListenerReplyAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 663, column: 48, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null,
         ReplyCode = 0,
         ListenerNodeID$2 = {v:[0,0]};
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      ListenerNodeID$2.v = NULL_NODE_ID.slice(0);
      TLccMessage.ExtractDataBytesAsNodeID(SourceMessage,3,ListenerNodeID$2);
      if (TListenerList.Delete$8(OwnerTrain.FListeners,ListenerNodeID$2.v.slice(0))) {
         ReplyCode = 0;
      } else {
         ReplyCode = 4144;
      }
      TLccMessage.LoadTractionListenerDetachReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,ListenerNodeID$2.v.slice(0),ReplyCode);
      Self.FSendMessage(Self,Self.FWorkerMessage$3);
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray:TLccAction.LoadStateArray
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionAttachListenerReplyAction = class (TLccAction)
///  [line: 275, column: 4, file: lcc_node_train]
var TLccTractionAttachListenerReplyAction = {
   $ClassName:"TLccTractionAttachListenerReplyAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
      $.FAttachFlags = 0;
      $.FListenerNodeAliasID = 0;
      $.FListenerNodeID = [0,0];
   }
   /// procedure TLccTractionAttachListenerReplyAction.LoadStateArray()
   ///  [line: 796, column: 49, file: lcc_node_train]
   ,LoadStateArray:function(Self) {
      TLccAction.SetStateArrayLength(Self,4);
      Self.FStates[0]=$Event2(Self,TLccAction._0ReceiveFirstMessage$);
      Self.FStates[1]=$Event2(Self,TLccTractionAttachListenerReplyAction._1WaitForAMD);
      Self.FStates[2]=$Event2(Self,TLccTractionAttachListenerReplyAction._2AssignListener);
      Self.FStates[3]=$Event2(Self,TLccAction._NFinalStateCleanup);
   }
   /// function TLccTractionAttachListenerReplyAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 690, column: 48, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null,
         NewListenerNode = null,
         ReplyCode = 0,
         TempNodeID = {v:[0,0]};
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      TempNodeID.v = NULL_NODE_ID.slice(0);
      $Assert(SourceMessage !== null,"SourceMessage is NIL, unexpected, single state statemachine","");
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      TLccMessage.ExtractDataBytesAsNodeID(SourceMessage,3,TempNodeID);
      Self.FListenerNodeID = TempNodeID.v.slice(0);
      Self.FAttachFlags = SourceMessage.FDataArray[2];
      ReplyCode = 0;
      if (EqualNodeID(Self.FNodeID$2.slice(0),Self.FListenerNodeID.slice(0),false)) {
         ReplyCode = 4224;
      }
      if (!ReplyCode) {
         NewListenerNode = TListenerList.FindNode(OwnerTrain.FListeners,Self.FListenerNodeID.slice(0));
         if (NewListenerNode) {
            TListenerNode.DecodeFlags(NewListenerNode,Self.FAttachFlags);
            TLccMessage.LoadTractionListenerAttachReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,Self.FListenerNodeID.slice(0),ReplyCode);
            Self.FSendMessage(Self,Self.FWorkerMessage$3);
            TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
         } else {
            TLccMessage.LoadAME(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FListenerNodeID.slice(0));
            Self.FSendMessage(Self,Self.FWorkerMessage$3);
            TLccAction.SetTimoutCountThreshold(Self,1000,true);
            TLccAction.AdvanceToNextState(Self,1);
         }
      } else {
         TLccMessage.LoadTractionListenerAttachReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,Self.FListenerNodeID.slice(0),ReplyCode);
         Self.FSendMessage(Self,Self.FWorkerMessage$3);
         TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      }
      return Result
   }
   /// function TLccTractionAttachListenerReplyAction._1WaitForAMD(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 747, column: 48, file: lcc_node_train]
   ,_1WaitForAMD:function(Self, Sender, SourceMessage) {
      var Result = false;
      var ReplyCode = 0,
         TempNodeID = {v:[0,0]};
      Result = false;
      switch (SourceMessage.FCAN.FMTI$1) {
         case 7344128 :
            TLccMessage.ExtractDataBytesAsNodeID(SourceMessage,0,TempNodeID);
            if (EqualNodeID(TempNodeID.v.slice(0),Self.FListenerNodeID.slice(0),false)) {
               Self.FListenerNodeAliasID = SourceMessage.FCAN.FSourceAlias;
               TLccAction.AdvanceToNextState(Self,1);
            }
            break;
      }
      if (TLccAction.TimeoutExpired(Self)) {
         ReplyCode = 4144;
         TLccMessage.LoadTractionListenerAttachReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,Self.FListenerNodeID.slice(0),ReplyCode);
         Self.FSendMessage(Self,Self.FWorkerMessage$3);
         TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      }
      return Result
   }
   /// function TLccTractionAttachListenerReplyAction._2AssignListener(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 775, column: 48, file: lcc_node_train]
   ,_2AssignListener:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null,
         NewListenerNode = null,
         ReplyCode = 0;
      Result = false;
      SourceMessage = SourceMessage;
      OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
      NewListenerNode = TListenerList.Add$20(OwnerTrain.FListeners,Self.FListenerNodeID.slice(0),Self.FListenerNodeAliasID,Self.FAttachFlags);
      if (NewListenerNode) {
         ReplyCode = 0;
      } else {
         ReplyCode = 8224;
      }
      TLccMessage.LoadTractionListenerAttachReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,Self.FListenerNodeID.slice(0),ReplyCode);
      TLccAction.AdvanceToNextState(Self,1);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray$:function($){return $.ClassType.LoadStateArray($)}
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionAssignControllerReplyAction = class (TLccAction)
///  [line: 211, column: 4, file: lcc_node_train]
var TLccTractionAssignControllerReplyAction = {
   $ClassName:"TLccTractionAssignControllerReplyAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
      $.FAssignResult$1 = 0;
      $.FRequestingControllerAliasID$1 = 0;
      $.FRequestingControllerNodeID$1 = [0,0];
   }
   /// procedure TLccTractionAssignControllerReplyAction.LoadStateArray()
   ///  [line: 937, column: 51, file: lcc_node_train]
   ,LoadStateArray:function(Self) {
      TLccAction.SetStateArrayLength(Self,4);
      Self.FStates[0]=$Event2(Self,TLccAction._0ReceiveFirstMessage$);
      Self.FStates[1]=$Event2(Self,TLccTractionAssignControllerReplyAction._1WaitForChangeNotify);
      Self.FStates[2]=$Event2(Self,TLccTractionAssignControllerReplyAction._2SendAssignReply);
      Self.FStates[3]=$Event2(Self,TLccAction._NFinalStateCleanup);
   }
   /// function TLccTractionAssignControllerReplyAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 946, column: 50, file: lcc_node_train]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var OwnerTrain = null;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      if (SourceMessage) {
         switch (SourceMessage.FMTI) {
            case 1512 :
               OwnerTrain = $As(Self.FOwner$5,TLccTrainCanNode);
               switch (SourceMessage.FDataArray[0]) {
                  case 32 :
                     /* null */
switch (SourceMessage.FDataArray[1]) {
                        case 1 :
                           Self.FRequestingControllerNodeID$1 = SourceMessage.FSourceID.slice(0);
                           Self.FRequestingControllerAliasID$1 = SourceMessage.FCAN.FSourceAlias;
                           if (TLccTrainCanNode.ControllerAssigned(OwnerTrain) && (!(TLccTrainCanNode.ControllerEquals(OwnerTrain,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias)))) {
                              TLccMessage.LoadTractionControllerChangingNotify(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,OwnerTrain.FAttachedController.NodeID$4.slice(0),OwnerTrain.FAttachedController.AliasID$2,Self.FRequestingControllerNodeID$1.slice(0),Self.FRequestingControllerAliasID$1);
                              Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
                              TLccAction.AdvanceToNextState(Self,1);
                           } else {
                              Self.FAssignResult$1 = 0;
                              TLccAction.AdvanceToNextState(Self,2);
                              TLccTractionAssignControllerReplyAction._2SendAssignReply(Self,Sender,SourceMessage);
                           }
                           break;
                     }
                     break;
               }
               break;
         }
      } else {
         TLccTractionAssignControllerReplyAction._2SendAssignReply(Self,null,null);
      }
      TLccAction.SetTimoutCountThreshold(Self,2500,true);
      return Result
   }
   /// function TLccTractionAssignControllerReplyAction._1WaitForChangeNotify(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 995, column: 50, file: lcc_node_train]
   ,_1WaitForChangeNotify:function(Self, Sender, SourceMessage) {
      var Result = false;
      Result = false;
      if (SourceMessage) {
         switch (SourceMessage.FMTI) {
            case 488 :
               switch (SourceMessage.FDataArray[0]) {
                  case 32 :
                     switch (SourceMessage.FDataArray[1]) {
                        case 4 :
                           Self.FAssignResult$1 = 0;
                           switch (SourceMessage.FDataArray[2]) {
                              case 1 :
                                 Self.FAssignResult$1 = 1;
                                 break;
                           }
                           TLccAction.AdvanceToNextState(Self,1);
                           TLccTractionAssignControllerReplyAction._2SendAssignReply(Self,Sender,SourceMessage);
                           break;
                     }
                     break;
                  case 64 :
                     switch (SourceMessage.FDataArray[1]) {
                        case 1 :
                           TLccMessage.LoadTractionManageReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,true);
                           Self.FSendMessage(Self,Self.FWorkerMessage$3);
                           break;
                        case 2 :
                           /* null */
break;
                     }
                     break;
               }
               break;
         }
      }
      if (TLccAction.TimeoutExpired(Self)) {
         Self.FAssignResult$1 = 0;
         TLccAction.AdvanceToNextState(Self,1);
         TLccTractionAssignControllerReplyAction._2SendAssignReply(Self,Sender,Self.FWorkerMessage$3);
      }
      return Result
   }
   /// function TLccTractionAssignControllerReplyAction._2SendAssignReply(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 1046, column: 50, file: lcc_node_train]
   ,_2SendAssignReply:function(Self, Sender, SourceMessage) {
      var Result = false;
      Result = false;
      SourceMessage = SourceMessage;
      if (!Self.FAssignResult$1) {
         TLccTrainCanNode.ClearAttachedController($As(Self.FOwner$5,TLccTrainCanNode));
         $As(Self.FOwner$5,TLccTrainCanNode).FAttachedController.NodeID$4 = Self.FRequestingControllerNodeID$1.slice(0);
         $As(Self.FOwner$5,TLccTrainCanNode).FAttachedController.AliasID$2 = Self.FRequestingControllerAliasID$1;
      }
      TLccMessage.LoadTractionControllerAssignReply(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FRequestingControllerNodeID$1.slice(0),Self.FRequestingControllerAliasID$1,Self.FAssignResult$1);
      Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
      TLccAction.AdvanceToNextState(Self,1);
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray$:function($){return $.ClassType.LoadStateArray($)}
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TDCCPacket = record
///  [line: 167, column: 3, file: lcc_node_train]
function Copy$TDCCPacket(s,d) {
   d.PacketBytes=s.PacketBytes.slice(0);
   d.Flags=s.Flags;
   return d;
}
function Clone$TDCCPacket($) {
   return {
      PacketBytes:$.PacketBytes.slice(0),
      Flags:$.Flags
   }
}
/// TAttachedController = record
///  [line: 309, column: 3, file: lcc_node_train]
function Copy$TAttachedController(s,d) {
   d.NodeID$4=s.NodeID$4.slice(0);
   d.AliasID$2=s.AliasID$2;
   d.ReservationNodeID=s.ReservationNodeID.slice(0);
   d.ReservationAliasID=s.ReservationAliasID;
   d.AttatchNotifyNodeID=s.AttatchNotifyNodeID.slice(0);
   d.AttachNotifyAliasID=s.AttachNotifyAliasID;
   return d;
}
function Clone$TAttachedController($) {
   return {
      NodeID$4:$.NodeID$4.slice(0),
      AliasID$2:$.AliasID$2,
      ReservationNodeID:$.ReservationNodeID.slice(0),
      ReservationAliasID:$.ReservationAliasID,
      AttatchNotifyNodeID:$.AttatchNotifyNodeID.slice(0),
      AttachNotifyAliasID:$.AttachNotifyAliasID
   }
}
var _28_STEP_TABLE = [0,2,18,3,19,4,20,5,21,6,22,7,23,8,24,9,25,10,26,11,27,12,28,13,29,14,30,15,15],
    _14_STEP_TABLE = [0,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
/// TLccTrainController = class (TLccCanNode)
///  [line: 220, column: 3, file: lcc_node_controller]
var TLccTrainController = {
   $ClassName:"TLccTrainController",$Parent:TLccCanNode
   ,$Init:function ($) {
      TLccCanNode.$Init($);
      $.FAssignedTrain = {NodeID$6:[0,0],AliasID$3:0,RequestedSearchData$1:0,RepliedSearchData:0,SearchString:"",Listeners$1:[]};
      $.FDirection$3 = 0;
      $.FFunctionArray = function () {
         for (var r=[],i=0; i<29; i++) r.push(0);
         return r
      }();
      $.FOnControllerRequestTakeover = null;
      $.FOnQueryFunctionReply = null;
      $.FOnSearchResult = null;
      $.FOnTrainAssigned = null;
      $.FOnTrainReleased = null;
      $.FSpeed$1 = 0;
   }
   /// procedure TLccTrainController.AssignTrainByDccAddress(DccAddress: Word; IsLongAddress: Boolean; SpeedSteps: TLccDccSpeedStep)
   ///  [line: 858, column: 31, file: lcc_node_controller]
   ,AssignTrainByDccAddress:function(Self, DccAddress$1, IsLongAddress, SpeedSteps) {
      TLccTrainController.AssignTrainByDccTrain(Self,DccAddress$1.toString(),IsLongAddress,SpeedSteps);
   }
   /// procedure TLccTrainController.AssignTrainByDccTrain(SearchString: String; IsLongAddress: Boolean; SpeedSteps: TLccDccSpeedStep)
   ///  [line: 864, column: 31, file: lcc_node_controller]
   ,AssignTrainByDccTrain:function(Self, SearchString$1, IsLongAddress, SpeedSteps) {
      var TrackProtocolFlags = 0;
      TrackProtocolFlags = 136;
      if (IsLongAddress) {
         TrackProtocolFlags = TrackProtocolFlags|4;
      } else {
         TrackProtocolFlags = TrackProtocolFlags|0;
      }
      switch (SpeedSteps) {
         case 0 :
            TrackProtocolFlags = TrackProtocolFlags|0;
            break;
         case 1 :
            TrackProtocolFlags = TrackProtocolFlags|1;
            break;
         case 2 :
            TrackProtocolFlags = TrackProtocolFlags|2;
            break;
         case 3 :
            TrackProtocolFlags = TrackProtocolFlags|3;
            break;
      }
      TLccTrainController.AssignTrainByOpenLCB(Self,SearchString$1,TrackProtocolFlags);
   }
   /// procedure TLccTrainController.AssignTrainByOpenLCB(SearchString: String; TrackProtocolFlags: Word)
   ///  [line: 708, column: 31, file: lcc_node_controller]
   ,AssignTrainByOpenLCB:function(Self, SearchString$1, TrackProtocolFlags) {
      var LocalSearchData = { v : 0 },
         LccAssignTrainAction = null;
      TLccTrainController.ClearAssignedTrain(Self);
      Self.FAssignedTrain.RepliedSearchData = 0;
      Self.FAssignedTrain.RequestedSearchData$1 = 0;
      LocalSearchData.v = 0;
      TLccMessage.TractionSearchEncodeSearchString(Self.FWorkerMessage$2.ClassType,SearchString$1,TrackProtocolFlags,LocalSearchData);
      Self.FAssignedTrain.RequestedSearchData$1 = LocalSearchData.v;
      LccAssignTrainAction = TLccAction.Create$204($New(TLccTractionAssignTrainAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID);
      LccAssignTrainAction.FRequestedSearchData = LocalSearchData.v;
      TLccActionHub.RegisterAction(Self.FLccActions,Self,null,LccAssignTrainAction);
   }
   /// procedure TLccTrainController.BeforeLogin()
   ///  [line: 887, column: 31, file: lcc_node_controller]
   ,BeforeLogin:function(Self) {
      Self.FProtocolSupportedProtocols.FConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FDatagram = true;
      Self.FProtocolSupportedProtocols.FEventExchange = true;
      Self.FProtocolSupportedProtocols.FSimpleNodeInfo = true;
      Self.FProtocolSupportedProtocols.FAbbreviatedConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FTractionControl = true;
      Self.FProtocolSupportedProtocols.FTractionSimpleTrainNodeInfo = true;
      Self.FProtocolSupportedProtocols.FTractionFunctionDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FTractionFunctionConfiguration = true;
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,255,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,254,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,253,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,252,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,251,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,250,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,249,true,false,true,0,4294967295);
      Self.FProtocolMemoryOptions.FWriteUnderMask = true;
      Self.FProtocolMemoryOptions.FUnAlignedReads = true;
      Self.FProtocolMemoryOptions.FUnAlignedWrites = true;
      Self.FProtocolMemoryOptions.FSupportACDIMfgRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserWrite = true;
      Self.FProtocolMemoryOptions.FWriteLenOneByte = true;
      Self.FProtocolMemoryOptions.FWriteLenTwoBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenSixyFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteArbitraryBytes = true;
      Self.FProtocolMemoryOptions.FWriteStream = false;
      Self.FProtocolMemoryOptions.FHighSpace = 255;
      Self.FProtocolMemoryOptions.FLowSpace = 249;
   }
   /// procedure TLccTrainController.ClearAssignedTrain()
   ///  [line: 959, column: 31, file: lcc_node_controller]
   ,ClearAssignedTrain:function(Self) {
      Self.FAssignedTrain.SearchString = "";
      Self.FAssignedTrain.Listeners$1 = [];
      Self.FAssignedTrain.NodeID$6 = NULL_NODE_ID.slice(0);
      Self.FAssignedTrain.AliasID$3 = 0;
      Self.FAssignedTrain.RequestedSearchData$1 = 0;
      Self.FAssignedTrain.RepliedSearchData = 0;
      Self.FAssignedTrain.SearchString = "";
      Self.FAssignedTrain.Listeners$1 = [];
   }
   /// procedure TLccTrainController.DoControllerTakeOver(var Allow: Boolean)
   ///  [line: 976, column: 31, file: lcc_node_controller]
   ,DoControllerTakeOver:function(Self, Allow) {
      if (Self.FOnControllerRequestTakeover) {
         Self.FOnControllerRequestTakeover(Self,Allow);
      }
   }
   /// procedure TLccTrainController.DoQueryFunctionReply(Address: DWord; Value: Word)
   ///  [line: 935, column: 31, file: lcc_node_controller]
   ,DoQueryFunctionReply:function(Self, Address$1, Value$5) {
      if (Self.FOnQueryFunctionReply) {
         Self.FOnQueryFunctionReply(Self,Address$1,Value$5);
      }
   }
   /// procedure TLccTrainController.DoTrainReleased()
   ///  [line: 929, column: 31, file: lcc_node_controller]
   ,DoTrainReleased:function(Self) {
      if (Self.FOnTrainReleased) {
         Self.FOnTrainReleased(Self);
      }
   }
   /// function TLccTrainController.GetCdiFile() : String
   ///  [line: 990, column: 30, file: lcc_node_controller]
   ,GetCdiFile:function(Self) {
      return "<?xml version=\"1.0\" encoding=\"utf-8\"?><?xml-stylesheet type=\"text\/xsl\" href=\"http:\/\/openlcb.org\/trunk\/prototypes\/xml\/xslt\/cdi.xsl\"?><cdi xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http:\/\/openlcb.org\/trunk\/specs\/schema\/cdi.xsd\"><identification><manufacturer>Mustangpeak<\/manufacturer><model>TCN1000<\/model><hardwareVersion>1.0.0.0<\/hardwareVersion><softwareVersion>1.0.0.0<\/softwareVersion><\/identification><segment origin=\"1\" space=\"253\"><name>User<\/name><description>User defined information<\/description><group><name>User Data<\/name><description>Add your own unique node info here<\/description><string size=\"63\"><name>User Name<\/name><\/string><string size=\"64\"><name>User Description<\/name><\/string><\/group><\/segment><\/cdi>";
   }
   /// function TLccTrainController.GetFunctions(Index: Integer) : Word
   ///  [line: 995, column: 30, file: lcc_node_controller]
   ,GetFunctions$1:function(Self, Index$6) {
      var Result = 0;
      Result = 0;
      if (Index$6 >= 0 && Index$6 <= 28) {
         Result = Self.FFunctionArray[Index$6];
      }
      return Result
   }
   /// function TLccTrainController.IsTrainAssigned() : Boolean
   ///  [line: 1002, column: 30, file: lcc_node_controller]
   ,IsTrainAssigned:function(Self) {
      return (Self.FAssignedTrain.NodeID$6[0]!=0) || (Self.FAssignedTrain.NodeID$6[1]!=0) || (Self.FAssignedTrain.AliasID$3!=0);
   }
   /// function TLccTrainController.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 785, column: 30, file: lcc_node_controller]
   ,ProcessMessage$1:function(Self, SourceMessage) {
      var Result = false;
      var AllowTakeOver = { v : false };
      Result = TLccCanNode.ProcessMessage$1(Self,SourceMessage);
      if (TLccMessage.GetHasDestination(SourceMessage)) {
         if (!(TLccNode.IsDestinationEqual$(Self,SourceMessage))) {
            return Result;
         }
      }
      if (EqualNode(SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3)) {
         switch (SourceMessage.FMTI) {
            case 1512 :
               switch (SourceMessage.FDataArray[0]) {
                  case 32 :
                     switch (SourceMessage.FDataArray[1]) {
                        case 4 :
                           AllowTakeOver.v = true;
                           TLccTrainController.DoControllerTakeOver(Self,AllowTakeOver);
                           if (AllowTakeOver.v) {
                              TLccTrainController.ClearAssignedTrain(Self);
                              TLccMessage.LoadTractionControllerChangedReply(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,true);
                              Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
                              TLccTrainController.DoTrainReleased(Self);
                           } else {
                              TLccMessage.LoadTractionControllerChangedReply(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,false);
                              Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
                           }
                           break;
                     }
                     break;
               }
               break;
         }
      }
      return Result
   }
   /// procedure TLccTrainController.QueryFunction(Address: Word)
   ///  [line: 832, column: 31, file: lcc_node_controller]
   ,QueryFunction:function(Self, Address$1) {
      var LccQueryFunctionAction = null;
      if (TLccTrainController.IsTrainAssigned(Self)) {
         LccQueryFunctionAction = TLccAction.Create$204($New(TLccTractionQueryFunctionAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID);
         LccQueryFunctionAction.FAddress = Address$1;
         TLccActionHub.RegisterAction$1(Self.FLccActions,Self,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,LccQueryFunctionAction);
      }
   }
   /// procedure TLccTrainController.ReleaseTrain()
   ///  [line: 740, column: 31, file: lcc_node_controller]
   ,ReleaseTrain:function(Self) {
      if (TLccTrainController.IsTrainAssigned(Self)) {
         TLccActionHub.RegisterAction$1(Self.FLccActions,Self,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,TLccAction.Create$204($New(TLccTractionReleaseTrainAction),Self,Self.FNodeID$1.slice(0),Self.FAliasID));
      }
   }
   /// procedure TLccTrainController.SetDirection(AValue: TLccTrainDirection)
   ///  [line: 746, column: 31, file: lcc_node_controller]
   ,SetDirection$3:function(Self, AValue) {
      Self.FDirection$3 = AValue;
      if (TLccTrainController.IsTrainAssigned(Self)) {
         if (!Self.FDirection$3) {
            TLccMessage.LoadTractionSetSpeed(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,Self.FSpeed$1);
         } else {
            TLccMessage.LoadTractionSetSpeed(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,-Self.FSpeed$1);
         }
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      }
   }
   /// procedure TLccTrainController.SetFunctions(Index: Integer; AValue: Word)
   ///  [line: 759, column: 31, file: lcc_node_controller]
   ,SetFunctions$1:function(Self, Index$6, AValue) {
      if (Index$6 >= 0 && Index$6 <= 28) {
         Self.FFunctionArray[Index$6] = AValue;
         if (TLccTrainController.IsTrainAssigned(Self)) {
            TLccMessage.LoadTractionSetFunction(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,Index$6,AValue);
            Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
         }
      }
   }
   /// procedure TLccTrainController.SetSpeed(AValue: Single)
   ///  [line: 772, column: 31, file: lcc_node_controller]
   ,SetSpeed$1:function(Self, AValue) {
      Self.FSpeed$1 = Math.abs(AValue);
      if (TLccTrainController.IsTrainAssigned(Self)) {
         if (!Self.FDirection$3) {
            TLccMessage.LoadTractionSetSpeed(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,AValue);
         } else {
            TLccMessage.LoadTractionSetSpeed(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,Self.FAssignedTrain.NodeID$6.slice(0),Self.FAssignedTrain.AliasID$3,-AValue);
         }
         Self.FSendMessageFunc$1(Self,Self.FWorkerMessage$2);
      }
   }
   ,Destroy:TLccCanNode.Destroy
   ,BeforeLogin$:function($){return $.ClassType.BeforeLogin($)}
   ,Create$201:TLccCanNode.Create$201
   ,GetAlias:TLccCanNode.GetAlias
   ,GetCdiFile$:function($){return $.ClassType.GetCdiFile($)}
   ,IsDestinationEqual:TLccCanNode.IsDestinationEqual
   ,Login:TLccCanNode.Login
   ,Logout:TLccCanNode.Logout
   ,On_800msTimer:TLccCanNode.On_800msTimer
   ,ProcessMessage$1$:function($){return $.ClassType.ProcessMessage$1.apply($.ClassType, arguments)}
   ,Creating:TLccCanNode.Creating
};
/// TLccTractionReleaseTrainAction = class (TLccAction)
///  [line: 129, column: 3, file: lcc_node_controller]
var TLccTractionReleaseTrainAction = {
   $ClassName:"TLccTractionReleaseTrainAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
   }
   /// function TLccTractionReleaseTrainAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 302, column: 41, file: lcc_node_controller]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      var ControllerNode$1 = null;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      ControllerNode$1 = $As(Self.FOwner$5,TLccTrainController);
      if (ControllerNode$1) {
         if (TLccTrainController.IsTrainAssigned(ControllerNode$1)) {
            TLccMessage.LoadTractionControllerRelease(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,ControllerNode$1.FAssignedTrain.NodeID$6.slice(0),ControllerNode$1.FAssignedTrain.AliasID$3,Self.FNodeID$2.slice(0),Self.FAliasID$1);
            Self.FSendMessage(ControllerNode$1,Self.FWorkerMessage$3);
            TLccTrainController.ClearAssignedTrain(ControllerNode$1);
         }
         TLccTrainController.DoTrainReleased(ControllerNode$1);
      }
      TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      return Result
   }
   /// procedure TLccTractionReleaseTrainAction.LoadStateArray()
   ///  [line: 323, column: 42, file: lcc_node_controller]
   ,LoadStateArray:function(Self) {
      TLccAction.LoadStateArray(Self);
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray$:function($){return $.ClassType.LoadStateArray($)}
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionQueryFunctionAction = class (TLccAction)
///  [line: 152, column: 3, file: lcc_node_controller]
var TLccTractionQueryFunctionAction = {
   $ClassName:"TLccTractionQueryFunctionAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
      $.FAddress = 0;
   }
   /// procedure TLccTractionQueryFunctionAction.LoadStateArray()
   ///  [line: 378, column: 43, file: lcc_node_controller]
   ,LoadStateArray:function(Self) {
      TLccAction.SetStateArrayLength(Self,3);
      Self.FStates[0]=$Event2(Self,TLccAction._0ReceiveFirstMessage$);
      Self.FStates[1]=$Event2(Self,TLccTractionQueryFunctionAction._1ActionWaitForQueryFunctionResults);
      Self.FStates[2]=$Event2(Self,TLccAction._NFinalStateCleanup);
   }
   /// function TLccTractionQueryFunctionAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 330, column: 42, file: lcc_node_controller]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      TLccMessage.LoadTractionQueryFunction(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FTargetNodeID.slice(0),Self.FTargetAliasID,Self.FAddress);
      Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
      TLccAction.AdvanceToNextState(Self,1);
      return Result
   }
   /// function TLccTractionQueryFunctionAction._1ActionWaitForQueryFunctionResults(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 339, column: 42, file: lcc_node_controller]
   ,_1ActionWaitForQueryFunctionResults:function(Self, Sender, SourceMessage) {
      var Result = false;
      var ControllerNode$1 = null;
      Result = false;
      if (SourceMessage) {
         ControllerNode$1 = $As(Self.FOwner$5,TLccTrainController);
         if (ControllerNode$1) {
            if (EqualNode(SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,Self.FTargetNodeID.slice(0),Self.FTargetAliasID)) {
               switch (SourceMessage.FMTI) {
                  case 488 :
                     switch (SourceMessage.FDataArray[0]) {
                        case 17 :
                           if (Self.FAddress == TLccMessage.TractionExtractFunctionAddress(SourceMessage)) {
                              Self.FIgnoreTimer = true;
                              TLccTrainController.DoQueryFunctionReply(ControllerNode$1,Self.FAddress,TLccMessage.TractionExtractFunctionValue(SourceMessage));
                              TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
                           }
                           break;
                     }
                     break;
               }
            }
         }
      }
      if (TLccAction.TimeoutExpired(Self)) {
         TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
      }
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray$:function($){return $.ClassType.LoadStateArray($)}
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccTractionAssignTrainAction = class (TLccAction)
///  [line: 105, column: 3, file: lcc_node_controller]
var TLccTractionAssignTrainAction = {
   $ClassName:"TLccTractionAssignTrainAction",$Parent:TLccAction
   ,$Init:function ($) {
      TLccAction.$Init($);
      $.FRepliedSearchCriteria = [];
      $.FRepliedSearchCriterialCount = $.FSelectedSearchResultIndex = 0;
      $.FRequestedSearchData = 0;
   }
   /// procedure TLccTractionAssignTrainAction.DoAssigned(ResultCode: TControllerTrainAssignResult)
   ///  [line: 653, column: 41, file: lcc_node_controller]
   ,DoAssigned:function(Self, ResultCode) {
      var ControllerNode$1 = null;
      ControllerNode$1 = $As(Self.FOwner$5,TLccTrainController);
      if (ControllerNode$1) {
         if (ControllerNode$1.FOnTrainAssigned) {
            ControllerNode$1.FOnTrainAssigned(ControllerNode$1,ResultCode);
         }
      }
   }
   /// procedure TLccTractionAssignTrainAction.DoSearchResults()
   ///  [line: 667, column: 41, file: lcc_node_controller]
   ,DoSearchResults:function(Self) {
      var NewIndex = { v : 0 },
         ControllerNode$1 = null;
      ControllerNode$1 = $As(Self.FOwner$5,TLccTrainController);
      if (Self.FRepliedSearchCriteria.length > 0) {
         NewIndex.v = 0;
      } else {
         NewIndex.v = -1;
      }
      if (ControllerNode$1) {
         if (ControllerNode$1.FOnSearchResult) {
            ControllerNode$1.FOnSearchResult(Self,Self.FRepliedSearchCriteria,Self.FRepliedSearchCriterialCount,NewIndex);
            if (NewIndex.v > -1 && NewIndex.v < Self.FRepliedSearchCriteria.length) {
               Self.FSelectedSearchResultIndex = NewIndex.v;
            }
         }
      }
      Self.FSelectedSearchResultIndex = NewIndex.v;
   }
   /// procedure TLccTractionAssignTrainAction.LoadStateArray()
   ///  [line: 688, column: 41, file: lcc_node_controller]
   ,LoadStateArray:function(Self) {
      TLccAction.SetStateArrayLength(Self,4);
      Self.FStates[0]=$Event2(Self,TLccAction._0ReceiveFirstMessage$);
      Self.FStates[1]=$Event2(Self,TLccTractionAssignTrainAction._1ActionWaitForSearchResults);
      Self.FStates[2]=$Event2(Self,TLccTractionAssignTrainAction._2ActionWaitForAssignThrottleResult);
      Self.FStates[3]=$Event2(Self,TLccAction._NFinalStateCleanup);
      $ArraySetLenC(Self.FRepliedSearchCriteria,20,function (){return {SearchData:0,NodeID$5:[0,0],NodeAlias:0,HasSTNIP:false,STNIP:{Manufacturer$1:"",Owner$12:"",Roadname$1:"",RoadNumber$2:"",TrainClass$1:"",TrainName$1:"",Version$1:0}}});
      Self.FRepliedSearchCriterialCount = 0;
      Self.FSelectedSearchResultIndex = -1;
   }
   /// function TLccTractionAssignTrainAction._0ReceiveFirstMessage(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 453, column: 40, file: lcc_node_controller]
   ,_0ReceiveFirstMessage:function(Self, Sender, SourceMessage) {
      var Result = false;
      Result = TLccAction._0ReceiveFirstMessage(Self,Sender,SourceMessage);
      Self.FSelectedSearchResultIndex = 0;
      Self.FRepliedSearchCriterialCount = 0;
      TLccMessage.LoadTractionSearch(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FRequestedSearchData);
      Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
      TLccAction.SetTimoutCountThreshold(Self,1000,true);
      TLccAction.AdvanceToNextState(Self,1);
      return Result
   }
   /// function TLccTractionAssignTrainAction._1ActionWaitForSearchResults(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 466, column: 40, file: lcc_node_controller]
   ,_1ActionWaitForSearchResults:function(Self, Sender, SourceMessage) {
      var Result = false;
      var i$7 = 0,
         TrainVersion = { v : 0 },
         TrainRoadName = { v : "" },
         TrainClass$2 = { v : "" },
         TrainRoadNumber = { v : "" },
         TrainName$2 = { v : "" },
         TrainManufacturer = { v : "" },
         TrainOwner = { v : "" };
      Result = false;
      if (SourceMessage) {
         switch (SourceMessage.FMTI) {
            case 1349 :
            case 1348 :
            case 1351 :
               TLccMessage.LoadTractionSearch(Self.FWorkerMessage$3,NULL_NODE_ID.slice(0),0,Self.FRequestedSearchData);
               if (TLccMessage.TractionSearchDecodeSearchString(SourceMessage) == TLccMessage.TractionSearchDecodeSearchString(Self.FWorkerMessage$3)) {
                  if (Self.FRepliedSearchCriterialCount < Self.FRepliedSearchCriteria.length) {
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].NodeID$5 = SourceMessage.FSourceID.slice(0);
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].NodeAlias = SourceMessage.FCAN.FSourceAlias;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].SearchData = TLccMessage.TractionSearchExtractSearchData(SourceMessage);
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].HasSTNIP = false;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Manufacturer$1 = "";
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Owner$12 = "";
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Roadname$1 = "";
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.RoadNumber$2 = "";
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.TrainClass$1 = "";
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.TrainName$1 = "";
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Version$1 = 0;
                     TLccMessage.LoadSimpleTrainNodeIdentInfoRequest(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].NodeID$5.slice(0),Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].NodeAlias);
                     Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
                     ++Self.FRepliedSearchCriterialCount;
                  } else {
                     TLccAction.AdvanceToNextState(Self,1);
                  }
               }
               break;
            case 2504 :
               i$7 = 0;
               while (i$7 < Self.FRepliedSearchCriterialCount) {
                  if (EqualNode(SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].NodeID$5.slice(0),Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].NodeAlias)) {
                     TrainVersion.v = 0;
                     TrainRoadName.v = "";
                     TrainClass$2.v = "";
                     TrainRoadNumber.v = "";
                     TrainName$2.v = "";
                     TrainManufacturer.v = "";
                     TrainOwner.v = "";
                     TLccMessage.ExtractSimpleTrainNodeIdentInfoReply(SourceMessage,TrainVersion,TrainRoadName,TrainClass$2,TrainRoadNumber,TrainName$2,TrainManufacturer,TrainOwner);
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].HasSTNIP = true;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Manufacturer$1 = TrainManufacturer.v;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Owner$12 = TrainOwner.v;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Roadname$1 = TrainRoadName.v;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.RoadNumber$2 = TrainRoadNumber.v;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.TrainClass$1 = TrainClass$2.v;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.TrainName$1 = TrainName$2.v;
                     Self.FRepliedSearchCriteria[Self.FRepliedSearchCriterialCount].STNIP.Version$1 = TrainVersion.v;
                  }
                  ++i$7;
               }
               break;
         }
      }
      if (Self.FCancel) {
         TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
         return Result;
      }
      if (TLccAction.TimeoutExpired(Self)) {
         if (Self.FRepliedSearchCriterialCount > 0) {
            if (Self.FRepliedSearchCriterialCount == 1) {
               TLccTractionAssignTrainAction.DoSearchResults(Self);
               Self.FSelectedSearchResultIndex = 0;
               TLccMessage.LoadTractionControllerAssign(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeID$5.slice(0),Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeAlias,Self.FNodeID$2.slice(0),Self.FAliasID$1);
               Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
               TLccAction.SetTimoutCountThreshold(Self,5000,true);
               TLccAction.AdvanceToNextState(Self,1);
            } else {
               TLccTractionAssignTrainAction.DoSearchResults(Self);
               if (Self.FSelectedSearchResultIndex < 0 || Self.FSelectedSearchResultIndex >= Self.FRepliedSearchCriteria.length) {
                  TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
               } else {
                  TLccMessage.LoadTractionControllerAssign(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeID$5.slice(0),Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeAlias,Self.FNodeID$2.slice(0),Self.FAliasID$1);
                  Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
                  TLccAction.SetTimoutCountThreshold(Self,5000,true);
                  TLccAction.AdvanceToNextState(Self,1);
               }
            }
         } else {
            TLccTractionAssignTrainAction.DoSearchResults(Self);
            TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
         }
      }
      return Result
   }
   /// function TLccTractionAssignTrainAction._2ActionWaitForAssignThrottleResult(Sender: TObject; SourceMessage: TLccMessage) : Boolean
   ///  [line: 585, column: 40, file: lcc_node_controller]
   ,_2ActionWaitForAssignThrottleResult:function(Self, Sender, SourceMessage) {
      var Result = false;
      var ControllerNode$1 = null;
      Result = false;
      if (SourceMessage) {
         if (EqualNode(SourceMessage.FSourceID.slice(0),SourceMessage.FCAN.FSourceAlias,Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeID$5.slice(0),Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeAlias)) {
            switch (SourceMessage.FMTI) {
               case 488 :
                  switch (SourceMessage.FDataArray[0]) {
                     case 32 :
                        switch (SourceMessage.FDataArray[1]) {
                           case 1 :
                              switch (SourceMessage.FDataArray[2]) {
                                 case 0 :
                                    ControllerNode$1 = $As(Self.FOwner$5,TLccTrainController);
                                    if (ControllerNode$1) {
                                       Self.FIgnoreTimer = true;
                                       ControllerNode$1.FAssignedTrain.NodeID$6 = Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeID$5.slice(0);
                                       ControllerNode$1.FAssignedTrain.AliasID$3 = Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeAlias;
                                       ControllerNode$1.FAssignedTrain.RepliedSearchData = Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].SearchData;
                                       TLccTractionAssignTrainAction.DoAssigned(Self,0);
                                    }
                                    TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
                                    break;
                                 case 1 :
                                    Self.FIgnoreTimer = true;
                                    TLccTractionAssignTrainAction.DoAssigned(Self,1);
                                    TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
                                    break;
                                 case 2 :
                                    Self.FIgnoreTimer = true;
                                    TLccTractionAssignTrainAction.DoAssigned(Self,2);
                                    TLccAction._NFinalStateCleanup(Self,Sender,SourceMessage);
                                    break;
                              }
                              break;
                        }
                        break;
                  }
                  break;
            }
         }
      }
      if (TLccAction.TimeoutExpired(Self) || Self.FCancel) {
         if (Self.FSelectedSearchResultIndex > -1 && Self.FSelectedSearchResultIndex < Self.FRepliedSearchCriteria.length) {
            TLccMessage.LoadTractionControllerRelease(Self.FWorkerMessage$3,Self.FNodeID$2.slice(0),Self.FAliasID$1,Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeID$5.slice(0),Self.FRepliedSearchCriteria[Self.FSelectedSearchResultIndex].NodeAlias,Self.FNodeID$2.slice(0),Self.FAliasID$1);
            Self.FSendMessage(Self.FOwner$5,Self.FWorkerMessage$3);
         }
         TLccAction._NFinalStateCleanup(Self,Self,SourceMessage);
      }
      return Result
   }
   ,Destroy:TLccAction.Destroy
   ,LoadStateArray$:function($){return $.ClassType.LoadStateArray($)}
   ,_0ReceiveFirstMessage$:function($){return $.ClassType._0ReceiveFirstMessage.apply($.ClassType, arguments)}
};
/// TLccSTNIP = record
///  [line: 80, column: 3, file: lcc_node_controller]
function Copy$TLccSTNIP(s,d) {
   d.Manufacturer$1=s.Manufacturer$1;
   d.Owner$12=s.Owner$12;
   d.Roadname$1=s.Roadname$1;
   d.RoadNumber$2=s.RoadNumber$2;
   d.TrainClass$1=s.TrainClass$1;
   d.TrainName$1=s.TrainName$1;
   d.Version$1=s.Version$1;
   return d;
}
function Clone$TLccSTNIP($) {
   return {
      Manufacturer$1:$.Manufacturer$1,
      Owner$12:$.Owner$12,
      Roadname$1:$.Roadname$1,
      RoadNumber$2:$.RoadNumber$2,
      TrainClass$1:$.TrainClass$1,
      TrainName$1:$.TrainName$1,
      Version$1:$.Version$1
   }
}
/// TLccSearchReplyRec = record
///  [line: 90, column: 3, file: lcc_node_controller]
function Copy$TLccSearchReplyRec(s,d) {
   d.SearchData=s.SearchData;
   d.NodeID$5=s.NodeID$5.slice(0);
   d.NodeAlias=s.NodeAlias;
   d.HasSTNIP=s.HasSTNIP;
   Copy$TLccSTNIP(s.STNIP,d.STNIP);
   return d;
}
function Clone$TLccSearchReplyRec($) {
   return {
      SearchData:$.SearchData,
      NodeID$5:$.NodeID$5.slice(0),
      NodeAlias:$.NodeAlias,
      HasSTNIP:$.HasSTNIP,
      STNIP:Clone$TLccSTNIP($.STNIP)
   }
}
/// TControllerTrainAssignResult enumeration
///  [line: 99, column: 3, file: lcc_node_controller]
var TControllerTrainAssignResult = [ "tarAssigned", "tarFailTrainRefused", "tarFailControllerRefused" ];
/// TAttachedTrain = record
///  [line: 209, column: 3, file: lcc_node_controller]
function Copy$TAttachedTrain(s,d) {
   d.NodeID$6=s.NodeID$6.slice(0);
   d.AliasID$3=s.AliasID$3;
   d.RequestedSearchData$1=s.RequestedSearchData$1;
   d.RepliedSearchData=s.RepliedSearchData;
   d.SearchString=s.SearchString;
   d.Listeners$1=s.Listeners$1;
   return d;
}
function Clone$TAttachedTrain($) {
   return {
      NodeID$6:$.NodeID$6.slice(0),
      AliasID$3:$.AliasID$3,
      RequestedSearchData$1:$.RequestedSearchData$1,
      RepliedSearchData:$.RepliedSearchData,
      SearchString:$.SearchString,
      Listeners$1:$.Listeners$1
   }
}
/// TControllerManager = class (TObject)
///  [line: 32, column: 3, file: LccNode]
var TControllerManager = {
   $ClassName:"TControllerManager",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.ControllerNode = $.NodeManager$1 = null;
      $.FControllerCreated = false;
   }
   /// constructor TControllerManager.Create()
   ///  [line: 65, column: 32, file: LccNode]
   ,Create$212:function(Self) {
      Self.NodeManager$1 = TLccCanNodeManager.Create$199($New(TLccCanNodeManager),null);
      return Self
   }
   /// procedure TControllerManager.CreateController()
   ///  [line: 75, column: 30, file: LccNode]
   ,CreateController:function(Self) {
      if (!Self.ControllerNode) {
         Self.ControllerNode = $As(TLccNodeManager.AddNodeByClass(Self.NodeManager$1,"",TLccTrainController,true),TLccTrainController);
         Self.FControllerCreated = Self.ControllerNode!==null;
         Max_Allowed_Buffers = 1;
      }
   }
   /// destructor TControllerManager.Destroy()
   ///  [line: 70, column: 31, file: LccNode]
   ,Destroy:function(Self) {
      TObject.Free(Self.NodeManager$1);
   }
   /// procedure TControllerManager.DestroyController()
   ///  [line: 85, column: 30, file: LccNode]
   ,DestroyController:function(Self) {
      if (Self.ControllerNode) {
         TLccNodeManager.Clear$30(Self.NodeManager$1);
         Self.FControllerCreated = false;
         Self.ControllerNode = null;
      }
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
function GetControllerManager() {
   var Result = null;
   if (!InternalControllerManager) {
      InternalControllerManager = TControllerManager.Create$212($New(TControllerManager));
   }
   Result = InternalControllerManager;
   return Result
};
/// TLccNodeManager = class (TObject)
///  [line: 129, column: 3, file: lcc_node_manager]
var TLccNodeManager = {
   $ClassName:"TLccNodeManager",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAliasServer = $.FNodes = $.FOnLccCANAliasMapReset = $.FOnLccMessageReceive = $.FOnLccMessageSend = $.FOnLccNodeAliasIDChanged = $.FOnLccNodeCDI = $.FOnLccNodeConfigMemAddressSpaceInfoReply = $.FOnLccNodeConfigMemOptionsReply = $.FOnLccNodeConfigMemReadReply = $.FOnLccNodeConfigMemWriteReply = $.FOnLccNodeConsumerIdentified = $.FOnLccNodeConsumerIdentify = $.FOnLccNodeCreate = $.FOnLccNodeDatagramReply = $.FOnLccNodeDestroy = $.FOnLccNodeFDI = $.FOnLccNodeFunctionConfiguration = $.FOnLccNodeIDChanged = $.FOnLccNodeInitializationComplete = $.FOnLccNodeLogin = $.FOnLccNodeLogout = $.FOnLccNodeOptionalInteractionRejected = $.FOnLccNodeProducerIdentified = $.FOnLccNodeProducerIdentify = $.FOnLccNodeProtocolIdentifyReply = $.FOnLccNodeRemoteButtonReply = $.FOnLccNodeSimpleNodeIdentReply = $.FOnLccNodeSimpleTrainNodeIdentReply = $.FOnLccNodeTractionControllerConfig = $.FOnLccNodeTractionEmergencyStop = $.FOnLccNodeTractionFunctionSet = $.FOnLccNodeTractionListenerConfig = $.FOnLccNodeTractionManage = $.FOnLccNodeTractionQueryFunction = $.FOnLccNodeTractionQuerySpeed = $.FOnLccNodeTractionSpeedSet = $.FOnLccNodeVerifiedNodeID = $.FWorkerMessage$1 = null;
      $.FAliasServerEnabled = false;
      $.HardwareConnectionLinkArray = [null,null,null,null,null,null,null,null,null,null,null];
      $.HardwareConnectionLinkCount = 0;
   }
   /// function TLccNodeManager.AddNode(CdiXML: String; AutoLogin: Boolean) : TLccNode
   ///  [line: 645, column: 26, file: lcc_node_manager]
   ,AddNode:function(Self, CdiXML, AutoLogin) {
      var Result = null;
      Result = TLccNode.Create$201$($New(TLccNode),$Event2(Self,TLccNodeManager.LccMessageSendCallback),Self,CdiXML);
      TObjectList.Add$1(Self.FNodes,Result);
      TLccNodeManager.DoCreateLccNode(Self,Result);
      if (AutoLogin) {
         TLccNode.Login$(Result,NULL_NODE_ID.slice(0));
      }
      return Result
   }
   /// function TLccNodeManager.AddNodeByClass(CdiXML: String; NodeClass: TLccNodeClass; AutoLogin: Boolean) : TLccNode
   ///  [line: 654, column: 26, file: lcc_node_manager]
   ,AddNodeByClass:function(Self, CdiXML, NodeClass, AutoLogin) {
      var Result = null;
      Result = null;
      if (NodeClass) {
         Result = TLccNode.Create$201$($NewDyn(NodeClass,""),$Event2(Self,TLccNodeManager.LccMessageSendCallback),Self,CdiXML);
         TObjectList.Add$1(Self.FNodes,Result);
         TLccNodeManager.DoCreateLccNode(Self,Result);
         if (AutoLogin) {
            TLccNode.Login$(Result,NULL_NODE_ID.slice(0));
         }
      }
      return Result
   }
   /// procedure TLccNodeManager.Clear()
   ///  [line: 678, column: 27, file: lcc_node_manager]
   ,Clear$30:function(Self) {
      var i$7 = 0;
      try {
         TLccNodeManager.LogoutAll(Self);
         var $temp171;
         for(i$7=0,$temp171=TObjectList.GetCount$1(Self.FNodes);i$7<$temp171;i$7++) {
            TObject.Free(TObjectList.GetItem$14(Self.FNodes,i$7));
         }
      } finally {
         TObjectList.Clear$8(Self.FNodes);
      }
   }
   /// constructor TLccNodeManager.Create(AnOwner: TComponent)
   ///  [line: 625, column: 29, file: lcc_node_manager]
   ,Create$198:function(Self, AnOwner) {
      TObject.Create(Self);
      Self.FNodes = TObjectList.Create$127($New(TObjectList));
      Self.FAliasServer = TLccAliasServer.Create$210($New(TLccAliasServer));
      Self.FWorkerMessage$1 = TLccMessage.Create$197($New(TLccMessage));
      return Self
   }
   /// destructor TLccNodeManager.Destroy()
   ///  [line: 668, column: 28, file: lcc_node_manager]
   ,Destroy:function(Self) {
      TLccNodeManager.LogoutAll(Self);
      TLccNodeManager.Clear$30(Self);
      TObject.Free(Self.FNodes);
      FreeAndNil(Self.FAliasServer);
      FreeAndNil(Self.FWorkerMessage$1);
      TObject.Destroy(Self);
   }
   /// procedure TLccNodeManager.DoAliasIDChanged(LccNode: TLccNode)
   ///  [line: 382, column: 27, file: lcc_node_manager]
   ,DoAliasIDChanged:function(Self, LccNode) {
      if (Self.FOnLccNodeAliasIDChanged) {
         Self.FOnLccNodeAliasIDChanged(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoCANAliasMapReset(LccNode: TLccNode)
   ///  [line: 388, column: 27, file: lcc_node_manager]
   ,DoCANAliasMapReset:function(Self, LccNode) {
      if (Self.FOnLccCANAliasMapReset) {
         Self.FOnLccCANAliasMapReset(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoCDIRead(LccNode: TLccNode)
   ///  [line: 394, column: 27, file: lcc_node_manager]
   ,DoCDIRead:function(Self, LccNode) {
      if (Self.FOnLccNodeCDI) {
         Self.FOnLccNodeCDI(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoConfigMemAddressSpaceInfoReply(LccNode: TLccNode; AddressSpace: Byte)
   ///  [line: 400, column: 27, file: lcc_node_manager]
   ,DoConfigMemAddressSpaceInfoReply:function(Self, LccNode, AddressSpace$2) {
      if (Self.FOnLccNodeConfigMemAddressSpaceInfoReply) {
         Self.FOnLccNodeConfigMemAddressSpaceInfoReply(Self,LccNode,AddressSpace$2);
      }
   }
   /// procedure TLccNodeManager.DoConfigMemOptionsReply(LccNode: TLccNode)
   ///  [line: 407, column: 27, file: lcc_node_manager]
   ,DoConfigMemOptionsReply:function(Self, LccNode) {
      if (Self.FOnLccNodeConfigMemOptionsReply) {
         Self.FOnLccNodeConfigMemOptionsReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoConfigMemReadReply(LccNode: TLccNode)
   ///  [line: 413, column: 27, file: lcc_node_manager]
   ,DoConfigMemReadReply:function(Self, LccNode) {
      if (Self.FOnLccNodeConfigMemReadReply) {
         Self.FOnLccNodeConfigMemReadReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoConfigMemWriteReply(LccNode: TLccNode)
   ///  [line: 419, column: 27, file: lcc_node_manager]
   ,DoConfigMemWriteReply:function(Self, LccNode) {
      if (Self.FOnLccNodeConfigMemWriteReply) {
         Self.FOnLccNodeConfigMemWriteReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoConsumerIdentified(LccNode: TLccNode; LccMessage: TLccMessage; var Event: TEventID; State: TEventState)
   ///  [line: 431, column: 27, file: lcc_node_manager]
   ,DoConsumerIdentified:function(Self, LccNode, LccMessage, Event$3, State$2) {
      if (Self.FOnLccNodeConsumerIdentified) {
         Self.FOnLccNodeConsumerIdentified(Self,LccNode,LccMessage,Event$3,State$2);
      }
   }
   /// procedure TLccNodeManager.DoConsumerIdentify(LccNode: TLccNode; LccMessage: TLccMessage; var DoDefault: Boolean)
   ///  [line: 438, column: 27, file: lcc_node_manager]
   ,DoConsumerIdentify:function(Self, LccNode, LccMessage, DoDefault) {
      if (Self.FOnLccNodeConsumerIdentify) {
         Self.FOnLccNodeConsumerIdentify(Self,LccNode,LccMessage,DoDefault);
      }
   }
   /// procedure TLccNodeManager.DoCreateLccNode(LccNode: TLccNode)
   ///  [line: 425, column: 27, file: lcc_node_manager]
   ,DoCreateLccNode:function(Self, LccNode) {
      if (Self.FOnLccNodeCreate) {
         Self.FOnLccNodeCreate(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoDatagramReply(LccNode: TLccNode)
   ///  [line: 445, column: 27, file: lcc_node_manager]
   ,DoDatagramReply:function(Self, LccNode) {
      if (Self.FOnLccNodeDatagramReply) {
         Self.FOnLccNodeDatagramReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoDestroyLccNode(LccNode: TLccNode)
   ///  [line: 451, column: 27, file: lcc_node_manager]
   ,DoDestroyLccNode:function(Self, LccNode) {
      if (Self.FOnLccNodeDestroy) {
         Self.FOnLccNodeDestroy(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoFDI(LccNode: TLccNode)
   ///  [line: 457, column: 27, file: lcc_node_manager]
   ,DoFDI:function(Self, LccNode) {
      if (Self.FOnLccNodeFDI) {
         Self.FOnLccNodeFDI(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoFunctionConfiguration(LccNode: TLccNode)
   ///  [line: 463, column: 27, file: lcc_node_manager]
   ,DoFunctionConfiguration:function(Self, LccNode) {
      if (Self.FOnLccNodeFunctionConfiguration) {
         Self.FOnLccNodeFunctionConfiguration(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoInitializationComplete(LccNode: TLccNode)
   ///  [line: 469, column: 27, file: lcc_node_manager]
   ,DoInitializationComplete:function(Self, LccNode) {
      if (Self.FOnLccNodeInitializationComplete) {
         Self.FOnLccNodeInitializationComplete(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoLccMessageReceive(Message: TLccMessage)
   ///  [line: 475, column: 27, file: lcc_node_manager]
   ,DoLccMessageReceive:function(Self, Message$2) {
      if (Self.FOnLccMessageReceive) {
         Self.FOnLccMessageReceive(Self,Message$2);
      }
   }
   /// procedure TLccNodeManager.DoLccMessageSend(Sender: TObject; Message: TLccMessage)
   ///  [line: 481, column: 27, file: lcc_node_manager]
   ,DoLccMessageSend:function(Self, Sender, Message$2) {
      if (Self.FOnLccMessageSend) {
         Self.FOnLccMessageSend(Sender,Message$2);
      }
   }
   /// procedure TLccNodeManager.DoLogInNode(LccNode: TLccNode)
   ///  [line: 487, column: 27, file: lcc_node_manager]
   ,DoLogInNode:function(Self, LccNode) {
      if (Self.FOnLccNodeLogin) {
         Self.FOnLccNodeLogin(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoLogOutNode(LccNode: TLccNode)
   ///  [line: 493, column: 27, file: lcc_node_manager]
   ,DoLogOutNode:function(Self, LccNode) {
      if (Self.FOnLccNodeLogout) {
         Self.FOnLccNodeLogout(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoNodeIDChanged(LccNode: TLccNode)
   ///  [line: 499, column: 27, file: lcc_node_manager]
   ,DoNodeIDChanged:function(Self, LccNode) {
      if (Self.FOnLccNodeIDChanged) {
         Self.FOnLccNodeIDChanged(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoOptionalInteractionRejected(LccNode: TLccNode)
   ///  [line: 505, column: 27, file: lcc_node_manager]
   ,DoOptionalInteractionRejected:function(Self, LccNode) {
      if (Self.FOnLccNodeOptionalInteractionRejected) {
         Self.FOnLccNodeOptionalInteractionRejected(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoProducerIdentified(LccNode: TLccNode; LccMessage: TLccMessage; var Event: TEventID; State: TEventState)
   ///  [line: 511, column: 27, file: lcc_node_manager]
   ,DoProducerIdentified:function(Self, LccNode, LccMessage, Event$3, State$2) {
      if (Self.FOnLccNodeProducerIdentified) {
         Self.FOnLccNodeProducerIdentified(Self,LccNode,LccMessage,Event$3,State$2);
      }
   }
   /// procedure TLccNodeManager.DoProducerIdentify(LccNode: TLccNode; LccMessage: TLccMessage; var DoDefault: Boolean)
   ///  [line: 518, column: 27, file: lcc_node_manager]
   ,DoProducerIdentify:function(Self, LccNode, LccMessage, DoDefault) {
      if (Self.FOnLccNodeProducerIdentify) {
         Self.FOnLccNodeProducerIdentify(Self,LccNode,LccMessage,DoDefault);
      }
   }
   /// procedure TLccNodeManager.DoProtocolIdentifyReply(LccNode: TLccNode)
   ///  [line: 525, column: 27, file: lcc_node_manager]
   ,DoProtocolIdentifyReply:function(Self, LccNode) {
      if (Self.FOnLccNodeProtocolIdentifyReply) {
         Self.FOnLccNodeProtocolIdentifyReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoRemoteButtonReply(LccNode: TLccNode)
   ///  [line: 531, column: 27, file: lcc_node_manager]
   ,DoRemoteButtonReply:function(Self, LccNode) {
      if (Self.FOnLccNodeRemoteButtonReply) {
         Self.FOnLccNodeRemoteButtonReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoSimpleNodeIdentReply(LccNode: TLccNode)
   ///  [line: 537, column: 27, file: lcc_node_manager]
   ,DoSimpleNodeIdentReply:function(Self, LccNode) {
      if (Self.FOnLccNodeSimpleNodeIdentReply) {
         Self.FOnLccNodeSimpleNodeIdentReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoSimpleTrainNodeIdentReply(LccNode: TLccNode)
   ///  [line: 543, column: 27, file: lcc_node_manager]
   ,DoSimpleTrainNodeIdentReply:function(Self, LccNode) {
      if (Self.FOnLccNodeSimpleTrainNodeIdentReply) {
         Self.FOnLccNodeSimpleTrainNodeIdentReply(Self,LccNode);
      }
   }
   /// procedure TLccNodeManager.DoTractionControllerConfig(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 570, column: 27, file: lcc_node_manager]
   ,DoTractionControllerConfig:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionControllerConfig) {
         Self.FOnLccNodeTractionControllerConfig(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionEmergencyStop(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 577, column: 27, file: lcc_node_manager]
   ,DoTractionEmergencyStop:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionEmergencyStop) {
         Self.FOnLccNodeTractionEmergencyStop(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionFunctionSet(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 584, column: 27, file: lcc_node_manager]
   ,DoTractionFunctionSet:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionFunctionSet) {
         Self.FOnLccNodeTractionFunctionSet(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionListenerConfig(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 591, column: 27, file: lcc_node_manager]
   ,DoTractionListenerConfig:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionListenerConfig) {
         Self.FOnLccNodeTractionListenerConfig(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionManage(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 598, column: 27, file: lcc_node_manager]
   ,DoTractionManage:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionManage) {
         Self.FOnLccNodeTractionManage(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionQueryFunction(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 563, column: 27, file: lcc_node_manager]
   ,DoTractionQueryFunction:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionQueryFunction) {
         Self.FOnLccNodeTractionQueryFunction(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionQuerySpeed(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 549, column: 27, file: lcc_node_manager]
   ,DoTractionQuerySpeed:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionQuerySpeed) {
         Self.FOnLccNodeTractionQuerySpeed(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoTractionSpeedSet(LccNode: TLccNode; LccMessage: TLccMessage; IsReply: Boolean)
   ///  [line: 556, column: 27, file: lcc_node_manager]
   ,DoTractionSpeedSet:function(Self, LccNode, LccMessage, IsReply) {
      if (Self.FOnLccNodeTractionSpeedSet) {
         Self.FOnLccNodeTractionSpeedSet(Self,LccNode,LccMessage,IsReply);
      }
   }
   /// procedure TLccNodeManager.DoVerifiedNodeID(LccNode: TLccNode)
   ///  [line: 605, column: 27, file: lcc_node_manager]
   ,DoVerifiedNodeID:function(Self, LccNode) {
      if (Self.FOnLccNodeVerifiedNodeID) {
         Self.FOnLccNodeVerifiedNodeID(Self,LccNode);
      }
   }
   /// function TLccNodeManager.ExtractNode(Index: Integer) : TLccNode
   ///  [line: 611, column: 26, file: lcc_node_manager]
   ,ExtractNode:function(Self, Index$6) {
      var Result = null;
      Result = null;
      if (Index$6 < TObjectList.GetCount$1(Self.FNodes)) {
         Result = $As(TObjectList.GetItem$14(Self.FNodes,Index$6),TLccNode);
         TObjectList.Remove$1(Self.FNodes,Index$6);
      }
      return Result
   }
   /// function TLccNodeManager.FindPermittedCanNode() : TLccCanNode
   ///  [line: 691, column: 26, file: lcc_node_manager]
   ,FindPermittedCanNode:function(Self) {
      var Result = null;
      var i$7 = 0;
      Result = null;
      i$7 = 0;
      while (i$7 < TObjectList.GetCount$1(Self.FNodes)) {
         if ($Is(TObjectList.GetItem$14(Self.FNodes,i$7),TLccCanNode)) {
            if ($As(TObjectList.GetItem$14(Self.FNodes,i$7),TLccCanNode).FPermitted) {
               Result = $As(TObjectList.GetItem$14(Self.FNodes,i$7),TLccCanNode);
               break;
            }
            ++i$7;
         }
      }
      return Result
   }
   /// function TLccNodeManager.GetNode(Index: Integer) : TLccNode
   ///  [line: 743, column: 26, file: lcc_node_manager]
   ,GetNode:function(Self, Index$6) {
      var Result = null;
      if (Index$6 < TObjectList.GetCount$1(Self.FNodes)) {
         Result = $As(TObjectList.GetItem$14(Self.FNodes,Index$6),TLccNode);
      } else {
         Result = null;
      }
      return Result
   }
   /// function TLccNodeManager.GetNodeCount() : Integer
   ///  [line: 751, column: 26, file: lcc_node_manager]
   ,GetNodeCount:function(Self) {
      return TObjectList.GetCount$1(Self.FNodes);
   }
   /// procedure TLccNodeManager.LccMessageSendCallback(Sender: TObject; LccMessage: TLccMessage)
   ///  [line: 897, column: 27, file: lcc_node_manager]
   ,LccMessageSendCallback:function(Self, Sender, LccMessage) {
      TLccNodeManager.SendMessage(Self,Sender,LccMessage);
   }
   /// procedure TLccNodeManager.LogoutAll()
   ///  [line: 756, column: 27, file: lcc_node_manager]
   ,LogoutAll:function(Self) {
      var i$7 = 0;
      var $temp172;
      for(i$7=0,$temp172=TObjectList.GetCount$1(Self.FNodes);i$7<$temp172;i$7++) {
         TLccNode.Logout$($As(TObjectList.GetItem$14(Self.FNodes,i$7),TLccNode));
      }
   }
   /// procedure TLccNodeManager.ProcessMessage(LccMessage: TLccMessage)
   ///  [line: 781, column: 27, file: lcc_node_manager]
   ,ProcessMessage:function(Self, LccMessage) {
      var i$7 = 0;
      TLccNodeManager.DoLccMessageReceive(Self,LccMessage);
      var $temp173;
      for(i$7=0,$temp173=TObjectList.GetCount$1(Self.FNodes);i$7<$temp173;i$7++) {
         TLccNode.ProcessMessage$1$($As(TObjectList.GetItem$14(Self.FNodes,i$7),TLccNode),LccMessage);
      }
   }
   /// function TLccNodeManager.SendGlobalAliasMappingEnquiry() : Boolean
   ///  [line: 712, column: 26, file: lcc_node_manager]
   ,SendGlobalAliasMappingEnquiry:function(Self) {
      var Result = false;
      var CanNode$1 = null;
      if (Self.FAliasServerEnabled) {
         CanNode$1 = TLccNodeManager.FindPermittedCanNode(Self);
         if (CanNode$1) {
            TLccMessage.LoadAME(Self.FWorkerMessage$1,CanNode$1.FNodeID$1.slice(0),CanNode$1.FAliasID,NULL_NODE_ID.slice(0));
            CanNode$1.FSendMessageFunc$1(CanNode$1,Self.FWorkerMessage$1);
            Result = true;
         }
      }
      return Result
   }
   /// procedure TLccNodeManager.SendMessage(Sender: TObject; LccMessage: TLccMessage)
   ///  [line: 790, column: 27, file: lcc_node_manager]
   ,SendMessage:function(Self, Sender, LccMessage) {
      var i$7 = 0,
         MapIndex = { v : 0 },
         Map = null,
         WorkerCanNode = null;
      MapIndex.v = -1;
      if (LccMessage.FIsCAN) {
         if ((LccMessage.FCAN.FMTI$1&251658240) < 150994944) {
            switch (LccMessage.FCAN.FMTI$1) {
               case 7352320 :
                  TLccAliasServer.RemoveMapping(Self.FAliasServer,LccMessage.FCAN.FSourceAlias);
                  break;
               case 7344128 :
                  TLccAliasServer.AddMapping(Self.FAliasServer,LccMessage.FSourceID.slice(0),LccMessage.FCAN.FSourceAlias);
                  break;
            }
         } else {
            if (TLccMessage.GetHasDestination(LccMessage)) {
               /* null */
            }
         }
      } else {
         if (TLccMessage.GetHasDestination(LccMessage)) {
            Map = TLccAliasServer.FindInAliasSortedMap(Self.FAliasServer,LccMessage.FCAN.FSourceAlias,MapIndex);
            if (!Map) {
               TLccNodeManager.SendGlobalAliasMappingEnquiry(Self);
            }
            Map = TLccAliasServer.FindInAliasSortedMap(Self.FAliasServer,LccMessage.FCAN.FDestAlias,MapIndex);
            if (!Map) {
               WorkerCanNode = TLccNodeManager.FindPermittedCanNode(Self);
               if (WorkerCanNode) {
                  TLccNodeManager.SendGlobalAliasMappingEnquiry(Self);
               }
            }
         }
      }
      var $temp174;
      for(i$7=0,$temp174=Self.HardwareConnectionLinkCount;i$7<$temp174;i$7++) {
         Self.HardwareConnectionLinkArray[i$7][0](LccMessage);
      }
      if ($Is(Sender,TLccNode)) {
         var $temp175;
         for(i$7=0,$temp175=TObjectList.GetCount$1(Self.FNodes);i$7<$temp175;i$7++) {
            $Assert(!(NullNodeID(TLccNodeManager.GetNode(Self,i$7).FNodeID$1.slice(0))),"","");
            $Assert(!(NullNodeID(LccMessage.FSourceID.slice(0))),"","");
            if (!(EqualNodeID(TLccNodeManager.GetNode(Self,i$7).FNodeID$1.slice(0),LccMessage.FSourceID.slice(0),true))) {
               TLccNode.ProcessMessage$1$(TLccNodeManager.GetNode(Self,i$7),LccMessage);
            }
         }
      }
      TLccNodeManager.DoLccMessageSend(Self,Sender,LccMessage);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,DoLogInNode$:function($){return $.ClassType.DoLogInNode.apply($.ClassType, arguments)}
   ,DoLogOutNode$:function($){return $.ClassType.DoLogOutNode.apply($.ClassType, arguments)}
};
TLccNodeManager.$Intf={
   INodeManagerCallbacks:[TLccNodeManager.DoAliasIDChanged,TLccNodeManager.DoCANAliasMapReset,TLccNodeManager.DoCDIRead,TLccNodeManager.DoConfigMemAddressSpaceInfoReply,TLccNodeManager.DoConfigMemOptionsReply,TLccNodeManager.DoConfigMemReadReply,TLccNodeManager.DoConfigMemWriteReply,TLccNodeManager.DoCreateLccNode,TLccNodeManager.DoConsumerIdentify,TLccNodeManager.DoConsumerIdentified,TLccNodeManager.DoDatagramReply,TLccNodeManager.DoDestroyLccNode,TLccNodeManager.DoLogInNode,TLccNodeManager.DoLogOutNode,TLccNodeManager.DoFDI,TLccNodeManager.DoFunctionConfiguration,TLccNodeManager.DoInitializationComplete,TLccNodeManager.DoNodeIDChanged,TLccNodeManager.DoOptionalInteractionRejected,TLccNodeManager.DoProducerIdentify,TLccNodeManager.DoProducerIdentified,TLccNodeManager.DoProtocolIdentifyReply,TLccNodeManager.DoRemoteButtonReply,TLccNodeManager.DoSimpleNodeIdentReply,TLccNodeManager.DoSimpleTrainNodeIdentReply,TLccNodeManager.DoTractionEmergencyStop,TLccNodeManager.DoTractionSpeedSet,TLccNodeManager.DoTractionFunctionSet,TLccNodeManager.DoTractionQuerySpeed,TLccNodeManager.DoTractionQueryFunction,TLccNodeManager.DoTractionControllerConfig,TLccNodeManager.DoTractionListenerConfig,TLccNodeManager.DoTractionManage,TLccNodeManager.DoVerifiedNodeID]
   ,INodeManager:[TLccNodeManager.Clear$30,TLccNodeManager.AddNode,TLccNodeManager.AddNodeByClass,TLccNodeManager.LogoutAll,TLccNodeManager.GetNode,TLccNodeManager.GetNodeCount,TLccNodeManager.ExtractNode]
}
/// TLccCanNodeManager = class (TLccNodeManager)
///  [line: 325, column: 3, file: lcc_node_manager]
var TLccCanNodeManager = {
   $ClassName:"TLccCanNodeManager",$Parent:TLccNodeManager
   ,$Init:function ($) {
      TLccNodeManager.$Init($);
   }
   /// constructor TLccCanNodeManager.Create(AnOwner: TComponent)
   ///  [line: 350, column: 32, file: lcc_node_manager]
   ,Create$199:function(Self, AnOwner) {
      TLccNodeManager.Create$198(Self,AnOwner);
      return Self
   }
   /// destructor TLccCanNodeManager.Destroy()
   ///  [line: 355, column: 31, file: lcc_node_manager]
   ,Destroy:function(Self) {
      TLccNodeManager.Destroy(Self);
   }
   /// procedure TLccCanNodeManager.DoLogInNode(LccNode: TLccNode)
   ///  [line: 368, column: 30, file: lcc_node_manager]
   ,DoLogInNode:function(Self, LccNode) {
      TLccNodeManager.DoLogInNode(Self,LccNode);
      TLccAliasServer.AddMapping(Self.FAliasServer,LccNode.FNodeID$1.slice(0),$As(LccNode,TLccCanNode).FAliasID);
   }
   /// procedure TLccCanNodeManager.DoLogOutNode(LccNode: TLccNode)
   ///  [line: 374, column: 30, file: lcc_node_manager]
   ,DoLogOutNode:function(Self, LccNode) {
      TLccNodeManager.DoLogOutNode(Self,LccNode);
      TLccAliasServer.RemoveMapping(Self.FAliasServer,$As(LccNode,TLccCanNode).FAliasID);
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,DoLogInNode$:function($){return $.ClassType.DoLogInNode.apply($.ClassType, arguments)}
   ,DoLogOutNode$:function($){return $.ClassType.DoLogOutNode.apply($.ClassType, arguments)}
};
TLccCanNodeManager.$Intf={
   INodeManagerCallbacks:[TLccNodeManager.DoAliasIDChanged,TLccNodeManager.DoCANAliasMapReset,TLccNodeManager.DoCDIRead,TLccNodeManager.DoConfigMemAddressSpaceInfoReply,TLccNodeManager.DoConfigMemOptionsReply,TLccNodeManager.DoConfigMemReadReply,TLccNodeManager.DoConfigMemWriteReply,TLccNodeManager.DoCreateLccNode,TLccNodeManager.DoConsumerIdentify,TLccNodeManager.DoConsumerIdentified,TLccNodeManager.DoDatagramReply,TLccNodeManager.DoDestroyLccNode,TLccCanNodeManager.DoLogInNode,TLccCanNodeManager.DoLogOutNode,TLccNodeManager.DoFDI,TLccNodeManager.DoFunctionConfiguration,TLccNodeManager.DoInitializationComplete,TLccNodeManager.DoNodeIDChanged,TLccNodeManager.DoOptionalInteractionRejected,TLccNodeManager.DoProducerIdentify,TLccNodeManager.DoProducerIdentified,TLccNodeManager.DoProtocolIdentifyReply,TLccNodeManager.DoRemoteButtonReply,TLccNodeManager.DoSimpleNodeIdentReply,TLccNodeManager.DoSimpleTrainNodeIdentReply,TLccNodeManager.DoTractionEmergencyStop,TLccNodeManager.DoTractionSpeedSet,TLccNodeManager.DoTractionFunctionSet,TLccNodeManager.DoTractionQuerySpeed,TLccNodeManager.DoTractionQueryFunction,TLccNodeManager.DoTractionControllerConfig,TLccNodeManager.DoTractionListenerConfig,TLccNodeManager.DoTractionManage,TLccNodeManager.DoVerifiedNodeID]
   ,INodeManager:[TLccNodeManager.Clear$30,TLccNodeManager.AddNode,TLccNodeManager.AddNodeByClass,TLccNodeManager.LogoutAll,TLccNodeManager.GetNode,TLccNodeManager.GetNodeCount,TLccNodeManager.ExtractNode]
}
/// TLccCommandStationNode = class (TLccCanNode)
///  [line: 79, column: 3, file: lcc_node_commandstation]
var TLccCommandStationNode = {
   $ClassName:"TLccCommandStationNode",$Parent:TLccCanNode
   ,$Init:function ($) {
      TLccCanNode.$Init($);
   }
   /// function TLccCommandStationNode.AddTrain(ARoadName: String; ARoadNumber: String; ADccAddress: Word; ALongAddress: Boolean; ASpeedStep: TLccDccSpeedStep) : TLccTrainCanNode
   ///  [line: 104, column: 33, file: lcc_node_commandstation]
   ,AddTrain:function(Self, ARoadName, ARoadNumber, ADccAddress, ALongAddress, ASpeedStep) {
      var Result = null;
      Result = $As($AsIntf(Self.FNodeManager,"INodeManager")[2]("",TLccTrainCanNode,false),TLccTrainCanNode);
      if (Result) {
         TLccTrainCanNode.SetName$6(Result,ARoadName);
         TLccTrainCanNode.SetRoadNumber(Result,ARoadNumber);
         TLccTrainCanNode.SetDccAddress(Result,ADccAddress);
         TLccTrainCanNode.SetDccLongAddress(Result,ALongAddress);
         TLccTrainCanNode.SetSpeedStep(Result,ASpeedStep);
      }
      return Result
   }
   /// procedure TLccCommandStationNode.BeforeLogin()
   ///  [line: 119, column: 34, file: lcc_node_commandstation]
   ,BeforeLogin:function(Self) {
      Self.FProtocolSupportedProtocols.FConfigurationDefinitionInfo = true;
      Self.FProtocolSupportedProtocols.FDatagram = true;
      Self.FProtocolSupportedProtocols.FEventExchange = true;
      Self.FProtocolSupportedProtocols.FSimpleNodeInfo = true;
      Self.FProtocolSupportedProtocols.FAbbreviatedConfigurationDefinitionInfo = true;
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,255,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,254,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,253,true,false,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,252,true,true,true,0,4294967295);
      TProtocolMemoryInfo.Add$21(Self.FProtocolMemoryInfo,251,true,false,true,0,4294967295);
      Self.FProtocolMemoryOptions.FWriteUnderMask = true;
      Self.FProtocolMemoryOptions.FUnAlignedReads = true;
      Self.FProtocolMemoryOptions.FUnAlignedWrites = true;
      Self.FProtocolMemoryOptions.FSupportACDIMfgRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserRead = true;
      Self.FProtocolMemoryOptions.FSupportACDIUserWrite = true;
      Self.FProtocolMemoryOptions.FWriteLenOneByte = true;
      Self.FProtocolMemoryOptions.FWriteLenTwoBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteLenSixyFourBytes = true;
      Self.FProtocolMemoryOptions.FWriteArbitraryBytes = true;
      Self.FProtocolMemoryOptions.FWriteStream = false;
      Self.FProtocolMemoryOptions.FHighSpace = 255;
      Self.FProtocolMemoryOptions.FLowSpace = 249;
   }
   /// procedure TLccCommandStationNode.Creating()
   ///  [line: 166, column: 34, file: lcc_node_commandstation]
   ,Creating:function(Self) {
      TLccCanNode.Creating(Self);
   }
   /// destructor TLccCommandStationNode.Destroy()
   ///  [line: 171, column: 35, file: lcc_node_commandstation]
   ,Destroy:function(Self) {
      TLccCanNode.Destroy(Self);
   }
   /// function TLccCommandStationNode.FindTrainByDccAddress(DccAddress: Word; IsLongAddress: Boolean) : TLccTrainCanNode
   ///  [line: 176, column: 33, file: lcc_node_commandstation]
   ,FindTrainByDccAddress:function(Self, DccAddress$1, IsLongAddress) {
      var Result = null;
      var i$7 = 0,
         LocalNodeManager = null,
         TempTrain = null;
      Result = null;
      LocalNodeManager = $AsIntf(Self.FNodeManager,"INodeManager");
      var $temp176;
      for(i$7=0,$temp176=LocalNodeManager[5]();i$7<$temp176;i$7++) {
         if ($Is(LocalNodeManager[4](i$7),TLccTrainCanNode)) {
            TempTrain = $As(LocalNodeManager[4](i$7),TLccTrainCanNode);
            if (DccAddress$1 == TempTrain.FDccAddress && IsLongAddress == TempTrain.FDccLongAddress) {
               Result = TempTrain;
               break;
            }
         }
      }
      return Result
   }
   /// function TLccCommandStationNode.FindTrainByLccNodeID(ANodeID: TNodeID) : TLccTrainCanNode
   ///  [line: 198, column: 33, file: lcc_node_commandstation]
   ,FindTrainByLccNodeID:function(Self, ANodeID) {
      var Result = null;
      var i$7 = 0,
         LocalNodeManager = null,
         LocalTrainNode = null;
      Result = null;
      LocalNodeManager = $AsIntf(Self.FNodeManager,"INodeManager");
      var $temp177;
      for(i$7=0,$temp177=LocalNodeManager[5]();i$7<$temp177;i$7++) {
         if ($Is(LocalNodeManager[4](i$7),TLccTrainCanNode)) {
            LocalTrainNode = $As(LocalNodeManager[4](i$7),TLccTrainCanNode);
            if (EqualNodeID(ANodeID.slice(0),LocalTrainNode.FNodeID$1.slice(0),false)) {
               Result = LocalTrainNode;
               break;
            }
         }
      }
      return Result
   }
   /// function TLccCommandStationNode.GetCdiFile() : String
   ///  [line: 220, column: 33, file: lcc_node_commandstation]
   ,GetCdiFile:function(Self) {
      return "<?xml version=\"1.0\" encoding=\"utf-8\"?><?xml-stylesheet type=\"text\/xsl\" href=\"http:\/\/openlcb.org\/trunk\/prototypes\/xml\/xslt\/cdi.xsl\"?><cdi xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http:\/\/openlcb.org\/trunk\/specs\/schema\/cdi.xsd\"><identification><manufacturer>Mustangpeak<\/manufacturer><model>CSN1000<\/model><hardwareVersion>1.0.0.0<\/hardwareVersion><softwareVersion>1.0.0.0<\/softwareVersion><\/identification><segment origin=\"1\" space=\"253\"><name>User<\/name><description>User defined information<\/description><group><name>User Data<\/name><description>Add your own unique node info here<\/description><string size=\"63\"><name>User Name<\/name><\/string><string size=\"64\"><name>User Description<\/name><\/string><\/group><\/segment><\/cdi>";
   }
   /// function TLccCommandStationNode.ProcessMessage(SourceMessage: TLccMessage) : Boolean
   ///  [line: 225, column: 33, file: lcc_node_commandstation]
   ,ProcessMessage$1:function(Self, SourceMessage) {
      var Result = false;
      var NMRA_SpeedStep = { v : 0 },
         SearchStr = "",
         SearchDccAddress = 0,
         ForceAllocate = false,
         ExactMatchOnly = false,
         MatchAddressOnly = false,
         LongAddressOnly = { v : false },
         IsDCC = false,
         ATrain = null,
         ReturnEvent = {v:[0,0,0,0,0,0,0,0]},
         TrackProtocolFlags = 0,
         SearchData$1 = { v : 0 };
      Result = TLccCanNode.ProcessMessage$1(Self,SourceMessage);
      SearchData$1.v = 0;
      if (TLccMessage.GetHasDestination(SourceMessage)) {
         if (!(TLccNode.IsDestinationEqual$(Self,SourceMessage))) {
            return Result;
         }
      }
      switch (SourceMessage.FMTI) {
         case 256 :
            ATrain = TLccCommandStationNode.FindTrainByLccNodeID(Self,SourceMessage.FSourceID.slice(0));
            if (ATrain) {
               ReturnEvent.v = ATrain.FSearchEvent.slice(0);
               TLccMessage.LoadProducerIdentified(Self.FWorkerMessage$2,ATrain.FNodeID$1.slice(0),ATrain.FAliasID,ReturnEvent,1);
               Self.FSendMessageFunc$1(ATrain,Self.FWorkerMessage$2);
            }
            break;
         case 2324 :
            if (TLccMessage.TractionSearchIsEvent(SourceMessage)) {
               SearchStr = TLccMessage.TractionSearchDecodeSearchString(SourceMessage);
               if (SearchStr != "") {
                  SearchDccAddress = parseInt(SearchStr,10);
                  LongAddressOnly.v = false;
                  NMRA_SpeedStep.v = 1;
                  if (TLccMessage.TractionSearchIsProtocolAny(SourceMessage)) {
                     NMRA_SpeedStep.v = 1;
                     LongAddressOnly.v = false;
                     IsDCC = true;
                  } else if (TLccMessage.TractionSearchIsProtocolDCC(SourceMessage,LongAddressOnly,NMRA_SpeedStep)) {
                     if (!NMRA_SpeedStep.v) {
                        NMRA_SpeedStep.v = 1;
                     }
                     IsDCC = true;
                  } else {
                     IsDCC = false;
                  }
                  if (IsDCC) {
                     ForceAllocate = TLccMessage.TractionSearchIsForceAllocate(SourceMessage);
                     ExactMatchOnly = TLccMessage.TractionSearchIsExactMatchOnly(SourceMessage);
                     MatchAddressOnly = TLccMessage.TractionSearchIsAddressMatchOnly(SourceMessage);
                     TrackProtocolFlags = TLccMessage.TractionSearchEncodeNMRA(SourceMessage.ClassType,LongAddressOnly.v,NMRA_SpeedStep.v,ForceAllocate,ExactMatchOnly,MatchAddressOnly);
                     TLccMessage.TractionSearchEncodeSearchString(Self.FWorkerMessage$2.ClassType,SearchStr,TrackProtocolFlags,SearchData$1);
                     TLccMessage.LoadTractionSearch(Self.FWorkerMessage$2,Self.FNodeID$1.slice(0),Self.FAliasID,SearchData$1.v);
                     ReturnEvent.v = TLccMessage.ExtractDataBytesAsEventID(Self.FWorkerMessage$2,0);
                     ATrain = TLccCommandStationNode.FindTrainByDccAddress(Self,SearchDccAddress,LongAddressOnly.v);
                     if (ATrain === null && ForceAllocate) {
                        ATrain = TLccCommandStationNode.AddTrain(Self,"New ATrain",SearchStr,SearchDccAddress,LongAddressOnly.v,NMRA_SpeedStep.v);
                        ATrain.FSearchEvent = ReturnEvent.v.slice(0);
                        TLccNode.Login$(ATrain,NULL_NODE_ID.slice(0));
                     } else {
                        if (ATrain) {
                           TLccMessage.LoadProducerIdentified(Self.FWorkerMessage$2,ATrain.FNodeID$1.slice(0),ATrain.FAliasID,ReturnEvent,1);
                           Self.FSendMessageFunc$1(ATrain,Self.FWorkerMessage$2);
                        }
                     }
                  }
               }
            }
            break;
      }
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,BeforeLogin$:function($){return $.ClassType.BeforeLogin($)}
   ,Create$201:TLccCanNode.Create$201
   ,GetAlias:TLccCanNode.GetAlias
   ,GetCdiFile$:function($){return $.ClassType.GetCdiFile($)}
   ,IsDestinationEqual:TLccCanNode.IsDestinationEqual
   ,Login:TLccCanNode.Login
   ,Logout:TLccCanNode.Logout
   ,On_800msTimer:TLccCanNode.On_800msTimer
   ,ProcessMessage$1$:function($){return $.ClassType.ProcessMessage$1.apply($.ClassType, arguments)}
   ,Creating$:function($){return $.ClassType.Creating($)}
};
/// TLccAliasServer = class (TObject)
///  [line: 62, column: 3, file: lcc_alias_server]
var TLccAliasServer = {
   $ClassName:"TLccAliasServer",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAliasSortedMap = $.FNodeIDSortedMap = $.FOnAddMapping = $.FOnDeleteMapping = null;
      $.FIsDirty = false;
   }
   /// function TLccAliasServer.AddMapping(ANodeID: TNodeID; AnAliasID: Word) : TLccAliasMap
   ///  [line: 189, column: 26, file: lcc_alias_server]
   ,AddMapping:function(Self, ANodeID, AnAliasID) {
      var Result = null;
      var MapIndex = { v : 0 };
      MapIndex.v = -1;
      Result = TLccAliasServer.FindInAliasSortedMap(Self,AnAliasID,MapIndex);
      if (Result) {
         if (!(EqualNodeID(ANodeID.slice(0),Result.FNodeID$3.slice(0),false))) {
            TLccAliasServer.RemoveMappingByAliasID(Self,AnAliasID);
            Result = null;
         }
      }
      if (!Result) {
         Result = TLccAliasMap.Create$211($New(TLccAliasMap),ANodeID.slice(0),AnAliasID);
         TObjectList.Add$1(Self.FAliasSortedMap,Result);
         TObjectList.Add$1(Self.FNodeIDSortedMap,Result);
         Self.FIsDirty = true;
         TLccAliasServer.DoAddMapping(Self);
      }
      return Result
   }
   /// procedure TLccAliasServer.Clear()
   ///  [line: 342, column: 27, file: lcc_alias_server]
   ,Clear$34:function(Self) {
      TObjectList.Clear$8(Self.FNodeIDSortedMap);
      TObjectList.Clear$8(Self.FAliasSortedMap);
      Self.FIsDirty = false;
      TLccAliasServer.DoDeleteMapping(Self);
   }
   /// constructor TLccAliasServer.Create()
   ///  [line: 320, column: 29, file: lcc_alias_server]
   ,Create$210:function(Self) {
      Self.FAliasSortedMap = TObjectList.Create$127($New(TObjectList));
      Self.FNodeIDSortedMap = TObjectList.Create$127($New(TObjectList));
      return Self
   }
   /// destructor TLccAliasServer.Destroy()
   ///  [line: 335, column: 28, file: lcc_alias_server]
   ,Destroy:function(Self) {
      FreeAndNil(Self.FNodeIDSortedMap);
      FreeAndNil(Self.FAliasSortedMap);
      TObject.Destroy(Self);
   }
   /// procedure TLccAliasServer.DoAddMapping()
   ///  [line: 350, column: 27, file: lcc_alias_server]
   ,DoAddMapping:function(Self) {
      if (Self.FOnAddMapping) {
         Self.FOnAddMapping(Self);
      }
   }
   /// procedure TLccAliasServer.DoDeleteMapping()
   ///  [line: 356, column: 27, file: lcc_alias_server]
   ,DoDeleteMapping:function(Self) {
      if (Self.FOnDeleteMapping) {
         Self.FOnDeleteMapping(Self);
      }
   }
   /// function TLccAliasServer.FindInAliasSortedMap(AnAliasID: Word; var MapIndex: Integer) : TLccAliasMap
   ///  [line: 297, column: 26, file: lcc_alias_server]
   ,FindInAliasSortedMap:function(Self, AnAliasID, MapIndex) {
      var Result = null;
      var i$7 = 0;
      Result = null;
      if (AnAliasID > 0) {
         TLccAliasServer.SortMaps(Self);
         MapIndex.v = -1;
         var $temp178;
         for(i$7=0,$temp178=TObjectList.GetCount$1(Self.FAliasSortedMap);i$7<$temp178;i$7++) {
            if (AnAliasID == $As(TObjectList.GetItem$14(Self.FAliasSortedMap,i$7),TLccAliasMap).FAliasID$2) {
               Result = $As(TObjectList.GetItem$14(Self.FAliasSortedMap,i$7),TLccAliasMap);
               MapIndex.v = i$7;
               break;
            }
         }
      }
      return Result
   }
   /// function TLccAliasServer.FindInNodeIDSortedMap(ANodeID: TNodeID; var MapIndex: Integer) : TLccAliasMap
   ///  [line: 274, column: 26, file: lcc_alias_server]
   ,FindInNodeIDSortedMap:function(Self, ANodeID, MapIndex) {
      var Result = null;
      var i$7 = 0;
      Result = null;
      if (!(EqualNodeID(NULL_NODE_ID.slice(0),ANodeID.slice(0),true))) {
         TLccAliasServer.SortMaps(Self);
         MapIndex.v = -1;
         var $temp179;
         for(i$7=0,$temp179=TObjectList.GetCount$1(Self.FNodeIDSortedMap);i$7<$temp179;i$7++) {
            if (EqualNodeID(ANodeID.slice(0),$As(TObjectList.GetItem$14(Self.FNodeIDSortedMap,i$7),TLccAliasMap).FNodeID$3.slice(0),false)) {
               Result = $As(TObjectList.GetItem$14(Self.FNodeIDSortedMap,i$7),TLccAliasMap);
               MapIndex.v = i$7;
               break;
            }
         }
      }
      return Result
   }
   /// procedure TLccAliasServer.RemoveMapping(AnAliasID: Word)
   ///  [line: 367, column: 27, file: lcc_alias_server]
   ,RemoveMapping:function(Self, AnAliasID) {
      TLccAliasServer.RemoveMappingByAliasID(Self,AnAliasID);
   }
   /// function TLccAliasServer.RemoveMappingByAliasID(AnAliasID: Word) : Boolean
   ///  [line: 239, column: 26, file: lcc_alias_server]
   ,RemoveMappingByAliasID:function(Self, AnAliasID) {
      var Result = false;
      var MapIndexInAliasSortedMap = { v : 0 },
         MapIndexInNodeIDSortedMap = { v : 0 },
         AliasMap = null;
      Result = false;
      MapIndexInAliasSortedMap.v = -1;
      MapIndexInNodeIDSortedMap.v = -1;
      AliasMap = TLccAliasServer.FindInAliasSortedMap(Self,AnAliasID,MapIndexInAliasSortedMap);
      if (AliasMap) {
         TLccAliasServer.FindInNodeIDSortedMap(Self,AliasMap.FNodeID$3.slice(0),MapIndexInNodeIDSortedMap);
         if (MapIndexInNodeIDSortedMap.v > -1) {
            TObjectList.Remove$1(Self.FNodeIDSortedMap,MapIndexInNodeIDSortedMap.v);
         }
         if (MapIndexInAliasSortedMap.v > -1) {
            TObjectList.Remove$1(Self.FAliasSortedMap,MapIndexInAliasSortedMap.v);
         }
         TLccAliasServer.DoDeleteMapping(Self);
         Result = true;
      }
      return Result
   }
   /// procedure TLccAliasServer.SortMaps()
   ///  [line: 385, column: 27, file: lcc_alias_server]
   ,SortMaps:function(Self) {
      if (Self.FIsDirty) {
         TObjectList.Sort$4(Self.FAliasSortedMap,SortFuncAlias);
         TObjectList.Sort$4(Self.FNodeIDSortedMap,SortFuncNodeID);
         Self.FIsDirty = false;
      }
   }
   /// function TLccAliasServer.ValidateAlias(AnAlias: Word) : Boolean
   ///  [line: 372, column: 26, file: lcc_alias_server]
   ,ValidateAlias:function(Self, AnAlias) {
      var Result = false;
      var MapIndex = { v : 0 };
      Result = true;
      if (AnAlias) {
         MapIndex.v = -1;
         Result = TLccAliasServer.FindInAliasSortedMap(Self,AnAlias,MapIndex)!==null;
      }
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
};
/// TLccAliasMap = class (TObject)
///  [line: 49, column: 3, file: lcc_alias_server]
var TLccAliasMap = {
   $ClassName:"TLccAliasMap",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FAliasID$2 = 0;
      $.FNodeID$3 = [0,0];
   }
   /// constructor TLccAliasMap.Create(ANodeID: TNodeID; AnAliasID: Word)
   ///  [line: 116, column: 26, file: lcc_alias_server]
   ,Create$211:function(Self, ANodeID, AnAliasID) {
      Self.FAliasID$2 = AnAliasID;
      Self.FNodeID$3[0] = ANodeID[0];
      Self.FNodeID$3[1] = ANodeID[1];
      return Self
   }
   ,Destroy:TObject.Destroy
};
function SortFuncAlias(Item1, Item2) {
   var Result = 0;
   var Mapping1 = null,
      Mapping2 = null;
   Mapping1 = $As(Item1,TLccAliasMap);
   Mapping2 = $As(Item2,TLccAliasMap);
   if (Mapping1.FAliasID$2 > Mapping2.FAliasID$2) {
      Result = 1;
   } else if (Mapping1.FAliasID$2 < Mapping2.FAliasID$2) {
      Result = -1;
   } else {
      Result = 0;
   }
   return Result
};
function SortFuncNodeID(Item1, Item2) {
   var Result = 0;
   var Mapping1$1 = null,
      Mapping2$1 = null;
   Mapping1$1 = $As(Item1,TLccAliasMap);
   Mapping2$1 = $As(Item2,TLccAliasMap);
   if (Mapping1$1.FNodeID$3[1] > Mapping2$1.FNodeID$3[1]) {
      Result = 1;
   } else if (Mapping1$1.FNodeID$3[1] < Mapping2$1.FNodeID$3[1]) {
      Result = -1;
   } else if (Mapping1$1.FNodeID$3[0] > Mapping2$1.FNodeID$3[0]) {
      Result = 1;
   } else if (Mapping1$1.FNodeID$3[0] < Mapping2$1.FNodeID$3[0]) {
      Result = -1;
   } else {
      Result = 0;
   }
   return Result
};
/// TTabSettingsForm = class (TW3Form)
///  [line: 48, column: 3, file: TabSettingsForm]
var TTabSettingsForm = {
   $ClassName:"TTabSettingsForm",$Parent:TW3Form
   ,$Init:function ($) {
      TW3Form.$Init($);
      $.ControllerManager = $.FSocket = $.MessageList = $.W3ButtonClearMessages = $.W3ButtonConnection = $.W3ButtonStartNode = $.W3CheckBoxLogging = $.W3CheckBoxTcp = $.W3EditBoxIpAddress = $.W3EditBoxIpPort = $.W3Label1 = $.W3Label2 = $.W3LabelAlias = $.W3LabelIpAddress = $.W3LabelIpPort = $.W3LabelNodeID = $.W3ListBoxLog = $.W3Panel1 = null;
   }
   /// procedure TTabSettingsForm.InitializeForm()
   ///  [line: 73, column: 28, file: TabSettingsForm]
   ,InitializeForm:function(Self) {
      TW3CustomForm.InitializeForm(Self);
      Self.ControllerManager = GetControllerManager();
      Self.MessageList = TObject.Create($New(TStringList));
   }
   /// procedure TTabSettingsForm.InitializeObject()
   ///  [line: 84, column: 28, file: TabSettingsForm]
   ,InitializeObject:function(Self) {
      var LccMessage = null;
      TW3CustomForm.InitializeObject(Self);
      TW3ControlTracker.RegisterUnderConstruction(TW3ControlTracker,Self);
      $SetInc(Self.FComponentState,1,0,11);
      try {
         TW3CustomForm.SetCaption(Self,"Settings");
         TW3TagContainer.SetComponentName(Self,"TabSettingsForm");
         TW3MovableControl.SetAnchors(Self,[15]);
         Self.W3Panel1 = TW3TagContainer.Create$81$($New(TW3Panel),Self);
         TW3OwnedObject.InitAsync$(Self.W3Panel1,function () {
            TW3MovableControl.SetAlign$(Self.W3Panel1,1);
            TW3MovableControl.SetBounds$(Self.W3Panel1,0,0,320,272);
            TW3TagContainer.SetComponentName(Self.W3Panel1,"W3Panel1");
            Self.W3EditBoxIpAddress = TW3TagContainer.Create$81$($New(TW3EditBox),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3EditBoxIpAddress,function () {
               TW3MovableControl.SetBounds$(Self.W3EditBoxIpAddress,96,8,208,32);
               TW3EditBox.SetText$2(Self.W3EditBoxIpAddress,"10.0.3.151");
               TW3TagContainer.SetComponentName(Self.W3EditBoxIpAddress,"W3EditBoxIpAddress");
            });
            Self.W3EditBoxIpPort = TW3TagContainer.Create$81$($New(TW3EditBox),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3EditBoxIpPort,function () {
               TW3MovableControl.SetBounds$(Self.W3EditBoxIpPort,96,48,208,32);
               TW3EditBox.SetText$2(Self.W3EditBoxIpPort,"12022");
               TW3TagContainer.SetComponentName(Self.W3EditBoxIpPort,"W3EditBoxIpPort");
            });
            Self.W3LabelIpAddress = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3LabelIpAddress,function () {
               TW3MovableControl.SetBounds$(Self.W3LabelIpAddress,16,8,80,32);
               TW3Label.SetCaption$2$(Self.W3LabelIpAddress,"IP Address");
               TW3TagContainer.SetComponentName(Self.W3LabelIpAddress,"W3LabelIpAddress");
            });
            Self.W3LabelIpPort = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3LabelIpPort,function () {
               TW3MovableControl.SetBounds$(Self.W3LabelIpPort,16,48,80,32);
               TW3Label.SetCaption$2$(Self.W3LabelIpPort,"IP Port");
               TW3TagContainer.SetComponentName(Self.W3LabelIpPort,"W3LabelIpPort");
            });
            Self.W3CheckBoxTcp = TW3TagContainer.Create$81$($New(TW3CheckBox),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3CheckBoxTcp,function () {
               TW3MovableControl.SetBounds$(Self.W3CheckBoxTcp,16,80,128,32);
               TW3Label.SetCaption$2$(Self.W3CheckBoxTcp,"Use Pure TCP");
               TW3TagContainer.SetComponentName(Self.W3CheckBoxTcp,"W3CheckBoxTcp");
            });
            Self.W3ButtonStartNode = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonStartNode,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonStartNode,160,118,144,44);
               TW3Button.SetCaption$6$(Self.W3ButtonStartNode,"Start Node");
               TW3TagContainer.SetComponentName(Self.W3ButtonStartNode,"W3ButtonStartNode");
               TW3CustomControl._setMouseClick(Self.W3ButtonStartNode,$Event1(Self,TTabSettingsForm.W3ButtonStartNodeClick));
               TW3CustomControl.SetEnabled$1$(Self.W3ButtonStartNode,false);
            });
            Self.W3Label1 = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3Label1,function () {
               TW3MovableControl.SetBounds$(Self.W3Label1,16,160,80,32);
               TW3Label.SetCaption$2$(Self.W3Label1,"Node ID");
               TW3TagContainer.SetComponentName(Self.W3Label1,"W3Label1");
            });
            Self.W3Label2 = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3Label2,function () {
               TW3MovableControl.SetBounds$(Self.W3Label2,16,192,72,32);
               TW3Label.SetCaption$2$(Self.W3Label2,"Alias");
               TW3TagContainer.SetComponentName(Self.W3Label2,"W3Label2");
            });
            Self.W3LabelNodeID = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3LabelNodeID,function () {
               TW3MovableControl.SetBounds$(Self.W3LabelNodeID,128,160,128,32);
               TW3Label.SetCaption$2$(Self.W3LabelNodeID,"None");
               TW3TagContainer.SetComponentName(Self.W3LabelNodeID,"W3LabelNodeID");
            });
            Self.W3LabelAlias = TW3TagContainer.Create$81$($New(TW3Label),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3LabelAlias,function () {
               TW3MovableControl.SetBounds$(Self.W3LabelAlias,128,192,128,32);
               TW3Label.SetCaption$2$(Self.W3LabelAlias,"None");
               TW3TagContainer.SetComponentName(Self.W3LabelAlias,"W3LabelAlias");
            });
            Self.W3CheckBoxLogging = TW3TagContainer.Create$81$($New(TW3CheckBox),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3CheckBoxLogging,function () {
               TW3MovableControl.SetBounds$(Self.W3CheckBoxLogging,8,224,142,32);
               TW3Label.SetCaption$2$(Self.W3CheckBoxLogging,"Log Messages");
               TW3TagContainer.SetComponentName(Self.W3CheckBoxLogging,"W3CheckBoxLogging");
            });
            Self.W3ButtonClearMessages = TW3TagContainer.Create$81$($New(TW3Button),Self.W3Panel1);
            TW3OwnedObject.InitAsync$(Self.W3ButtonClearMessages,function () {
               TW3MovableControl.SetBounds$(Self.W3ButtonClearMessages,198,224,104,40);
               TW3Button.SetCaption$6$(Self.W3ButtonClearMessages,"Clear Log");
               TW3TagContainer.SetComponentName(Self.W3ButtonClearMessages,"W3ButtonClearMessages");
               TW3CustomControl._setMouseClick(Self.W3ButtonClearMessages,$Event1(Self,TTabSettingsForm.W3ButtonClearMessagesClick));
            });
         });
         Self.W3ButtonConnection = TW3TagContainer.Create$81$($New(TW3Button),Self);
         TW3OwnedObject.InitAsync$(Self.W3ButtonConnection,function () {
            TW3MovableControl.SetBounds$(Self.W3ButtonConnection,16,121,144,44);
            TW3Button.SetCaption$6$(Self.W3ButtonConnection,"Connect");
            TW3TagContainer.SetComponentName(Self.W3ButtonConnection,"W3ButtonConnection");
            TW3CustomControl._setMouseClick(Self.W3ButtonConnection,$Event1(Self,TTabSettingsForm.W3ButtonConnectionClick));
         });
         Self.W3ListBoxLog = TW3TagContainer.Create$81$($New(TW3ListBox),Self);
         TW3OwnedObject.InitAsync$(Self.W3ListBoxLog,function () {
            TW3MovableControl.SetAlign$(Self.W3ListBoxLog,5);
            TW3MovableControl.SetBounds$(Self.W3ListBoxLog,0,264,320,376);
            Self.W3ListBoxLog.FItemHeight$1 = 16;
            TW3TagContainer.SetComponentName(Self.W3ListBoxLog,"W3ListBoxLog");
         });
      } finally {
         TW3ControlTracker.RegisterObjectReady(TW3ControlTracker,Self);
      }
      Self.FSocket = TW3ErrorObject.Create$71$($New(TW3WebSocket));
      Self.FSocket.OnError = function (Sender) {
         alert("Socket Error");
      };
      Self.FSocket.OnMessage = function (Sender, Message$2) {
         LccMessage = TLccMessage.Create$197($New(TLccMessage));
         try {
            TLccMessage.LoadByGridConnectStr(LccMessage,Message$2.mdText);
            if (TW3CheckBox.GetChecked(Self.W3CheckBoxLogging)) {
               TW3ListBox.Add$16(Self.W3ListBoxLog,"R: " + Trim$_String_(Message$2.mdText));
            }
            WriteLn("R: " + Message$2.mdText);
            if (Self.ControllerManager) {
               TLccNodeManager.ProcessMessage(Self.ControllerManager.NodeManager$1,LccMessage);
            }
         } finally {
            TObject.Free(LccMessage);
         }
      };
   }
   /// procedure TTabSettingsForm.Resize()
   ///  [line: 113, column: 28, file: TabSettingsForm]
   ,Resize:function(Self) {
      TW3MovableControl.Resize(Self);
   }
   /// procedure TTabSettingsForm.StartNode(DoStart: Boolean)
   ///  [line: 213, column: 28, file: TabSettingsForm]
   ,StartNode:function(Self, DoStart) {
      if (DoStart) {
         TControllerManager.CreateController(Self.ControllerManager);
         TW3Button.SetCaption$6$(Self.W3ButtonStartNode,"Stop Node");
      } else {
         TW3Button.SetCaption$6$(Self.W3ButtonStartNode,"Start Node");
         TControllerManager.DestroyController(Self.ControllerManager);
      }
   }
   /// procedure TTabSettingsForm.W3ButtonClearMessagesClick(Sender: TObject)
   ///  [line: 124, column: 28, file: TabSettingsForm]
   ,W3ButtonClearMessagesClick:function(Self, Sender) {
      TW3ListBox.Clear$26(Self.W3ListBoxLog);
   }
   /// procedure TTabSettingsForm.W3ButtonConnectionClick(Sender: TObject)
   ///  [line: 129, column: 28, file: TabSettingsForm]
   ,W3ButtonConnectionClick:function(Self, Sender) {
      var URL$4 = "";
      Self.ControllerManager.NodeManager$1.FOnLccMessageSend = function (Sender$1, LccMessage) {
         var i$7 = 0;
         TStringList.SetText(Self.MessageList,TLccMessage.ConvertToGridConnectStr(LccMessage,"\n",false));
         var $temp180;
         for(i$7=0,$temp180=TStringList.GetCount(Self.MessageList);i$7<$temp180;i$7++) {
            if (TW3CheckBox.GetChecked(Self.W3CheckBoxLogging)) {
               TW3ListBox.Add$16(Self.W3ListBoxLog,"S: " + Trim$_String_(TStringList.GetItem$13(Self.MessageList,i$7)));
            }
            WriteLn("S: " + TStringList.GetItem$13(Self.MessageList,i$7));
            TW3WebSocket.Write$13(Self.FSocket,TStringList.GetItem$13(Self.MessageList,i$7));
         }
      };
      Self.ControllerManager.NodeManager$1.FOnLccNodeAliasIDChanged = function (Sender$1, LccSourceNode) {
         TW3Label.SetCaption$2$(Self.W3LabelAlias,TLccCanNode.GetAliasIDStr($As(LccSourceNode,TLccCanNode)));
      };
      Self.ControllerManager.NodeManager$1.FOnLccNodeIDChanged = function (Sender$1, LccSourceNode) {
         TW3Label.SetCaption$2$(Self.W3LabelNodeID,TLccNode.GetNodeIDStr(LccSourceNode));
      };
      Self.ControllerManager.NodeManager$1.FOnLccNodeDestroy = function (Sender$1, LccSourceNode) {
         TW3Label.SetCaption$2$(Self.W3LabelNodeID,"None");
         TW3Label.SetCaption$2$(Self.W3LabelAlias,"None");
      };
      if (TW3WebSocket.Connected(Self.FSocket)) {
         TTabSettingsForm.StartNode(Self,false);
         TW3WebSocket.Disconnect(Self.FSocket,function (Socket, Success$1) {
            if (Success$1) {
               TW3Button.SetCaption$6$(Self.W3ButtonConnection,"Connect");
               TW3CustomControl.SetEnabled$1$(Self.W3ButtonStartNode,false);
            } else {
               TW3Button.SetCaption$6$(Self.W3ButtonConnection,"Disconnect");
               TW3CustomControl.SetEnabled$1$(Self.W3ButtonStartNode,true);
            }
         });
      } else {
         URL$4 = "ws:\/\/" + TW3EditBox.GetText$3(Self.W3EditBoxIpAddress) + ":" + TW3EditBox.GetText$3(Self.W3EditBoxIpPort);
         try {
            if (TW3CheckBox.GetChecked(Self.W3CheckBoxTcp)) {
               Self.FSocket.BinaryMessageDataType = 0;
            }
            TW3WebSocket.Connect(Self.FSocket,URL$4,["openlcb.websocket"],function (Socket, Success$1) {
               if (Success$1) {
                  TW3Button.SetCaption$6$(Self.W3ButtonConnection,"Disconnect");
                  TW3CustomControl.SetEnabled$1$(Self.W3ButtonStartNode,true);
                  TTabSettingsForm.StartNode(Self,true);
               } else {
                  TW3Button.SetCaption$6$(Self.W3ButtonConnection,"Connect");
                  TW3CustomControl.SetEnabled$1$(Self.W3ButtonStartNode,false);
                  TTabSettingsForm.StartNode(Self,false);
               }
            });
         } catch ($e) {
            alert("Except");
         }
      }
   }
   /// procedure TTabSettingsForm.W3ButtonStartNodeClick(Sender: TObject)
   ///  [line: 119, column: 28, file: TabSettingsForm]
   ,W3ButtonStartNodeClick:function(Self, Sender) {
      TTabSettingsForm.StartNode(Self,!(Self.ControllerManager.FControllerCreated));
   }
   ,Destroy:TW3CustomForm.Destroy
   ,AcceptOwner:TW3OwnedObject.AcceptOwner
   ,Create$11:TW3TagObj.Create$11
   ,InitAsync:TW3CustomForm.InitAsync
   ,IsObjectReady:TW3MovableControl.IsObjectReady
   ,FinalizeObject:TW3CustomControl.FinalizeObject
   ,InitializeObject$:function($){return $.ClassType.InitializeObject($)}
   ,AfterUpdate:TW3MovableControl.AfterUpdate
   ,CreationFlags:TW3TagObj.CreationFlags
   ,HookEvents:TW3CustomControl.HookEvents
   ,MakeElementTagId:TW3TagObj.MakeElementTagId
   ,MakeElementTagObj:TW3TagObj.MakeElementTagObj
   ,Showing:TW3MovableControl.Showing
   ,StyleTagObject:TW3CustomForm.StyleTagObject
   ,UnHookEvents:TW3CustomControl.UnHookEvents
   ,ChildAdded:TW3TagContainer.ChildAdded
   ,ChildRemoved:TW3TagContainer.ChildRemoved
   ,Create$81:TW3CustomForm.Create$81
   ,RegisterChild:TW3TagContainer.RegisterChild
   ,AdjustClientRect:TW3MovableControl.AdjustClientRect
   ,ClientRect:TW3MovableControl.ClientRect
   ,GetHeight:TW3MovableControl.GetHeight
   ,GetWidth:TW3MovableControl.GetWidth
   ,Invalidate:TW3MovableControl.Invalidate
   ,MoveTo:TW3MovableControl.MoveTo
   ,ObjectReady:TW3MovableControl.ObjectReady
   ,Resize$:function($){return $.ClassType.Resize($)}
   ,SetAlign:TW3MovableControl.SetAlign
   ,SetBounds$1:TW3MovableControl.SetBounds$1
   ,SetBounds:TW3MovableControl.SetBounds
   ,SetHeight:TW3MovableControl.SetHeight
   ,SetLeft:TW3MovableControl.SetLeft
   ,SetSize$2:TW3MovableControl.SetSize$2
   ,SetTop:TW3MovableControl.SetTop
   ,SetWidth:TW3MovableControl.SetWidth
   ,CBClick:TW3CustomControl.CBClick
   ,CBKeyUp:TW3CustomControl.CBKeyUp
   ,Dispatch:TW3CustomControl.Dispatch
   ,GetEnabled$1:TW3CustomControl.GetEnabled$1
   ,MouseDown:TW3CustomControl.MouseDown
   ,MouseMove:TW3CustomControl.MouseMove
   ,MouseUp:TW3CustomControl.MouseUp
   ,SetEnabled$1:TW3CustomControl.SetEnabled$1
   ,InitializeForm$:function($){return $.ClassType.InitializeForm($)}
};
TTabSettingsForm.$Intf={
   IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState]
   ,IW3LockObject:[TW3OwnedLockedErrorObject.DisableAlteration$2,TW3OwnedLockedErrorObject.EnableAlteration$2,TW3OwnedLockedErrorObject.GetLockState$2]
   ,IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]
}
/// TWebSocketState enumeration
///  [line: 33, column: 3, file: SmartCL.Net.WebSocket]
var TWebSocketState = [ "stConnecting", "stOpen", "stClosing", "stClosed" ];
/// TWebSocketMessageType enumeration
///  [line: 48, column: 3, file: SmartCL.Net.WebSocket]
var TWebSocketMessageType = [ "wsText", "wsBinary" ];
/// TWebSocketMessageData = record
///  [line: 50, column: 3, file: SmartCL.Net.WebSocket]
function Copy$TWebSocketMessageData(s,d) {
   d.mdType=s.mdType;
   d.mdBinary=s.mdBinary;
   d.mdBlob=s.mdBlob;
   d.mdText=s.mdText;
   return d;
}
function Clone$TWebSocketMessageData($) {
   return {
      mdType:$.mdType,
      mdBinary:$.mdBinary,
      mdBlob:$.mdBlob,
      mdText:$.mdText
   }
}
/// TW3WebSocketBinaryDataType enumeration
///  [line: 64, column: 3, file: SmartCL.Net.WebSocket]
var TW3WebSocketBinaryDataType = [ "wdtArrayBuffer", "wdtBlob" ];
/// TW3WebSocket = class (TW3ErrorObject)
///  [line: 67, column: 3, file: SmartCL.Net.WebSocket]
var TW3WebSocket = {
   $ClassName:"TW3WebSocket",$Parent:TW3ErrorObject
   ,$Init:function ($) {
      TW3ErrorObject.$Init($);
      $.OnError = null;
      $.OnMessage = null;
      $.OnClosed = null;
      $.OnOpen = null;
      $.BinaryMessageDataType = 0;
      $.FConnectStack = [];
      $.FDestroying = false;
      $.FDisconnectStack = [];
      $.FHandle$18 = undefined;
   }
   /// procedure TW3WebSocket.Connect(URL: String; Protocols: array of String; const CB: TWebSocketCallback)
   ///  [line: 313, column: 24, file: SmartCL.Net.WebSocket]
   ,Connect:function(Self, URL$4, Protocols, CB) {
      TW3ErrorObject.ClearLastError$1(Self);
      if (TW3WebSocket.Connected(Self)) {
         TW3WebSocket.Disconnect$1(Self);
      }
      (Self.FHandle$18) = new WebSocket(URL$4, Protocols);
      if (CB) {
         Self.FConnectStack.push(CB);
      }
      switch (Self.BinaryMessageDataType) {
         case 0 :
            Self.FHandle$18.binaryType = "arraybuffer";
            break;
         case 1 :
            Self.FHandle$18.binaryType = "blob";
            break;
      }
      Self.FHandle$18.onclose = $Event1(Self,TW3WebSocket.HandleClosed);
      Self.FHandle$18.onopen = $Event1(Self,TW3WebSocket.HandleOpened);
      Self.FHandle$18.onmessage = $Event1(Self,TW3WebSocket.HandleMessage);
      Self.FHandle$18.onerror = $Event1(Self,TW3WebSocket.HandleError);
   }
   /// function TW3WebSocket.Connected() : Boolean
   ///  [line: 174, column: 23, file: SmartCL.Net.WebSocket]
   ,Connected:function(Self) {
      return TW3WebSocket.SocketState(Self) == 1;
   }
   /// constructor TW3WebSocket.Create()
   ///  [line: 128, column: 26, file: SmartCL.Net.WebSocket]
   ,Create$71:function(Self) {
      TW3ErrorObject.Create$71(Self);
      Self.BinaryMessageDataType = 0;
      Self.FOptions$1.ThrowExceptions = false;
      return Self
   }
   /// destructor TW3WebSocket.Destroy()
   ///  [line: 142, column: 25, file: SmartCL.Net.WebSocket]
   ,Destroy:function(Self) {
      Self.FDestroying = true;
      if (Self.FHandle$18) {
         try {
            TW3WebSocket.Disconnect$1(Self);
         } catch ($e) {
            /* null */
         }
      }
      TW3ErrorObject.Destroy(Self);
   }
   /// procedure TW3WebSocket.Disconnect()
   ///  [line: 345, column: 24, file: SmartCL.Net.WebSocket]
   ,Disconnect$1:function(Self) {
      TW3ErrorObject.ClearLastError$1(Self);
      if (TW3WebSocket.Connected(Self)) {
         try {
            Self.FHandle$18.close();
         } finally {
            Self.FHandle$18 = undefined;
         }
      }
   }
   /// procedure TW3WebSocket.Disconnect(const CB: TWebSocketCallback)
   ///  [line: 358, column: 24, file: SmartCL.Net.WebSocket]
   ,Disconnect:function(Self, CB) {
      TW3ErrorObject.ClearLastError$1(Self);
      if (TW3WebSocket.Connected(Self)) {
         if (CB) {
            Self.FDisconnectStack.push(CB);
         }
         TW3WebSocket.Disconnect$1(Self);
      }
   }
   /// procedure TW3WebSocket.HandleClosed(Ev: JWebSocketCloseEvent)
   ///  [line: 179, column: 24, file: SmartCL.Net.WebSocket]
   ,HandleClosed:function(Self, Ev) {
      var x$42 = 0;
      if (Self === null) {
         return;
      }
      if (Self.FDestroying) {
         return;
      }
      try {
         var $temp181;
         for(x$42=0,$temp181=Self.FDisconnectStack.length;x$42<$temp181;x$42++) {
            try {
               Self.FDisconnectStack[x$42](Self,true);
            } catch ($e) {
               var e$1 = $W($e);
               /* null */
            }
         }
      } finally {
         Self.FDisconnectStack.length=0;
         if (Self.OnClosed) {
            Self.OnClosed(Self);
         }
      }
   }
   /// procedure TW3WebSocket.HandleError(Event: Variant)
   ///  [line: 295, column: 24, file: SmartCL.Net.WebSocket]
   ,HandleError:function(Self, Event$3) {
      TW3ErrorObject.SetLastError$1(Self,"internal websocket error");
      if (Self.OnError) {
         Self.OnError(Self);
      }
   }
   /// procedure TW3WebSocket.HandleMessage(Event: Variant)
   ///  [line: 228, column: 24, file: SmartCL.Net.WebSocket]
   ,HandleMessage:function(Self, Event$3) {
      var ResData = {mdType:0,mdBinary:null,mdBlob:null,mdText:""},
         RawData = null,
         mStream = null;
      if ((!Event$3)) {
         Event$3 = event;
      }
      if (Event$3) {
         if ((!Event$3.data)) {
            return;
         }
      } else {
         return;
      }
      if (TW3VariantHelper$Isstring(Event$3.data)) {
         ResData.mdType = 0;
         ResData.mdBinary = null;
         ResData.mdText = String(Event$3.data);
         if (Self.OnMessage) {
            Self.OnMessage(Self,Clone$TWebSocketMessageData(ResData));
         }
         return;
      }
      switch (Self.BinaryMessageDataType) {
         case 0 :
            RawData = new Uint8Array(Event$3.data);
            mStream = TMemoryStream.Create$72($New(TMemoryStream));
            TStream.Write(mStream,TDatatype.TypedArrayToBytes(TDatatype,RawData));
            TStream.SetPosition$(mStream,0);
            ResData.mdBinary = mStream;
            ResData.mdBlob = null;
            break;
         case 1 :
            ResData.mdBlob = Event$3.data;
            ResData.mdBinary = null;
            break;
      }
      ResData.mdType = 1;
      ResData.mdText = "";
      if (Self.OnMessage) {
         Self.OnMessage(Self,Clone$TWebSocketMessageData(ResData));
      }
   }
   /// procedure TW3WebSocket.HandleOpened(Ev: JEvent)
   ///  [line: 206, column: 24, file: SmartCL.Net.WebSocket]
   ,HandleOpened:function(Self, Ev) {
      var x$42 = 0;
      try {
         var $temp182;
         for(x$42=0,$temp182=Self.FConnectStack.length;x$42<$temp182;x$42++) {
            try {
               Self.FConnectStack[x$42](Self,true);
            } catch ($e) {
               var e$1 = $W($e);
               /* null */
            }
         }
      } finally {
         Self.FConnectStack.length=0;
         if (Self.OnOpen) {
            Self.OnOpen(Self);
         }
      }
   }
   /// function TW3WebSocket.SocketState() : TWebSocketState
   ///  [line: 168, column: 23, file: SmartCL.Net.WebSocket]
   ,SocketState:function(Self) {
      var Result = 0;
      if (Self.FHandle$18) {
         Result = Self.FHandle$18.readyState;
      }
      return Result
   }
   /// function TW3WebSocket.Write(Value: String) : TW3WebSocket
   ///  [line: 369, column: 23, file: SmartCL.Net.WebSocket]
   ,Write$13:function(Self, Value$5) {
      return TW3WebSocket.Write$12(Self,Value$5,null);
   }
   /// function TW3WebSocket.Write(Value: String; CB: TStdCallback) : TW3WebSocket
   ///  [line: 374, column: 23, file: SmartCL.Net.WebSocket]
   ,Write$12:function(Self, Value$5, CB) {
      var Result = null;
      TW3ErrorObject.ClearLastError$1(Self);
      if (TW3WebSocket.Connected(Self)) {
         try {
            Self.FHandle$18.send(Value$5);
         } catch ($e) {
            var e$1 = $W($e);
            TW3ErrorObject.SetLastErrorF$1(Self,$R[17],[TObject.ClassName(e$1.ClassType), e$1.FMessage]);
            if (CB) {
               CB(false);
            }
         }
         if (CB) {
            CB(true);
         }
      } else {
         TW3ErrorObject.SetLastError$1(Self,$R[16]);
      }
      Result = Self;
      return Result
   }
   ,Destroy$:function($){return $.ClassType.Destroy($)}
   ,Create$71$:function($){return $.ClassType.Create$71($)}
};
TW3WebSocket.$Intf={
   IW3ErrorAccess:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
   ,IW3ErrorObject:[TW3ErrorObject.GetFailed$1,TW3ErrorObject.SetLastErrorF$1,TW3ErrorObject.SetLastError$1,TW3ErrorObject.GetLastError$1,TW3ErrorObject.ClearLastError$1]
}
/// TW3RegEx = class (TObject)
///  [line: 31, column: 3, file: System.RegEx]
var TW3RegEx = {
   $ClassName:"TW3RegEx",$Parent:TObject
   ,$Init:function ($) {
      TObject.$Init($);
      $.FRegEx = null;
   }
   /// constructor TW3RegEx.Create(regularExpression: String; flags: String = '')
   ///  [line: 82, column: 22, file: System.RegEx]
   ,Create$163:function(Self, regularExpression, flags) {
      if (flags == "") {
         Self.FRegEx = new RegExp(regularExpression);
      } else {
         Self.FRegEx = new RegExp(regularExpression,flags);
      }
      return Self
   }
   /// function TW3RegEx.Match(s: String; var idx: Integer; regularExpression: String; flags: String = '') : TStrArray
   ///  [line: 136, column: 25, file: System.RegEx]
   ,Match$3:function(Self, s$1, idx, regularExpression, flags) {
      var Result = [];
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Match$1(re,s$1,idx);
      return Result
   }
   /// function TW3RegEx.Match(s: String; regularExpression: String; flags: String = '') : TStrArray
   ///  [line: 128, column: 25, file: System.RegEx]
   ,Match$2:function(Self, s$1, regularExpression, flags) {
      var Result = [];
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Match(re,s$1);
      return Result
   }
   /// function TW3RegEx.Match(s: String; var idx: Integer) : TStrArray
   ///  [line: 114, column: 19, file: System.RegEx]
   ,Match$1:function(Self, s$1, idx) {
      var Result = [];
      var jIdx = undefined;
      Result = (s$1).match(Self.FRegEx);
    if (Result!==null) jIdx = (Result).index;
    if (Result===null) Result = [];
      if (jIdx == null) {
         idx.v = -1;
      } else {
         idx.v = $VarToInt(jIdx,"");
      }
      return Result
   }
   /// function TW3RegEx.Match(s: String) : TStrArray
   ///  [line: 105, column: 19, file: System.RegEx]
   ,Match:function(Self, s$1) {
      var Result = [];
      Result = (s$1).match(Self.FRegEx);
    if (Result===null) Result=[];
      return Result
   }
   /// function TW3RegEx.Replace(s: String; replace: String; regularExpression: String; flags: String = '') : String
   ///  [line: 152, column: 25, file: System.RegEx]
   ,Replace$2:function(Self, s$1, replace$7, regularExpression, flags) {
      var Result = "";
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Replace$1(re,s$1,replace$7);
      return Result
   }
   /// function TW3RegEx.Replace(s: String; replace: String) : String
   ///  [line: 145, column: 19, file: System.RegEx]
   ,Replace$1:function(Self, s$1, replace$7) {
      var Result = "";
      Result = (s$1).replace(Self.FRegEx, replace$7);
      return Result
   }
   /// function TW3RegEx.Search(s: String; regularExpression: String; flags: String = '') : Integer
   ///  [line: 167, column: 25, file: System.RegEx]
   ,Search$2:function(Self, s$1, regularExpression, flags) {
      var Result = 0;
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Search$1(re,s$1);
      return Result
   }
   /// function TW3RegEx.Search(s: String) : Integer
   ///  [line: 160, column: 19, file: System.RegEx]
   ,Search$1:function(Self, s$1) {
      var Result = 0;
      Result = (s$1).search(Self.FRegEx);
      return Result
   }
   /// function TW3RegEx.Split(s: String; limit: Integer; regularExpression: String; flags: String = '') : TStrArray
   ///  [line: 197, column: 25, file: System.RegEx]
   ,Split$3:function(Self, s$1, limit, regularExpression, flags) {
      var Result = [];
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Split$1(re,s$1,limit);
      return Result
   }
   /// function TW3RegEx.Split(s: String; regularExpression: String; flags: String = '') : TStrArray
   ///  [line: 189, column: 25, file: System.RegEx]
   ,Split$2:function(Self, s$1, regularExpression, flags) {
      var Result = [];
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Split(re,s$1);
      return Result
   }
   /// function TW3RegEx.Split(s: String; limit: Integer) : TStrArray
   ///  [line: 182, column: 19, file: System.RegEx]
   ,Split$1:function(Self, s$1, limit) {
      var Result = [];
      Result = (s$1).split(Self.FRegEx, limit);
      return Result
   }
   /// function TW3RegEx.Split(s: String) : TStrArray
   ///  [line: 175, column: 19, file: System.RegEx]
   ,Split:function(Self, s$1) {
      var Result = [];
      Result = (s$1).split(Self.FRegEx);
      return Result
   }
   /// function TW3RegEx.Test(s: String; regularExpression: String; flags: String = '') : Boolean
   ///  [line: 211, column: 25, file: System.RegEx]
   ,Test$1:function(Self, s$1, regularExpression, flags) {
      var Result = false;
      var re = null;
      re = TW3RegEx.Create$163($New(TW3RegEx),regularExpression,flags);
      Result = TW3RegEx.Test(re,s$1);
      return Result
   }
   /// function TW3RegEx.Test(s: String) : Boolean
   ///  [line: 206, column: 19, file: System.RegEx]
   ,Test:function(Self, s$1) {
      return Self.FRegEx.test(s$1);
   }
   ,Destroy:TObject.Destroy
};
var __CSUniqueId = 0,
   __UNIQUE = 0,
   a$7 = 0,
   a$10 = 0,
   a$9 = 0,
   a$8 = 0,
   a$11 = 0,
   a$12 = 0,
   a$43 = null,
   a$42 = false,
   CRC_Table_Ready = false,
   CRC_Table = function () {
      for (var r=[],i=0; i<513; i++) r.push(0);
      return r
   }(),
   FParamsLUT = undefined,
   __ByteToHexLUT = function () {
      for (var r=[],i=0; i<256; i++) r.push("");
      return r
   }(),
   __HexToByteLUT,
   __StrByteLUT,
   FGlobalSheet = null,
   __LabelStyles = null,
   vCurrent = null,
   WaitForDelay = 30,
   FFocused = null,
   FLUT = null,
   FOLUT = null,
   FIntfBuildTable = null,
   RegisterComponentsProc = null,
   DefaultDuration = 2,
   DefaultTiming = 6,
   EventManager = null,
   Instance = null,
   vScheduledControls = [],
   vScheduledCallbacks = [],
   vOnPerform = [],
   vPending = false,
   CSSTransform$1 = "",
   NodeInfo = {NodeID:[0,0]},
   W3Storage = null,
   NULL_NODE_ID = [0,0],
   NULL_EVENT_ID = [0,0,0,0,0,0,0,0],
   EVENT_EMERGENCY_STOP = [0,0,0,0,0,0,0,0],
   EVENT_NEW_LOG_ENTRY = [0,0,0,0,0,0,0,0],
   EVENT_IDENT_BUTTON_PRESSED = [0,0,0,0,0,0,0,0],
   EVENT_DUPLICATE_ID_DETECTED = [0,0,0,0,0,0,0,0],
   EVENT_IS_TRAIN = [0,0,0,0,0,0,0,0],
   EVENT_DELIVERS_CLOCK = [0,0,0,0,0,0,0,0],
   Max_Allowed_Buffers = 0,
   InprocessMessageAllocated = 0,
   ActionObjectsAllocated = 0,
   Application$1 = null,
   InternalControllerManager = null;
var InternalControllerManager = null;
var CaptureTime = 0,
   FBinaryData = null,
   FOneByteArray = [],
   NullConfig = null,
   Logger = "",
   LayoutCount = 0;
var NullConfig = TObject.Create($New(TLayoutConfigImpl));
var __Parser = null,
   _TypeLUT = undefined,
   _NameLUT = undefined,
   CNT_PAUSE_RUNNING = ["",""];
var CNT_PAUSE_RUNNING = ["paused", "running"];
var GAnimationManager = null,
   _BatchLoadImages = [],
   GForms = null,
   vRequestAnimFrame = null,
   vCancelAnimFrame = null,
   Sheet$1 = null,
   StyleCode = "",
   FlexWrapLUT = ["",""],
   FlexDirectionLUT = ["",""],
   AlignItemsLUT = ["","","","","",""],
   AlignContentLUT = ["","","","","",""];
var FlexWrapLUT = ["nowrap", "wrap"];
var FlexDirectionLUT = ["row", "column"];
var AlignItemsLUT = ["initial", "stretch", "center", "flex-start", "flex-end", "baseline"];
var AlignContentLUT = ["initial", "flex-start", "center", "flex-end", "space-between", "space-around"];
var BackgroundNameLUT = null,
   BorderNameLUT = null,
   _BGTypeToName = ["","","","","","","","","","","","","","","","","","",""],
   _BackgroundTypeName = ["","","","","","","","","","","","","","","","","","",""],
   _BRTypeToName = function () {
      for (var r=[],i=0; i<20; i++) r.push("");
      return r
   }(),
   _BorderTypeName = function () {
      for (var r=[],i=0; i<20; i++) r.push("");
      return r
   }();
var _BGTypeToName = ["", "TW3DisplayBackground", "TW3ControlBackground", "TW3ContainerBackground", "TW3ListBackground", "TW3ListItemBackground", "TW3DecorativeListItemBackground", "TW3ListItemSelectedBackground", "TW3EditBackground", "TW3ButtonBackground", "TW3DialogButtonBackground", "TW3DecorativeBackground", "TW3DecorativeBackgroundInvert", "TW3DecorativeDarkBackground", "TW3ToolContainerBackground", "TW3ToolButtonBackground", "TW3ToolControlBackground", "TW3TransparentBackground", "TW3ErrorBackground"];
var _BackgroundTypeName = ["bsNone", "bsDisplayBackground", "bsControlBackground", "bsContainerBackground", "bsListBackground", "bsListItemBackground", "bsDecorativeListItemBackground", "bsListItemSelectedBackground", "bsEditBackground", "bsButtonBackground", "bsDialogButtonBackground", "bsDecorativeBackground", "bsDecorativeInvertBackground", "bsDecorativeDarkBackground", "bsToolContainerBackground", "bsToolButtonBackground", "bsToolControlBackground", "bsTransparentBackground", "bsErrorBackground"];
var _BRTypeToName = ["", "TW3FlatBorder", "TW3ControlBorder", "TW3ContainerBorder", "TW3ButtonBorder", "TW3DialogButtonBorder", "TW3DecorativeBorder", "TW3EditBorder", "TW3ListBorder", "TW3ToolContainerBorder", "TW3ToolButtonBorder", "TW3ToolControlBorder", "TW3ToolControlFlatBorder", "TW3ListMenuBorder", "TW3LightBorderTop", "TW3LightBorderBottom", "TW3LightBorderLeft", "TW3LightBorderRight", "TW3LightBorderHoriz", "TW3LightBorderVert"];
var _BorderTypeName = ["btNone", "btFlatBorder", "btControlBorder", "btContainerBorder", "btButtonBorder", "btDialogButtonBorder", "btDecorativeBorder", "btEditBorder", "btListBorder", "btToolContainerBorder", "btToolButtonBorder", "btToolControlBorder", "btToolControlFlatBorder", "btListMenuBorder", "btLightBorderTop", "btLightBorderBottom", "btLightBorderLeft", "btLightBorderRight", "btLightBorderHoriz", "btLightBorderVert"];
var cYesNoLUT = ["",""],
   cW3AnimationTiming = ["","","","","","",""];
var cYesNoLUT = ["no", "yes"];
var cW3AnimationTiming = ["inherit", "initial", "ease", "ease-in", "ease-out", "ease-in-out", "linear"];
var _Selection_Mode_LUT = undefined,
   _Selection_Mode_Names = ["","","","",""];
var _Selection_Mode_Names = ["none", "auto", "text", "all", "element"];
var _EdgeNameLUT = ["","","",""],
   _StyleNameLUT = ["","","","","","",""];
var _EdgeNameLUT = ["left", "top", "right", "bottom"];
var _StyleNameLUT = ["none", "solid", "dotted", "double", "groove", "inset", "outset"];
var _FontDetect = null,
   __StyleEnterLUT = ["","","",""],
   __StyleExitLUT = ["","","",""];
var __StyleEnterLUT = ["<b>", "<i>", "<u>", "<strike>"];
var __StyleExitLUT = ["<\/b>", "<\/i>", "<\/u>", "<\/strike>"];
var __RESERVED = [];
var __RESERVED = ["$ClassName", "$Parent", "$Init", "toString", "toLocaleString", "valueOf", "indexOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor", "destructor"];
var __CURSOR_NAME_LUT,
   __CURSOR_DATA_LUT,
   vVendor = 0,
   vDriver = null;
var __CURSOR_NAME_LUT = TVariant.CreateObject();
var __CURSOR_DATA_LUT = TVariant.CreateObject();
var __CONV_BUFFER = null,
   __CONV_VIEW = null,
   __CONV_ARRAY = null,
   __SIZES = [0,0,0,0,0,0,0,0,0,0,0],
   _NAMES = ["","","","","","","","","","",""],
   __B64_Lookup = function () {
      for (var r=[],i=0; i<257; i++) r.push("");
      return r
   }(),
   __B64_RevLookup = function () {
      for (var r=[],i=0; i<257; i++) r.push(0);
      return r
   }(),
   CNT_B64_CHARSET = "";
var __SIZES = [0, 1, 1, 2, 2, 4, 2, 4, 4, 8, 8];
var _NAMES = ["Unknown", "Boolean", "Byte", "Char", "Word", "Longword", "Smallint", "Integer", "Single", "Double", "String"];
var CNT_B64_CHARSET = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/";
var __UniqueNumber = 0,
   __TYPE_MAP = {Boolean:undefined,Number$1:undefined,String$1:undefined,Object$2:undefined,Undefined:undefined,Function$1:undefined},
   pre_binary = [0,0],
   pre_OnOff = ["",""],
   pre_YesNo = ["",""],
   pre_StartStop = ["",""],
   pre_RunPause = ["",""];
var pre_binary = [0, 1];
var pre_OnOff = ["off", "on"];
var pre_YesNo = ["no", "yes"];
var pre_StartStop = ["stop", "start"];
var pre_RunPause = ["paused", "running"];
SetupConversionLUT();
SetupBase64();
SetupTypeLUT();
var __ByteToHexLUT = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"];
var __HexToByteLUT = JSON.parse("{\"00\":0,\"01\":1,\"02\":2,\"03\":3,\"04\":4,\"05\":5,\"06\":6,\"07\":7,\"08\":8,\"09\":9,\r\n\"0a\":10,\"0b\":11,\"0c\":12,\"0d\":13,\"0e\":14,\"0f\":15,\"10\":16,\"11\":17,\"12\":18,\r\n\"13\":19,\"14\":20,\"15\":21,\"16\":22,\"17\":23,\"18\":24,\"19\":25,\"1a\":26,\"1b\":27,\r\n\"1c\":28,\"1d\":29,\"1e\":30,\"1f\":31,\"20\":32,\"21\":33,\"22\":34,\"23\":35,\"24\":36,\r\n\"25\":37,\"26\":38,\"27\":39,\"28\":40,\"29\":41,\"2a\":42,\"2b\":43,\"2c\":44,\"2d\":45,\r\n\"2e\":46,\"2f\":47,\"30\":48,\"31\":49,\"32\":50,\"33\":51,\"34\":52,\"35\":53,\"36\":54,\r\n\"37\":55,\"38\":56,\"39\":57,\"3a\":58,\"3b\":59,\"3c\":60,\"3d\":61,\"3e\":62,\"3f\":63,\r\n\"40\":64,\"41\":65,\"42\":66,\"43\":67,\"44\":68,\"45\":69,\"46\":70,\"47\":71,\"48\":72,\r\n\"49\":73,\"4a\":74,\"4b\":75,\"4c\":76,\"4d\":77,\"4e\":78,\"4f\":79,\"50\":80,\"51\":81,\r\n\"52\":82,\"53\":83,\"54\":84,\"55\":85,\"56\":86,\"57\":87,\"58\":88,\"59\":89,\"5a\":90,\r\n\"5b\":91,\"5c\":92,\"5d\":93,\"5e\":94,\"5f\":95,\"60\":96,\"61\":97,\"62\":98,\"63\":99,\r\n\"64\":100,\"65\":101,\"66\":102,\"67\":103,\"68\":104,\"69\":105,\"6a\":106,\"6b\":107,\r\n\"6c\":108,\"6d\":109,\"6e\":110,\"6f\":111,\"70\":112,\"71\":113,\"72\":114,\"73\":115,\r\n\"74\":116,\"75\":117,\"76\":118,\"77\":119,\"78\":120,\"79\":121,\"7a\":122,\"7b\":123,\r\n\"7c\":124,\"7d\":125,\"7e\":126,\"7f\":127,\"80\":128,\"81\":129,\"82\":130,\"83\":131,\r\n\"84\":132,\"85\":133,\"86\":134,\"87\":135,\"88\":136,\"89\":137,\"8a\":138,\"8b\":139,\r\n\"8c\":140,\"8d\":141,\"8e\":142,\"8f\":143,\"90\":144,\"91\":145,\"92\":146,\"93\":147,\r\n\"94\":148,\"95\":149,\"96\":150,\"97\":151,\"98\":152,\"99\":153,\"9a\":154,\"9b\":155,\r\n\"9c\":156,\"9d\":157,\"9e\":158,\"9f\":159,\"a0\":160,\"a1\":161,\"a2\":162,\"a3\":163,\r\n\"a4\":164,\"a5\":165,\"a6\":166,\"a7\":167,\"a8\":168,\"a9\":169,\"aa\":170,\"ab\":171,\r\n\"ac\":172,\"ad\":173,\"ae\":174,\"af\":175,\"b0\":176,\"b1\":177,\"b2\":178,\"b3\":179,\r\n\"b4\":180,\"b5\":181,\"b6\":182,\"b7\":183,\"b8\":184,\"b9\":185,\"ba\":186,\"bb\":187,\r\n\"bc\":188,\"bd\":189,\"be\":190,\"bf\":191,\"c0\":192,\"c1\":193,\"c2\":194,\"c3\":195,\r\n\"c4\":196,\"c5\":197,\"c6\":198,\"c7\":199,\"c8\":200,\"c9\":201,\"ca\":202,\"cb\":203,\r\n\"cc\":204,\"cd\":205,\"ce\":206,\"cf\":207,\"d0\":208,\"d1\":209,\"d2\":210,\"d3\":211,\r\n\"d4\":212,\"d5\":213,\"d6\":214,\"d7\":215,\"d8\":216,\"d9\":217,\"da\":218,\"db\":219,\r\n\"dc\":220,\"dd\":221,\"de\":222,\"df\":223,\"e0\":224,\"e1\":225,\"e2\":226,\"e3\":227,\r\n\"e4\":228,\"e5\":229,\"e6\":230,\"e7\":231,\"e8\":232,\"e9\":233,\"ea\":234,\"eb\":235,\r\n\"ec\":236,\"ed\":237,\"ee\":238,\"ef\":239,\"f0\":240,\"f1\":241,\"f2\":242,\"f3\":243,\r\n\"f4\":244,\"f5\":245,\"f6\":246,\"f7\":247,\"f8\":248,\"f9\":249,\"fa\":250,\"fb\":251,\r\n\"fc\":252,\"fd\":253,\"fe\":254,\"ff\":255}");
var __StrByteLUT = JSON.parse("{\"0\":0,\"1\":1,\"2\":2,\"3\":3,\"4\":4,\"5\":5,\"6\":6,\"7\":7,\"8\":8,\"9\":9,\"10\":10,\"11\":11,\r\n\"12\":12,\"13\":13,\"14\":14,\"15\":15,\"16\":16,\"17\":17,\"18\":18,\"19\":19,\"20\":20,\r\n\"21\":21,\"22\":22,\"23\":23,\"24\":24,\"25\":25,\"26\":26,\"27\":27,\"28\":28,\"29\":29,\r\n\"30\":30,\"31\":31,\"32\":32,\"33\":33,\"34\":34,\"35\":35,\"36\":36,\"37\":37,\"38\":38,\r\n\"39\":39,\"40\":40,\"41\":41,\"42\":42,\"43\":43,\"44\":44,\"45\":45,\"46\":46,\"47\":47,\r\n\"48\":48,\"49\":49,\"50\":50,\"51\":51,\"52\":52,\"53\":53,\"54\":54,\"55\":55,\"56\":56,\r\n\"57\":57,\"58\":58,\"59\":59,\"60\":60,\"61\":61,\"62\":62,\"63\":63,\"64\":64,\"65\":65,\r\n\"66\":66,\"67\":67,\"68\":68,\"69\":69,\"70\":70,\"71\":71,\"72\":72,\"73\":73,\"74\":74,\r\n\"75\":75,\"76\":76,\"77\":77,\"78\":78,\"79\":79,\"80\":80,\"81\":81,\"82\":82,\"83\":83,\r\n\"84\":84,\"85\":85,\"86\":86,\"87\":87,\"88\":88,\"89\":89,\"90\":90,\"91\":91,\"92\":92,\r\n\"93\":93,\"94\":94,\"95\":95,\"96\":96,\"97\":97,\"98\":98,\"99\":99,\"100\":100,\"101\":101,\r\n\"102\":102,\"103\":103,\"104\":104,\"105\":105,\"106\":106,\"107\":107,\"108\":108,\r\n\"109\":109,\"110\":110,\"111\":111,\"112\":112,\"113\":113,\"114\":114,\"115\":115,\r\n\"116\":116,\"117\":117,\"118\":118,\"119\":119,\"120\":120,\"121\":121,\"122\":122,\r\n\"123\":123,\"124\":124,\"125\":125,\"126\":126,\"127\":127,\"128\":128,\"129\":129,\r\n\"130\":130,\"131\":131,\"132\":132,\"133\":133,\"134\":134,\"135\":135,\"136\":136,\r\n\"137\":137,\"138\":138,\"139\":139,\"140\":140,\"141\":141,\"142\":142,\"143\":143,\r\n\"144\":144,\"145\":145,\"146\":146,\"147\":147,\"148\":148,\"149\":149,\"150\":150,\r\n\"151\":151,\"152\":152,\"153\":153,\"154\":154,\"155\":155,\"156\":156,\"157\":157,\r\n\"158\":158,\"159\":159,\"160\":160,\"161\":161,\"162\":162,\"163\":163,\"164\":164,\r\n\"165\":165,\"166\":166,\"167\":167,\"168\":168,\"169\":169,\"170\":170,\"171\":171,\r\n\"172\":172,\"173\":173,\"174\":174,\"175\":175,\"176\":176,\"177\":177,\"178\":178,\r\n\"179\":179,\"180\":180,\"181\":181,\"182\":182,\"183\":183,\"184\":184,\"185\":185,\r\n\"186\":186,\"187\":187,\"188\":188,\"189\":189,\"190\":190,\"191\":191,\"192\":192,\r\n\"193\":193,\"194\":194,\"195\":195,\"196\":196,\"197\":197,\"198\":198,\"199\":199,\r\n\"200\":200,\"201\":201,\"202\":202,\"203\":203,\"204\":204,\"205\":205,\"206\":206,\r\n\"207\":207,\"208\":208,\"209\":209,\"210\":210,\"211\":211,\"212\":212,\"213\":213,\r\n\"214\":214,\"215\":215,\"216\":216,\"217\":217,\"218\":218,\"219\":219,\"220\":220,\r\n\"221\":221,\"222\":222,\"223\":223,\"224\":224,\"225\":225,\"226\":226,\"227\":227,\r\n\"228\":228,\"229\":229,\"230\":230,\"231\":231,\"232\":232,\"233\":233,\"234\":234,\r\n\"235\":235,\"236\":236,\"237\":237,\"238\":238,\"239\":239,\"240\":240,\"241\":241,\r\n\"242\":242,\"243\":243,\"244\":244,\"245\":245,\"246\":246,\"247\":247,\"248\":248,\r\n\"249\":249,\"250\":250,\"251\":251,\"252\":252,\"253\":253,\"254\":254,\"255\":255}");
var _Selection_Mode_LUT = TVariant.CreateObject();
_Selection_Mode_LUT["none"] = 0;
_Selection_Mode_LUT["auto"] = 1;
_Selection_Mode_LUT["text"] = 2;
_Selection_Mode_LUT["all"] = 3;
_Selection_Mode_LUT["element"] = 4;
SetupMouseCursorTable();
SetupTextBehaviorStyles();
SetupThemeLookupTables();
var Sheet$1 = TW3StyleSheet.GlobalStyleSheet(TW3StyleSheet);
var StyleCode = ".TW3ToolButtonTable {\r\n  padding: 0px;\r\n  border: 0px;\r\n  margin: 0px;\r\n}";
TW3StyleSheet.Append$2(Sheet$1,StyleCode);
TW3StyleSheet.Append$2(TW3StyleSheet.GlobalStyleSheet(TW3StyleSheet),"\r\n.TW3NoAnimation {\r\n  -webkit-animation: none !important;\r\n  -moz-animation: none !important;\r\n  -ms-animation: none !important;\r\n  -o-animation: none !important;\r\n}\r\n\r\n\/* =============================================\r\n * Page Animation: BACKSCROLL\r\n * ============================================= *\/\r\n\r\n@-webkit-keyframes BACKSCROLL {\r\n  0%   { -webkit-transform: translateZ(0);\r\n\t       background-position: 0% 0%;       }\r\n  100% { background-position: -557px 0%;\r\n         -webkit-transform: translateZ(0); }\r\n}\r\n\r\n@-moz-keyframes BACKSCROLL {\r\n  0%   { -webkit-transform: translateZ(0);\r\n\t       background-position: 0% 0%;       }\r\n  100% { background-position: -557px 0%;\r\n\t       -webkit-transform: translateZ(0); }\r\n}\r\n\r\n@-ms-keyframes BACKSCROLL {\r\n  0%   { -ms-transform: translateZ(0);\r\n\t       background-position: 0% 0%;       }\r\n  100% { background-position: -557px 0%;\r\n\t       -ms-transform: translateZ(0); }\r\n}\r\n\r\n@keyframes BACKSCROLL {\r\n  0%   { transform: translateZ(0);\r\n\t       background-position: 0% 0%;       }\r\n  100% { background-position: -557px 0%;\r\n\t       transform: translateZ(0); }\r\n}\r\n\r\n\/* =============================================\r\n * Page Animation: MOVE-LEFT\r\n * ============================================= *\/\r\n\r\n@-webkit-keyframes MOVE-LEFT {\r\n\t0%   { -webkit-transform: translateX(100%); }\r\n\t100% { -webkit-transform: translateX(0);    }\r\n}\r\n\r\n@-webkit-keyframes MOVE-OUT-LEFT {\r\n\t0%   { -webkit-transform: translateX(0%); }\r\n\t100% { -webkit-transform: translateX(-100%); }\r\n}\r\n\r\n@-moz-keyframes MOVE-LEFT {\r\n\t0%   { -moz-transform: translateX(100%); }\r\n\t100% { -moz-transform: translateX(0);    }\r\n}\r\n\r\n@-moz-keyframes MOVE-OUT-LEFT {\r\n\t0%   { -moz-transform: translateX(0%);    }\r\n\t100% { -moz-transform: translateX(-100%); }\r\n}\r\n\r\n@-ms-keyframes MOVE-LEFT {\r\n\t0%   { -ms-transform: translateX(100%); }\r\n\t100% { -ms-transform: translateX(0);    }\r\n}\r\n\r\n@-ms-keyframes MOVE-OUT-LEFT {\r\n\t0%   { -ms-transform: translateX(0%);    }\r\n\t100% { -ms-transform: translateX(-100%); }\r\n}\r\n\r\n@keyframes MOVE-LEFT {\r\n\t0%   { transform: translateX(100%); }\r\n\t100% { transform: translateX(0);    }\r\n}\r\n\r\n@keyframes MOVE-OUT-LEFT {\r\n\t0%   { transform: translateX(0%);    }\r\n\t100% { transform: translateX(-100%); }\r\n}\r\n\r\n\/* =============================================\r\n * Page Animation: MOVE-RIGHT\r\n * ============================================= *\/\r\n\r\n@-webkit-keyframes MOVE-RIGHT {\r\n\t0%   { -webkit-transform: translateX(-100%); }\r\n\t100% { -webkit-transform: translateX(0%);    }\r\n}\r\n\r\n@-webkit-keyframes MOVE-OUT-RIGHT {\r\n\t0%   { -webkit-transform: translateX(0%);    }\r\n\t100% { -webkit-transform: translateX(100%);  }\r\n}\r\n\r\n@-moz-keyframes MOVE-RIGHT {\r\n\t0%   { -moz-transform: translateX(-100%);  }\r\n\t100% { -moz-transform: translateX(0%);     }\r\n}\r\n\r\n@-moz-keyframes MOVE-OUT-RIGHT {\r\n\t0%   { -moz-transform: translateX(0%);     }\r\n\t100% { -moz-transform: translateX(100%);   }\r\n}\r\n\r\n@-ms-keyframes MOVE-RIGHT {\r\n\t0%   { -ms-transform: translateX(-100%);  }\r\n\t100% { -ms-transform: translateX(0%);     }\r\n}\r\n\r\n@-ms-keyframes MOVE-OUT-RIGHT {\r\n\t0%   { -ms-transform: translateX(0%);     }\r\n\t100% { -ms-transform: translateX(100%);   }\r\n}\r\n\r\n@keyframes MOVE-RIGHT {\r\n\t0%   { transform: translateX(-100%);  }\r\n\t100% { transform: translateX(0%);     }\r\n}\r\n\r\n@keyframes MOVE-OUT-RIGHT {\r\n\t0%   { transform: translateX(0%);     }\r\n\t100% { transform: translateX(100%);   }\r\n}\r\n\r\n\/* =============================================\r\n * Page Animation: ROTATE-FOREVER\r\n * ============================================= *\/\r\n\r\n@-webkit-keyframes ROTATE-FOREVER {\r\n  from { -webkit-transform: none; }\r\n  to   { -webkit-transform: rotate(360deg); }\r\n}\r\n\r\n@-moz-keyframes ROTATE-FOREVER {\r\n  from { -moz-transform: none; }\r\n  to   { -moz-transform: rotate(360deg); }\r\n}\r\n\r\n@-ms-keyframes ROTATE-FOREVER {\r\n  from { -ms-transform: none; }\r\n  to   { -ms-transform: rotate(360deg); }\r\n}\r\n\r\n@keyframes ROTATE-FOREVER {\r\n  from { transform: none; }\r\n  to   { transform: rotate(360deg); }\r\n}\r\n\r\n\/* =============================================\r\n * Control Animation: ROTATE-CLOCKWISE\r\n * ============================================= *\/\r\n\r\n@-webkit-keyframes ROTATE-CLOCKWISE {\r\n  from { -webkit-transform: none; }\r\n  to   { -webkit-transform: rotate(360deg); }\r\n}\r\n\r\n@-moz-keyframes ROTATE-CLOCKWISE {\r\n  from { -moz-transform: none; }\r\n  to   { -moz-transform: rotate(360deg); }\r\n}\r\n\r\n@-ms-keyframes ROTATE-CLOCKWISE {\r\n  from { -ms-transform: none; }\r\n  to   { -ms-transform: rotate(360deg); }\r\n}\r\n\r\n@keyframes ROTATE-CLOCKWISE {\r\n  from { transform: none; }\r\n  to   { transform: rotate(360deg); }\r\n}\r\n\r\n\/* =============================================\r\n * Control Animation: ROTATE-CLOCKWISE\r\n * ============================================= *\/\r\n\r\n@-webkit-keyframes ROTATE-ANTI-CLOCKWISE {\r\n  from { -webkit-transform: none; }\r\n  to   { -webkit-transform: rotate(-360deg); }\r\n}\r\n\r\n@-moz-keyframes ROTATE-ANTI-CLOCKWISE {\r\n  from { -moz-transform: none; }\r\n  to   { -moz-transform: rotate(-360deg); }\r\n}\r\n\r\n@-ms-keyframes ROTATE-ANTI-CLOCKWISE {\r\n  from { -ms-transform: none; }\r\n  to   { -ms-transform: rotate(-360deg); }\r\n}\r\n\r\n@keyframes ROTATE-ANTI-CLOCKWISE {\r\n  from { transform: none; }\r\n  to   { transform: rotate(-360deg); }\r\n}\r\n");
InitAnimationFrameShim();
var Max_Allowed_Buffers = 1;
NULL_NODE_ID[0] = 0;
NULL_NODE_ID[1] = 0;
NULL_EVENT_ID[0] = 0;
NULL_EVENT_ID[1] = 0;
NULL_EVENT_ID[2] = 0;
NULL_EVENT_ID[3] = 0;
NULL_EVENT_ID[4] = 0;
NULL_EVENT_ID[5] = 0;
NULL_EVENT_ID[6] = 0;
EVENT_EMERGENCY_STOP[0] = 1;
EVENT_EMERGENCY_STOP[1] = 0;
EVENT_EMERGENCY_STOP[2] = 0;
EVENT_EMERGENCY_STOP[3] = 0;
EVENT_EMERGENCY_STOP[4] = 0;
EVENT_EMERGENCY_STOP[5] = 255;
EVENT_EMERGENCY_STOP[6] = 255;
EVENT_NEW_LOG_ENTRY[0] = 1;
EVENT_NEW_LOG_ENTRY[1] = 0;
EVENT_NEW_LOG_ENTRY[2] = 0;
EVENT_NEW_LOG_ENTRY[3] = 0;
EVENT_NEW_LOG_ENTRY[4] = 0;
EVENT_NEW_LOG_ENTRY[5] = 255;
EVENT_NEW_LOG_ENTRY[6] = 248;
EVENT_IDENT_BUTTON_PRESSED[0] = 1;
EVENT_IDENT_BUTTON_PRESSED[1] = 0;
EVENT_IDENT_BUTTON_PRESSED[2] = 0;
EVENT_IDENT_BUTTON_PRESSED[3] = 0;
EVENT_IDENT_BUTTON_PRESSED[4] = 0;
EVENT_IDENT_BUTTON_PRESSED[5] = 254;
EVENT_IDENT_BUTTON_PRESSED[6] = 0;
EVENT_DUPLICATE_ID_DETECTED[0] = 1;
EVENT_DUPLICATE_ID_DETECTED[1] = 16;
EVENT_DUPLICATE_ID_DETECTED[2] = 0;
EVENT_DUPLICATE_ID_DETECTED[3] = 0;
EVENT_DUPLICATE_ID_DETECTED[4] = 0;
EVENT_DUPLICATE_ID_DETECTED[5] = 2;
EVENT_DUPLICATE_ID_DETECTED[6] = 1;
EVENT_IS_TRAIN[0] = 1;
EVENT_IS_TRAIN[1] = 1;
EVENT_IS_TRAIN[2] = 0;
EVENT_IS_TRAIN[3] = 0;
EVENT_IS_TRAIN[4] = 0;
EVENT_IS_TRAIN[5] = 3;
EVENT_IS_TRAIN[6] = 3;
EVENT_DELIVERS_CLOCK[0] = 1;
EVENT_DELIVERS_CLOCK[1] = 1;
EVENT_DELIVERS_CLOCK[2] = 0;
EVENT_DELIVERS_CLOCK[3] = 0;
EVENT_DELIVERS_CLOCK[4] = 0;
EVENT_DELIVERS_CLOCK[5] = 5;
EVENT_DELIVERS_CLOCK[6] = 1;
var FBinaryData = TAllocation.Create$79($New(TBinaryData),1);
var FOneByteArray = TBinaryData.ToBytes(FBinaryData);
var CaptureTime = 0;
var InprocessMessageAllocated = 0,
   ActionObjectsAllocated = 0;
SetupEditTypeLookupTables();
TApplicationFormsList.RegisterForm(Forms$2(),"FormThrottle",TFormThrottle);
TApplicationFormsList.RegisterForm(Forms$2(),"TabMainForm",TTabMainForm);
TApplicationFormsList.RegisterForm(Forms$2(),"TabSettingsForm",TTabSettingsForm);
TApplicationFormsList.RegisterAutoCreate(Forms$2(),"FormThrottle",true,true);
TApplicationFormsList.RegisterAutoCreate(Forms$2(),"TabMainForm",true,false);
TApplicationFormsList.RegisterAutoCreate(Forms$2(),"TabSettingsForm",true,false);
var $Application = function() {
   try {
      Application$1 = TW3CustomApplication.Create$3($New(TApplication));
      TW3CustomApplication.RunApp(Application$1);
   } catch ($e) {
      var e$1 = $W($e);
      alert(e$1.FMessage)   }
}
$Application();
var $Application = function() {
   if (_FontDetect) {
      TObject.Free(_FontDetect);
   }
}
$Application();

